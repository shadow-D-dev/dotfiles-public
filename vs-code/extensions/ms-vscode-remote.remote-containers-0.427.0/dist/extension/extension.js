/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var L9=Object.create;var CC=Object.defineProperty;var A9=Object.getOwnPropertyDescriptor;var F9=Object.getOwnPropertyNames;var O9=Object.getPrototypeOf,U9=Object.prototype.hasOwnProperty;var ne=(t,e)=>()=>(t&&(e=t(t=0)),e);var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),EC=(t,e)=>{for(var n in e)CC(t,n,{get:e[n],enumerable:!0})},OO=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of F9(e))!U9.call(t,o)&&o!==n&&CC(t,o,{get:()=>e[o],enumerable:!(r=A9(e,o))||r.enumerable});return t};var Y=(t,e,n)=>(n=t!=null?L9(O9(t)):{},OO(e||!t||!t.__esModule?CC(n,"default",{value:t,enumerable:!0}):n,t)),$9=t=>OO(CC({},"__esModule",{value:!0}),t);var $r=$((uve,HO)=>{"use strict";var A0=Object.defineProperty,M9=Object.getOwnPropertyDescriptor,H9=Object.getOwnPropertyNames,B9=Object.prototype.hasOwnProperty,W9=(t,e)=>{for(var n in e)A0(t,n,{get:e[n],enumerable:!0})},j9=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of H9(e))!B9.call(t,o)&&o!==n&&A0(t,o,{get:()=>e[o],enumerable:!(r=M9(e,o))||r.enumerable});return t},V9=t=>j9(A0({},"__esModule",{value:!0}),t),$O={};W9($O,{config:()=>K9,t:()=>MO});HO.exports=V9($O);var Y9=require("fs"),q9=require("fs/promises");async function G9(t){if(t.protocol==="file:")return await(0,q9.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let r=`Unexpected ${e.status} response while trying to read ${t}`;try{r+=`: ${await e.text()}`}catch{}throw new Error(r)}return await e.text()}throw new Error("Unsupported protocol")}function z9(t){return(0,Y9.readFileSync)(t,"utf8")}var nf;function K9(t){if("contents"in t){typeof t.contents=="string"?nf=JSON.parse(t.contents):nf=t.contents;return}if("fsPath"in t){let e=z9(t.fsPath),n=JSON.parse(e);nf=UO(n)?n.contents.bundle:n;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((n,r)=>{G9(e).then(o=>{try{let i=JSON.parse(o);nf=UO(i)?i.contents.bundle:i,n()}catch(i){r(i)}}).catch(o=>{r(o)})})}}function MO(...t){let e=t[0],n,r,o;if(typeof e=="string")n=e,r=e,t.splice(0,1),o=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let c=1;c<e.length;c++)a+=`{${c-1}}`+e[c];return MO(a,...s)}else r=e.message,n=r,e.comment&&e.comment.length>0&&(n+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),o=e.args??{};let i=nf==null?void 0:nf[n];return i?typeof i=="string"?SC(i,o):i.comment?SC(i.message,o):SC(r,o):SC(r,o)}var J9=/{([^}]+)}/g;function SC(t,e){return Object.keys(e).length===0?t:t.replace(J9,(n,r)=>e[r]??n)}function UO(t){var e;return typeof((e=t==null?void 0:t.contents)==null?void 0:e.bundle)=="object"&&typeof(t==null?void 0:t.version)=="string"}});var l1=$((Ave,c1)=>{var xm=1e3,_m=xm*60,Dm=_m*60,cf=Dm*24,p7=cf*7,h7=cf*365.25;c1.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return g7(t);if(n==="number"&&isFinite(t))return e.long?w7(t):v7(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function g7(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*h7;case"weeks":case"week":case"w":return n*p7;case"days":case"day":case"d":return n*cf;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Dm;case"minutes":case"minute":case"mins":case"min":case"m":return n*_m;case"seconds":case"second":case"secs":case"sec":case"s":return n*xm;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function v7(t){var e=Math.abs(t);return e>=cf?Math.round(t/cf)+"d":e>=Dm?Math.round(t/Dm)+"h":e>=_m?Math.round(t/_m)+"m":e>=xm?Math.round(t/xm)+"s":t+"ms"}function w7(t){var e=Math.abs(t);return e>=cf?kC(t,e,cf,"day"):e>=Dm?kC(t,e,Dm,"hour"):e>=_m?kC(t,e,_m,"minute"):e>=xm?kC(t,e,xm,"second"):t+" ms"}function kC(t,e,n,r){var o=e>=n*1.5;return Math.round(t/n)+" "+r+(o?"s":"")}});var Y0=$((Fve,u1)=>{function y7(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=l1(),n.destroy=l,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let f=0;for(let m=0;m<u.length;m++)f=(f<<5)-f+u.charCodeAt(m),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=e;function n(u){let f,m=null,d,p;function h(...g){if(!h.enabled)return;let v=h,C=Number(new Date),w=C-(f||C);v.diff=w,v.prev=f,v.curr=C,f=C,g[0]=n.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(I,x)=>{if(I==="%%")return"%";y++;let A=n.formatters[x];if(typeof A=="function"){let F=g[y];I=A.call(v,F),g.splice(y,1),y--}return I}),n.formatArgs.call(v,g),(v.log||n.log).apply(v,g)}return h.namespace=u,h.useColors=n.useColors(),h.color=n.selectColor(u),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(u)),p),set:g=>{m=g}}),typeof n.init=="function"&&n.init(h),h}function r(u,f){let m=n(this.namespace+(typeof f>"u"?":":f)+u);return m.log=this.log,m}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let f=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of f)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function i(u,f){let m=0,d=0,p=-1,h=0;for(;m<u.length;)if(d<f.length&&(f[d]===u[m]||f[d]==="*"))f[d]==="*"?(p=d,h=m,d++):(m++,d++);else if(p!==-1)d=p+1,h++,m=h;else return!1;for(;d<f.length&&f[d]==="*";)d++;return d===f.length}function s(){let u=[...n.names,...n.skips.map(f=>"-"+f)].join(",");return n.enable(""),u}function a(u){for(let f of n.skips)if(i(u,f))return!1;for(let f of n.names)if(i(u,f))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}u1.exports=y7});var f1=$((Io,NC)=>{Io.formatArgs=E7;Io.save=S7;Io.load=x7;Io.useColors=C7;Io.storage=_7();Io.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Io.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function C7(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function E7(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+NC.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),t.splice(r,0,e)}Io.log=console.debug||console.log||(()=>{});function S7(t){try{t?Io.storage.setItem("debug",t):Io.storage.removeItem("debug")}catch{}}function x7(){let t;try{t=Io.storage.getItem("debug")||Io.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function _7(){try{return localStorage}catch{}}NC.exports=Y0()(Io);var{formatters:D7}=NC.exports;D7.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var m1=$((Ove,d1)=>{"use strict";d1.exports=(t,e)=>{e=e||process.argv;let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return r!==-1&&(o===-1?!0:r<o)}});var h1=$((Uve,p1)=>{"use strict";var I7=require("os"),is=m1(),Mr=process.env,Im;is("no-color")||is("no-colors")||is("color=false")?Im=!1:(is("color")||is("colors")||is("color=true")||is("color=always"))&&(Im=!0);"FORCE_COLOR"in Mr&&(Im=Mr.FORCE_COLOR.length===0||parseInt(Mr.FORCE_COLOR,10)!==0);function P7(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function b7(t){if(Im===!1)return 0;if(is("color=16m")||is("color=full")||is("color=truecolor"))return 3;if(is("color=256"))return 2;if(t&&!t.isTTY&&Im!==!0)return 0;let e=Im?1:0;if(process.platform==="win32"){let n=I7.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Mr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(n=>n in Mr)||Mr.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Mr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Mr.TEAMCITY_VERSION)?1:0;if(Mr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Mr){let n=parseInt((Mr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Mr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Mr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Mr.TERM)||"COLORTERM"in Mr?1:(Mr.TERM==="dumb",e)}function q0(t){let e=b7(t);return P7(e)}p1.exports={supportsColor:q0,stdout:q0(process.stdout),stderr:q0(process.stderr)}});var v1=$((rr,AC)=>{var T7=require("tty"),LC=require("util");rr.init=O7;rr.log=L7;rr.formatArgs=k7;rr.save=A7;rr.load=F7;rr.useColors=R7;rr.destroy=LC.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");rr.colors=[6,2,3,4,5,1];try{let t=h1();t&&(t.stderr||t).level>=2&&(rr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}rr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function R7(){return"colors"in rr.inspectOpts?!!rr.inspectOpts.colors:T7.isatty(process.stderr.fd)}function k7(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),i=`  ${o};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(o+"m+"+AC.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=N7()+e+" "+t[0]}function N7(){return rr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function L7(...t){return process.stderr.write(LC.formatWithOptions(rr.inspectOpts,...t)+`
`)}function A7(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function F7(){return process.env.DEBUG}function O7(t){t.inspectOpts={};let e=Object.keys(rr.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=rr.inspectOpts[e[n]]}AC.exports=Y0()(rr);var{formatters:g1}=AC.exports;g1.o=function(t){return this.inspectOpts.colors=this.useColors,LC.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};g1.O=function(t){return this.inspectOpts.colors=this.useColors,LC.inspect(t,this.inspectOpts)}});var FC=$(($ve,G0)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?G0.exports=f1():G0.exports=v1()});var y1=$((Mve,w1)=>{var kg;w1.exports=function(){if(!kg){try{kg=FC()("follow-redirects")}catch{}typeof kg!="function"&&(kg=function(){})}kg.apply(null,arguments)}});var OC=$((Hve,iP)=>{var Lg=require("url"),Ng=Lg.URL,U7=require("http"),$7=require("https"),Z0=require("stream").Writable,Q0=require("assert"),C1=y1();(function(){var e=typeof process<"u",n=typeof window<"u"&&typeof document<"u",r=uf(Error.captureStackTrace);!e&&(n||!r)&&console.warn("The follow-redirects package should be excluded from browser builds.")})();var eP=!1;try{Q0(new Ng(""))}catch(t){eP=t.code==="ERR_INVALID_URL"}var M7=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],tP=["abort","aborted","connect","error","socket","timeout"],nP=Object.create(null);tP.forEach(function(t){nP[t]=function(e,n,r){this._redirectable.emit(t,e,n,r)}});var K0=Ag("ERR_INVALID_URL","Invalid URL",TypeError),J0=Ag("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),H7=Ag("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",J0),B7=Ag("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),W7=Ag("ERR_STREAM_WRITE_AFTER_END","write after end"),j7=Z0.prototype.destroy||S1;function Po(t,e){Z0.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var n=this;this._onNativeResponse=function(r){try{n._processResponse(r)}catch(o){n.emit("error",o instanceof J0?o:new J0({cause:o}))}},this._performRequest()}Po.prototype=Object.create(Z0.prototype);Po.prototype.abort=function(){oP(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};Po.prototype.destroy=function(t){return oP(this._currentRequest,t),j7.call(this,t),this};Po.prototype.write=function(t,e,n){if(this._ending)throw new W7;if(!lf(t)&&!q7(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(uf(e)&&(n=e,e=null),t.length===0){n&&n();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,n)):(this.emit("error",new B7),this.abort())};Po.prototype.end=function(t,e,n){if(uf(t)?(n=t,t=e=null):uf(e)&&(n=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,o=this._currentRequest;this.write(t,e,function(){r._ended=!0,o.end(null,null,n)}),this._ending=!0}};Po.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Po.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Po.prototype.setTimeout=function(t,e){var n=this;function r(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),i()},t),r(s)}function i(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",i),n.removeListener("error",i),n.removeListener("response",i),n.removeListener("close",i),e&&n.removeListener("timeout",e),n.socket||n._currentRequest.removeListener("socket",o)}return e&&this.on("timeout",e),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",r),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Po.prototype[t]=function(e,n){return this._currentRequest[t](e,n)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Po.prototype,t,{get:function(){return this._currentRequest[t]}})});Po.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Po.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e)throw new TypeError("Unsupported protocol "+t);if(this._options.agents){var n=t.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=e.request(this._options,this._onNativeResponse);r._redirectable=this;for(var o of tP)r.on(o,nP[o]);if(this._currentUrl=/^\//.test(this._options.path)?Lg.format(this._options):this._options.path,this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(l){if(r===s._currentRequest)if(l)s.emit("error",l);else if(i<a.length){var u=a[i++];r.finished||r.write(u.data,u.encoding,c)}else s._ended&&r.end()})()}};Po.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var n=t.headers.location;if(!n||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(oP(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)throw new H7;var r,o=this._options.beforeRedirect;o&&(r=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var i=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],z0(/^content-/i,this._options.headers));var s=z0(/^host$/i,this._options.headers),a=rP(this._currentUrl),c=s||a.host,l=/^\w+:/.test(n)?this._currentUrl:Lg.format(Object.assign(a,{host:c})),u=V7(n,l);if(C1("redirecting to",u.href),this._isRedirect=!0,X0(u,this._options),(u.protocol!==a.protocol&&u.protocol!=="https:"||u.host!==c&&!Y7(u.host,c))&&z0(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),uf(o)){var f={headers:t.headers,statusCode:e},m={url:l,method:i,headers:r};o(this._options,f,m),this._sanitizeOptions(this._options)}this._performRequest()};function E1(t){var e={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(t).forEach(function(r){var o=r+":",i=n[o]=t[r],s=e[r]=Object.create(i);function a(l,u,f){return G7(l)?l=X0(l):lf(l)?l=X0(rP(l)):(f=u,u=x1(l),l={protocol:o}),uf(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=n,!lf(u.host)&&!lf(u.hostname)&&(u.hostname="::1"),Q0.equal(u.protocol,o,"protocol mismatch"),C1("options",u),new Po(u,f)}function c(l,u,f){var m=s.request(l,u,f);return m.end(),m}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function S1(){}function rP(t){var e;if(eP)e=new Ng(t);else if(e=x1(Lg.parse(t)),!lf(e.protocol))throw new K0({input:t});return e}function V7(t,e){return eP?new Ng(t,e):rP(Lg.resolve(e,t))}function x1(t){if(/^\[/.test(t.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(t.hostname))throw new K0({input:t.href||t});if(/^\[/.test(t.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(t.host))throw new K0({input:t.href||t});return t}function X0(t,e){var n=e||{};for(var r of M7)n[r]=t[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),n.port!==""&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function z0(t,e){var n;for(var r in e)t.test(r)&&(n=e[r],delete e[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function Ag(t,e,n){function r(o){uf(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+t+"]",enumerable:!1}}),r}function oP(t,e){for(var n of tP)t.removeListener(n,nP[n]);t.on("error",S1),t.destroy(e)}function Y7(t,e){Q0(lf(t)&&lf(e));var n=t.length-e.length-1;return n>0&&t[n]==="."&&t.endsWith(e)}function lf(t){return typeof t=="string"||t instanceof String}function uf(t){return typeof t=="function"}function q7(t){return typeof t=="object"&&"length"in t}function G7(t){return Ng&&t instanceof Ng}iP.exports=E1({http:U7,https:$7});iP.exports.wrap=E1});var Pm=$((Bve,D1)=>{"use strict";var _1=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);D1.exports=t=>t?Object.keys(t).map(e=>[_1.has(e)?_1.get(e):e,t[e]]).reduce((e,n)=>(e[n[0]]=n[1],e),Object.create(null)):{}});var jC=$(F1=>{"use strict";var I1=typeof process=="object"&&process?process:{stdout:null,stderr:null},z7=require("events"),P1=require("stream"),K7=require("string_decoder"),b1=K7.StringDecoder,Va=Symbol("EOF"),Ya=Symbol("maybeEmitEnd"),sl=Symbol("emittedEnd"),UC=Symbol("emittingEnd"),Fg=Symbol("emittedError"),$C=Symbol("closed"),T1=Symbol("read"),MC=Symbol("flush"),R1=Symbol("flushChunk"),bo=Symbol("encoding"),qa=Symbol("decoder"),HC=Symbol("flowing"),Og=Symbol("paused"),bm=Symbol("resume"),Cn=Symbol("buffer"),Ws=Symbol("pipes"),or=Symbol("bufferLength"),sP=Symbol("bufferPush"),aP=Symbol("bufferShift"),Er=Symbol("objectMode"),En=Symbol("destroyed"),cP=Symbol("error"),lP=Symbol("emitData"),k1=Symbol("emitEnd"),uP=Symbol("emitEnd2"),Ga=Symbol("async"),fP=Symbol("abort"),BC=Symbol("aborted"),ff=Symbol("signal"),Ug=t=>Promise.resolve().then(t),A1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",N1=A1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),L1=A1&&Symbol.iterator||Symbol("iterator not implemented"),J7=t=>t==="end"||t==="finish"||t==="prefinish",X7=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Z7=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),WC=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[bm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},dP=class extends WC{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}},mP=class t extends P1{constructor(e){super(),this[HC]=!1,this[Og]=!1,this[Ws]=[],this[Cn]=[],this[Er]=e&&e.objectMode||!1,this[Er]?this[bo]=null:this[bo]=e&&e.encoding||null,this[bo]==="buffer"&&(this[bo]=null),this[Ga]=e&&!!e.async||!1,this[qa]=this[bo]?new b1(this[bo]):null,this[Va]=!1,this[sl]=!1,this[UC]=!1,this[$C]=!1,this[Fg]=null,this.writable=!0,this.readable=!0,this[or]=0,this[En]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Cn]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Ws]}),this[ff]=e&&e.signal,this[BC]=!1,this[ff]&&(this[ff].addEventListener("abort",()=>this[fP]()),this[ff].aborted&&this[fP]())}get bufferLength(){return this[or]}get encoding(){return this[bo]}set encoding(e){if(this[Er])throw new Error("cannot set encoding in objectMode");if(this[bo]&&e!==this[bo]&&(this[qa]&&this[qa].lastNeed||this[or]))throw new Error("cannot change encoding");this[bo]!==e&&(this[qa]=e?new b1(e):null,this[Cn].length&&(this[Cn]=this[Cn].map(n=>this[qa].write(n)))),this[bo]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Er]}set objectMode(e){this[Er]=this[Er]||!!e}get async(){return this[Ga]}set async(e){this[Ga]=this[Ga]||!!e}[fP](){this[BC]=!0,this.emit("abort",this[ff].reason),this.destroy(this[ff].reason)}get aborted(){return this[BC]}set aborted(e){}write(e,n,r){if(this[BC])return!1;if(this[Va])throw new Error("write after end");if(this[En])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[Ga]?Ug:i=>i();return!this[Er]&&!Buffer.isBuffer(e)&&(Z7(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):X7(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Er]?(this.flowing&&this[or]!==0&&this[MC](!0),this.flowing?this.emit("data",e):this[sP](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[bo]&&!this[qa].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[bo]&&(e=this[qa].write(e)),this.flowing&&this[or]!==0&&this[MC](!0),this.flowing?this.emit("data",e):this[sP](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[En])return null;if(this[or]===0||e===0||e>this[or])return this[Ya](),null;this[Er]&&(e=null),this[Cn].length>1&&!this[Er]&&(this.encoding?this[Cn]=[this[Cn].join("")]:this[Cn]=[Buffer.concat(this[Cn],this[or])]);let n=this[T1](e||null,this[Cn][0]);return this[Ya](),n}[T1](e,n){return e===n.length||e===null?this[aP]():(this[Cn][0]=n.slice(e),n=n.slice(0,e),this[or]-=e),this.emit("data",n),!this[Cn].length&&!this[Va]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Va]=!0,this.writable=!1,(this.flowing||!this[Og])&&this[Ya](),this}[bm](){this[En]||(this[Og]=!1,this[HC]=!0,this.emit("resume"),this[Cn].length?this[MC]():this[Va]?this[Ya]():this.emit("drain"))}resume(){return this[bm]()}pause(){this[HC]=!1,this[Og]=!0}get destroyed(){return this[En]}get flowing(){return this[HC]}get paused(){return this[Og]}[sP](e){this[Er]?this[or]+=1:this[or]+=e.length,this[Cn].push(e)}[aP](){return this[Er]?this[or]-=1:this[or]-=this[Cn][0].length,this[Cn].shift()}[MC](e){do;while(this[R1](this[aP]())&&this[Cn].length);!e&&!this[Cn].length&&!this[Va]&&this.emit("drain")}[R1](e){return this.emit("data",e),this.flowing}pipe(e,n){if(this[En])return;let r=this[sl];return n=n||{},e===I1.stdout||e===I1.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[Ws].push(n.proxyErrors?new dP(this,e,n):new WC(this,e,n)),this[Ga]?Ug(()=>this[bm]()):this[bm]()),e}unpipe(e){let n=this[Ws].find(r=>r.dest===e);n&&(this[Ws].splice(this[Ws].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this[Ws].length&&!this.flowing?this[bm]():e==="readable"&&this[or]!==0?super.emit("readable"):J7(e)&&this[sl]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Fg]&&(this[Ga]?Ug(()=>n.call(this,this[Fg])):n.call(this,this[Fg])),r}get emittedEnd(){return this[sl]}[Ya](){!this[UC]&&!this[sl]&&!this[En]&&this[Cn].length===0&&this[Va]&&(this[UC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[$C]&&this.emit("close"),this[UC]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==En&&this[En])return;if(e==="data")return!this[Er]&&!n?!1:this[Ga]?Ug(()=>this[lP](n)):this[lP](n);if(e==="end")return this[k1]();if(e==="close"){if(this[$C]=!0,!this[sl]&&!this[En])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Fg]=n,super.emit(cP,n);let i=!this[ff]||this.listeners("error").length?super.emit("error",n):!1;return this[Ya](),i}else if(e==="resume"){let i=super.emit("resume");return this[Ya](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[Ya](),o}[lP](e){for(let r of this[Ws])r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Ya](),n}[k1](){this[sl]||(this[sl]=!0,this.readable=!1,this[Ga]?Ug(()=>this[uP]()):this[uP]())}[uP](){if(this[qa]){let n=this[qa].end();if(n){for(let r of this[Ws])r.dest.write(n);super.emit("data",n)}}for(let n of this[Ws])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Er]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Er]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this[bo]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(En,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[N1](){let e=!1,n=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return n();let o=this.read();if(o!==null)return Promise.resolve({done:!1,value:o});if(this[Va])return n();let i=null,s=null,a=f=>{this.removeListener("data",c),this.removeListener("end",l),this.removeListener(En,u),n(),s(f)},c=f=>{this.removeListener("error",a),this.removeListener("end",l),this.removeListener(En,u),this.pause(),i({value:f,done:!!this[Va]})},l=()=>{this.removeListener("error",a),this.removeListener("data",c),this.removeListener(En,u),n(),i({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,m)=>{s=m,i=f,this.once(En,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:n,return:n,[N1](){return this}}}[L1](){let e=!1,n=()=>(this.pause(),this.removeListener(cP,n),this.removeListener(En,n),this.removeListener("end",n),e=!0,{done:!0}),r=()=>{if(e)return n();let o=this.read();return o===null?n():{value:o}};return this.once("end",n),this.once(cP,n),this.once(En,n),{next:r,throw:n,return:n,[L1](){return this}}}destroy(e){return this[En]?(e?this.emit("error",e):this.emit(En),this):(this[En]=!0,this[Cn].length=0,this[or]=0,typeof this.close=="function"&&!this[$C]&&this.close(),e?this.emit("error",e):this.emit(En),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof P1||e instanceof z7&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};F1.Minipass=mP});var U1=$((jve,O1)=>{var Q7=require("zlib").constants||{ZLIB_VERNUM:4736};O1.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Q7))});var G1=$((Vve,q1)=>{"use strict";var $1=typeof process=="object"&&process?process:{stdout:null,stderr:null},eJ=require("events"),M1=require("stream"),H1=require("string_decoder").StringDecoder,za=Symbol("EOF"),Ka=Symbol("maybeEmitEnd"),al=Symbol("emittedEnd"),VC=Symbol("emittingEnd"),$g=Symbol("emittedError"),YC=Symbol("closed"),B1=Symbol("read"),qC=Symbol("flush"),W1=Symbol("flushChunk"),To=Symbol("encoding"),Ja=Symbol("decoder"),GC=Symbol("flowing"),Mg=Symbol("paused"),Tm=Symbol("resume"),ir=Symbol("bufferLength"),pP=Symbol("bufferPush"),hP=Symbol("bufferShift"),Hr=Symbol("objectMode"),Br=Symbol("destroyed"),gP=Symbol("emitData"),j1=Symbol("emitEnd"),vP=Symbol("emitEnd2"),Xa=Symbol("async"),Hg=t=>Promise.resolve().then(t),V1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",tJ=V1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),nJ=V1&&Symbol.iterator||Symbol("iterator not implemented"),rJ=t=>t==="end"||t==="finish"||t==="prefinish",oJ=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,iJ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),zC=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Tm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},wP=class extends zC{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};q1.exports=class Y1 extends M1{constructor(e){super(),this[GC]=!1,this[Mg]=!1,this.pipes=[],this.buffer=[],this[Hr]=e&&e.objectMode||!1,this[Hr]?this[To]=null:this[To]=e&&e.encoding||null,this[To]==="buffer"&&(this[To]=null),this[Xa]=e&&!!e.async||!1,this[Ja]=this[To]?new H1(this[To]):null,this[za]=!1,this[al]=!1,this[VC]=!1,this[YC]=!1,this[$g]=null,this.writable=!0,this.readable=!0,this[ir]=0,this[Br]=!1}get bufferLength(){return this[ir]}get encoding(){return this[To]}set encoding(e){if(this[Hr])throw new Error("cannot set encoding in objectMode");if(this[To]&&e!==this[To]&&(this[Ja]&&this[Ja].lastNeed||this[ir]))throw new Error("cannot change encoding");this[To]!==e&&(this[Ja]=e?new H1(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[Ja].write(n)))),this[To]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Hr]}set objectMode(e){this[Hr]=this[Hr]||!!e}get async(){return this[Xa]}set async(e){this[Xa]=this[Xa]||!!e}write(e,n,r){if(this[za])throw new Error("write after end");if(this[Br])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[Xa]?Hg:i=>i();return!this[Hr]&&!Buffer.isBuffer(e)&&(iJ(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):oJ(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Hr]?(this.flowing&&this[ir]!==0&&this[qC](!0),this.flowing?this.emit("data",e):this[pP](e),this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[To]&&!this[Ja].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[To]&&(e=this[Ja].write(e)),this.flowing&&this[ir]!==0&&this[qC](!0),this.flowing?this.emit("data",e):this[pP](e),this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[Br])return null;if(this[ir]===0||e===0||e>this[ir])return this[Ka](),null;this[Hr]&&(e=null),this.buffer.length>1&&!this[Hr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[ir])]);let n=this[B1](e||null,this.buffer[0]);return this[Ka](),n}[B1](e,n){return e===n.length||e===null?this[hP]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[ir]-=e),this.emit("data",n),!this.buffer.length&&!this[za]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[za]=!0,this.writable=!1,(this.flowing||!this[Mg])&&this[Ka](),this}[Tm](){this[Br]||(this[Mg]=!1,this[GC]=!0,this.emit("resume"),this.buffer.length?this[qC]():this[za]?this[Ka]():this.emit("drain"))}resume(){return this[Tm]()}pause(){this[GC]=!1,this[Mg]=!0}get destroyed(){return this[Br]}get flowing(){return this[GC]}get paused(){return this[Mg]}[pP](e){this[Hr]?this[ir]+=1:this[ir]+=e.length,this.buffer.push(e)}[hP](){return this.buffer.length&&(this[Hr]?this[ir]-=1:this[ir]-=this.buffer[0].length),this.buffer.shift()}[qC](e){do;while(this[W1](this[hP]()));!e&&!this.buffer.length&&!this[za]&&this.emit("drain")}[W1](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[Br])return;let r=this[al];return n=n||{},e===$1.stdout||e===$1.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new wP(this,e,n):new zC(this,e,n)),this[Xa]?Hg(()=>this[Tm]()):this[Tm]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[Tm]():e==="readable"&&this[ir]!==0?super.emit("readable"):rJ(e)&&this[al]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[$g]&&(this[Xa]?Hg(()=>n.call(this,this[$g])):n.call(this,this[$g])),r}get emittedEnd(){return this[al]}[Ka](){!this[VC]&&!this[al]&&!this[Br]&&this.buffer.length===0&&this[za]&&(this[VC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[YC]&&this.emit("close"),this[VC]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Br&&this[Br])return;if(e==="data")return n?this[Xa]?Hg(()=>this[gP](n)):this[gP](n):!1;if(e==="end")return this[j1]();if(e==="close"){if(this[YC]=!0,!this[al]&&!this[Br])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[$g]=n;let i=super.emit("error",n);return this[Ka](),i}else if(e==="resume"){let i=super.emit("resume");return this[Ka](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[Ka](),o}[gP](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Ka](),n}[j1](){this[al]||(this[al]=!0,this.readable=!1,this[Xa]?Hg(()=>this[vP]()):this[vP]())}[vP](){if(this[Ja]){let n=this[Ja].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Hr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Hr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Hr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Hr]?Promise.reject(new Error("cannot concat in objectMode")):this[To]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Br,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[tJ](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[za])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[za]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(Br,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[nJ](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[Br]?(e?this.emit("error",e):this.emit(Br),this):(this[Br]=!0,this.buffer.length=0,this[ir]=0,typeof this.close=="function"&&!this[YC]&&this.close(),e?this.emit("error",e):this.emit(Br),this)}static isStream(e){return!!e&&(e instanceof Y1||e instanceof M1||e instanceof eJ&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var AP=$(Zo=>{"use strict";var xP=require("assert"),cl=require("buffer").Buffer,J1=require("zlib"),df=Zo.constants=U1(),sJ=G1(),z1=cl.concat,mf=Symbol("_superWrite"),km=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},aJ=Symbol("opts"),Bg=Symbol("flushFlag"),K1=Symbol("finishFlushFlag"),LP=Symbol("fullFlushFlag"),Tt=Symbol("handle"),KC=Symbol("onError"),Rm=Symbol("sawError"),yP=Symbol("level"),CP=Symbol("strategy"),EP=Symbol("ended"),Yve=Symbol("_defaultFullFlush"),JC=class extends sJ{constructor(e,n){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[Rm]=!1,this[EP]=!1,this[aJ]=e,this[Bg]=e.flush,this[K1]=e.finishFlush;try{this[Tt]=new J1[n](e)}catch(r){throw new km(r)}this[KC]=r=>{this[Rm]||(this[Rm]=!0,this.close(),this.emit("error",r))},this[Tt].on("error",r=>this[KC](new km(r))),this.once("end",()=>this.close)}close(){this[Tt]&&(this[Tt].close(),this[Tt]=null,this.emit("close"))}reset(){if(!this[Rm])return xP(this[Tt],"zlib binding closed"),this[Tt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[LP]),this.write(Object.assign(cl.alloc(0),{[Bg]:e})))}end(e,n,r){return e&&this.write(e,n),this.flush(this[K1]),this[EP]=!0,super.end(null,null,r)}get ended(){return this[EP]}write(e,n,r){if(typeof n=="function"&&(r=n,n="utf8"),typeof e=="string"&&(e=cl.from(e,n)),this[Rm])return;xP(this[Tt],"zlib binding closed");let o=this[Tt]._handle,i=o.close;o.close=()=>{};let s=this[Tt].close;this[Tt].close=()=>{},cl.concat=l=>l;let a;try{let l=typeof e[Bg]=="number"?e[Bg]:this[Bg];a=this[Tt]._processChunk(e,l),cl.concat=z1}catch(l){cl.concat=z1,this[KC](new km(l))}finally{this[Tt]&&(this[Tt]._handle=o,o.close=i,this[Tt].close=s,this[Tt].removeAllListeners("error"))}this[Tt]&&this[Tt].on("error",l=>this[KC](new km(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[mf](cl.from(a[0]));for(let l=1;l<a.length;l++)c=this[mf](a[l])}else c=this[mf](cl.from(a));return r&&r(),c}[mf](e){return super.write(e)}},Za=class extends JC{constructor(e,n){e=e||{},e.flush=e.flush||df.Z_NO_FLUSH,e.finishFlush=e.finishFlush||df.Z_FINISH,super(e,n),this[LP]=df.Z_FULL_FLUSH,this[yP]=e.level,this[CP]=e.strategy}params(e,n){if(!this[Rm]){if(!this[Tt])throw new Error("cannot switch params when binding is closed");if(!this[Tt].params)throw new Error("not supported in this implementation");if(this[yP]!==e||this[CP]!==n){this.flush(df.Z_SYNC_FLUSH),xP(this[Tt],"zlib binding closed");let r=this[Tt].flush;this[Tt].flush=(o,i)=>{this.flush(o),i()};try{this[Tt].params(e,n)}finally{this[Tt].flush=r}this[Tt]&&(this[yP]=e,this[CP]=n)}}}},_P=class extends Za{constructor(e){super(e,"Deflate")}},DP=class extends Za{constructor(e){super(e,"Inflate")}},SP=Symbol("_portable"),IP=class extends Za{constructor(e){super(e,"Gzip"),this[SP]=e&&!!e.portable}[mf](e){return this[SP]?(this[SP]=!1,e[9]=255,super[mf](e)):super[mf](e)}},PP=class extends Za{constructor(e){super(e,"Gunzip")}},bP=class extends Za{constructor(e){super(e,"DeflateRaw")}},TP=class extends Za{constructor(e){super(e,"InflateRaw")}},RP=class extends Za{constructor(e){super(e,"Unzip")}},XC=class extends JC{constructor(e,n){e=e||{},e.flush=e.flush||df.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||df.BROTLI_OPERATION_FINISH,super(e,n),this[LP]=df.BROTLI_OPERATION_FLUSH}},kP=class extends XC{constructor(e){super(e,"BrotliCompress")}},NP=class extends XC{constructor(e){super(e,"BrotliDecompress")}};Zo.Deflate=_P;Zo.Inflate=DP;Zo.Gzip=IP;Zo.Gunzip=PP;Zo.DeflateRaw=bP;Zo.InflateRaw=TP;Zo.Unzip=RP;typeof J1.BrotliCompress=="function"?(Zo.BrotliCompress=kP,Zo.BrotliDecompress=NP):Zo.BrotliCompress=Zo.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Nm=$((zve,X1)=>{var cJ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;X1.exports=cJ!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var ZC=$((Jve,Z1)=>{"use strict";var{Minipass:lJ}=jC(),FP=Nm(),OP=Symbol("slurp");Z1.exports=class extends lJ{constructor(e,n,r){switch(super(),this.pause(),this.extended=n,this.globalExtended=r,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=FP(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=FP(e.linkpath),this.uname=e.uname,this.gname=e.gname,n&&this[OP](n),r&&this[OP](r,!0)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");let r=this.remain,o=this.blockRemain;return this.remain=Math.max(0,r-n),this.blockRemain=Math.max(0,o-n),this.ignore?!0:r>=n?super.write(e):super.write(e.slice(0,r))}[OP](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=r==="path"||r==="linkpath"?FP(e[r]):e[r])}}});var UP=$(QC=>{"use strict";QC.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);QC.code=new Map(Array.from(QC.name).map(t=>[t[1],t[0]]))});var nU=$((Zve,tU)=>{"use strict";var uJ=(t,e)=>{if(Number.isSafeInteger(t))t<0?dJ(t,e):fJ(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},fJ=(t,e)=>{e[0]=128;for(var n=e.length;n>1;n--)e[n-1]=t&255,t=Math.floor(t/256)},dJ=(t,e)=>{e[0]=255;var n=!1;t=t*-1;for(var r=e.length;r>1;r--){var o=t&255;t=Math.floor(t/256),n?e[r-1]=Q1(o):o===0?e[r-1]=0:(n=!0,e[r-1]=eU(o))}},mJ=t=>{let e=t[0],n=e===128?hJ(t.slice(1,t.length)):e===255?pJ(t):null;if(n===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(n))throw Error("parsed number outside of javascript safe integer range");return n},pJ=t=>{for(var e=t.length,n=0,r=!1,o=e-1;o>-1;o--){var i=t[o],s;r?s=Q1(i):i===0?s=i:(r=!0,s=eU(i)),s!==0&&(n-=s*Math.pow(256,e-o-1))}return n},hJ=t=>{for(var e=t.length,n=0,r=e-1;r>-1;r--){var o=t[r];o!==0&&(n+=o*Math.pow(256,e-r-1))}return n},Q1=t=>(255^t)&255,eU=t=>(255^t)+1&255;tU.exports={encode:uJ,parse:mJ}});var Am=$((Qve,oU)=>{"use strict";var $P=UP(),Lm=require("path").posix,rU=nU(),MP=Symbol("slurp"),Qo=Symbol("type"),WP=class{constructor(e,n,r,o){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Qo]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,n||0,r,o):e&&this.set(e)}decode(e,n,r,o){if(n||(n=0),!e||!(e.length>=n+512))throw new Error("need 512 bytes for header");if(this.path=pf(e,n,100),this.mode=ll(e,n+100,8),this.uid=ll(e,n+108,8),this.gid=ll(e,n+116,8),this.size=ll(e,n+124,12),this.mtime=HP(e,n+136,12),this.cksum=ll(e,n+148,12),this[MP](r),this[MP](o,!0),this[Qo]=pf(e,n+156,1),this[Qo]===""&&(this[Qo]="0"),this[Qo]==="0"&&this.path.slice(-1)==="/"&&(this[Qo]="5"),this[Qo]==="5"&&(this.size=0),this.linkpath=pf(e,n+157,100),e.slice(n+257,n+265).toString()==="ustar\x0000")if(this.uname=pf(e,n+265,32),this.gname=pf(e,n+297,32),this.devmaj=ll(e,n+329,8),this.devmin=ll(e,n+337,8),e[n+475]!==0){let s=pf(e,n+345,155);this.path=s+"/"+this.path}else{let s=pf(e,n+345,130);s&&(this.path=s+"/"+this.path),this.atime=HP(e,n+476,12),this.ctime=HP(e,n+488,12)}let i=8*32;for(let s=n;s<n+148;s++)i+=e[s];for(let s=n+156;s<n+512;s++)i+=e[s];this.cksumValid=i===this.cksum,this.cksum===null&&i===8*32&&(this.nullBlock=!0)}[MP](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=e[r])}encode(e,n){if(e||(e=this.block=Buffer.alloc(512),n=0),n||(n=0),!(e.length>=n+512))throw new Error("need 512 bytes for header");let r=this.ctime||this.atime?130:155,o=gJ(this.path||"",r),i=o[0],s=o[1];this.needPax=o[2],this.needPax=hf(e,n,100,i)||this.needPax,this.needPax=ul(e,n+100,8,this.mode)||this.needPax,this.needPax=ul(e,n+108,8,this.uid)||this.needPax,this.needPax=ul(e,n+116,8,this.gid)||this.needPax,this.needPax=ul(e,n+124,12,this.size)||this.needPax,this.needPax=BP(e,n+136,12,this.mtime)||this.needPax,e[n+156]=this[Qo].charCodeAt(0),this.needPax=hf(e,n+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",n+257,8),this.needPax=hf(e,n+265,32,this.uname)||this.needPax,this.needPax=hf(e,n+297,32,this.gname)||this.needPax,this.needPax=ul(e,n+329,8,this.devmaj)||this.needPax,this.needPax=ul(e,n+337,8,this.devmin)||this.needPax,this.needPax=hf(e,n+345,r,s)||this.needPax,e[n+475]!==0?this.needPax=hf(e,n+345,155,s)||this.needPax:(this.needPax=hf(e,n+345,130,s)||this.needPax,this.needPax=BP(e,n+476,12,this.atime)||this.needPax,this.needPax=BP(e,n+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=n;c<n+148;c++)a+=e[c];for(let c=n+156;c<n+512;c++)a+=e[c];return this.cksum=a,ul(e,n+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let n in e)e[n]!==null&&e[n]!==void 0&&(this[n]=e[n])}get type(){return $P.name.get(this[Qo])||this[Qo]}get typeKey(){return this[Qo]}set type(e){$P.code.has(e)?this[Qo]=$P.code.get(e):this[Qo]=e}},gJ=(t,e)=>{let r=t,o="",i,s=Lm.parse(t).root||".";if(Buffer.byteLength(r)<100)i=[r,o,!1];else{o=Lm.dirname(r),r=Lm.basename(r);do Buffer.byteLength(r)<=100&&Buffer.byteLength(o)<=e?i=[r,o,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(o)<=e?i=[r.slice(0,99),o,!0]:(r=Lm.join(Lm.basename(o),r),o=Lm.dirname(o));while(o!==s&&!i);i||(i=[t.slice(0,99),"",!0])}return i},pf=(t,e,n)=>t.slice(e,e+n).toString("utf8").replace(/\0.*/,""),HP=(t,e,n)=>vJ(ll(t,e,n)),vJ=t=>t===null?null:new Date(t*1e3),ll=(t,e,n)=>t[e]&128?rU.parse(t.slice(e,e+n)):yJ(t,e,n),wJ=t=>isNaN(t)?null:t,yJ=(t,e,n)=>wJ(parseInt(t.slice(e,e+n).toString("utf8").replace(/\0.*$/,"").trim(),8)),CJ={12:8589934591,8:2097151},ul=(t,e,n,r)=>r===null?!1:r>CJ[n]||r<0?(rU.encode(r,t.slice(e,e+n)),!0):(EJ(t,e,n,r),!1),EJ=(t,e,n,r)=>t.write(SJ(r,n),e,n,"ascii"),SJ=(t,e)=>xJ(Math.floor(t).toString(8),e),xJ=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",BP=(t,e,n,r)=>r===null?!1:ul(t,e,n,r.getTime()/1e3),_J=new Array(156).join("\0"),hf=(t,e,n,r)=>r===null?!1:(t.write(r+_J,e,n,"utf8"),r.length!==Buffer.byteLength(r)||r.length>n);oU.exports=WP});var eE=$((ewe,iU)=>{"use strict";var DJ=Am(),IJ=require("path"),Wg=class{constructor(e,n){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=n||!1}encode(){let e=this.encodeBody();if(e==="")return null;let n=Buffer.byteLength(e),r=512*Math.ceil(1+n/512),o=Buffer.allocUnsafe(r);for(let i=0;i<512;i++)o[i]=0;new DJ({path:("PaxHeader/"+IJ.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:n,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(e,512,n,"utf8");for(let i=n+512;i<o.length;i++)o[i]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let n=this[e]instanceof Date?this[e].getTime()/1e3:this[e],r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+n+`
`,o=Buffer.byteLength(r),i=Math.floor(Math.log(o)/Math.log(10))+1;return o+i>=Math.pow(10,i)&&(i+=1),i+o+r}};Wg.parse=(t,e,n)=>new Wg(PJ(bJ(t),e),n);var PJ=(t,e)=>e?Object.keys(t).reduce((n,r)=>(n[r]=t[r],n),e):t,bJ=t=>t.replace(/\n$/,"").split(`
`).reduce(TJ,Object.create(null)),TJ=(t,e)=>{let n=parseInt(e,10);if(n!==Buffer.byteLength(e)+1)return t;e=e.slice((n+" ").length);let r=e.split("="),o=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!o)return t;let i=r.join("=");return t[o]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(o)?new Date(i*1e3):/^[0-9]+$/.test(i)?+i:i,t};iU.exports=Wg});var Fm=$((twe,sU)=>{sU.exports=t=>{let e=t.length-1,n=-1;for(;e>-1&&t.charAt(e)==="/";)n=e,e--;return n===-1?t:t.slice(0,n)}});var tE=$((nwe,aU)=>{"use strict";aU.exports=t=>class extends t{warn(e,n,r={}){this.file&&(r.file=this.file),this.cwd&&(r.cwd=this.cwd),r.code=n instanceof Error&&n.code||e,r.tarCode=e,!this.strict&&r.recoverable!==!1?(n instanceof Error&&(r=Object.assign(n,r),n=n.message),this.emit("warn",r.tarCode,n,r)):n instanceof Error?this.emit("error",Object.assign(n,r)):this.emit("error",Object.assign(new Error(`${e}: ${n}`),r))}}});var VP=$((owe,cU)=>{"use strict";var nE=["|","<",">","?",":"],jP=nE.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),RJ=new Map(nE.map((t,e)=>[t,jP[e]])),kJ=new Map(jP.map((t,e)=>[t,nE[e]]));cU.exports={encode:t=>nE.reduce((e,n)=>e.split(n).join(RJ.get(n)),t),decode:t=>jP.reduce((e,n)=>e.split(n).join(kJ.get(n)),t)}});var YP=$((iwe,uU)=>{var{isAbsolute:NJ,parse:lU}=require("path").win32;uU.exports=t=>{let e="",n=lU(t);for(;NJ(t)||n.root;){let r=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":n.root;t=t.slice(r.length),e+=r,n=lU(t)}return[e,t]}});var dU=$((swe,fU)=>{"use strict";fU.exports=(t,e,n)=>(t&=4095,n&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var tb=$((lwe,IU)=>{"use strict";var{Minipass:yU}=jC(),CU=eE(),EU=Am(),Vs=require("fs"),mU=require("path"),js=Nm(),LJ=Fm(),SU=(t,e)=>e?(t=js(t).replace(/^\.(\/|$)/,""),LJ(e)+"/"+t):js(t),AJ=16*1024*1024,pU=Symbol("process"),hU=Symbol("file"),gU=Symbol("directory"),GP=Symbol("symlink"),vU=Symbol("hardlink"),jg=Symbol("header"),rE=Symbol("read"),zP=Symbol("lstat"),oE=Symbol("onlstat"),KP=Symbol("onread"),JP=Symbol("onreadlink"),XP=Symbol("openfile"),ZP=Symbol("onopenfile"),fl=Symbol("close"),iE=Symbol("mode"),QP=Symbol("awaitDrain"),qP=Symbol("ondrain"),Ys=Symbol("prefix"),wU=Symbol("hadError"),xU=tE(),FJ=VP(),_U=YP(),DU=dU(),sE=xU(class extends yU{constructor(e,n){if(n=n||{},super(n),typeof e!="string")throw new TypeError("path is required");this.path=js(e),this.portable=!!n.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=n.maxReadSize||AJ,this.linkCache=n.linkCache||new Map,this.statCache=n.statCache||new Map,this.preservePaths=!!n.preservePaths,this.cwd=js(n.cwd||process.cwd()),this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.mtime=n.mtime||null,this.prefix=n.prefix?js(n.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=_U(this.path);o&&(this.path=i,r=o)}this.win32=!!n.win32||process.platform==="win32",this.win32&&(this.path=FJ.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=js(n.absolute||mU.resolve(this.cwd,e)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.statCache.has(this.absolute)?this[oE](this.statCache.get(this.absolute)):this[zP]()}emit(e,...n){return e==="error"&&(this[wU]=!0),super.emit(e,...n)}[zP](){Vs.lstat(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[oE](n)})}[oE](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=UJ(e),this.emit("stat",e),this[pU]()}[pU](){switch(this.type){case"File":return this[hU]();case"Directory":return this[gU]();case"SymbolicLink":return this[GP]();default:return this.end()}}[iE](e){return DU(e,this.type==="Directory",this.portable)}[Ys](e){return SU(e,this.prefix)}[jg](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new EU({path:this[Ys](this.path),linkpath:this.type==="Link"?this[Ys](this.linkpath):this.linkpath,mode:this[iE](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new CU({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Ys](this.path),linkpath:this.type==="Link"?this[Ys](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[gU](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[jg](),this.end()}[GP](){Vs.readlink(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[JP](n)})}[JP](e){this.linkpath=js(e),this[jg](),this.end()}[vU](e){this.type="Link",this.linkpath=js(mU.relative(this.cwd,e)),this.stat.size=0,this[jg](),this.end()}[hU](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let n=this.linkCache.get(e);if(n.indexOf(this.cwd)===0)return this[vU](n)}this.linkCache.set(e,this.absolute)}if(this[jg](),this.stat.size===0)return this.end();this[XP]()}[XP](){Vs.open(this.absolute,"r",(e,n)=>{if(e)return this.emit("error",e);this[ZP](n)})}[ZP](e){if(this.fd=e,this[wU])return this[fl]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let n=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(n),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[rE]()}[rE](){let{fd:e,buf:n,offset:r,length:o,pos:i}=this;Vs.read(e,n,r,o,i,(s,a)=>{if(s)return this[fl](()=>this.emit("error",s));this[KP](a)})}[fl](e){Vs.close(this.fd,e)}[KP](e){if(e<=0&&this.remain>0){let o=new Error("encountered unexpected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[fl](()=>this.emit("error",o))}if(e>this.remain){let o=new Error("did not encounter expected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[fl](()=>this.emit("error",o))}if(e===this.remain)for(let o=e;o<this.length&&e<this.blockRemain;o++)this.buf[o+this.offset]=0,e++,this.remain++;let n=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(n)?this[qP]():this[QP](()=>this[qP]())}[QP](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let n=new Error("writing more data than expected");return n.path=this.absolute,this.emit("error",n)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[qP](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[fl](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[rE]()}}),eb=class extends sE{[zP](){this[oE](Vs.lstatSync(this.absolute))}[GP](){this[JP](Vs.readlinkSync(this.absolute))}[XP](){this[ZP](Vs.openSync(this.absolute,"r"))}[rE](){let e=!0;try{let{fd:n,buf:r,offset:o,length:i,pos:s}=this,a=Vs.readSync(n,r,o,i,s);this[KP](a),e=!1}finally{if(e)try{this[fl](()=>{})}catch{}}}[QP](e){e()}[fl](e){Vs.closeSync(this.fd),e()}},OJ=xU(class extends yU{constructor(e,n){n=n||{},super(n),this.preservePaths=!!n.preservePaths,this.portable=!!n.portable,this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=n.prefix||null,this.path=js(e.path),this.mode=this[iE](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:n.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=js(e.linkpath),typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=_U(this.path);o&&(this.path=i,r=o)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new EU({path:this[Ys](this.path),linkpath:this.type==="Link"?this[Ys](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.header.encode()&&!this.noPax&&super.write(new CU({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Ys](this.path),linkpath:this.type==="Link"?this[Ys](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Ys](e){return SU(e,this.prefix)}[iE](e){return DU(e,this.type==="Directory",this.portable)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=n,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});sE.Sync=eb;sE.Tar=OJ;var UJ=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";IU.exports=sE});var bU=$((uwe,PU)=>{"use strict";PU.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var nb=$((fwe,TU)=>{"use strict";TU.exports=ft;ft.Node=gf;ft.create=ft;function ft(t){var e=this;if(e instanceof ft||(e=new ft),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(o){e.push(o)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}ft.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};ft.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};ft.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};ft.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)MJ(this,arguments[t]);return this.length};ft.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)HJ(this,arguments[t]);return this.length};ft.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};ft.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};ft.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};ft.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};ft.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};ft.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};ft.prototype.map=function(t,e){e=e||this;for(var n=new ft,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};ft.prototype.mapReverse=function(t,e){e=e||this;for(var n=new ft,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};ft.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;r!==null;o++)n=t(n,r.value,o),r=r.next;return n};ft.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;r!==null;o--)n=t(n,r.value,o),r=r.prev;return n};ft.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};ft.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};ft.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ft;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(;o!==null&&r<e;r++,o=o.next)n.push(o.value);return n};ft.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ft;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,o=this.tail;o!==null&&r>e;r--)o=o.prev;for(;o!==null&&r>t;r--,o=o.prev)n.push(o.value);return n};ft.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(var i=[],r=0;o&&r<e;r++)i.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var r=0;r<n.length;r++)o=$J(this,o,n[r]);return i};ft.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function $J(t,e,n){var r=e===t.head?new gf(n,null,e,t):new gf(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function MJ(t,e){t.tail=new gf(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function HJ(t,e){t.head=new gf(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function gf(t,e,n,r){if(!(this instanceof gf))return new gf(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{bU()(ft)}catch{}});var hE=$((mwe,UU)=>{"use strict";var mE=class{constructor(e,n){this.path=e||"./",this.absolute=n,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:BJ}=jC(),RU=AP(),WJ=ZC(),db=tb(),jJ=db.Sync,VJ=db.Tar,YJ=nb(),kU=Buffer.alloc(1024),lE=Symbol("onStat"),aE=Symbol("ended"),qs=Symbol("queue"),Om=Symbol("current"),vf=Symbol("process"),cE=Symbol("processing"),NU=Symbol("processJob"),Gs=Symbol("jobs"),rb=Symbol("jobDone"),uE=Symbol("addFSEntry"),LU=Symbol("addTarEntry"),ab=Symbol("stat"),lb=Symbol("readdir"),fE=Symbol("onreaddir"),dE=Symbol("pipe"),AU=Symbol("entry"),ob=Symbol("entryOpt"),ub=Symbol("writeEntryClass"),OU=Symbol("write"),ib=Symbol("ondrain"),pE=require("fs"),FU=require("path"),qJ=tE(),sb=Nm(),mb=qJ(class extends BJ{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=sb(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[ub]=db,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new RU.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new RU.BrotliCompress(e.brotli)),this.zip.on("data",n=>super.write(n)),this.zip.on("end",n=>super.end()),this.zip.on("drain",n=>this[ib]()),this.on("resume",n=>this.zip.resume())}else this.on("drain",this[ib]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:n=>!0,this[qs]=new YJ,this[Gs]=0,this.jobs=+e.jobs||4,this[cE]=!1,this[aE]=!1}[OU](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[aE]=!0,this[vf](),this}write(e){if(this[aE])throw new Error("write after end");return e instanceof WJ?this[LU](e):this[uE](e),this.flowing}[LU](e){let n=sb(FU.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let r=new mE(e.path,n,!1);r.entry=new VJ(e,this[ob](r)),r.entry.on("end",o=>this[rb](r)),this[Gs]+=1,this[qs].push(r)}this[vf]()}[uE](e){let n=sb(FU.resolve(this.cwd,e));this[qs].push(new mE(e,n)),this[vf]()}[ab](e){e.pending=!0,this[Gs]+=1;let n=this.follow?"stat":"lstat";pE[n](e.absolute,(r,o)=>{e.pending=!1,this[Gs]-=1,r?this.emit("error",r):this[lE](e,o)})}[lE](e,n){this.statCache.set(e.absolute,n),e.stat=n,this.filter(e.path,n)||(e.ignore=!0),this[vf]()}[lb](e){e.pending=!0,this[Gs]+=1,pE.readdir(e.absolute,(n,r)=>{if(e.pending=!1,this[Gs]-=1,n)return this.emit("error",n);this[fE](e,r)})}[fE](e,n){this.readdirCache.set(e.absolute,n),e.readdir=n,this[vf]()}[vf](){if(!this[cE]){this[cE]=!0;for(let e=this[qs].head;e!==null&&this[Gs]<this.jobs;e=e.next)if(this[NU](e.value),e.value.ignore){let n=e.next;this[qs].removeNode(e),e.next=n}this[cE]=!1,this[aE]&&!this[qs].length&&this[Gs]===0&&(this.zip?this.zip.end(kU):(super.write(kU),super.end()))}}get[Om](){return this[qs]&&this[qs].head&&this[qs].head.value}[rb](e){this[qs].shift(),this[Gs]-=1,this[vf]()}[NU](e){if(!e.pending){if(e.entry){e===this[Om]&&!e.piped&&this[dE](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[lE](e,this.statCache.get(e.absolute)):this[ab](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[fE](e,this.readdirCache.get(e.absolute)):this[lb](e),!e.readdir))){if(e.entry=this[AU](e),!e.entry){e.ignore=!0;return}e===this[Om]&&!e.piped&&this[dE](e)}}}[ob](e){return{onwarn:(n,r,o)=>this.warn(n,r,o),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[AU](e){this[Gs]+=1;try{return new this[ub](e.path,this[ob](e)).on("end",()=>this[rb](e)).on("error",n=>this.emit("error",n))}catch(n){this.emit("error",n)}}[ib](){this[Om]&&this[Om].entry&&this[Om].entry.resume()}[dE](e){e.piped=!0,e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[uE](s+o)});let n=e.entry,r=this.zip;r?n.on("data",o=>{r.write(o)||n.pause()}):n.on("data",o=>{super.write(o)||n.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),fb=class extends mb{constructor(e){super(e),this[ub]=jJ}pause(){}resume(){}[ab](e){let n=this.follow?"statSync":"lstatSync";this[lE](e,pE[n](e.absolute))}[lb](e,n){this[fE](e,pE.readdirSync(e.absolute))}[dE](e){let n=e.entry,r=this.zip;e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[uE](s+o)}),r?n.on("data",o=>{r.write(o)}):n.on("data",o=>{super[OU](o)})}};mb.Sync=fb;UU.exports=mb});var GU=$((pwe,qU)=>{"use strict";var $U=typeof process=="object"&&process?process:{stdout:null,stderr:null},GJ=require("events"),MU=require("stream"),HU=require("string_decoder").StringDecoder,Qa=Symbol("EOF"),ec=Symbol("maybeEmitEnd"),dl=Symbol("emittedEnd"),gE=Symbol("emittingEnd"),Vg=Symbol("emittedError"),vE=Symbol("closed"),BU=Symbol("read"),wE=Symbol("flush"),WU=Symbol("flushChunk"),Ro=Symbol("encoding"),tc=Symbol("decoder"),yE=Symbol("flowing"),Yg=Symbol("paused"),Um=Symbol("resume"),sr=Symbol("bufferLength"),pb=Symbol("bufferPush"),hb=Symbol("bufferShift"),Wr=Symbol("objectMode"),jr=Symbol("destroyed"),gb=Symbol("emitData"),jU=Symbol("emitEnd"),vb=Symbol("emitEnd2"),nc=Symbol("async"),qg=t=>Promise.resolve().then(t),VU=global._MP_NO_ITERATOR_SYMBOLS_!=="1",zJ=VU&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),KJ=VU&&Symbol.iterator||Symbol("iterator not implemented"),JJ=t=>t==="end"||t==="finish"||t==="prefinish",XJ=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,ZJ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),CE=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Um](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},wb=class extends CE{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};qU.exports=class YU extends MU{constructor(e){super(),this[yE]=!1,this[Yg]=!1,this.pipes=[],this.buffer=[],this[Wr]=e&&e.objectMode||!1,this[Wr]?this[Ro]=null:this[Ro]=e&&e.encoding||null,this[Ro]==="buffer"&&(this[Ro]=null),this[nc]=e&&!!e.async||!1,this[tc]=this[Ro]?new HU(this[Ro]):null,this[Qa]=!1,this[dl]=!1,this[gE]=!1,this[vE]=!1,this[Vg]=null,this.writable=!0,this.readable=!0,this[sr]=0,this[jr]=!1}get bufferLength(){return this[sr]}get encoding(){return this[Ro]}set encoding(e){if(this[Wr])throw new Error("cannot set encoding in objectMode");if(this[Ro]&&e!==this[Ro]&&(this[tc]&&this[tc].lastNeed||this[sr]))throw new Error("cannot change encoding");this[Ro]!==e&&(this[tc]=e?new HU(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[tc].write(n)))),this[Ro]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Wr]}set objectMode(e){this[Wr]=this[Wr]||!!e}get async(){return this[nc]}set async(e){this[nc]=this[nc]||!!e}write(e,n,r){if(this[Qa])throw new Error("write after end");if(this[jr])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[nc]?qg:i=>i();return!this[Wr]&&!Buffer.isBuffer(e)&&(ZJ(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):XJ(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Wr]?(this.flowing&&this[sr]!==0&&this[wE](!0),this.flowing?this.emit("data",e):this[pb](e),this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[Ro]&&!this[tc].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[Ro]&&(e=this[tc].write(e)),this.flowing&&this[sr]!==0&&this[wE](!0),this.flowing?this.emit("data",e):this[pb](e),this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[jr])return null;if(this[sr]===0||e===0||e>this[sr])return this[ec](),null;this[Wr]&&(e=null),this.buffer.length>1&&!this[Wr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[sr])]);let n=this[BU](e||null,this.buffer[0]);return this[ec](),n}[BU](e,n){return e===n.length||e===null?this[hb]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[sr]-=e),this.emit("data",n),!this.buffer.length&&!this[Qa]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Qa]=!0,this.writable=!1,(this.flowing||!this[Yg])&&this[ec](),this}[Um](){this[jr]||(this[Yg]=!1,this[yE]=!0,this.emit("resume"),this.buffer.length?this[wE]():this[Qa]?this[ec]():this.emit("drain"))}resume(){return this[Um]()}pause(){this[yE]=!1,this[Yg]=!0}get destroyed(){return this[jr]}get flowing(){return this[yE]}get paused(){return this[Yg]}[pb](e){this[Wr]?this[sr]+=1:this[sr]+=e.length,this.buffer.push(e)}[hb](){return this.buffer.length&&(this[Wr]?this[sr]-=1:this[sr]-=this.buffer[0].length),this.buffer.shift()}[wE](e){do;while(this[WU](this[hb]()));!e&&!this.buffer.length&&!this[Qa]&&this.emit("drain")}[WU](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[jr])return;let r=this[dl];return n=n||{},e===$U.stdout||e===$U.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new wb(this,e,n):new CE(this,e,n)),this[nc]?qg(()=>this[Um]()):this[Um]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[Um]():e==="readable"&&this[sr]!==0?super.emit("readable"):JJ(e)&&this[dl]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Vg]&&(this[nc]?qg(()=>n.call(this,this[Vg])):n.call(this,this[Vg])),r}get emittedEnd(){return this[dl]}[ec](){!this[gE]&&!this[dl]&&!this[jr]&&this.buffer.length===0&&this[Qa]&&(this[gE]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[vE]&&this.emit("close"),this[gE]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==jr&&this[jr])return;if(e==="data")return n?this[nc]?qg(()=>this[gb](n)):this[gb](n):!1;if(e==="end")return this[jU]();if(e==="close"){if(this[vE]=!0,!this[dl]&&!this[jr])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Vg]=n;let i=super.emit("error",n);return this[ec](),i}else if(e==="resume"){let i=super.emit("resume");return this[ec](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[ec](),o}[gb](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[ec](),n}[jU](){this[dl]||(this[dl]=!0,this.readable=!1,this[nc]?qg(()=>this[vb]()):this[vb]())}[vb](){if(this[tc]){let n=this[tc].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Wr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Wr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Wr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Wr]?Promise.reject(new Error("cannot concat in objectMode")):this[Ro]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(jr,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[zJ](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Qa])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[Qa]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(jr,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[KJ](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[jr]?(e?this.emit("error",e):this.emit(jr),this):(this[jr]=!0,this.buffer.length=0,this[sr]=0,typeof this.close=="function"&&!this[vE]&&this.close(),e?this.emit("error",e):this.emit(jr),this)}static isStream(e){return!!e&&(e instanceof YU||e instanceof MU||e instanceof GJ&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Ym=$(zg=>{"use strict";var QJ=GU(),eX=require("events").EventEmitter,ko=require("fs"),Eb=ko.writev;if(!Eb){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Eb=(n,r,o,i)=>{let s=(c,l)=>i(c,l,r),a=new e;a.oncomplete=s,t.writeBuffers(n,r,o,a)}}var jm=Symbol("_autoClose"),ss=Symbol("_close"),Gg=Symbol("_ended"),Et=Symbol("_fd"),zU=Symbol("_finished"),pl=Symbol("_flags"),yb=Symbol("_flush"),Sb=Symbol("_handleChunk"),xb=Symbol("_makeBuf"),DE=Symbol("_mode"),EE=Symbol("_needDrain"),Bm=Symbol("_onerror"),Vm=Symbol("_onopen"),Cb=Symbol("_onread"),Mm=Symbol("_onwrite"),hl=Symbol("_open"),rc=Symbol("_path"),wf=Symbol("_pos"),zs=Symbol("_queue"),Hm=Symbol("_read"),KU=Symbol("_readSize"),ml=Symbol("_reading"),SE=Symbol("_remain"),JU=Symbol("_size"),xE=Symbol("_write"),$m=Symbol("_writing"),_E=Symbol("_defaultFlag"),Wm=Symbol("_errored"),IE=class extends QJ{constructor(e,n){if(n=n||{},super(n),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Wm]=!1,this[Et]=typeof n.fd=="number"?n.fd:null,this[rc]=e,this[KU]=n.readSize||16*1024*1024,this[ml]=!1,this[JU]=typeof n.size=="number"?n.size:1/0,this[SE]=this[JU],this[jm]=typeof n.autoClose=="boolean"?n.autoClose:!0,typeof this[Et]=="number"?this[Hm]():this[hl]()}get fd(){return this[Et]}get path(){return this[rc]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[hl](){ko.open(this[rc],"r",(e,n)=>this[Vm](e,n))}[Vm](e,n){e?this[Bm](e):(this[Et]=n,this.emit("open",n),this[Hm]())}[xb](){return Buffer.allocUnsafe(Math.min(this[KU],this[SE]))}[Hm](){if(!this[ml]){this[ml]=!0;let e=this[xb]();if(e.length===0)return process.nextTick(()=>this[Cb](null,0,e));ko.read(this[Et],e,0,e.length,null,(n,r,o)=>this[Cb](n,r,o))}}[Cb](e,n,r){this[ml]=!1,e?this[Bm](e):this[Sb](n,r)&&this[Hm]()}[ss](){if(this[jm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,ko.close(e,n=>n?this.emit("error",n):this.emit("close"))}}[Bm](e){this[ml]=!0,this[ss](),this.emit("error",e)}[Sb](e,n){let r=!1;return this[SE]-=e,e>0&&(r=super.write(e<n.length?n.slice(0,e):n)),(e===0||this[SE]<=0)&&(r=!1,this[ss](),super.end()),r}emit(e,n){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Et]=="number"&&this[Hm]();break;case"error":return this[Wm]?void 0:(this[Wm]=!0,super.emit(e,n));default:return super.emit(e,n)}}},_b=class extends IE{[hl](){let e=!0;try{this[Vm](null,ko.openSync(this[rc],"r")),e=!1}finally{e&&this[ss]()}}[Hm](){let e=!0;try{if(!this[ml]){this[ml]=!0;do{let n=this[xb](),r=n.length===0?0:ko.readSync(this[Et],n,0,n.length,null);if(!this[Sb](r,n))break}while(!0);this[ml]=!1}e=!1}finally{e&&this[ss]()}}[ss](){if(this[jm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,ko.closeSync(e),this.emit("close")}}},PE=class extends eX{constructor(e,n){n=n||{},super(n),this.readable=!1,this.writable=!0,this[Wm]=!1,this[$m]=!1,this[Gg]=!1,this[EE]=!1,this[zs]=[],this[rc]=e,this[Et]=typeof n.fd=="number"?n.fd:null,this[DE]=n.mode===void 0?438:n.mode,this[wf]=typeof n.start=="number"?n.start:null,this[jm]=typeof n.autoClose=="boolean"?n.autoClose:!0;let r=this[wf]!==null?"r+":"w";this[_E]=n.flags===void 0,this[pl]=this[_E]?r:n.flags,this[Et]===null&&this[hl]()}emit(e,n){if(e==="error"){if(this[Wm])return;this[Wm]=!0}return super.emit(e,n)}get fd(){return this[Et]}get path(){return this[rc]}[Bm](e){this[ss](),this[$m]=!0,this.emit("error",e)}[hl](){ko.open(this[rc],this[pl],this[DE],(e,n)=>this[Vm](e,n))}[Vm](e,n){this[_E]&&this[pl]==="r+"&&e&&e.code==="ENOENT"?(this[pl]="w",this[hl]()):e?this[Bm](e):(this[Et]=n,this.emit("open",n),this[yb]())}end(e,n){return e&&this.write(e,n),this[Gg]=!0,!this[$m]&&!this[zs].length&&typeof this[Et]=="number"&&this[Mm](null,0),this}write(e,n){return typeof e=="string"&&(e=Buffer.from(e,n)),this[Gg]?(this.emit("error",new Error("write() after end()")),!1):this[Et]===null||this[$m]||this[zs].length?(this[zs].push(e),this[EE]=!0,!1):(this[$m]=!0,this[xE](e),!0)}[xE](e){ko.write(this[Et],e,0,e.length,this[wf],(n,r)=>this[Mm](n,r))}[Mm](e,n){e?this[Bm](e):(this[wf]!==null&&(this[wf]+=n),this[zs].length?this[yb]():(this[$m]=!1,this[Gg]&&!this[zU]?(this[zU]=!0,this[ss](),this.emit("finish")):this[EE]&&(this[EE]=!1,this.emit("drain"))))}[yb](){if(this[zs].length===0)this[Gg]&&this[Mm](null,0);else if(this[zs].length===1)this[xE](this[zs].pop());else{let e=this[zs];this[zs]=[],Eb(this[Et],e,this[wf],(n,r)=>this[Mm](n,r))}}[ss](){if(this[jm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,ko.close(e,n=>n?this.emit("error",n):this.emit("close"))}}},Db=class extends PE{[hl](){let e;if(this[_E]&&this[pl]==="r+")try{e=ko.openSync(this[rc],this[pl],this[DE])}catch(n){if(n.code==="ENOENT")return this[pl]="w",this[hl]();throw n}else e=ko.openSync(this[rc],this[pl],this[DE]);this[Vm](null,e)}[ss](){if(this[jm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,ko.closeSync(e),this.emit("close")}}[xE](e){let n=!0;try{this[Mm](null,ko.writeSync(this[Et],e,0,e.length,this[wf])),n=!1}finally{if(n)try{this[ss]()}catch{}}}};zg.ReadStream=IE;zg.ReadStreamSync=_b;zg.WriteStream=PE;zg.WriteStreamSync=Db});var AE=$((vwe,s$)=>{"use strict";var tX=tE(),XU=Am(),nX=require("events"),rX=nb(),oX=1024*1024,iX=ZC(),ZU=eE(),QU=AP(),{nextTick:sX}=require("process"),Ib=Buffer.from([31,139]),Di=Symbol("state"),yf=Symbol("writeEntry"),oc=Symbol("readEntry"),Pb=Symbol("nextEntry"),e$=Symbol("processEntry"),Ii=Symbol("extendedHeader"),Kg=Symbol("globalExtendedHeader"),gl=Symbol("meta"),t$=Symbol("emitMeta"),Rt=Symbol("buffer"),ic=Symbol("queue"),vl=Symbol("ended"),n$=Symbol("emittedEnd"),Cf=Symbol("emit"),ar=Symbol("unzip"),bE=Symbol("consumeChunk"),TE=Symbol("consumeChunkSub"),bb=Symbol("consumeBody"),r$=Symbol("consumeMeta"),o$=Symbol("consumeHeader"),RE=Symbol("consuming"),Tb=Symbol("bufferConcat"),Rb=Symbol("maybeEnd"),Jg=Symbol("writing"),wl=Symbol("aborted"),kE=Symbol("onDone"),Ef=Symbol("sawValidEntry"),NE=Symbol("sawNullBlock"),LE=Symbol("sawEOF"),i$=Symbol("closeStream"),aX=t=>!0;s$.exports=tX(class extends nX{constructor(e){e=e||{},super(e),this.file=e.file||"",this[Ef]=null,this.on(kE,r=>{(this[Di]==="begin"||this[Ef]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(kE,e.ondone):this.on(kE,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||oX,this.filter=typeof e.filter=="function"?e.filter:aX;let n=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:n?void 0:!1,this.writable=!0,this.readable=!1,this[ic]=new rX,this[Rt]=null,this[oc]=null,this[yf]=null,this[Di]="begin",this[gl]="",this[Ii]=null,this[Kg]=null,this[vl]=!1,this[ar]=null,this[wl]=!1,this[NE]=!1,this[LE]=!1,this.on("end",()=>this[i$]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[o$](e,n){this[Ef]===null&&(this[Ef]=!1);let r;try{r=new XU(e,n,this[Ii],this[Kg])}catch(o){return this.warn("TAR_ENTRY_INVALID",o)}if(r.nullBlock)this[NE]?(this[LE]=!0,this[Di]==="begin"&&(this[Di]="header"),this[Cf]("eof")):(this[NE]=!0,this[Cf]("nullBlock"));else if(this[NE]=!1,!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{let o=r.type;if(/^(Symbolic)?Link$/.test(o)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(o)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{let i=this[yf]=new iX(r,this[Ii],this[Kg]);if(!this[Ef])if(i.remain){let s=()=>{i.invalid||(this[Ef]=!0)};i.on("end",s)}else this[Ef]=!0;i.meta?i.size>this.maxMetaEntrySize?(i.ignore=!0,this[Cf]("ignoredEntry",i),this[Di]="ignore",i.resume()):i.size>0&&(this[gl]="",i.on("data",s=>this[gl]+=s),this[Di]="meta"):(this[Ii]=null,i.ignore=i.ignore||!this.filter(i.path,i),i.ignore?(this[Cf]("ignoredEntry",i),this[Di]=i.remain?"ignore":"header",i.resume()):(i.remain?this[Di]="body":(this[Di]="header",i.end()),this[oc]?this[ic].push(i):(this[ic].push(i),this[Pb]())))}}}[i$](){sX(()=>this.emit("close"))}[e$](e){let n=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[oc]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",r=>this[Pb]()),n=!1)):(this[oc]=null,n=!1),n}[Pb](){do;while(this[e$](this[ic].shift()));if(!this[ic].length){let e=this[oc];!e||e.flowing||e.size===e.remain?this[Jg]||this.emit("drain"):e.once("drain",r=>this.emit("drain"))}}[bb](e,n){let r=this[yf],o=r.blockRemain,i=o>=e.length&&n===0?e:e.slice(n,n+o);return r.write(i),r.blockRemain||(this[Di]="header",this[yf]=null,r.end()),i.length}[r$](e,n){let r=this[yf],o=this[bb](e,n);return this[yf]||this[t$](r),o}[Cf](e,n,r){!this[ic].length&&!this[oc]?this.emit(e,n,r):this[ic].push([e,n,r])}[t$](e){switch(this[Cf]("meta",this[gl]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Ii]=ZU.parse(this[gl],this[Ii],!1);break;case"GlobalExtendedHeader":this[Kg]=ZU.parse(this[gl],this[Kg],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Ii]=this[Ii]||Object.create(null),this[Ii].path=this[gl].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Ii]=this[Ii]||Object.create(null),this[Ii].linkpath=this[gl].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[wl]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[wl])return;if((this[ar]===null||this.brotli===void 0&&this[ar]===!1)&&e){if(this[Rt]&&(e=Buffer.concat([this[Rt],e]),this[Rt]=null),e.length<Ib.length)return this[Rt]=e,!0;for(let i=0;this[ar]===null&&i<Ib.length;i++)e[i]!==Ib[i]&&(this[ar]=!1);let o=this.brotli===void 0;if(this[ar]===!1&&o)if(e.length<512)if(this[vl])this.brotli=!0;else return this[Rt]=e,!0;else try{new XU(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[ar]===null||this[ar]===!1&&this.brotli){let i=this[vl];this[vl]=!1,this[ar]=this[ar]===null?new QU.Unzip:new QU.BrotliDecompress,this[ar].on("data",a=>this[bE](a)),this[ar].on("error",a=>this.abort(a)),this[ar].on("end",a=>{this[vl]=!0,this[bE]()}),this[Jg]=!0;let s=this[ar][i?"end":"write"](e);return this[Jg]=!1,s}}this[Jg]=!0,this[ar]?this[ar].write(e):this[bE](e),this[Jg]=!1;let r=this[ic].length?!1:this[oc]?this[oc].flowing:!0;return!r&&!this[ic].length&&this[oc].once("drain",o=>this.emit("drain")),r}[Tb](e){e&&!this[wl]&&(this[Rt]=this[Rt]?Buffer.concat([this[Rt],e]):e)}[Rb](){if(this[vl]&&!this[n$]&&!this[wl]&&!this[RE]){this[n$]=!0;let e=this[yf];if(e&&e.blockRemain){let n=this[Rt]?this[Rt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${n} available)`,{entry:e}),this[Rt]&&e.write(this[Rt]),e.end()}this[Cf](kE)}}[bE](e){if(this[RE])this[Tb](e);else if(!e&&!this[Rt])this[Rb]();else{if(this[RE]=!0,this[Rt]){this[Tb](e);let n=this[Rt];this[Rt]=null,this[TE](n)}else this[TE](e);for(;this[Rt]&&this[Rt].length>=512&&!this[wl]&&!this[LE];){let n=this[Rt];this[Rt]=null,this[TE](n)}this[RE]=!1}(!this[Rt]||this[vl])&&this[Rb]()}[TE](e){let n=0,r=e.length;for(;n+512<=r&&!this[wl]&&!this[LE];)switch(this[Di]){case"begin":case"header":this[o$](e,n),n+=512;break;case"ignore":case"body":n+=this[bb](e,n);break;case"meta":n+=this[r$](e,n);break;default:throw new Error("invalid state: "+this[Di])}n<r&&(this[Rt]?this[Rt]=Buffer.concat([e.slice(n),this[Rt]]):this[Rt]=e.slice(n))}end(e){this[wl]||(this[ar]?this[ar].end(e):(this[vl]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),this.write(e)))}})});var FE=$((wwe,u$)=>{"use strict";var cX=Pm(),c$=AE(),qm=require("fs"),lX=Ym(),a$=require("path"),kb=Fm();u$.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=cX(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&fX(r,e),r.noResume||uX(r),r.file&&r.sync?dX(r):r.file?mX(r,n):l$(r)};var uX=t=>{let e=t.onentry;t.onentry=e?n=>{e(n),n.resume()}:n=>n.resume()},fX=(t,e)=>{let n=new Map(e.map(i=>[kb(i),!0])),r=t.filter,o=(i,s)=>{let a=s||a$.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(a$.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(kb(i)):i=>o(kb(i))},dX=t=>{let e=l$(t),n=t.file,r=!0,o;try{let i=qm.statSync(n),s=t.maxReadSize||16*1024*1024;if(i.size<s)e.end(qm.readFileSync(n));else{let a=0,c=Buffer.allocUnsafe(s);for(o=qm.openSync(n,"r");a<i.size;){let l=qm.readSync(o,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}r=!1}finally{if(r&&o)try{qm.closeSync(o)}catch{}}},mX=(t,e)=>{let n=new c$(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("end",s),qm.stat(o,(c,l)=>{if(c)a(c);else{let u=new lX.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},l$=t=>new c$(t)});var g$=$((ywe,h$)=>{"use strict";var pX=Pm(),OE=hE(),f$=Ym(),d$=FE(),m$=require("path");h$.exports=(t,e,n)=>{if(typeof e=="function"&&(n=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let r=pX(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return r.file&&r.sync?hX(r,e):r.file?gX(r,e,n):r.sync?vX(r,e):wX(r,e)};var hX=(t,e)=>{let n=new OE.Sync(t),r=new f$.WriteStreamSync(t.file,{mode:t.mode||438});n.pipe(r),p$(n,e)},gX=(t,e,n)=>{let r=new OE(t),o=new f$.WriteStream(t.file,{mode:t.mode||438});r.pipe(o);let i=new Promise((s,a)=>{o.on("error",a),o.on("close",s),r.on("error",a)});return Nb(r,e),n?i.then(n,n):i},p$=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?d$({file:m$.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},Nb=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return d$({file:m$.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>Nb(t,e));t.add(n)}t.end()},vX=(t,e)=>{let n=new OE.Sync(t);return p$(n,e),n},wX=(t,e)=>{let n=new OE(t);return Nb(n,e),n}});var Lb=$((Cwe,x$)=>{"use strict";var yX=Pm(),v$=hE(),ei=require("fs"),w$=Ym(),y$=FE(),C$=require("path"),E$=Am();x$.exports=(t,e,n)=>{let r=yX(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),r.sync?CX(r,e):SX(r,e,n)};var CX=(t,e)=>{let n=new v$.Sync(t),r=!0,o,i;try{try{o=ei.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")o=ei.openSync(t.file,"w+");else throw c}let s=ei.fstatSync(o),a=Buffer.alloc(512);e:for(i=0;i<s.size;i+=512){for(let u=0,f=0;u<512;u+=f){if(f=ei.readSync(o,a,u,a.length-u,i+u),i===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new E$(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(i+l+512>s.size)break;i+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}r=!1,EX(t,n,i,o,e)}finally{if(r)try{ei.closeSync(o)}catch{}}},EX=(t,e,n,r,o)=>{let i=new w$.WriteStreamSync(t.file,{fd:r,start:n});e.pipe(i),xX(e,o)},SX=(t,e,n)=>{e=Array.from(e);let r=new v$(t),o=(s,a,c)=>{let l=(p,h)=>{p?ei.close(s,g=>c(p)):c(null,h)},u=0;if(a===0)return l(null,0);let f=0,m=Buffer.alloc(512),d=(p,h)=>{if(p)return l(p);if(f+=h,f<512&&h)return ei.read(s,m,f,m.length-f,u+f,d);if(u===0&&m[0]===31&&m[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let g=new E$(m);if(!g.cksumValid)return l(null,u);let v=512*Math.ceil(g.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(g.path,g.mtime),f=0,ei.read(s,m,0,512,u,d)};ei.read(s,m,0,512,u,d)},i=new Promise((s,a)=>{r.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",ei.open(t.file,c,l);if(u)return a(u);ei.fstat(f,(m,d)=>{if(m)return ei.close(f,()=>a(m));o(f,d.size,(p,h)=>{if(p)return a(p);let g=new w$.WriteStream(t.file,{fd:f,start:h});r.pipe(g),g.on("error",a),g.on("close",s),S$(r,e)})})};ei.open(t.file,c,l)});return n?i.then(n,n):i},xX=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?y$({file:C$.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},S$=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return y$({file:C$.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>S$(t,e));t.add(n)}t.end()}});var D$=$((Ewe,_$)=>{"use strict";var _X=Pm(),DX=Lb();_$.exports=(t,e,n)=>{let r=_X(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),IX(r),DX(r,e,n)};var IX=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(n,r)=>e(n,r)&&!(t.mtimeCache.get(n)>r.mtime):(n,r)=>!(t.mtimeCache.get(n)>r.mtime)}});var b$=$((Swe,P$)=>{var{promisify:I$}=require("util"),yl=require("fs"),PX=t=>{if(!t)t={mode:511,fs:yl};else if(typeof t=="object")t={mode:511,fs:yl,...t};else if(typeof t=="number")t={mode:t,fs:yl};else if(typeof t=="string")t={mode:parseInt(t,8),fs:yl};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||yl.mkdir,t.mkdirAsync=I$(t.mkdir),t.stat=t.stat||t.fs.stat||yl.stat,t.statAsync=I$(t.stat),t.statSync=t.statSync||t.fs.statSync||yl.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||yl.mkdirSync,t};P$.exports=PX});var R$=$((xwe,T$)=>{var bX=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:TX,parse:RX}=require("path"),kX=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=TX(t),bX==="win32"){let e=/[*|"<>?:]/,{root:n}=RX(t);if(e.test(t.substr(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};T$.exports=kX});var F$=$((_we,A$)=>{var{dirname:k$}=require("path"),N$=(t,e,n=void 0)=>n===e?Promise.resolve():t.statAsync(e).then(r=>r.isDirectory()?n:void 0,r=>r.code==="ENOENT"?N$(t,k$(e),e):void 0),L$=(t,e,n=void 0)=>{if(n!==e)try{return t.statSync(e).isDirectory()?n:void 0}catch(r){return r.code==="ENOENT"?L$(t,k$(e),e):void 0}};A$.exports={findMade:N$,findMadeSync:L$}});var Ob=$((Dwe,U$)=>{var{dirname:O$}=require("path"),Ab=(t,e,n)=>{e.recursive=!1;let r=O$(t);return r===t?e.mkdirAsync(t,e).catch(o=>{if(o.code!=="EISDIR")throw o}):e.mkdirAsync(t,e).then(()=>n||t,o=>{if(o.code==="ENOENT")return Ab(r,e).then(i=>Ab(t,e,i));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;return e.statAsync(t).then(i=>{if(i.isDirectory())return n;throw o},()=>{throw o})})},Fb=(t,e,n)=>{let r=O$(t);if(e.recursive=!1,r===t)try{return e.mkdirSync(t,e)}catch(o){if(o.code!=="EISDIR")throw o;return}try{return e.mkdirSync(t,e),n||t}catch(o){if(o.code==="ENOENT")return Fb(t,e,Fb(r,e,n));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(!e.statSync(t).isDirectory())throw o}catch{throw o}}};U$.exports={mkdirpManual:Ab,mkdirpManualSync:Fb}});var H$=$((Iwe,M$)=>{var{dirname:$$}=require("path"),{findMade:NX,findMadeSync:LX}=F$(),{mkdirpManual:AX,mkdirpManualSync:FX}=Ob(),OX=(t,e)=>(e.recursive=!0,$$(t)===t?e.mkdirAsync(t,e):NX(e,t).then(r=>e.mkdirAsync(t,e).then(()=>r).catch(o=>{if(o.code==="ENOENT")return AX(t,e);throw o}))),UX=(t,e)=>{if(e.recursive=!0,$$(t)===t)return e.mkdirSync(t,e);let r=LX(e,t);try{return e.mkdirSync(t,e),r}catch(o){if(o.code==="ENOENT")return FX(t,e);throw o}};M$.exports={mkdirpNative:OX,mkdirpNativeSync:UX}});var V$=$((Pwe,j$)=>{var B$=require("fs"),$X=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Ub=$X.replace(/^v/,"").split("."),W$=+Ub[0]>10||+Ub[0]==10&&+Ub[1]>=12,MX=W$?t=>t.mkdir===B$.mkdir:()=>!1,HX=W$?t=>t.mkdirSync===B$.mkdirSync:()=>!1;j$.exports={useNative:MX,useNativeSync:HX}});var J$=$((bwe,K$)=>{var Gm=b$(),zm=R$(),{mkdirpNative:Y$,mkdirpNativeSync:q$}=H$(),{mkdirpManual:G$,mkdirpManualSync:z$}=Ob(),{useNative:BX,useNativeSync:WX}=V$(),Km=(t,e)=>(t=zm(t),e=Gm(e),BX(e)?Y$(t,e):G$(t,e)),jX=(t,e)=>(t=zm(t),e=Gm(e),WX(e)?q$(t,e):z$(t,e));Km.sync=jX;Km.native=(t,e)=>Y$(zm(t),Gm(e));Km.manual=(t,e)=>G$(zm(t),Gm(e));Km.nativeSync=(t,e)=>q$(zm(t),Gm(e));Km.manualSync=(t,e)=>z$(zm(t),Gm(e));K$.exports=Km});var rM=$((Twe,nM)=>{"use strict";var Pi=require("fs"),Sf=require("path"),VX=Pi.lchown?"lchown":"chown",YX=Pi.lchownSync?"lchownSync":"chownSync",Z$=Pi.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),X$=(t,e,n)=>{try{return Pi[YX](t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},qX=(t,e,n)=>{try{return Pi.chownSync(t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},GX=Z$?(t,e,n,r)=>o=>{!o||o.code!=="EISDIR"?r(o):Pi.chown(t,e,n,r)}:(t,e,n,r)=>r,$b=Z$?(t,e,n)=>{try{return X$(t,e,n)}catch(r){if(r.code!=="EISDIR")throw r;qX(t,e,n)}}:(t,e,n)=>X$(t,e,n),zX=process.version,Q$=(t,e,n)=>Pi.readdir(t,e,n),KX=(t,e)=>Pi.readdirSync(t,e);/^v4\./.test(zX)&&(Q$=(t,e,n)=>Pi.readdir(t,n));var UE=(t,e,n,r)=>{Pi[VX](t,e,n,GX(t,e,n,o=>{r(o&&o.code!=="ENOENT"?o:null)}))},eM=(t,e,n,r,o)=>{if(typeof e=="string")return Pi.lstat(Sf.resolve(t,e),(i,s)=>{if(i)return o(i.code!=="ENOENT"?i:null);s.name=e,eM(t,s,n,r,o)});if(e.isDirectory())Mb(Sf.resolve(t,e.name),n,r,i=>{if(i)return o(i);let s=Sf.resolve(t,e.name);UE(s,n,r,o)});else{let i=Sf.resolve(t,e.name);UE(i,n,r,o)}},Mb=(t,e,n,r)=>{Q$(t,{withFileTypes:!0},(o,i)=>{if(o){if(o.code==="ENOENT")return r();if(o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return r(o)}if(o||!i.length)return UE(t,e,n,r);let s=i.length,a=null,c=l=>{if(!a){if(l)return r(a=l);if(--s===0)return UE(t,e,n,r)}};i.forEach(l=>eM(t,l,e,n,c))})},JX=(t,e,n,r)=>{if(typeof e=="string")try{let o=Pi.lstatSync(Sf.resolve(t,e));o.name=e,e=o}catch(o){if(o.code==="ENOENT")return;throw o}e.isDirectory()&&tM(Sf.resolve(t,e.name),n,r),$b(Sf.resolve(t,e.name),n,r)},tM=(t,e,n)=>{let r;try{r=KX(t,{withFileTypes:!0})}catch(o){if(o.code==="ENOENT")return;if(o.code==="ENOTDIR"||o.code==="ENOTSUP")return $b(t,e,n);throw o}return r&&r.length&&r.forEach(o=>JX(t,o,e,n)),$b(t,e,n)};nM.exports=Mb;Mb.sync=tM});var aM=$((Rwe,Hb)=>{"use strict";var oM=J$(),bi=require("fs"),$E=require("path"),iM=rM(),as=Nm(),ME=class extends Error{constructor(e,n){super("Cannot extract through symbolic link"),this.path=n,this.symlink=e}get name(){return"SylinkError"}},HE=class extends Error{constructor(e,n){super(n+": Cannot cd into '"+e+"'"),this.path=e,this.code=n}get name(){return"CwdError"}},BE=(t,e)=>t.get(as(e)),Xg=(t,e,n)=>t.set(as(e),n),XX=(t,e)=>{bi.stat(t,(n,r)=>{(n||!r.isDirectory())&&(n=new HE(t,n&&n.code||"ENOTDIR")),e(n)})};Hb.exports=(t,e,n)=>{t=as(t);let r=e.umask,o=e.mode|448,i=(o&r)!==0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,m=as(e.cwd),d=(g,v)=>{g?n(g):(Xg(f,t,!0),v&&c?iM(v,s,a,C=>d(C)):i?bi.chmod(t,o,n):n())};if(f&&BE(f,t)===!0)return d();if(t===m)return XX(t,d);if(l)return oM(t,{mode:o}).then(g=>d(null,g),d);let h=as($E.relative(m,t)).split("/");WE(m,h,o,f,u,m,null,d)};var WE=(t,e,n,r,o,i,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=as($E.resolve(t+"/"+c));if(BE(r,l))return WE(l,e,n,r,o,i,s,a);bi.mkdir(l,n,sM(l,e,n,r,o,i,s,a))},sM=(t,e,n,r,o,i,s,a)=>c=>{c?bi.lstat(t,(l,u)=>{if(l)l.path=l.path&&as(l.path),a(l);else if(u.isDirectory())WE(t,e,n,r,o,i,s,a);else if(o)bi.unlink(t,f=>{if(f)return a(f);bi.mkdir(t,n,sM(t,e,n,r,o,i,s,a))});else{if(u.isSymbolicLink())return a(new ME(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,WE(t,e,n,r,o,i,s,a))},ZX=t=>{let e=!1,n="ENOTDIR";try{e=bi.statSync(t).isDirectory()}catch(r){n=r.code}finally{if(!e)throw new HE(t,n)}};Hb.exports.sync=(t,e)=>{t=as(t);let n=e.umask,r=e.mode|448,o=(r&n)!==0,i=e.uid,s=e.gid,a=typeof i=="number"&&typeof s=="number"&&(i!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=as(e.cwd),m=g=>{Xg(u,t,!0),g&&a&&iM.sync(g,i,s),o&&bi.chmodSync(t,r)};if(u&&BE(u,t)===!0)return m();if(t===f)return ZX(f),m();if(c)return m(oM.sync(t,r));let p=as($E.relative(f,t)).split("/"),h=null;for(let g=p.shift(),v=f;g&&(v+="/"+g);g=p.shift())if(v=as($E.resolve(v)),!BE(u,v))try{bi.mkdirSync(v,r),h=h||v,Xg(u,v,!0)}catch{let w=bi.lstatSync(v);if(w.isDirectory()){Xg(u,v,!0);continue}else if(l){bi.unlinkSync(v),bi.mkdirSync(v,r),h=h||v,Xg(u,v,!0);continue}else if(w.isSymbolicLink())return new ME(v,v+"/"+p.join("/"))}return m(h)}});var Wb=$((kwe,cM)=>{var Bb=Object.create(null),{hasOwnProperty:QX}=Object.prototype;cM.exports=t=>(QX.call(Bb,t)||(Bb[t]=t.normalize("NFD")),Bb[t])});var dM=$((Nwe,fM)=>{var lM=require("assert"),eZ=Wb(),tZ=Fm(),{join:uM}=require("path"),nZ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,rZ=nZ==="win32";fM.exports=()=>{let t=new Map,e=new Map,n=l=>l.split("/").slice(0,-1).reduce((f,m)=>(f.length&&(m=uM(f[f.length-1],m)),f.push(m||"/"),f),[]),r=new Set,o=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>t.get(f)),dirs:[...u.dirs].map(f=>t.get(f))}},i=l=>{let{paths:u,dirs:f}=o(l);return u.every(m=>m[0]===l)&&f.every(m=>m[0]instanceof Set&&m[0].has(l))},s=l=>r.has(l)||!i(l)?!1:(r.add(l),l(()=>a(l)),!0),a=l=>{if(!r.has(l))return!1;let{paths:u,dirs:f}=e.get(l),m=new Set;return u.forEach(d=>{let p=t.get(d);lM.equal(p[0],l),p.length===1?t.delete(d):(p.shift(),typeof p[0]=="function"?m.add(p[0]):p[0].forEach(h=>m.add(h)))}),f.forEach(d=>{let p=t.get(d);lM(p[0]instanceof Set),p[0].size===1&&p.length===1?t.delete(d):p[0].size===1?(p.shift(),m.add(p[0])):p[0].delete(l)}),r.delete(l),m.forEach(d=>s(d)),!0};return{check:i,reserve:(l,u)=>{l=rZ?["win32 parallelization disabled"]:l.map(m=>tZ(uM(eZ(m))).toLowerCase());let f=new Set(l.map(m=>n(m)).reduce((m,d)=>m.concat(d)));return e.set(u,{dirs:f,paths:l}),l.forEach(m=>{let d=t.get(m);d?d.push(u):t.set(m,[u])}),f.forEach(m=>{let d=t.get(m);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):t.set(m,[new Set([u])])}),s(u)}}}});var hM=$((Lwe,pM)=>{var oZ=process.env.__FAKE_PLATFORM__||process.platform,iZ=oZ==="win32",sZ=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:aZ,O_TRUNC:cZ,O_WRONLY:lZ,UV_FS_O_FILEMAP:mM=0}=sZ.constants,uZ=iZ&&!!mM,fZ=512*1024,dZ=mM|cZ|aZ|lZ;pM.exports=uZ?t=>t<fZ?dZ:"w":()=>"w"});var Xb=$((Awe,TM)=>{"use strict";var mZ=require("assert"),pZ=AE(),dt=require("fs"),hZ=Ym(),sc=require("path"),IM=aM(),gM=VP(),gZ=dM(),vZ=YP(),Ti=Nm(),wZ=Fm(),yZ=Wb(),vM=Symbol("onEntry"),Yb=Symbol("checkFs"),wM=Symbol("checkFs2"),YE=Symbol("pruneCache"),qb=Symbol("isReusable"),Ri=Symbol("makeFs"),Gb=Symbol("file"),zb=Symbol("directory"),qE=Symbol("link"),yM=Symbol("symlink"),CM=Symbol("hardlink"),EM=Symbol("unsupported"),SM=Symbol("checkPath"),Cl=Symbol("mkdir"),Vr=Symbol("onError"),jE=Symbol("pending"),xM=Symbol("pend"),Jm=Symbol("unpend"),jb=Symbol("ended"),Vb=Symbol("maybeClose"),Kb=Symbol("skip"),Zg=Symbol("doChown"),Qg=Symbol("uid"),ev=Symbol("gid"),tv=Symbol("checkedCwd"),PM=require("crypto"),bM=hM(),CZ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,nv=CZ==="win32",EZ=1024,SZ=(t,e)=>{if(!nv)return dt.unlink(t,e);let n=t+".DELETE."+PM.randomBytes(16).toString("hex");dt.rename(t,n,r=>{if(r)return e(r);dt.unlink(n,e)})},xZ=t=>{if(!nv)return dt.unlinkSync(t);let e=t+".DELETE."+PM.randomBytes(16).toString("hex");dt.renameSync(t,e),dt.unlinkSync(e)},_M=(t,e,n)=>t===t>>>0?t:e===e>>>0?e:n,DM=t=>wZ(Ti(yZ(t))).toLowerCase(),_Z=(t,e)=>{e=DM(e);for(let n of t.keys()){let r=DM(n);(r===e||r.indexOf(e+"/")===0)&&t.delete(n)}},DZ=t=>{for(let e of t.keys())t.delete(e)},rv=class extends pZ{constructor(e){if(e||(e={}),e.ondone=n=>{this[jb]=!0,this[Vb]()},super(e),this[tv]=!1,this.reservations=gZ(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[jE]=0,this[jb]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:EZ,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||nv,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Ti(sc.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",n=>this[vM](n))}warn(e,n,r={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(r.recoverable=!1),super.warn(e,n,r)}[Vb](){this[jb]&&this[jE]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[SM](e){let n=Ti(e.path),r=n.split("/");if(this.strip){if(r.length<this.strip)return!1;if(e.type==="Link"){let o=Ti(e.linkpath).split("/");if(o.length>=this.strip)e.linkpath=o.slice(this.strip).join("/");else return!1}r.splice(0,this.strip),e.path=r.join("/")}if(isFinite(this.maxDepth)&&r.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:n,depth:r.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(r.includes("..")||nv&&/^[a-z]:\.\.$/i.test(r[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:n}),!1;let[o,i]=vZ(n);o&&(e.path=i,this.warn("TAR_ENTRY_INFO",`stripping ${o} from absolute path`,{entry:e,path:n}))}if(sc.isAbsolute(e.path)?e.absolute=Ti(sc.resolve(e.path)):e.absolute=Ti(sc.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Ti(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:o}=sc.win32.parse(e.absolute);e.absolute=o+gM.encode(e.absolute.slice(o.length));let{root:i}=sc.win32.parse(e.path);e.path=i+gM.encode(e.path.slice(i.length))}return!0}[vM](e){if(!this[SM](e))return e.resume();switch(mZ.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Yb](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[EM](e)}}[Vr](e,n){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:n}),this[Jm](),n.resume())}[Cl](e,n,r){IM(Ti(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n,noChmod:this.noChmod},r)}[Zg](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Qg](e){return _M(this.uid,e.uid,this.processUid)}[ev](e){return _M(this.gid,e.gid,this.processGid)}[Gb](e,n){let r=e.mode&4095||this.fmode,o=new hZ.WriteStream(e.absolute,{flags:bM(e.size),mode:r,autoClose:!1});o.on("error",c=>{o.fd&&dt.close(o.fd,()=>{}),o.write=()=>!0,this[Vr](c,e),n()});let i=1,s=c=>{if(c){o.fd&&dt.close(o.fd,()=>{}),this[Vr](c,e),n();return}--i===0&&dt.close(o.fd,l=>{l?this[Vr](l,e):this[Jm](),n()})};o.on("finish",c=>{let l=e.absolute,u=o.fd;if(e.mtime&&!this.noMtime){i++;let f=e.atime||new Date,m=e.mtime;dt.futimes(u,f,m,d=>d?dt.utimes(l,f,m,p=>s(p&&d)):s())}if(this[Zg](e)){i++;let f=this[Qg](e),m=this[ev](e);dt.fchown(u,f,m,d=>d?dt.chown(l,f,m,p=>s(p&&d)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[Vr](c,e),n()}),e.pipe(a)),a.pipe(o)}[zb](e,n){let r=e.mode&4095||this.dmode;this[Cl](e.absolute,r,o=>{if(o){this[Vr](o,e),n();return}let i=1,s=a=>{--i===0&&(n(),this[Jm](),e.resume())};e.mtime&&!this.noMtime&&(i++,dt.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[Zg](e)&&(i++,dt.chown(e.absolute,this[Qg](e),this[ev](e),s)),s()})}[EM](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[yM](e,n){this[qE](e,e.linkpath,"symlink",n)}[CM](e,n){let r=Ti(sc.resolve(this.cwd,e.linkpath));this[qE](e,r,"link",n)}[xM](){this[jE]++}[Jm](){this[jE]--,this[Vb]()}[Kb](e){this[Jm](),e.resume()}[qb](e,n){return e.type==="File"&&!this.unlink&&n.isFile()&&n.nlink<=1&&!nv}[Yb](e){this[xM]();let n=[e.path];e.linkpath&&n.push(e.linkpath),this.reservations.reserve(n,r=>this[wM](e,r))}[YE](e){e.type==="SymbolicLink"?DZ(this.dirCache):e.type!=="Directory"&&_Z(this.dirCache,e.absolute)}[wM](e,n){this[YE](e);let r=a=>{this[YE](e),n(a)},o=()=>{this[Cl](this.cwd,this.dmode,a=>{if(a){this[Vr](a,e),r();return}this[tv]=!0,i()})},i=()=>{if(e.absolute!==this.cwd){let a=Ti(sc.dirname(e.absolute));if(a!==this.cwd)return this[Cl](a,this.dmode,c=>{if(c){this[Vr](c,e),r();return}s()})}s()},s=()=>{dt.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[Kb](e),r();return}if(a||this[qb](e,c))return this[Ri](null,e,r);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[Ri](f,e,r);return l?dt.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return dt.rmdir(e.absolute,l=>this[Ri](l,e,r))}if(e.absolute===this.cwd)return this[Ri](null,e,r);SZ(e.absolute,l=>this[Ri](l,e,r))})};this[tv]?i():o()}[Ri](e,n,r){if(e){this[Vr](e,n),r();return}switch(n.type){case"File":case"OldFile":case"ContiguousFile":return this[Gb](n,r);case"Link":return this[CM](n,r);case"SymbolicLink":return this[yM](n,r);case"Directory":case"GNUDumpDir":return this[zb](n,r)}}[qE](e,n,r,o){dt[r](n,e.absolute,i=>{i?this[Vr](i,e):(this[Jm](),e.resume()),o()})}},VE=t=>{try{return[null,t()]}catch(e){return[e,null]}},Jb=class extends rv{[Ri](e,n){return super[Ri](e,n,()=>{})}[Yb](e){if(this[YE](e),!this[tv]){let i=this[Cl](this.cwd,this.dmode);if(i)return this[Vr](i,e);this[tv]=!0}if(e.absolute!==this.cwd){let i=Ti(sc.dirname(e.absolute));if(i!==this.cwd){let s=this[Cl](i,this.dmode);if(s)return this[Vr](s,e)}}let[n,r]=VE(()=>dt.lstatSync(e.absolute));if(r&&(this.keep||this.newer&&r.mtime>e.mtime))return this[Kb](e);if(n||this[qb](e,r))return this[Ri](null,e);if(r.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(r.mode&4095)!==e.mode,[a]=s?VE(()=>{dt.chmodSync(e.absolute,e.mode)}):[];return this[Ri](a,e)}let[i]=VE(()=>dt.rmdirSync(e.absolute));this[Ri](i,e)}let[o]=e.absolute===this.cwd?[]:VE(()=>xZ(e.absolute));this[Ri](o,e)}[Gb](e,n){let r=e.mode&4095||this.fmode,o=a=>{let c;try{dt.closeSync(i)}catch(l){c=l}(a||c)&&this[Vr](a||c,e),n()},i;try{i=dt.openSync(e.absolute,bM(e.size),r)}catch(a){return o(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[Vr](a,e)),e.pipe(s)),s.on("data",a=>{try{dt.writeSync(i,a,0,a.length)}catch(c){o(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{dt.futimesSync(i,l,u)}catch(f){try{dt.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[Zg](e)){let l=this[Qg](e),u=this[ev](e);try{dt.fchownSync(i,l,u)}catch(f){try{dt.chownSync(e.absolute,l,u)}catch{c=c||f}}}o(c)})}[zb](e,n){let r=e.mode&4095||this.dmode,o=this[Cl](e.absolute,r);if(o){this[Vr](o,e),n();return}if(e.mtime&&!this.noMtime)try{dt.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Zg](e))try{dt.chownSync(e.absolute,this[Qg](e),this[ev](e))}catch{}n(),e.resume()}[Cl](e,n){try{return IM.sync(Ti(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n})}catch(r){return r}}[qE](e,n,r,o){try{dt[r+"Sync"](n,e.absolute),o(),e.resume()}catch(i){return this[Vr](i,e)}}};rv.Sync=Jb;TM.exports=rv});var AM=$((Fwe,LM)=>{"use strict";var IZ=Pm(),GE=Xb(),kM=require("fs"),NM=Ym(),RM=require("path"),Zb=Fm();LM.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=IZ(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&PZ(r,e),r.file&&r.sync?bZ(r):r.file?TZ(r,n):r.sync?RZ(r):kZ(r)};var PZ=(t,e)=>{let n=new Map(e.map(i=>[Zb(i),!0])),r=t.filter,o=(i,s)=>{let a=s||RM.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(RM.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(Zb(i)):i=>o(Zb(i))},bZ=t=>{let e=new GE.Sync(t),n=t.file,r=kM.statSync(n),o=t.maxReadSize||16*1024*1024;new NM.ReadStreamSync(n,{readSize:o,size:r.size}).pipe(e)},TZ=(t,e)=>{let n=new GE(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("close",s),kM.stat(o,(c,l)=>{if(c)a(c);else{let u=new NM.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},RZ=t=>new GE.Sync(t),kZ=t=>new GE(t)});var zE=$(jn=>{"use strict";jn.c=jn.create=g$();jn.r=jn.replace=Lb();jn.t=jn.list=FE();jn.u=jn.update=D$();jn.x=jn.extract=AM();jn.Pack=hE();jn.Unpack=Xb();jn.Parse=AE();jn.ReadEntry=ZC();jn.WriteEntry=tb();jn.Header=Am();jn.Pax=eE();jn.types=UP()});var ov=$((Uwe,FM)=>{"use strict";var NZ="2.0.0",LZ=Number.MAX_SAFE_INTEGER||9007199254740991,AZ=16,FZ=250,OZ=["major","premajor","minor","preminor","patch","prepatch","prerelease"];FM.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:AZ,MAX_SAFE_BUILD_LENGTH:FZ,MAX_SAFE_INTEGER:LZ,RELEASE_TYPES:OZ,SEMVER_SPEC_VERSION:NZ,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var iv=$(($we,OM)=>{"use strict";var UZ=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};OM.exports=UZ});var Xm=$((Ks,UM)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Qb,MAX_SAFE_BUILD_LENGTH:$Z,MAX_LENGTH:MZ}=ov(),HZ=iv();Ks=UM.exports={};var BZ=Ks.re=[],WZ=Ks.safeRe=[],he=Ks.src=[],jZ=Ks.safeSrc=[],ge=Ks.t={},VZ=0,eT="[a-zA-Z0-9-]",YZ=[["\\s",1],["\\d",MZ],[eT,$Z]],qZ=t=>{for(let[e,n]of YZ)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},je=(t,e,n)=>{let r=qZ(e),o=VZ++;HZ(t,o,e),ge[t]=o,he[o]=e,jZ[o]=r,BZ[o]=new RegExp(e,n?"g":void 0),WZ[o]=new RegExp(r,n?"g":void 0)};je("NUMERICIDENTIFIER","0|[1-9]\\d*");je("NUMERICIDENTIFIERLOOSE","\\d+");je("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${eT}*`);je("MAINVERSION",`(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})`);je("MAINVERSIONLOOSE",`(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASEIDENTIFIER",`(?:${he[ge.NONNUMERICIDENTIFIER]}|${he[ge.NUMERICIDENTIFIER]})`);je("PRERELEASEIDENTIFIERLOOSE",`(?:${he[ge.NONNUMERICIDENTIFIER]}|${he[ge.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASE",`(?:-(${he[ge.PRERELEASEIDENTIFIER]}(?:\\.${he[ge.PRERELEASEIDENTIFIER]})*))`);je("PRERELEASELOOSE",`(?:-?(${he[ge.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${he[ge.PRERELEASEIDENTIFIERLOOSE]})*))`);je("BUILDIDENTIFIER",`${eT}+`);je("BUILD",`(?:\\+(${he[ge.BUILDIDENTIFIER]}(?:\\.${he[ge.BUILDIDENTIFIER]})*))`);je("FULLPLAIN",`v?${he[ge.MAINVERSION]}${he[ge.PRERELEASE]}?${he[ge.BUILD]}?`);je("FULL",`^${he[ge.FULLPLAIN]}$`);je("LOOSEPLAIN",`[v=\\s]*${he[ge.MAINVERSIONLOOSE]}${he[ge.PRERELEASELOOSE]}?${he[ge.BUILD]}?`);je("LOOSE",`^${he[ge.LOOSEPLAIN]}$`);je("GTLT","((?:<|>)?=?)");je("XRANGEIDENTIFIERLOOSE",`${he[ge.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);je("XRANGEIDENTIFIER",`${he[ge.NUMERICIDENTIFIER]}|x|X|\\*`);je("XRANGEPLAIN",`[v=\\s]*(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:${he[ge.PRERELEASE]})?${he[ge.BUILD]}?)?)?`);je("XRANGEPLAINLOOSE",`[v=\\s]*(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:${he[ge.PRERELEASELOOSE]})?${he[ge.BUILD]}?)?)?`);je("XRANGE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAIN]}$`);je("XRANGELOOSE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAINLOOSE]}$`);je("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Qb}})(?:\\.(\\d{1,${Qb}}))?(?:\\.(\\d{1,${Qb}}))?`);je("COERCE",`${he[ge.COERCEPLAIN]}(?:$|[^\\d])`);je("COERCEFULL",he[ge.COERCEPLAIN]+`(?:${he[ge.PRERELEASE]})?(?:${he[ge.BUILD]})?(?:$|[^\\d])`);je("COERCERTL",he[ge.COERCE],!0);je("COERCERTLFULL",he[ge.COERCEFULL],!0);je("LONETILDE","(?:~>?)");je("TILDETRIM",`(\\s*)${he[ge.LONETILDE]}\\s+`,!0);Ks.tildeTrimReplace="$1~";je("TILDE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAIN]}$`);je("TILDELOOSE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAINLOOSE]}$`);je("LONECARET","(?:\\^)");je("CARETTRIM",`(\\s*)${he[ge.LONECARET]}\\s+`,!0);Ks.caretTrimReplace="$1^";je("CARET",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAIN]}$`);je("CARETLOOSE",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAINLOOSE]}$`);je("COMPARATORLOOSE",`^${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]})$|^$`);je("COMPARATOR",`^${he[ge.GTLT]}\\s*(${he[ge.FULLPLAIN]})$|^$`);je("COMPARATORTRIM",`(\\s*)${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]}|${he[ge.XRANGEPLAIN]})`,!0);Ks.comparatorTrimReplace="$1$2$3";je("HYPHENRANGE",`^\\s*(${he[ge.XRANGEPLAIN]})\\s+-\\s+(${he[ge.XRANGEPLAIN]})\\s*$`);je("HYPHENRANGELOOSE",`^\\s*(${he[ge.XRANGEPLAINLOOSE]})\\s+-\\s+(${he[ge.XRANGEPLAINLOOSE]})\\s*$`);je("STAR","(<|>)?=?\\s*\\*");je("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");je("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var KE=$((Mwe,$M)=>{"use strict";var GZ=Object.freeze({loose:!0}),zZ=Object.freeze({}),KZ=t=>t?typeof t!="object"?GZ:t:zZ;$M.exports=KZ});var tT=$((Hwe,BM)=>{"use strict";var MM=/^[0-9]+$/,HM=(t,e)=>{let n=MM.test(t),r=MM.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},JZ=(t,e)=>HM(e,t);BM.exports={compareIdentifiers:HM,rcompareIdentifiers:JZ}});var Yr=$((Bwe,jM)=>{"use strict";var JE=iv(),{MAX_LENGTH:WM,MAX_SAFE_INTEGER:XE}=ov(),{safeRe:ZE,t:QE}=Xm(),XZ=KE(),{compareIdentifiers:Zm}=tT(),nT=class t{constructor(e,n){if(n=XZ(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>WM)throw new TypeError(`version is longer than ${WM} characters`);JE("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?ZE[QE.LOOSE]:ZE[QE.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>XE||this.major<0)throw new TypeError("Invalid major version");if(this.minor>XE||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>XE||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<XE)return i}return o}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(JE("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Zm(this.major,e.major)||Zm(this.minor,e.minor)||Zm(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],o=e.prerelease[n];if(JE("prerelease compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return Zm(r,o)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let r=this.build[n],o=e.build[n];if(JE("build compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return Zm(r,o)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let o=`-${n}`.match(this.options.loose?ZE[QE.PRERELEASELOOSE]:ZE[QE.PRERELEASE]);if(!o||o[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(n){let i=[n,o];r===!1&&(i=[n]),Zm(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};jM.exports=nT});var xf=$((Wwe,YM)=>{"use strict";var VM=Yr(),ZZ=(t,e,n=!1)=>{if(t instanceof VM)return t;try{return new VM(t,e)}catch(r){if(!n)return null;throw r}};YM.exports=ZZ});var GM=$((jwe,qM)=>{"use strict";var QZ=xf(),eQ=(t,e)=>{let n=QZ(t,e);return n?n.version:null};qM.exports=eQ});var KM=$((Vwe,zM)=>{"use strict";var tQ=xf(),nQ=(t,e)=>{let n=tQ(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};zM.exports=nQ});var ZM=$((Ywe,XM)=>{"use strict";var JM=Yr(),rQ=(t,e,n,r,o)=>{typeof n=="string"&&(o=r,r=n,n=void 0);try{return new JM(t instanceof JM?t.version:t,n).inc(e,r,o).version}catch{return null}};XM.exports=rQ});var tH=$((qwe,eH)=>{"use strict";var QM=xf(),oQ=(t,e)=>{let n=QM(t,null,!0),r=QM(e,null,!0),o=n.compare(r);if(o===0)return null;let i=o>0,s=i?n:r,a=i?r:n,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let u=c?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"};eH.exports=oQ});var rH=$((Gwe,nH)=>{"use strict";var iQ=Yr(),sQ=(t,e)=>new iQ(t,e).major;nH.exports=sQ});var iH=$((zwe,oH)=>{"use strict";var aQ=Yr(),cQ=(t,e)=>new aQ(t,e).minor;oH.exports=cQ});var aH=$((Kwe,sH)=>{"use strict";var lQ=Yr(),uQ=(t,e)=>new lQ(t,e).patch;sH.exports=uQ});var lH=$((Jwe,cH)=>{"use strict";var fQ=xf(),dQ=(t,e)=>{let n=fQ(t,e);return n&&n.prerelease.length?n.prerelease:null};cH.exports=dQ});var ki=$((Xwe,fH)=>{"use strict";var uH=Yr(),mQ=(t,e,n)=>new uH(t,n).compare(new uH(e,n));fH.exports=mQ});var mH=$((Zwe,dH)=>{"use strict";var pQ=ki(),hQ=(t,e,n)=>pQ(e,t,n);dH.exports=hQ});var hH=$((Qwe,pH)=>{"use strict";var gQ=ki(),vQ=(t,e)=>gQ(t,e,!0);pH.exports=vQ});var eS=$((eye,vH)=>{"use strict";var gH=Yr(),wQ=(t,e,n)=>{let r=new gH(t,n),o=new gH(e,n);return r.compare(o)||r.compareBuild(o)};vH.exports=wQ});var yH=$((tye,wH)=>{"use strict";var yQ=eS(),CQ=(t,e)=>t.sort((n,r)=>yQ(n,r,e));wH.exports=CQ});var EH=$((nye,CH)=>{"use strict";var EQ=eS(),SQ=(t,e)=>t.sort((n,r)=>EQ(r,n,e));CH.exports=SQ});var sv=$((rye,SH)=>{"use strict";var xQ=ki(),_Q=(t,e,n)=>xQ(t,e,n)>0;SH.exports=_Q});var tS=$((oye,xH)=>{"use strict";var DQ=ki(),IQ=(t,e,n)=>DQ(t,e,n)<0;xH.exports=IQ});var rT=$((iye,_H)=>{"use strict";var PQ=ki(),bQ=(t,e,n)=>PQ(t,e,n)===0;_H.exports=bQ});var oT=$((sye,DH)=>{"use strict";var TQ=ki(),RQ=(t,e,n)=>TQ(t,e,n)!==0;DH.exports=RQ});var nS=$((aye,IH)=>{"use strict";var kQ=ki(),NQ=(t,e,n)=>kQ(t,e,n)>=0;IH.exports=NQ});var rS=$((cye,PH)=>{"use strict";var LQ=ki(),AQ=(t,e,n)=>LQ(t,e,n)<=0;PH.exports=AQ});var iT=$((lye,bH)=>{"use strict";var FQ=rT(),OQ=oT(),UQ=sv(),$Q=nS(),MQ=tS(),HQ=rS(),BQ=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return FQ(t,n,r);case"!=":return OQ(t,n,r);case">":return UQ(t,n,r);case">=":return $Q(t,n,r);case"<":return MQ(t,n,r);case"<=":return HQ(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};bH.exports=BQ});var RH=$((uye,TH)=>{"use strict";var WQ=Yr(),jQ=xf(),{safeRe:oS,t:iS}=Xm(),VQ=(t,e)=>{if(t instanceof WQ)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?oS[iS.COERCEFULL]:oS[iS.COERCE]);else{let c=e.includePrerelease?oS[iS.COERCERTLFULL]:oS[iS.COERCERTL],l;for(;(l=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||l.index+l[0].length!==n.index+n[0].length)&&(n=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],o=n[3]||"0",i=n[4]||"0",s=e.includePrerelease&&n[5]?`-${n[5]}`:"",a=e.includePrerelease&&n[6]?`+${n[6]}`:"";return jQ(`${r}.${o}.${i}${s}${a}`,e)};TH.exports=VQ});var NH=$((fye,kH)=>{"use strict";var sT=class{constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,n)}return this}};kH.exports=sT});var Ni=$((dye,OH)=>{"use strict";var YQ=/\s+/g,aT=class t{constructor(e,n){if(n=GQ(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof cT)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(YQ," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(o=>!AH(o[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&eee(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&ZQ)|(this.options.loose&&QQ))+":"+e,o=LH.get(r);if(o)return o;let i=this.options.loose,s=i?No[ro.HYPHENRANGELOOSE]:No[ro.HYPHENRANGE];e=e.replace(s,uee(this.options.includePrerelease)),Ft("hyphen replace",e),e=e.replace(No[ro.COMPARATORTRIM],KQ),Ft("comparator trim",e),e=e.replace(No[ro.TILDETRIM],JQ),Ft("tilde trim",e),e=e.replace(No[ro.CARETTRIM],XQ),Ft("caret trim",e);let a=e.split(" ").map(f=>tee(f,this.options)).join(" ").split(/\s+/).map(f=>lee(f,this.options));i&&(a=a.filter(f=>(Ft("loose invalid filter",f,this.options),!!f.match(No[ro.COMPARATORLOOSE])))),Ft("range list",a);let c=new Map,l=a.map(f=>new cT(f,this.options));for(let f of l){if(AH(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return LH.set(r,u),u}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(r=>FH(r,n)&&e.set.some(o=>FH(o,n)&&r.every(i=>o.every(s=>i.intersects(s,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new zQ(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(fee(this.set[n],e,this.options))return!0;return!1}};OH.exports=aT;var qQ=NH(),LH=new qQ,GQ=KE(),cT=av(),Ft=iv(),zQ=Yr(),{safeRe:No,t:ro,comparatorTrimReplace:KQ,tildeTrimReplace:JQ,caretTrimReplace:XQ}=Xm(),{FLAG_INCLUDE_PRERELEASE:ZQ,FLAG_LOOSE:QQ}=ov(),AH=t=>t.value==="<0.0.0-0",eee=t=>t.value==="",FH=(t,e)=>{let n=!0,r=t.slice(),o=r.pop();for(;n&&r.length;)n=r.every(i=>o.intersects(i,e)),o=r.pop();return n},tee=(t,e)=>(Ft("comp",t,e),t=oee(t,e),Ft("caret",t),t=nee(t,e),Ft("tildes",t),t=see(t,e),Ft("xrange",t),t=cee(t,e),Ft("stars",t),t),oo=t=>!t||t.toLowerCase()==="x"||t==="*",nee=(t,e)=>t.trim().split(/\s+/).map(n=>ree(n,e)).join(" "),ree=(t,e)=>{let n=e.loose?No[ro.TILDELOOSE]:No[ro.TILDE];return t.replace(n,(r,o,i,s,a)=>{Ft("tilde",t,r,o,i,s,a);let c;return oo(o)?c="":oo(i)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:oo(s)?c=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:a?(Ft("replaceTilde pr",a),c=`>=${o}.${i}.${s}-${a} <${o}.${+i+1}.0-0`):c=`>=${o}.${i}.${s} <${o}.${+i+1}.0-0`,Ft("tilde return",c),c})},oee=(t,e)=>t.trim().split(/\s+/).map(n=>iee(n,e)).join(" "),iee=(t,e)=>{Ft("caret",t,e);let n=e.loose?No[ro.CARETLOOSE]:No[ro.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(o,i,s,a,c)=>{Ft("caret",t,o,i,s,a,c);let l;return oo(i)?l="":oo(s)?l=`>=${i}.0.0${r} <${+i+1}.0.0-0`:oo(a)?i==="0"?l=`>=${i}.${s}.0${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.0${r} <${+i+1}.0.0-0`:c?(Ft("replaceCaret pr",c),i==="0"?s==="0"?l=`>=${i}.${s}.${a}-${c} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a}-${c} <${+i+1}.0.0-0`):(Ft("no pr"),i==="0"?s==="0"?l=`>=${i}.${s}.${a}${r} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a} <${+i+1}.0.0-0`),Ft("caret return",l),l})},see=(t,e)=>(Ft("replaceXRanges",t,e),t.split(/\s+/).map(n=>aee(n,e)).join(" ")),aee=(t,e)=>{t=t.trim();let n=e.loose?No[ro.XRANGELOOSE]:No[ro.XRANGE];return t.replace(n,(r,o,i,s,a,c)=>{Ft("xRange",t,r,o,i,s,a,c);let l=oo(i),u=l||oo(s),f=u||oo(a),m=f;return o==="="&&m&&(o=""),c=e.includePrerelease?"-0":"",l?o===">"||o==="<"?r="<0.0.0-0":r="*":o&&m?(u&&(s=0),a=0,o===">"?(o=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):o==="<="&&(o="<",u?i=+i+1:s=+s+1),o==="<"&&(c="-0"),r=`${o+i}.${s}.${a}${c}`):u?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(r=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),Ft("xRange return",r),r})},cee=(t,e)=>(Ft("replaceStars",t,e),t.trim().replace(No[ro.STAR],"")),lee=(t,e)=>(Ft("replaceGTE0",t,e),t.trim().replace(No[e.includePrerelease?ro.GTE0PRE:ro.GTE0],"")),uee=t=>(e,n,r,o,i,s,a,c,l,u,f,m)=>(oo(r)?n="":oo(o)?n=`>=${r}.0.0${t?"-0":""}`:oo(i)?n=`>=${r}.${o}.0${t?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,oo(l)?c="":oo(u)?c=`<${+l+1}.0.0-0`:oo(f)?c=`<${l}.${+u+1}.0-0`:m?c=`<=${l}.${u}.${f}-${m}`:t?c=`<${l}.${u}.${+f+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),fee=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Ft(t[r].semver),t[r].semver!==cT.ANY&&t[r].semver.prerelease.length>0){let o=t[r].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var av=$((mye,WH)=>{"use strict";var cv=Symbol("SemVer ANY"),fT=class t{static get ANY(){return cv}constructor(e,n){if(n=UH(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),uT("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===cv?this.value="":this.value=this.operator+this.semver.version,uT("comp",this)}parse(e){let n=this.options.loose?$H[MH.COMPARATORLOOSE]:$H[MH.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new HH(r[2],this.options.loose):this.semver=cv}toString(){return this.value}test(e){if(uT("Comparator.test",e,this.options.loose),this.semver===cv||e===cv)return!0;if(typeof e=="string")try{e=new HH(e,this.options)}catch{return!1}return lT(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new BH(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new BH(this.value,n).test(e.semver):(n=UH(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||lT(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||lT(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};WH.exports=fT;var UH=KE(),{safeRe:$H,t:MH}=Xm(),lT=iT(),uT=iv(),HH=Yr(),BH=Ni()});var lv=$((pye,jH)=>{"use strict";var dee=Ni(),mee=(t,e,n)=>{try{e=new dee(e,n)}catch{return!1}return e.test(t)};jH.exports=mee});var YH=$((hye,VH)=>{"use strict";var pee=Ni(),hee=(t,e)=>new pee(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));VH.exports=hee});var GH=$((gye,qH)=>{"use strict";var gee=Yr(),vee=Ni(),wee=(t,e,n)=>{let r=null,o=null,i=null;try{i=new vee(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===-1)&&(r=s,o=new gee(r,n))}),r};qH.exports=wee});var KH=$((vye,zH)=>{"use strict";var yee=Yr(),Cee=Ni(),Eee=(t,e,n)=>{let r=null,o=null,i=null;try{i=new Cee(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===1)&&(r=s,o=new yee(r,n))}),r};zH.exports=Eee});var ZH=$((wye,XH)=>{"use strict";var dT=Yr(),See=Ni(),JH=sv(),xee=(t,e)=>{t=new See(t,e);let n=new dT("0.0.0");if(t.test(n)||(n=new dT("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let o=t.set[r],i=null;o.forEach(s=>{let a=new dT(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||JH(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!n||JH(n,i))&&(n=i)}return n&&t.test(n)?n:null};XH.exports=xee});var e2=$((yye,QH)=>{"use strict";var _ee=Ni(),Dee=(t,e)=>{try{return new _ee(t,e).range||"*"}catch{return null}};QH.exports=Dee});var sS=$((Cye,o2)=>{"use strict";var Iee=Yr(),r2=av(),{ANY:Pee}=r2,bee=Ni(),Tee=lv(),t2=sv(),n2=tS(),Ree=rS(),kee=nS(),Nee=(t,e,n,r)=>{t=new Iee(t,r),e=new bee(e,r);let o,i,s,a,c;switch(n){case">":o=t2,i=Ree,s=n2,a=">",c=">=";break;case"<":o=n2,i=kee,s=t2,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Tee(t,e,r))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],f=null,m=null;if(u.forEach(d=>{d.semver===Pee&&(d=new r2(">=0.0.0")),f=f||d,m=m||d,o(d.semver,f.semver,r)?f=d:s(d.semver,m.semver,r)&&(m=d)}),f.operator===a||f.operator===c||(!m.operator||m.operator===a)&&i(t,m.semver))return!1;if(m.operator===c&&s(t,m.semver))return!1}return!0};o2.exports=Nee});var s2=$((Eye,i2)=>{"use strict";var Lee=sS(),Aee=(t,e,n)=>Lee(t,e,">",n);i2.exports=Aee});var c2=$((Sye,a2)=>{"use strict";var Fee=sS(),Oee=(t,e,n)=>Fee(t,e,"<",n);a2.exports=Oee});var f2=$((xye,u2)=>{"use strict";var l2=Ni(),Uee=(t,e,n)=>(t=new l2(t,n),e=new l2(e,n),t.intersects(e,n));u2.exports=Uee});var m2=$((_ye,d2)=>{"use strict";var $ee=lv(),Mee=ki();d2.exports=(t,e,n)=>{let r=[],o=null,i=null,s=t.sort((u,f)=>Mee(u,f,n));for(let u of s)$ee(u,e,n)?(i=u,o||(o=u)):(i&&r.push([o,i]),i=null,o=null);o&&r.push([o,null]);let a=[];for(let[u,f]of r)u===f?a.push(u):!f&&u===s[0]?a.push("*"):f?u===s[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var y2=$((Dye,w2)=>{"use strict";var p2=Ni(),pT=av(),{ANY:mT}=pT,uv=lv(),hT=ki(),Hee=(t,e,n={})=>{if(t===e)return!0;t=new p2(t,n),e=new p2(e,n);let r=!1;e:for(let o of t.set){for(let i of e.set){let s=Wee(o,i,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},Bee=[new pT(">=0.0.0-0")],h2=[new pT(">=0.0.0")],Wee=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===mT){if(e.length===1&&e[0].semver===mT)return!0;n.includePrerelease?t=Bee:t=h2}if(e.length===1&&e[0].semver===mT){if(n.includePrerelease)return!0;e=h2}let r=new Set,o,i;for(let d of t)d.operator===">"||d.operator===">="?o=g2(o,d,n):d.operator==="<"||d.operator==="<="?i=v2(i,d,n):r.add(d.semver);if(r.size>1)return null;let s;if(o&&i){if(s=hT(o.semver,i.semver,n),s>0)return null;if(s===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let d of r){if(o&&!uv(d,String(o),n)||i&&!uv(d,String(i),n))return null;for(let p of e)if(!uv(d,String(p),n))return!1;return!0}let a,c,l,u,f=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(u=u||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",o){if(m&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===m.major&&d.semver.minor===m.minor&&d.semver.patch===m.patch&&(m=!1),d.operator===">"||d.operator===">="){if(a=g2(o,d,n),a===d&&a!==o)return!1}else if(o.operator===">="&&!uv(o.semver,String(d),n))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(c=v2(i,d,n),c===d&&c!==i)return!1}else if(i.operator==="<="&&!uv(i.semver,String(d),n))return!1}if(!d.operator&&(i||o)&&s!==0)return!1}return!(o&&l&&!i&&s!==0||i&&u&&!o&&s!==0||m||f)},g2=(t,e,n)=>{if(!t)return e;let r=hT(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},v2=(t,e,n)=>{if(!t)return e;let r=hT(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};w2.exports=Hee});var vT=$((Iye,S2)=>{"use strict";var gT=Xm(),C2=ov(),jee=Yr(),E2=tT(),Vee=xf(),Yee=GM(),qee=KM(),Gee=ZM(),zee=tH(),Kee=rH(),Jee=iH(),Xee=aH(),Zee=lH(),Qee=ki(),ete=mH(),tte=hH(),nte=eS(),rte=yH(),ote=EH(),ite=sv(),ste=tS(),ate=rT(),cte=oT(),lte=nS(),ute=rS(),fte=iT(),dte=RH(),mte=av(),pte=Ni(),hte=lv(),gte=YH(),vte=GH(),wte=KH(),yte=ZH(),Cte=e2(),Ete=sS(),Ste=s2(),xte=c2(),_te=f2(),Dte=m2(),Ite=y2();S2.exports={parse:Vee,valid:Yee,clean:qee,inc:Gee,diff:zee,major:Kee,minor:Jee,patch:Xee,prerelease:Zee,compare:Qee,rcompare:ete,compareLoose:tte,compareBuild:nte,sort:rte,rsort:ote,gt:ite,lt:ste,eq:ate,neq:cte,gte:lte,lte:ute,cmp:fte,coerce:dte,Comparator:mte,Range:pte,satisfies:hte,toComparators:gte,maxSatisfying:vte,minSatisfying:wte,minVersion:yte,validRange:Cte,outside:Ete,gtr:Ste,ltr:xte,intersects:_te,simplifyRange:Dte,subset:Ite,SemVer:jee,re:gT.re,src:gT.src,tokens:gT.t,SEMVER_SPEC_VERSION:C2.SEMVER_SPEC_VERSION,RELEASE_TYPES:C2.RELEASE_TYPES,compareIdentifiers:E2.compareIdentifiers,rcompareIdentifiers:E2.rcompareIdentifiers}});var wT=$((Pye,x2)=>{x2.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var aS=$(D2=>{var _2={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function Pte(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(n,r)=>e[r]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(_2))D2[t]=Pte(_2[t])});var R2=$((Tye,T2)=>{var bte=require("fs"),Vn=require("path"),I2=wT(),Tte=aS(),Rte=typeof process=="object"&&process.platform==="win32",P2=t=>typeof t=="object"&&t!==null,b2=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function an(t){this.sep=Vn.sep,this.fs=bte,P2(t)&&P2(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}T2.exports=an;an.prototype.makeDir=function(t){let e=this;function n(r){let o=r.split(e.sep)[0];r.split(e.sep).forEach(function(i){if(!(!i||i.substr(-1,1)===":")){o+=e.sep+i;var s;try{s=e.fs.statSync(o)}catch{e.fs.mkdirSync(o)}if(s&&s.isFile())throw Tte.FILE_IN_THE_WAY(`"${o}"`)}})}n(t)};an.prototype.writeFileTo=function(t,e,n,r){let o=this;if(o.fs.existsSync(t)){if(!n)return!1;var i=o.fs.statSync(t);if(i.isDirectory())return!1}var s=Vn.dirname(t);o.fs.existsSync(s)||o.makeDir(s);var a;try{a=o.fs.openSync(t,"w",438)}catch{o.fs.chmodSync(t,438),a=o.fs.openSync(t,"w",438)}if(a)try{o.fs.writeSync(a,e,0,e.length,0)}finally{o.fs.closeSync(a)}return o.fs.chmodSync(t,r||438),!0};an.prototype.writeFileToAsync=function(t,e,n,r,o){typeof r=="function"&&(o=r,r=void 0);let i=this;i.fs.exists(t,function(s){if(s&&!n)return o(!1);i.fs.stat(t,function(a,c){if(s&&c.isDirectory())return o(!1);var l=Vn.dirname(t);i.fs.exists(l,function(u){u||i.makeDir(l),i.fs.open(t,"w",438,function(f,m){f?i.fs.chmod(t,438,function(){i.fs.open(t,"w",438,function(d,p){i.fs.write(p,e,0,e.length,0,function(){i.fs.close(p,function(){i.fs.chmod(t,r||438,function(){o(!0)})})})})}):m?i.fs.write(m,e,0,e.length,0,function(){i.fs.close(m,function(){i.fs.chmod(t,r||438,function(){o(!0)})})}):i.fs.chmod(t,r||438,function(){o(!0)})})})})})};an.prototype.findFiles=function(t){let e=this;function n(r,o,i){typeof o=="boolean"&&(i=o,o=void 0);let s=[];return e.fs.readdirSync(r).forEach(function(a){let c=Vn.join(r,a),l=e.fs.statSync(c);(!o||o.test(c))&&s.push(Vn.normalize(c)+(l.isDirectory()?e.sep:"")),l.isDirectory()&&i&&(s=s.concat(n(c,o,i)))}),s}return n(t,void 0,!0)};an.prototype.findFilesAsync=function(t,e){let n=this,r=[];n.fs.readdir(t,function(o,i){if(o)return e(o);let s=i.length;if(!s)return e(null,r);i.forEach(function(a){a=Vn.join(t,a),n.fs.stat(a,function(c,l){if(c)return e(c);l&&(r.push(Vn.normalize(a)+(l.isDirectory()?n.sep:"")),l.isDirectory()?n.findFilesAsync(a,function(u,f){if(u)return e(u);r=r.concat(f),--s||e(null,r)}):--s||e(null,r))})})})};an.prototype.getAttributes=function(){};an.prototype.setAttributes=function(){};an.crc32update=function(t,e){return b2[(t^e)&255]^t>>>8};an.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,n=-1;for(let r=0;r<e;)n=an.crc32update(n,t[r++]);return~n>>>0};an.methodToString=function(t){switch(t){case I2.STORED:return"STORED ("+t+")";case I2.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};an.canonical=function(t){if(!t)return"";let e=Vn.posix.normalize("/"+t.split("\\").join("/"));return Vn.join(".",e)};an.zipnamefix=function(t){if(!t)return"";let e=Vn.posix.normalize("/"+t.split("\\").join("/"));return Vn.posix.join(".",e)};an.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let n=t.length>>>0;for(let r=n-1;r>=0;r--)if(e(t[r],r,t))return t[r]};an.sanitize=function(t,e){t=Vn.resolve(Vn.normalize(t));for(var n=e.split("/"),r=0,o=n.length;r<o;r++){var i=Vn.normalize(Vn.join(t,n.slice(r,o).join(Vn.sep)));if(i.indexOf(t)===0)return i}return Vn.normalize(Vn.join(t,Vn.basename(e)))};an.toBuffer=function(e,n){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?n(e):Buffer.alloc(0)};an.readBigUInt64LE=function(t,e){var n=Buffer.from(t.slice(e,e+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)};an.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};an.fromDate2DOS=function(t){let e=0,n=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),n=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|n};an.isWin=Rte;an.crcTable=b2});var N2=$((Rye,k2)=>{var kte=require("path");k2.exports=function(t,{fs:e}){var n=t||"",r=i(),o=null;function i(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return n&&e.existsSync(n)?(o=e.statSync(n),r.directory=o.isDirectory(),r.mtime=o.mtime,r.atime=o.atime,r.executable=(73&o.mode)!==0,r.readonly=(128&o.mode)===0,r.hidden=kte.basename(n)[0]==="."):console.warn("Invalid path: "+n),{get directory(){return r.directory},get readOnly(){return r.readonly},get hidden(){return r.hidden},get mtime(){return r.mtime},get atime(){return r.atime},get executable(){return r.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:n,isDirectory:r.directory,isReadOnly:r.readonly,isHidden:r.hidden,isExecutable:r.executable,mTime:r.mtime,aTime:r.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var A2=$((kye,L2)=>{L2.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var ep=$((Nye,Qm)=>{Qm.exports=R2();Qm.exports.Constants=wT();Qm.exports.Errors=aS();Qm.exports.FileAttr=N2();Qm.exports.decoder=A2()});var O2=$((Lye,F2)=>{var El=ep(),de=El.Constants;F2.exports=function(){var t=20,e=10,n=0,r=0,o=0,i=0,s=0,a=0,c=0,l=0,u=0,f=0,m=0,d=0,p=0;t|=El.isWin?2560:768,n|=de.FLG_EFS;let h={extraLen:0},g=w=>Math.max(0,w)>>>0,v=w=>Math.max(0,w)&65535,C=w=>Math.max(0,w)&255;return o=El.fromDate2DOS(new Date),{get made(){return t},set made(w){t=w},get version(){return e},set version(w){e=w},get flags(){return n},set flags(w){n=w},get flags_efs(){return(n&de.FLG_EFS)>0},set flags_efs(w){w?n|=de.FLG_EFS:n&=~de.FLG_EFS},get flags_desc(){return(n&de.FLG_DESC)>0},set flags_desc(w){w?n|=de.FLG_DESC:n&=~de.FLG_DESC},get method(){return r},set method(w){switch(w){case de.STORED:this.version=10;case de.DEFLATED:default:this.version=20}r=w},get time(){return El.fromDOS2Date(this.timeval)},set time(w){this.timeval=El.fromDate2DOS(w)},get timeval(){return o},set timeval(w){o=g(w)},get timeHighByte(){return C(o>>>8)},get crc(){return i},set crc(w){i=g(w)},get compressedSize(){return s},set compressedSize(w){s=g(w)},get size(){return a},set size(w){a=g(w)},get fileNameLength(){return c},set fileNameLength(w){c=w},get extraLength(){return l},set extraLength(w){l=w},get extraLocalLength(){return h.extraLen},set extraLocalLength(w){h.extraLen=w},get commentLength(){return u},set commentLength(w){u=w},get diskNumStart(){return f},set diskNumStart(w){f=g(w)},get inAttr(){return m},set inAttr(w){m=g(w)},get attr(){return d},set attr(w){d=g(w)},get fileAttr(){return(d||0)>>16&4095},get offset(){return p},set offset(w){p=g(w)},get encrypted(){return(n&de.FLG_ENC)===de.FLG_ENC},get centralHeaderSize(){return de.CENHDR+c+l+u},get realDataOffset(){return p+de.LOCHDR+h.fnameLen+h.extraLen},get localHeader(){return h},loadLocalHeaderFromBinary:function(w){var y=w.slice(p,p+de.LOCHDR);if(y.readUInt32LE(0)!==de.LOCSIG)throw El.Errors.INVALID_LOC();h.version=y.readUInt16LE(de.LOCVER),h.flags=y.readUInt16LE(de.LOCFLG),h.method=y.readUInt16LE(de.LOCHOW),h.time=y.readUInt32LE(de.LOCTIM),h.crc=y.readUInt32LE(de.LOCCRC),h.compressedSize=y.readUInt32LE(de.LOCSIZ),h.size=y.readUInt32LE(de.LOCLEN),h.fnameLen=y.readUInt16LE(de.LOCNAM),h.extraLen=y.readUInt16LE(de.LOCEXT);let S=p+de.LOCHDR+h.fnameLen,I=S+h.extraLen;return w.slice(S,I)},loadFromBinary:function(w){if(w.length!==de.CENHDR||w.readUInt32LE(0)!==de.CENSIG)throw El.Errors.INVALID_CEN();t=w.readUInt16LE(de.CENVEM),e=w.readUInt16LE(de.CENVER),n=w.readUInt16LE(de.CENFLG),r=w.readUInt16LE(de.CENHOW),o=w.readUInt32LE(de.CENTIM),i=w.readUInt32LE(de.CENCRC),s=w.readUInt32LE(de.CENSIZ),a=w.readUInt32LE(de.CENLEN),c=w.readUInt16LE(de.CENNAM),l=w.readUInt16LE(de.CENEXT),u=w.readUInt16LE(de.CENCOM),f=w.readUInt16LE(de.CENDSK),m=w.readUInt16LE(de.CENATT),d=w.readUInt32LE(de.CENATX),p=w.readUInt32LE(de.CENOFF)},localHeaderToBinary:function(){var w=Buffer.alloc(de.LOCHDR);return w.writeUInt32LE(de.LOCSIG,0),w.writeUInt16LE(e,de.LOCVER),w.writeUInt16LE(n,de.LOCFLG),w.writeUInt16LE(r,de.LOCHOW),w.writeUInt32LE(o,de.LOCTIM),w.writeUInt32LE(i,de.LOCCRC),w.writeUInt32LE(s,de.LOCSIZ),w.writeUInt32LE(a,de.LOCLEN),w.writeUInt16LE(c,de.LOCNAM),w.writeUInt16LE(h.extraLen,de.LOCEXT),w},centralHeaderToBinary:function(){var w=Buffer.alloc(de.CENHDR+c+l+u);return w.writeUInt32LE(de.CENSIG,0),w.writeUInt16LE(t,de.CENVEM),w.writeUInt16LE(e,de.CENVER),w.writeUInt16LE(n,de.CENFLG),w.writeUInt16LE(r,de.CENHOW),w.writeUInt32LE(o,de.CENTIM),w.writeUInt32LE(i,de.CENCRC),w.writeUInt32LE(s,de.CENSIZ),w.writeUInt32LE(a,de.CENLEN),w.writeUInt16LE(c,de.CENNAM),w.writeUInt16LE(l,de.CENEXT),w.writeUInt16LE(u,de.CENCOM),w.writeUInt16LE(f,de.CENDSK),w.writeUInt16LE(m,de.CENATT),w.writeUInt32LE(d,de.CENATX),w.writeUInt32LE(p,de.CENOFF),w},toJSON:function(){let w=function(y){return y+" bytes"};return{made:t,version:e,flags:n,method:El.methodToString(r),time:this.time,crc:"0x"+i.toString(16).toUpperCase(),compressedSize:w(s),size:w(a),fileNameLength:w(c),extraLength:w(l),commentLength:w(u),diskNumStart:f,inAttr:m,attr:d,offset:p,centralHeaderSize:w(de.CENHDR+c+l+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var $2=$((Aye,U2)=>{var tp=ep(),Zt=tp.Constants;U2.exports=function(){var t=0,e=0,n=0,r=0,o=0;return{get diskEntries(){return t},set diskEntries(i){t=e=i},get totalEntries(){return e},set totalEntries(i){e=t=i},get size(){return n},set size(i){n=i},get offset(){return r},set offset(i){r=i},get commentLength(){return o},set commentLength(i){o=i},get mainHeaderSize(){return Zt.ENDHDR+o},loadFromBinary:function(i){if((i.length!==Zt.ENDHDR||i.readUInt32LE(0)!==Zt.ENDSIG)&&(i.length<Zt.ZIP64HDR||i.readUInt32LE(0)!==Zt.ZIP64SIG))throw tp.Errors.INVALID_END();i.readUInt32LE(0)===Zt.ENDSIG?(t=i.readUInt16LE(Zt.ENDSUB),e=i.readUInt16LE(Zt.ENDTOT),n=i.readUInt32LE(Zt.ENDSIZ),r=i.readUInt32LE(Zt.ENDOFF),o=i.readUInt16LE(Zt.ENDCOM)):(t=tp.readBigUInt64LE(i,Zt.ZIP64SUB),e=tp.readBigUInt64LE(i,Zt.ZIP64TOT),n=tp.readBigUInt64LE(i,Zt.ZIP64SIZE),r=tp.readBigUInt64LE(i,Zt.ZIP64OFF),o=0)},toBinary:function(){var i=Buffer.alloc(Zt.ENDHDR+o);return i.writeUInt32LE(Zt.ENDSIG,0),i.writeUInt32LE(0,4),i.writeUInt16LE(t,Zt.ENDSUB),i.writeUInt16LE(e,Zt.ENDTOT),i.writeUInt32LE(n,Zt.ENDSIZ),i.writeUInt32LE(r,Zt.ENDOFF),i.writeUInt16LE(o,Zt.ENDCOM),i.fill(" ",Zt.ENDHDR),i},toJSON:function(){let i=function(s,a){let c=s.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c};return{diskEntries:t,totalEntries:e,size:n+" bytes",offset:i(r,4),commentLength:o}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var CT=$(yT=>{yT.EntryHeader=O2();yT.MainHeader=$2()});var H2=$((Oye,M2)=>{M2.exports=function(t){var e=require("zlib"),n={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,n)},deflateAsync:function(r){var o=e.createDeflateRaw(n),i=[],s=0;o.on("data",function(a){i.push(a),s+=a.length}),o.on("end",function(){var a=Buffer.alloc(s),c=0;a.fill(0);for(var l=0;l<i.length;l++){var u=i[l];u.copy(a,c),c+=u.length}r&&r(a)}),o.end(t)}}}});var W2=$((Uye,B2)=>{var Nte=+(process.versions?process.versions.node:"").split(".")[0]||0;B2.exports=function(t,e){var n=require("zlib");let r=Nte>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return n.inflateRawSync(t,r)},inflateAsync:function(o){var i=n.createInflateRaw(r),s=[],a=0;i.on("data",function(c){s.push(c),a+=c.length}),i.on("end",function(){var c=Buffer.alloc(a),l=0;c.fill(0);for(var u=0;u<s.length;u++){var f=s[u];f.copy(c,l),l+=f.length}o&&o(c)}),i.end(t)}}}});var G2=$(($ye,q2)=>{"use strict";var{randomFillSync:j2}=require("crypto"),Lte=aS(),Ate=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),Y2=(t,e)=>Math.imul(t,e)>>>0,V2=(t,e)=>Ate[(t^e)&255]^t>>>8,fv=()=>typeof j2=="function"?j2(Buffer.alloc(12)):fv.node();fv.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let n=0;n<e;n++)t[n]=Math.random()*256&255;return t};var cS={genSalt:fv};function lS(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let n=0;n<e.length;n++)this.updateKeys(e[n])}lS.prototype.updateKeys=function(t){let e=this.keys;return e[0]=V2(e[0],t),e[1]+=e[0]&255,e[1]=Y2(e[1],134775813)+1,e[2]=V2(e[2],e[1]>>>24),t};lS.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return Y2(t,t^1)>>8&255};function Fte(t){let e=new lS(t);return function(n){let r=Buffer.alloc(n.length),o=0;for(let i of n)r[o++]=e.updateKeys(i^e.next());return r}}function Ote(t){let e=new lS(t);return function(n,r,o=0){r||(r=Buffer.alloc(n.length));for(let i of n){let s=e.next();r[o++]=i^s,e.updateKeys(i)}return r}}function Ute(t,e,n){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let r=Fte(n),o=r(t.slice(0,12)),i=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(o[11]!==i)throw Lte.WRONG_PASSWORD();return r(t.slice(12))}function $te(t){Buffer.isBuffer(t)&&t.length>=12?cS.genSalt=function(){return t.slice(0,12)}:t==="node"?cS.genSalt=fv.node:cS.genSalt=fv}function Mte(t,e,n,r=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let o=Ote(n),i=cS.genSalt();i[11]=e.crc>>>24&255,r&&(i[10]=e.crc>>>16&255);let s=Buffer.alloc(t.length+12);return o(i,s),o(t,s,12)}q2.exports={decrypt:Ute,encrypt:Mte,_salter:$te}});var z2=$(uS=>{uS.Deflater=H2();uS.Inflater=W2();uS.ZipCrypto=G2()});var ST=$((Hye,K2)=>{var Ct=ep(),Hte=CT(),cn=Ct.Constants,ET=z2();K2.exports=function(t,e){var n=new Hte.EntryHeader,r=Buffer.alloc(0),o=Buffer.alloc(0),i=!1,s=null,a=Buffer.alloc(0),c=Buffer.alloc(0),l=!0;let u=t,f=typeof u.decoder=="object"?u.decoder:Ct.decoder;l=f.hasOwnProperty("efs")?f.efs:!1;function m(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(c=n.loadLocalHeaderFromBinary(e),e.slice(n.realDataOffset,n.realDataOffset+n.compressedSize))}function d(w){if(n.flags_desc){let y={},S=n.realDataOffset+n.compressedSize;if(e.readUInt32LE(S)==cn.LOCSIG||e.readUInt32LE(S)==cn.CENSIG)throw Ct.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(S)==cn.EXTSIG)y.crc=e.readUInt32LE(S+cn.EXTCRC),y.compressedSize=e.readUInt32LE(S+cn.EXTSIZ),y.size=e.readUInt32LE(S+cn.EXTLEN);else if(e.readUInt16LE(S+12)===19280)y.crc=e.readUInt32LE(S+cn.EXTCRC-4),y.compressedSize=e.readUInt32LE(S+cn.EXTSIZ-4),y.size=e.readUInt32LE(S+cn.EXTLEN-4);else throw Ct.Errors.DESCRIPTOR_UNKNOWN();if(y.compressedSize!==n.compressedSize||y.size!==n.size||y.crc!==n.crc)throw Ct.Errors.DESCRIPTOR_FAULTY();if(Ct.crc32(w)!==y.crc)return!1}else if(Ct.crc32(w)!==n.localHeader.crc)return!1;return!0}function p(w,y,S){if(typeof y>"u"&&typeof w=="string"&&(S=w,w=void 0),i)return w&&y&&y(Buffer.alloc(0),Ct.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var I=m();if(I.length===0)return w&&y&&y(I),I;if(n.encrypted){if(typeof S!="string"&&!Buffer.isBuffer(S))throw Ct.Errors.INVALID_PASS_PARAM();I=ET.ZipCrypto.decrypt(I,n,S)}var x=Buffer.alloc(n.size);switch(n.method){case Ct.Constants.STORED:if(I.copy(x),d(x))return w&&y&&y(x),x;throw w&&y&&y(x,Ct.Errors.BAD_CRC()),Ct.Errors.BAD_CRC();case Ct.Constants.DEFLATED:var A=new ET.Inflater(I,n.size);if(w)A.inflateAsync(function(F){F.copy(F,0),y&&(d(F)?y(F):y(F,Ct.Errors.BAD_CRC()))});else{if(A.inflate(x).copy(x,0),!d(x))throw Ct.Errors.BAD_CRC(`"${f.decode(r)}"`);return x}break;default:throw w&&y&&y(Buffer.alloc(0),Ct.Errors.UNKNOWN_METHOD()),Ct.Errors.UNKNOWN_METHOD()}}function h(w,y){if((!s||!s.length)&&Buffer.isBuffer(e))return w&&y&&y(m()),m();if(s.length&&!i){var S;switch(n.method){case Ct.Constants.STORED:return n.compressedSize=n.size,S=Buffer.alloc(s.length),s.copy(S),w&&y&&y(S),S;default:case Ct.Constants.DEFLATED:var I=new ET.Deflater(s);if(w)I.deflateAsync(function(A){S=Buffer.alloc(A.length),n.compressedSize=A.length,A.copy(S),y&&y(S)});else{var x=I.deflate();return n.compressedSize=x.length,x}I=null;break}}else if(w&&y)y(Buffer.alloc(0));else return Buffer.alloc(0)}function g(w,y){return(w.readUInt32LE(y+4)<<4)+w.readUInt32LE(y)}function v(w){try{for(var y=0,S,I,x;y+4<w.length;)S=w.readUInt16LE(y),y+=2,I=w.readUInt16LE(y),y+=2,x=w.slice(y,y+I),y+=I,cn.ID_ZIP64===S&&C(x)}catch{throw Ct.Errors.EXTRA_FIELD_PARSE_ERROR()}}function C(w){var y,S,I,x;w.length>=cn.EF_ZIP64_SCOMP&&(y=g(w,cn.EF_ZIP64_SUNCOMP),n.size===cn.EF_ZIP64_OR_32&&(n.size=y)),w.length>=cn.EF_ZIP64_RHO&&(S=g(w,cn.EF_ZIP64_SCOMP),n.compressedSize===cn.EF_ZIP64_OR_32&&(n.compressedSize=S)),w.length>=cn.EF_ZIP64_DSN&&(I=g(w,cn.EF_ZIP64_RHO),n.offset===cn.EF_ZIP64_OR_32&&(n.offset=I)),w.length>=cn.EF_ZIP64_DSN+4&&(x=w.readUInt32LE(cn.EF_ZIP64_DSN),n.diskNumStart===cn.EF_ZIP64_OR_16&&(n.diskNumStart=x))}return{get entryName(){return f.decode(r)},get rawEntryName(){return r},set entryName(w){r=Ct.toBuffer(w,f.encode);var y=r[r.length-1];i=y===47||y===92,n.fileNameLength=r.length},get efs(){return typeof l=="function"?l(this.entryName):l},get extra(){return a},set extra(w){a=w,n.extraLength=w.length,v(w)},get comment(){return f.decode(o)},set comment(w){if(o=Ct.toBuffer(w,f.encode),n.commentLength=o.length,o.length>65535)throw Ct.Errors.COMMENT_TOO_LONG()},get name(){var w=f.decode(r);return i?w.substr(w.length-1).split("/").pop():w.split("/").pop()},get isDirectory(){return i},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(w){h(!0,w)},setData:function(w){s=Ct.toBuffer(w,Ct.decoder.encode),!i&&s.length?(n.size=s.length,n.method=Ct.Constants.DEFLATED,n.crc=Ct.crc32(w),n.changed=!0):n.method=Ct.Constants.STORED},getData:function(w){return n.changed?s:p(!1,null,w)},getDataAsync:function(w,y){n.changed?w(s):p(!0,w,y)},set attr(w){n.attr=w},get attr(){return n.attr},set header(w){n.loadFromBinary(w)},get header(){return n},packCentralHeader:function(){n.flags_efs=this.efs,n.extraLength=a.length;var w=n.centralHeaderToBinary(),y=Ct.Constants.CENHDR;return r.copy(w,y),y+=r.length,a.copy(w,y),y+=n.extraLength,o.copy(w,y),w},packLocalHeader:function(){let w=0;n.flags_efs=this.efs,n.extraLocalLength=c.length;let y=n.localHeaderToBinary(),S=Buffer.alloc(y.length+r.length+n.extraLocalLength);return y.copy(S,w),w+=y.length,r.copy(S,w),w+=r.length,c.copy(S,w),w+=c.length,S},toJSON:function(){let w=function(y){return"<"+(y&&y.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:n.toJSON(),compressedData:w(e),data:w(s)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Z2=$((Bye,X2)=>{var J2=ST(),Bte=CT(),Sr=ep();X2.exports=function(t,e){var n=[],r={},o=Buffer.alloc(0),i=new Bte.MainHeader,s=!1,a=null;let c=new Set,l=e,{noSort:u,decoder:f}=l;t?p(l.readEntries):s=!0;function m(){let g=new Set;for(let v of Object.keys(r)){let C=v.split("/");if(C.pop(),!!C.length)for(let w=0;w<C.length;w++){let y=C.slice(0,w+1).join("/")+"/";g.add(y)}}for(let v of g)if(!(v in r)){let C=new J2(l);C.entryName=v,C.attr=16,C.temporary=!0,n.push(C),r[C.entryName]=C,c.add(C)}}function d(){if(s=!0,r={},i.diskEntries>(t.length-i.offset)/Sr.Constants.CENHDR)throw Sr.Errors.DISK_ENTRY_TOO_LARGE();n=new Array(i.diskEntries);for(var g=i.offset,v=0;v<n.length;v++){var C=g,w=new J2(l,t);w.header=t.slice(C,C+=Sr.Constants.CENHDR),w.entryName=t.slice(C,C+=w.header.fileNameLength),w.header.extraLength&&(w.extra=t.slice(C,C+=w.header.extraLength)),w.header.commentLength&&(w.comment=t.slice(C,C+w.header.commentLength)),g+=w.header.centralHeaderSize,n[v]=w,r[w.entryName]=w}c.clear(),m()}function p(g){var v=t.length-Sr.Constants.ENDHDR,C=Math.max(0,v-65535),w=C,y=t.length,S=-1,I=0;for((typeof l.trailingSpace=="boolean"?l.trailingSpace:!1)&&(C=0),v;v>=w;v--)if(t[v]===80){if(t.readUInt32LE(v)===Sr.Constants.ENDSIG){S=v,I=v,y=v+Sr.Constants.ENDHDR,w=v-Sr.Constants.END64HDR;continue}if(t.readUInt32LE(v)===Sr.Constants.END64SIG){w=C;continue}if(t.readUInt32LE(v)===Sr.Constants.ZIP64SIG){S=v,y=v+Sr.readBigUInt64LE(t,v+Sr.Constants.ZIP64SIZE)+Sr.Constants.ZIP64LEAD;break}}if(S==-1)throw Sr.Errors.INVALID_FORMAT();i.loadFromBinary(t.slice(S,y)),i.commentLength&&(o=t.slice(I+Sr.Constants.ENDHDR)),g&&d()}function h(){n.length>1&&!u&&n.sort((g,v)=>g.entryName.toLowerCase().localeCompare(v.entryName.toLowerCase()))}return{get entries(){return s||d(),n.filter(g=>!c.has(g))},get comment(){return f.decode(o)},set comment(g){o=Sr.toBuffer(g,f.encode),i.commentLength=o.length},getEntryCount:function(){return s?n.length:i.diskEntries},forEach:function(g){this.entries.forEach(g)},getEntry:function(g){return s||d(),r[g]||null},setEntry:function(g){s||d(),n.push(g),r[g.entryName]=g,i.totalEntries=n.length},deleteFile:function(g,v=!0){s||d();let C=r[g];this.getEntryChildren(C,v).map(y=>y.entryName).forEach(this.deleteEntry)},deleteEntry:function(g){s||d();let v=r[g],C=n.indexOf(v);C>=0&&(n.splice(C,1),delete r[g],i.totalEntries=n.length)},getEntryChildren:function(g,v=!0){if(s||d(),typeof g=="object")if(g.isDirectory&&v){let C=[],w=g.entryName;for(let y of n)y.entryName.startsWith(w)&&C.push(y);return C}else return[g];return[]},getChildCount:function(g){if(g&&g.isDirectory){let v=this.getEntryChildren(g);return v.includes(g)?v.length-1:v.length}return 0},compressToBuffer:function(){s||d(),h();let g=[],v=[],C=0,w=0;i.size=0,i.offset=0;let y=0;for(let x of this.entries){let A=x.getCompressedData();x.header.offset=w;let F=x.packLocalHeader(),k=F.length+A.length;w+=k,g.push(F),g.push(A);let E=x.packCentralHeader();v.push(E),i.size+=E.length,C+=k+E.length,y++}C+=i.mainHeaderSize,i.offset=w,i.totalEntries=y,w=0;let S=Buffer.alloc(C);for(let x of g)x.copy(S,w),w+=x.length;for(let x of v)x.copy(S,w),w+=x.length;let I=i.toBinary();return o&&o.copy(I,Sr.Constants.ENDHDR),I.copy(S,w),t=S,s=!1,S},toAsyncBuffer:function(g,v,C,w){try{s||d(),h();let y=[],S=[],I=0,x=0,A=0;i.size=0,i.offset=0;let F=function(k){if(k.length>0){let E=k.shift(),_=E.entryName+E.extra.toString();C&&C(_),E.getCompressedDataAsync(function(T){w&&w(_),E.header.offset=x;let D=E.packLocalHeader(),b=D.length+T.length;x+=b,y.push(D),y.push(T);let R=E.packCentralHeader();S.push(R),i.size+=R.length,I+=b+R.length,A++,F(k)})}else{I+=i.mainHeaderSize,i.offset=x,i.totalEntries=A,x=0;let E=Buffer.alloc(I);y.forEach(function(T){T.copy(E,x),x+=T.length}),S.forEach(function(T){T.copy(E,x),x+=T.length});let _=i.toBinary();o&&o.copy(_,Sr.Constants.ENDHDR),_.copy(E,x),t=E,s=!1,g(E)}};F(Array.from(this.entries))}catch(y){v(y)}}}}});var tB=$((Wye,eB)=>{var Qt=ep(),ln=require("path"),Wte=ST(),jte=Z2(),_f=(...t)=>Qt.findLast(t,e=>typeof e=="boolean"),Q2=(...t)=>Qt.findLast(t,e=>typeof e=="string"),Vte=(...t)=>Qt.findLast(t,e=>typeof e=="function"),Yte={noSort:!1,readEntries:!1,method:Qt.Constants.NONE,fs:null};eB.exports=function(t,e){let n=null,r=Object.assign(Object.create(null),Yte);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(r,t),t=r.input?r.input:void 0,r.input&&delete r.input),Buffer.isBuffer(t)&&(n=t,r.method=Qt.Constants.BUFFER,t=void 0)),Object.assign(r,e);let o=new Qt(r);if((typeof r.decoder!="object"||typeof r.decoder.encode!="function"||typeof r.decoder.decode!="function")&&(r.decoder=Qt.decoder),t&&typeof t=="string")if(o.fs.existsSync(t))r.method=Qt.Constants.FILE,r.filename=t,n=o.fs.readFileSync(t);else throw Qt.Errors.INVALID_FILENAME();let i=new jte(n,r),{canonical:s,sanitize:a,zipnamefix:c}=Qt;function l(d){if(d&&i){var p;if(typeof d=="string"&&(p=i.getEntry(ln.posix.normalize(d))),typeof d=="object"&&typeof d.entryName<"u"&&typeof d.header<"u"&&(p=i.getEntry(d.entryName)),p)return p}return null}function u(d){let{join:p,normalize:h,sep:g}=ln.posix;return p(".",h(g+d.split("\\").join(g)+g))}function f(d){return d instanceof RegExp?function(p){return function(h){return p.test(h)}}(d):typeof d!="function"?()=>!0:d}let m=(d,p)=>{let h=p.slice(-1);return h=h===o.sep?o.sep:"",ln.relative(d,p)+h};return{readFile:function(d,p){var h=l(d);return h&&h.getData(p)||null},childCount:function(d){let p=l(d);if(p)return i.getChildCount(p)},readFileAsync:function(d,p){var h=l(d);h?h.getDataAsync(p):p(null,"getEntry failed for:"+d)},readAsText:function(d,p){var h=l(d);if(h){var g=h.getData();if(g&&g.length)return g.toString(p||"utf8")}return""},readAsTextAsync:function(d,p,h){var g=l(d);g?g.getDataAsync(function(v,C){if(C){p(v,C);return}v&&v.length?p(v.toString(h||"utf8")):p("")}):p("")},deleteFile:function(d,p=!0){var h=l(d);h&&i.deleteFile(h.entryName,p)},deleteEntry:function(d){var p=l(d);p&&i.deleteEntry(p.entryName)},addZipComment:function(d){i.comment=d},getZipComment:function(){return i.comment||""},addZipEntryComment:function(d,p){var h=l(d);h&&(h.comment=p)},getZipEntryComment:function(d){var p=l(d);return p&&p.comment||""},updateFile:function(d,p){var h=l(d);h&&h.setData(p)},addLocalFile:function(d,p,h,g){if(o.fs.existsSync(d)){p=p?u(p):"";let v=ln.win32.basename(ln.win32.normalize(d));p+=h||v;let C=o.fs.statSync(d),w=C.isFile()?o.fs.readFileSync(d):Buffer.alloc(0);C.isDirectory()&&(p+=o.sep),this.addFile(p,w,g,C)}else throw Qt.Errors.FILE_NOT_FOUND(d)},addLocalFileAsync:function(d,p){d=typeof d=="object"?d:{localPath:d};let h=ln.resolve(d.localPath),{comment:g}=d,{zipPath:v,zipName:C}=d,w=this;o.fs.stat(h,function(y,S){if(y)return p(y,!1);v=v?u(v):"";let I=ln.win32.basename(ln.win32.normalize(h));if(v+=C||I,S.isFile())o.fs.readFile(h,function(x,A){return x?p(x,!1):(w.addFile(v,A,g,S),setImmediate(p,void 0,!0))});else if(S.isDirectory())return v+=o.sep,w.addFile(v,Buffer.alloc(0),g,S),setImmediate(p,void 0,!0)})},addLocalFolder:function(d,p,h){if(h=f(h),p=p?u(p):"",d=ln.normalize(d),o.fs.existsSync(d)){let g=o.findFiles(d),v=this;if(g.length)for(let C of g){let w=ln.join(p,m(d,C));h(w)&&v.addLocalFile(C,ln.dirname(w))}}else throw Qt.Errors.FILE_NOT_FOUND(d)},addLocalFolderAsync:function(d,p,h,g){g=f(g),h=h?u(h):"",d=ln.normalize(d);var v=this;o.fs.open(d,"r",function(C){if(C&&C.code==="ENOENT")p(void 0,Qt.Errors.FILE_NOT_FOUND(d));else if(C)p(void 0,C);else{var w=o.findFiles(d),y=-1,S=function(){if(y+=1,y<w.length){var I=w[y],x=m(d,I).split("\\").join("/");x=x.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),g(x)?o.fs.stat(I,function(A,F){A&&p(void 0,A),F.isFile()?o.fs.readFile(I,function(k,E){k?p(void 0,k):(v.addFile(h+x,E,"",F),S())}):(v.addFile(h+x+"/",Buffer.alloc(0),"",F),S())}):process.nextTick(()=>{S()})}else p(!0,void 0)};S()}})},addLocalFolderAsync2:function(d,p){let h=this;d=typeof d=="object"?d:{localPath:d},localPath=ln.resolve(u(d.localPath));let{zipPath:g,filter:v,namefix:C}=d;v instanceof RegExp?v=function(S){return function(I){return S.test(I)}}(v):typeof v!="function"&&(v=function(){return!0}),g=g?u(g):"",C=="latin1"&&(C=S=>S.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof C!="function"&&(C=S=>S);let w=S=>ln.join(g,C(m(localPath,S))),y=S=>ln.win32.basename(ln.win32.normalize(C(S)));o.fs.open(localPath,"r",function(S){S&&S.code==="ENOENT"?p(void 0,Qt.Errors.FILE_NOT_FOUND(localPath)):S?p(void 0,S):o.findFilesAsync(localPath,function(I,x){if(I)return p(I);x=x.filter(A=>v(w(A))),x.length||p(void 0,!1),setImmediate(x.reverse().reduce(function(A,F){return function(k,E){if(k||E===!1)return setImmediate(A,k,!1);h.addLocalFileAsync({localPath:F,zipPath:ln.dirname(w(F)),zipName:y(F)},A)}},p))})})},addLocalFolderPromise:function(d,p){return new Promise((h,g)=>{this.addLocalFolderAsync2(Object.assign({localPath:d},p),(v,C)=>{v&&g(v),C&&h(this)})})},addFile:function(d,p,h,g){d=c(d);let v=l(d),C=v!=null;C||(v=new Wte(r),v.entryName=d),v.comment=h||"";let w=typeof g=="object"&&g instanceof o.fs.Stats;w&&(v.header.time=g.mtime);var y=v.isDirectory?16:0;let S=v.isDirectory?16384:32768;return w?S|=4095&g.mode:typeof g=="number"?S|=4095&g:S|=v.isDirectory?493:420,y=(y|S<<16)>>>0,v.attr=y,v.setData(p),C||i.setEntry(v),v},getEntries:function(d){return i.password=d,i?i.entries:[]},getEntry:function(d){return l(d)},getEntryCount:function(){return i.getEntryCount()},forEach:function(d){return i.forEach(d)},extractEntryTo:function(d,p,h,g,v,C){g=_f(!1,g),v=_f(!1,v),h=_f(!0,h),C=Q2(v,C);var w=l(d);if(!w)throw Qt.Errors.NO_ENTRY();var y=s(w.entryName),S=a(p,C&&!w.isDirectory?C:h?y:ln.basename(y));if(w.isDirectory){var I=i.getEntryChildren(w);return I.forEach(function(F){if(F.isDirectory)return;var k=F.getData();if(!k)throw Qt.Errors.CANT_EXTRACT_FILE();var E=s(F.entryName),_=a(p,h?E:ln.basename(E));let T=v?F.header.fileAttr:void 0;o.writeFileTo(_,k,g,T)}),!0}var x=w.getData(i.password);if(!x)throw Qt.Errors.CANT_EXTRACT_FILE();if(o.fs.existsSync(S)&&!g)throw Qt.Errors.CANT_OVERRIDE();let A=v?d.header.fileAttr:void 0;return o.writeFileTo(S,x,g,A),!0},test:function(d){if(!i)return!1;for(var p in i.entries)try{if(p.isDirectory)continue;var h=i.entries[p].getData(d);if(!h)return!1}catch{return!1}return!0},extractAllTo:function(d,p,h,g){if(h=_f(!1,h),g=Q2(h,g),p=_f(!1,p),!i)throw Qt.Errors.NO_ZIP();i.entries.forEach(function(v){var C=a(d,s(v.entryName));if(v.isDirectory){o.makeDir(C);return}var w=v.getData(g);if(!w)throw Qt.Errors.CANT_EXTRACT_FILE();let y=h?v.header.fileAttr:void 0;o.writeFileTo(C,w,p,y);try{o.fs.utimesSync(C,v.header.time,v.header.time)}catch{throw Qt.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(d,p,h,g){if(g=Vte(p,h,g),h=_f(!1,h),p=_f(!1,p),!g)return new Promise((S,I)=>{this.extractAllToAsync(d,p,h,function(x){x?I(x):S(this)})});if(!i){g(Qt.Errors.NO_ZIP());return}d=ln.resolve(d);let v=S=>a(d,ln.normalize(s(S.entryName))),C=(S,I)=>new Error(S+': "'+I+'"'),w=[],y=[];i.entries.forEach(S=>{S.isDirectory?w.push(S):y.push(S)});for(let S of w){let I=v(S),x=h?S.header.fileAttr:void 0;try{o.makeDir(I),x&&o.fs.chmodSync(I,x),o.fs.utimesSync(I,S.header.time,S.header.time)}catch{g(C("Unable to create folder",I))}}y.reverse().reduce(function(S,I){return function(x){if(x)S(x);else{let A=ln.normalize(s(I.entryName)),F=a(d,A);I.getDataAsync(function(k,E){if(E)S(E);else if(!k)S(Qt.Errors.CANT_EXTRACT_FILE());else{let _=h?I.header.fileAttr:void 0;o.writeFileToAsync(F,k,p,_,function(T){T||S(C("Unable to write file",F)),o.fs.utimes(F,I.header.time,I.header.time,function(D){D?S(C("Unable to set times",F)):S()})})}})}}},g)()},writeZip:function(d,p){if(arguments.length===1&&typeof d=="function"&&(p=d,d=""),!d&&r.filename&&(d=r.filename),!!d){var h=i.compressToBuffer();if(h){var g=o.writeFileTo(d,h,!0);typeof p=="function"&&p(g?null:new Error("failed"),"")}}},writeZipPromise:function(d,p){let{overwrite:h,perm:g}=Object.assign({overwrite:!0},p);return new Promise((v,C)=>{!d&&r.filename&&(d=r.filename),d||C("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(w=>{let y=S=>S?v(S):C("ADM-ZIP: Wasn't able to write zip file");o.writeFileToAsync(d,w,h,g,y)},C)})},toBufferPromise:function(){return new Promise((d,p)=>{i.toAsyncBuffer(d,p)})},toBuffer:function(d,p,h,g){return typeof d=="function"?(i.toAsyncBuffer(d,p,h,g),null):i.compressToBuffer()}}}});var rB=$((Vye,nB)=>{nB.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var xT=$((qye,iB)=>{var oB=rB();iB.exports=class{constructor(e){this.hwm=e||16,this.head=new oB(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let n=this.head;this.head=n.next=new oB(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var np=$((Gye,sB)=>{function qte(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function Gte(t){return Buffer.isEncoding(t)}function zte(t,e,n){return Buffer.alloc(t,e,n)}function Kte(t){return Buffer.allocUnsafe(t)}function Jte(t){return Buffer.allocUnsafeSlow(t)}function Xte(t,e){return Buffer.byteLength(t,e)}function Zte(t,e){return Buffer.compare(t,e)}function Qte(t,e){return Buffer.concat(t,e)}function ene(t,e,n,r,o){return St(t).copy(e,n,r,o)}function tne(t,e){return St(t).equals(e)}function nne(t,e,n,r,o){return St(t).fill(e,n,r,o)}function rne(t,e,n){return Buffer.from(t,e,n)}function one(t,e,n,r){return St(t).includes(e,n,r)}function ine(t,e,n,r){return St(t).indexOf(e,n,r)}function sne(t,e,n,r){return St(t).lastIndexOf(e,n,r)}function ane(t){return St(t).swap16()}function cne(t){return St(t).swap32()}function lne(t){return St(t).swap64()}function St(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function une(t,e,n,r){return St(t).toString(e,n,r)}function fne(t,e,n,r,o){return St(t).write(e,n,r,o)}function dne(t,e,n){return St(t).writeDoubleLE(e,n)}function mne(t,e,n){return St(t).writeFloatLE(e,n)}function pne(t,e,n){return St(t).writeUInt32LE(e,n)}function hne(t,e,n){return St(t).writeInt32LE(e,n)}function gne(t,e){return St(t).readDoubleLE(e)}function vne(t,e){return St(t).readFloatLE(e)}function wne(t,e){return St(t).readUInt32LE(e)}function yne(t,e){return St(t).readInt32LE(e)}function Cne(t,e,n){return St(t).writeDoubleBE(e,n)}function Ene(t,e,n){return St(t).writeFloatBE(e,n)}function Sne(t,e,n){return St(t).writeUInt32BE(e,n)}function xne(t,e,n){return St(t).writeInt32BE(e,n)}function _ne(t,e){return St(t).readDoubleBE(e)}function Dne(t,e){return St(t).readFloatBE(e)}function Ine(t,e){return St(t).readUInt32BE(e)}function Pne(t,e){return St(t).readInt32BE(e)}sB.exports={isBuffer:qte,isEncoding:Gte,alloc:zte,allocUnsafe:Kte,allocUnsafeSlow:Jte,byteLength:Xte,compare:Zte,concat:Qte,copy:ene,equals:tne,fill:nne,from:rne,includes:one,indexOf:ine,lastIndexOf:sne,swap16:ane,swap32:cne,swap64:lne,toBuffer:St,toString:une,write:fne,writeDoubleLE:dne,writeFloatLE:mne,writeUInt32LE:pne,writeInt32LE:hne,readDoubleLE:gne,readFloatLE:vne,readUInt32LE:wne,readInt32LE:yne,writeDoubleBE:Cne,writeFloatBE:Ene,writeUInt32BE:Sne,writeInt32BE:xne,readDoubleBE:_ne,readFloatBE:Dne,readUInt32BE:Ine,readInt32BE:Pne}});var cB=$((Kye,aB)=>{var bne=np();aB.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return bne.toString(e,this.encoding)}flush(){return""}}});var uB=$((Xye,lB)=>{var Tne=np();lB.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let r=!0;for(let o=Math.max(0,e.byteLength-4),i=e.byteLength;o<i&&r;o++)r=e[o]<=127;if(r)return Tne.toString(e,"utf8")}let n="";for(let r=0,o=e.byteLength;r<o;r++){let i=e[r];if(this.bytesNeeded===0){i<=127?n+=String.fromCharCode(i):(this.bytesSeen=1,i>=194&&i<=223?(this.bytesNeeded=2,this.codePoint=i&31):i>=224&&i<=239?(i===224?this.lowerBoundary=160:i===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=i&15):i>=240&&i<=244?(i===240&&(this.lowerBoundary=144),i===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=i&7):n+="\uFFFD");continue}if(i<this.lowerBoundary||i>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,n+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|i&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(n+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return n}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var dB=$((Qye,fB)=>{var Rne=cB(),kne=uB();fB.exports=class{constructor(e="utf8"){switch(this.encoding=Nne(e),this.encoding){case"utf8":this.decoder=new kne;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new Rne(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let n="";return e&&(n=this.push(e)),n+=this.decoder.flush(),n}};function Nne(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var $T=$((eCe,FB)=>{var{EventEmitter:Lne}=require("events"),gS=new Error("Stream was destroyed"),_T=new Error("Premature close"),wB=xT(),Ane=dB(),en=(1<<29)-1,Js=1,kT=2,Df=4,dv=8,yB=en^Js,Fne=en^kT,vv=16,rp=32,sp=64,xl=128,wv=256,NT=512,If=1024,DT=2048,LT=4096,AT=8192,cs=16384,Sl=32768,vS=65536,Pf=131072,CB=wv|NT,One=vv|vS,Une=sp|vv,$ne=LT|xl,FT=wv|Pf,Mne=en^vv,Hne=en^sp,Bne=en^(sp|vS),mB=en^vS,Wne=en^wv,jne=en^(xl|AT),Vne=en^If,pB=en^CB,EB=en^Sl,Yne=en^rp,SB=en^Pf,qne=en^FT,ac=1<<18,ip=2<<18,yv=4<<18,bf=8<<18,Cv=16<<18,_l=32<<18,IT=64<<18,op=128<<18,OT=256<<18,Tf=512<<18,wS=1024<<18,Gne=en^(ac|OT),xB=en^yv,zne=en^(ac|Tf),Kne=en^Cv,Jne=en^bf,_B=en^op,Xne=en^ip,DB=en^wS,mv=vv|ac,IB=en^mv,UT=cs|_l,Xs=Df|dv|kT,ti=Xs|Js,PB=Xs|UT,Zne=xB&Hne,yS=op|Sl,Qne=yS&IB,bB=ti|Qne,ere=ti|If|cs,hB=ti|cs|xl,tre=ti|If|xl,nre=ti|LT|xl|AT,rre=ti|vv|If|cs|vS|Pf,ore=Xs|If|cs,ire=rp|ti|Sl|sp,sre=Sl|Js,are=ti|Tf|_l,cre=bf|Cv,TB=bf|ac,lre=bf|Cv|ti|ac,gB=ti|ac|bf|wS,ure=yv|ac,fre=ac|OT,dre=ti|Tf|TB|_l,mre=Cv|Xs|Tf|_l,pre=ip|ti|op|yv,hre=Tf|_l|Xs,fS=Symbol.asyncIterator||Symbol("asyncIterator"),dS=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapWritable:o,byteLength:i,byteLengthWritable:s}={}){this.stream=e,this.queue=new wB,this.highWaterMark=n,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||i||AB,this.map=o||r,this.afterWrite=wre.bind(this),this.afterUpdateNextTick=Ere.bind(this)}get ended(){return(this.stream._duplexState&_l)!==0}push(e){return(this.stream._duplexState&hre)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=bf,!0):(this.stream._duplexState|=cre,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Jne),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|Tf)&xB}autoBatch(e,n){let r=[],o=this.stream;for(r.push(e);(o._duplexState&gB)===TB;)r.push(o._writableState.shift());if((o._duplexState&ti)!==0)return n(null);o._writev(r,n)}update(){let e=this.stream;e._duplexState|=ip;do{for(;(e._duplexState&gB)===bf;){let n=this.shift();e._duplexState|=fre,e._write(n,this.afterWrite)}(e._duplexState&ure)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Xne}updateNonPrimary(){let e=this.stream;if((e._duplexState&dre)===Tf){e._duplexState=e._duplexState|ac,e._final(vre.bind(this));return}if((e._duplexState&Xs)===Df){(e._duplexState&yS)===0&&(e._duplexState|=mv,e._destroy(RB.bind(this)));return}(e._duplexState&bB)===Js&&(e._duplexState=(e._duplexState|mv)&yB,e._open(kB.bind(this)))}continueUpdate(){return(this.stream._duplexState&op)===0?!1:(this.stream._duplexState&=_B,!0)}updateCallback(){(this.stream._duplexState&pre)===yv?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&op)===0&&(this.stream._duplexState|=op,(this.stream._duplexState&ip)===0&&queueMicrotask(this.afterUpdateNextTick))}},PT=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapReadable:o,byteLength:i,byteLengthReadable:s}={}){this.stream=e,this.queue=new wB,this.highWaterMark=n===0?1:n,this.buffered=0,this.readAhead=n>0,this.error=null,this.pipeline=null,this.byteLength=s||i||AB,this.map=o||r,this.pipeTo=null,this.afterRead=yre.bind(this),this.afterUpdateNextTick=Cre.bind(this)}get ended(){return(this.stream._duplexState&cs)!==0}pipe(e,n){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof n!="function"&&(n=null),this.stream._duplexState|=NT,this.pipeTo=e,this.pipeline=new TT(this.stream,e,n),n&&this.stream.on("error",vB),gv(e))e._writableState.pipeline=this.pipeline,n&&e.on("error",vB),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let r=this.pipeline.done.bind(this.pipeline,e),o=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",r),e.on("close",o),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",gre.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let n=this.stream;return e===null?(this.highWaterMark=0,n._duplexState=(n._duplexState|If)&Bne,!1):this.map!==null&&(e=this.map(e),e===null)?(n._duplexState&=mB,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),n._duplexState=(n._duplexState|xl)&mB,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=jne),e}unshift(e){let n=[this.map!==null?this.map(e):e];for(;this.buffered>0;)n.push(this.shift());for(let r=0;r<n.length-1;r++){let o=n[r];this.buffered+=this.byteLength(o),this.queue.push(o)}this.push(n[n.length-1])}read(){let e=this.stream;if((e._duplexState&hB)===xl){let n=this.shift();return this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=pB),(e._duplexState&DT)!==0&&e.emit("data",n),n}return this.readAhead===!1&&(e._duplexState|=Pf,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&hB)===xl&&(e._duplexState&CB)!==0;){let n=this.shift();this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=pB),(e._duplexState&DT)!==0&&e.emit("data",n)}}update(){let e=this.stream;e._duplexState|=rp;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&rre)===Pf;)e._duplexState|=One,e._read(this.afterRead),this.drain();(e._duplexState&nre)===$ne&&(e._duplexState|=AT,e.emit("readable")),(e._duplexState&Une)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Yne}updateNonPrimary(){let e=this.stream;if((e._duplexState&tre)===If&&(e._duplexState=(e._duplexState|cs)&Vne,e.emit("end"),(e._duplexState&PB)===UT&&(e._duplexState|=Df),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&Xs)===Df){(e._duplexState&yS)===0&&(e._duplexState|=mv,e._destroy(RB.bind(this)));return}(e._duplexState&bB)===Js&&(e._duplexState=(e._duplexState|mv)&yB,e._open(kB.bind(this)))}continueUpdate(){return(this.stream._duplexState&Sl)===0?!1:(this.stream._duplexState&=EB,!0)}updateCallback(){(this.stream._duplexState&ire)===sp?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&sre)===0&&(this.stream._duplexState|=Sl,(this.stream._duplexState&rp)===0&&queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&Sl)===0&&(this.stream._duplexState|=Sl,(this.stream._duplexState&rp)===0&&queueMicrotask(this.afterUpdateNextTick))}},bT=class{constructor(e){this.data=null,this.afterTransform=xre.bind(e),this.afterFinal=null}},TT=class{constructor(e,n,r){this.from=e,this.to=n,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,n){if(n&&(this.error=n),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&cs)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&cs)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function gre(){this.stream._duplexState|=NT,this.updateCallback()}function vre(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Xs)===0&&(e._duplexState|=_l,e.emit("finish")),(e._duplexState&PB)===UT&&(e._duplexState|=Df),e._duplexState&=zne,(e._duplexState&ip)===0?this.update():this.updateNextTick()}function RB(t){let e=this.stream;!t&&this.error!==gS&&(t=this.error),t&&e.emit("error",t),e._duplexState|=dv,e.emit("close");let n=e._readableState,r=e._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(e,t),r!==null){for(;r.drains!==null&&r.drains.length>0;)r.drains.shift().resolve(!1);r.pipeline!==null&&r.pipeline.done(e,t)}}function wre(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=Gne,this.drains!==null&&Sre(this.drains),(e._duplexState&lre)===Cv&&(e._duplexState&=Kne,(e._duplexState&IT)===IT&&e.emit("drain")),this.updateCallback()}function yre(t){t&&this.stream.destroy(t),this.stream._duplexState&=Mne,this.readAhead===!1&&(this.stream._duplexState&wv)===0&&(this.stream._duplexState&=SB),this.updateCallback()}function Cre(){(this.stream._duplexState&rp)===0&&(this.stream._duplexState&=EB,this.update())}function Ere(){(this.stream._duplexState&ip)===0&&(this.stream._duplexState&=_B,this.update())}function Sre(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function kB(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Df)===0&&((e._duplexState&ere)===0&&(e._duplexState|=sp),(e._duplexState&are)===0&&(e._duplexState|=yv),e.emit("open")),e._duplexState&=IB,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function xre(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function _re(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=DT|FT,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=LT,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=IT,this._writableState.updateNextTick())}var pv=class extends Lne{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",Are.bind(this))),this.on("newListener",_re)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&dv)!==0}get destroying(){return(this._duplexState&Xs)!==0}destroy(e){(this._duplexState&Xs)===0&&(e||(e=gS),this._duplexState=(this._duplexState|Df)&Zne,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=kT,this._predestroy(),this._duplexState&=Fne,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},mS=class t extends pv{constructor(e){super(e),this._duplexState|=Js|_l|Pf,this._readableState=new PT(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=SB),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let n=new Ane(e),r=this._readableState.map||Pre;return this._readableState.map=o,this;function o(i){let s=n.push(i);return s===""&&(i.byteLength!==0||n.remaining>0)?null:r(s)}}_read(e){e(null)}pipe(e,n){return this._readableState.updateNextTick(),this._readableState.pipe(e,n),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=FT,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?qne:Wne,this}static _fromAsyncIterator(e,n){let r,o=new t({...n,read(s){e.next().then(i).then(s.bind(null,null)).catch(s)},predestroy(){r=e.return()},destroy(s){if(!r)return s(null);r.then(s.bind(null,null)).catch(s)}});return o;function i(s){s.done?o.push(null):o.push(s.value)}}static from(e,n){if(kre(e))return e;if(e[fS])return this._fromAsyncIterator(e[fS](),n);Array.isArray(e)||(e=e===void 0?[]:[e]);let r=0;return new t({...n,read(o){this.push(r===e.length?null:e[r++]),o(null)}})}static isBackpressured(e){return(e._duplexState&ore)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&wv)===0}[fS](){let e=this,n=null,r=null,o=null;return this.on("error",l=>{n=l}),this.on("readable",i),this.on("close",s),{[fS](){return this},next(){return new Promise(function(l,u){r=l,o=u;let f=e.read();f!==null?a(f):(e._duplexState&dv)!==0&&a(null)})},return(){return c(null)},throw(l){return c(l)}};function i(){r!==null&&a(e.read())}function s(){r!==null&&a(null)}function a(l){o!==null&&(n?o(n):l===null&&(e._duplexState&cs)===0?o(gS):r({value:l,done:l===null}),o=r=null)}function c(l){return e.destroy(l),new Promise((u,f)=>{if(e._duplexState&dv)return u({value:void 0,done:!0});e.once("close",function(){l?f(l):u({value:void 0,done:!0})})})}}},pS=class extends pv{constructor(e){super(e),this._duplexState|=Js|cs,this._writableState=new dS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=wS}uncork(){this._duplexState&=DB,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&mre)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let n=e._writableState,o=(Fre(e)?Math.min(1,n.queue.length):n.queue.length)+(e._duplexState&OT?1:0);return o===0?Promise.resolve(!0):(n.drains===null&&(n.drains=[]),new Promise(i=>{n.drains.push({writes:o,resolve:i})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},hv=class extends mS{constructor(e){super(e),this._duplexState=Js|this._duplexState&Pf,this._writableState=new dS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=wS}uncork(){this._duplexState&=DB,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},hS=class extends hv{constructor(e){super(e),this._transformState=new bT(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,n){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let n=this._transformState.data;this._transformState.data=null,e(null),this._transform(n,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,n){n(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(Dre.bind(this))}},RT=class extends hS{};function Dre(t,e){let n=this._transformState.afterFinal;if(t)return n(t);e!=null&&this.push(e),this.push(null),n(null)}function Ire(...t){return new Promise((e,n)=>NB(...t,r=>{if(r)return n(r);e()}))}function NB(t,...e){let n=Array.isArray(t)?[...t,...e]:[t,...e],r=n.length&&typeof n[n.length-1]=="function"?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let o=n[0],i=null,s=null;for(let l=1;l<n.length;l++)i=n[l],gv(o)?o.pipe(i,c):(a(o,!0,l>1,c),o.pipe(i)),o=i;if(r){let l=!1,u=gv(i)||!!(i._writableState&&i._writableState.autoDestroy);i.on("error",f=>{s===null&&(s=f)}),i.on("finish",()=>{l=!0,u||r(s)}),u&&i.on("close",()=>r(s||(l?null:_T)))}return i;function a(l,u,f,m){l.on("error",m),l.on("close",d);function d(){if(u&&l._readableState&&!l._readableState.ended||f&&l._writableState&&!l._writableState.ended)return m(_T)}}function c(l){if(!(!l||s)){s=l;for(let u of n)u.destroy(l)}}}function Pre(t){return t}function LB(t){return!!t._readableState||!!t._writableState}function gv(t){return typeof t._duplexState=="number"&&LB(t)}function bre(t){return!!t._readableState&&t._readableState.ended}function Tre(t){return!!t._writableState&&t._writableState.ended}function Rre(t,e={}){let n=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&n===gS?null:n}function kre(t){return gv(t)&&t.readable}function Nre(t){return(t._duplexState&Js)!==Js||(t._duplexState&yS)!==0}function Lre(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function AB(t){return Lre(t)?t.byteLength:1024}function vB(){}function Are(){this.destroy(new Error("Stream aborted."))}function Fre(t){return t._writev!==pS.prototype._writev&&t._writev!==hv.prototype._writev}FB.exports={pipeline:NB,pipelinePromise:Ire,isStream:LB,isStreamx:gv,isEnded:bre,isFinished:Tre,isDisturbed:Nre,getStreamError:Rre,Stream:pv,Writable:pS,Readable:mS,Duplex:hv,Transform:hS,PassThrough:RT}});var BT=$(cp=>{var ct=np(),Ore="0000000000000000000",Ure="7777777777777777777",CS=48,OB=ct.from([117,115,116,97,114,0]),$re=ct.from([CS,CS]),Mre=ct.from([117,115,116,97,114,32]),Hre=ct.from([32,0]),Bre=4095,Ev=257,HT=263;cp.decodeLongPath=function(e,n){return ap(e,0,e.length,n)};cp.encodePax=function(e){let n="";e.name&&(n+=MT(" path="+e.name+`
`)),e.linkname&&(n+=MT(" linkpath="+e.linkname+`
`));let r=e.pax;if(r)for(let o in r)n+=MT(" "+o+"="+r[o]+`
`);return ct.from(n)};cp.decodePax=function(e){let n={};for(;e.length;){let r=0;for(;r<e.length&&e[r]!==32;)r++;let o=parseInt(ct.toString(e.subarray(0,r)),10);if(!o)return n;let i=ct.toString(e.subarray(r+1,o-1)),s=i.indexOf("=");if(s===-1)return n;n[i.slice(0,s)]=i.slice(s+1),e=e.subarray(o)}return n};cp.encode=function(e){let n=ct.alloc(512),r=e.name,o="";if(e.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),ct.byteLength(r)!==r.length)return null;for(;ct.byteLength(r)>100;){let i=r.indexOf("/");if(i===-1)return null;o+=o?"/"+r.slice(0,i):r.slice(0,i),r=r.slice(i+1)}return ct.byteLength(r)>100||ct.byteLength(o)>155||e.linkname&&ct.byteLength(e.linkname)>100?null:(ct.write(n,r),ct.write(n,Il(e.mode&Bre,6),100),ct.write(n,Il(e.uid,6),108),ct.write(n,Il(e.gid,6),116),zre(e.size,n,124),ct.write(n,Il(e.mtime.getTime()/1e3|0,11),136),n[156]=CS+qre(e.type),e.linkname&&ct.write(n,e.linkname,157),ct.copy(OB,n,Ev),ct.copy($re,n,HT),e.uname&&ct.write(n,e.uname,265),e.gname&&ct.write(n,e.gname,297),ct.write(n,Il(e.devmajor||0,6),329),ct.write(n,Il(e.devminor||0,6),337),o&&ct.write(n,o,345),ct.write(n,Il($B(n),6),148),n)};cp.decode=function(e,n,r){let o=e[156]===0?0:e[156]-CS,i=ap(e,0,100,n),s=Dl(e,100,8),a=Dl(e,108,8),c=Dl(e,116,8),l=Dl(e,124,12),u=Dl(e,136,12),f=Yre(o),m=e[157]===0?null:ap(e,157,100,n),d=ap(e,265,32),p=ap(e,297,32),h=Dl(e,329,8),g=Dl(e,337,8),v=$B(e);if(v===8*32)return null;if(v!==Dl(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Wre(e))e[345]&&(i=ap(e,345,155,n)+"/"+i);else if(!jre(e)){if(!r)throw new Error("Invalid tar header: unknown format.")}return o===0&&i&&i[i.length-1]==="/"&&(o=5),{name:i,mode:s,uid:a,gid:c,size:l,mtime:new Date(1e3*u),type:f,linkname:m,uname:d,gname:p,devmajor:h,devminor:g,pax:null}};function Wre(t){return ct.equals(OB,t.subarray(Ev,Ev+6))}function jre(t){return ct.equals(Mre,t.subarray(Ev,Ev+6))&&ct.equals(Hre,t.subarray(HT,HT+2))}function Vre(t,e,n){return typeof t!="number"?n:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function Yre(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function qre(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function UB(t,e,n,r){for(;n<r;n++)if(t[n]===e)return n;return r}function $B(t){let e=256;for(let n=0;n<148;n++)e+=t[n];for(let n=156;n<512;n++)e+=t[n];return e}function Il(t,e){return t=t.toString(8),t.length>e?Ure.slice(0,e)+" ":Ore.slice(0,e-t.length)+t+" "}function Gre(t,e,n){e[n]=128;for(let r=11;r>0;r--)e[n+r]=t&255,t=Math.floor(t/256)}function zre(t,e,n){t.toString(8).length>11?Gre(t,e,n):ct.write(e,Il(t,11),n)}function Kre(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let n=[],r;for(r=t.length-1;r>0;r--){let s=t[r];e?n.push(s):n.push(255-s)}let o=0,i=n.length;for(r=0;r<i;r++)o+=n[r]*Math.pow(256,r);return e?o:-1*o}function Dl(t,e,n){if(t=t.subarray(e,e+n),e=0,t[e]&128)return Kre(t);{for(;e<t.length&&t[e]===32;)e++;let r=Vre(UB(t,32,e,t.length),t.length,t.length);for(;e<r&&t[e]===0;)e++;return r===e?0:parseInt(ct.toString(t.subarray(e,r)),8)}}function ap(t,e,n,r){return ct.toString(t.subarray(e,UB(t,0,e,e+n)),r)}function MT(t){let e=ct.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t}});var jB=$((nCe,WB)=>{var{Writable:Jre,Readable:Xre,getStreamError:MB}=$T(),Zre=xT(),HB=np(),lp=BT(),Qre=HB.alloc(0),jT=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new Zre,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return Qre;let n=this._next(e);if(e===n.byteLength)return n;let r=[n];for(;(e-=n.byteLength)>0;)n=this._next(e),r.push(n);return HB.concat(r)}_next(e){let n=this.queue.peek(),r=n.byteLength-this._offset;if(e>=r){let o=this._offset?n.subarray(this._offset,n.byteLength):n;return this.queue.shift(),this._offset=0,this.buffered-=r,this.shifted+=r,o}return this.buffered-=e,this.shifted+=e,n.subarray(this._offset,this._offset+=e)}},VT=class extends Xre{constructor(e,n,r){super(),this.header=n,this.offset=r,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(MB(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=BB(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},YT=class extends Jre{constructor(e){super(e),e||(e={}),this._buffer=new jT,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=WT,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=lp.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=lp.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=lp.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=lp.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?lp.decodePax(e):Object.assign({},this._paxGlobal,lp.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=BB(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(n){return this._continueWrite(n),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let n=this._stream.push(e);return this._missing===0?(this._stream.push(null),n&&this._stream._detach(),n&&this._locked===!1):n}_createStream(){return new VT(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let n=this._callback;this._callback=WT,n(e)}_write(e,n){this._callback=n,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(MB(this)),e(null)}[Symbol.asyncIterator](){let e=null,n=null,r=null,o=null,i=null,s=this;return this.on("entry",l),this.on("error",m=>{e=m}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(c)},return(){return f(null)},throw(m){return f(m)}};function a(m){if(!i)return;let d=i;i=null,d(m)}function c(m,d){if(e)return d(e);if(o){m({value:o,done:!1}),o=null;return}n=m,r=d,a(null),s._finished&&n&&(n({value:void 0,done:!0}),n=r=null)}function l(m,d,p){i=p,d.on("error",WT),n?(n({value:d,done:!1}),n=r=null):o=d}function u(){a(e),n&&(e?r(e):n({value:void 0,done:!0}),n=r=null)}function f(m){return s.destroy(m),a(m),new Promise((d,p)=>{if(s.destroyed)return d({value:void 0,done:!0});s.once("close",function(){m?p(m):d({value:void 0,done:!0})})})}}};WB.exports=function(e){return new YT(e)};function WT(){}function BB(t){return t&=511,t&&512-t}});var YB=$((rCe,qT)=>{var VB={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{qT.exports=require("fs").constants||VB}catch{qT.exports=VB}});var JB=$((oCe,KB)=>{var{Readable:eoe,Writable:toe,getStreamError:qB}=$T(),Rf=np(),up=YB(),ES=BT(),noe=493,roe=420,GB=Rf.alloc(1024),zT=class extends toe{constructor(e,n,r){super({mapWritable:ioe,eagerOpen:!0}),this.written=0,this.header=n,this._callback=r,this._linkname=null,this._isLinkname=n.type==="symlink"&&!n.linkname,this._isVoid=n.type!=="file"&&n.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let n=this._callback;this._callback=null,n(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,n){if(this._isLinkname)return this._linkname=this._linkname?Rf.concat([this._linkname,e]):e,n(null);if(this._isVoid)return e.byteLength>0?n(new Error("No body allowed for this entry")):n();if(this.written+=e.byteLength,this._pack.push(e))return n();this._pack._drain=n}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Rf.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),zB(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return qB(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},KT=class extends eoe{constructor(e){super(e),this._drain=GT,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,n,r){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof n=="function"&&(r=n,n=null),r||(r=GT),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=ooe(e.mode)),e.mode||(e.mode=e.type==="directory"?noe:roe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof n=="string"&&(n=Rf.from(n));let o=new zT(this,e,r);return Rf.isBuffer(n)?(e.size=n.byteLength,o.write(n),o.end(),o):(o._isVoid,o)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(GB),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let n=ES.encode(e);if(n){this.push(n);return}}this._encodePax(e)}_encodePax(e){let n=ES.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(ES.encode(r)),this.push(n),zB(this,n.byteLength),r.size=e.size,r.type=e.type,this.push(ES.encode(r))}_doDrain(){let e=this._drain;this._drain=GT,e()}_predestroy(){let e=qB(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let n=this._pending.shift();n.destroy(e),n._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};KB.exports=function(e){return new KT(e)};function ooe(t){switch(t&up.S_IFMT){case up.S_IFBLK:return"block-device";case up.S_IFCHR:return"character-device";case up.S_IFDIR:return"directory";case up.S_IFIFO:return"fifo";case up.S_IFLNK:return"symlink"}return"file"}function GT(){}function zB(t,e){e&=511,e&&t.push(GB.subarray(0,512-e))}function ioe(t){return Rf.isBuffer(t)?t:Rf.from(t)}});var XB=$(JT=>{JT.extract=jB();JT.pack=JB()});var XT=$((uCe,eW)=>{eW.exports=function(e,n,r){e(n),r&&r(n===!0?null:n)}});var xS=$((fCe,nW)=>{"use strict";var tW=XT();nW.exports=function(e,n){if(!e)return function(o,i){return o?tW(i,o,n):i(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(o){return e[o]}));var r=0;return function(o,i){if(o)return tW(i,o,n);r>=e.length?i(!0):i(null,e[r++])}}});var oW=$((dCe,rW)=>{"use strict";var coe=xS();rW.exports=function(t){return coe(Object.keys(t))}});var ZT=$((mCe,iW)=>{"use strict";var loe=XT();iW.exports=function(e,n){return function(r,o){if(r)return loe(o,r,n);if(e!=null){var i=e;e=null,o(null,i)}else o(!0)}}});var aW=$((pCe,sW)=>{"use strict";sW.exports=function(e){var n=0;return e=e||1/0,function(r,o){if(r)return o&&o(r);if(n>e)return o(!0);o(null,n++)}}});var lW=$((hCe,cW)=>{"use strict";cW.exports=function(e){return e=e||Math.random,function(n,r){return n?r&&r(n):r(null,e())}}});var fW=$((gCe,uW)=>{"use strict";uW.exports=function(){return function(e,n){n(!0)}}});var mW=$((vCe,dW)=>{"use strict";dW.exports=function(e){return function(n,r){r(e)}}});var hW=$((wCe,pW)=>{"use strict";pW.exports={keys:oW(),once:ZT(),values:xS(),count:aW(),infinite:lW(),empty:fW(),error:mW()}});var fp=$((yCe,gW)=>{"use strict";gW.exports=function(e,n){var r,o,i;n||(i=new Error("no done callback supplied"));function s(a){if(r=a,o)return s.abort();(function c(){for(var l=!0,u=!1;l;)if(u=!1,r(null,function(f,m){if(u=!0,f=f||o){if(l=!1,n)n(f===!0?null:f);else if(f&&f!==!0)throw console.warn(i),f}else e&&e(m)===!1||o?(l=!1,r(o||!0,n||function(){})):l||c()}),!u){l=!1;return}})()}return s.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),o=a||!0,r)return r(o,c||function(){})},s}});var wW=$((CCe,vW)=>{"use strict";var uoe=fp();vW.exports=function(e){return uoe(null,e)}});var CW=$((ECe,yW)=>{"use strict";var foe=fp();yW.exports=function(e){return foe(function(n){console.log(n)},e)}});var dp=$((SCe,EW)=>{EW.exports=function(e){return e&&(typeof e=="string"?function(n){return n[e]}:typeof e=="object"&&typeof e.exec=="function"?function(n){var r=e.exec(n);return r&&r[0]}:e)}});var _W=$((xCe,xW)=>{"use strict";function SW(t){return t}var doe=dp(),moe=fp();xW.exports=function(e,n){var r=!1;return n?e=doe(e)||SW:(n=e,e=SW),moe(function(o){if(e(o))return r=!0,n(null,o),!1},function(o){r||n(o===!0?null:o,null)})}});var _S=$((_Ce,DW)=>{"use strict";var poe=fp();DW.exports=function(e,n,r){r||(r=n,n=null);var o=poe(function(i){n=e(n,i)},function(i){r(i,n)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return r(s===!0?null:s);n=a,o(i)})}:o}});var QT=$((DCe,IW)=>{"use strict";var hoe=_S();IW.exports=function(e){return hoe(function(n,r){return n.push(r),n},[],e)}});var bW=$((ICe,PW)=>{"use strict";var goe=QT();PW.exports=function(){return e=>{let n,r,o=new Promise((i,s)=>{n=i,r=s});return goe((i,s)=>{i?r(i):n(s)})(e),o}}});var RW=$((PCe,TW)=>{"use strict";var voe=_S();TW.exports=function(e){return voe(function(n,r){return n+r},"",e)}});var NW=$((bCe,kW)=>{"use strict";kW.exports={drain:fp(),onEnd:wW(),log:CW(),find:_W(),reduce:_S(),collect:QT(),collectAsPromise:bW(),concat:RW()}});var AW=$((TCe,LW)=>{"use strict";function woe(t){return t}var yoe=dp();LW.exports=function(e){return e?(e=yoe(e),function(n){return function(r,o){n(r,function(i,s){try{s=i?null:e(s)}catch(a){return n(a,function(){return o(a)})}o(i,s)})}}):woe}});var OW=$((RCe,FW)=>{"use strict";function Coe(t){return t}var Eoe=dp();FW.exports=function(e){if(!e)return Coe;e=Eoe(e);var n=!1,r,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,n?i(a,function(l){n?r=c:c(a)}):i(a,function(l){c(a)})):i(null,function(l,u){l?c(l):o?c(o):(n=!0,e(u,function(f,m){n=!1,o?(c(o),r&&r(o)):f?s(f,c):c(null,m)}))})}}}});var eR=$((kCe,UW)=>{var Soe=dp();function xoe(t){return t}UW.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(n){return e.test(n)}:Soe(e)||xoe}});var DS=$((NCe,$W)=>{"use strict";var _oe=eR();$W.exports=function(e){return e=_oe(e),function(n){return function r(o,i){for(var s,a=!0;a;)a=!1,s=!0,n(o,function(c,l){if(!c&&!e(l))return s?a=!0:r(c,i);i(c,l)}),s=!1}}}});var HW=$((LCe,MW)=>{"use strict";var Doe=eR(),Ioe=DS();MW.exports=function(e){return e=Doe(e),Ioe(function(n){return!e(n)})}});var WW=$((ACe,BW)=>{"use strict";BW.exports=function(e,n){var r=!1;function o(i){r||!n||(r=!0,n(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,l){c?o(c):e&&e(l),a(c,l)})}}}});var VW=$((FCe,jW)=>{"use strict";jW.exports=function(e,n){n=n||{};var r=n.last||!1,o=!1;if(typeof e=="number"){r=!0;var i=e;e=function(){return--i}}return function(s){function a(c){s(!0,function(l){r=!1,c(l||!0)})}return function(c,l){o&&!c?r?a(l):l(o):(o=c)?s(o,l):s(null,function(u,f){(o=o||u)?l(o):e(f)?l(null,f):(o=!0,r?l(null,f):a(l))})}}}});var tR=$((OCe,YW)=>{"use strict";function Poe(t){return t}var boe=dp(),Toe=DS();YW.exports=function(e,n){e=boe(e)||Poe;var r={};return Toe(function(o){var i=e(o);return r[i]?!!n:(r[i]=!0,!n)})}});var GW=$((UCe,qW)=>{"use strict";var Roe=tR();qW.exports=function(e){return Roe(e,!0)}});var KW=$(($Ce,zW)=>{"use strict";var koe=xS(),Noe=ZT();zW.exports=function(){return function(e){var n;return function(r,o){r?n?n(r,function(a){e(a||r,o)}):e(r,o):n?i():s();function i(){n(null,function(a,c){a?a===!0?s():e(!0,function(l){o(a)}):o(null,c)})}function s(){n=null,e(null,function(a,c){if(a)return o(a);c&&typeof c=="object"?c=koe(c):typeof c!="function"&&(c=Noe(c)),n=c,i()})}}}}});var XW=$((MCe,JW)=>{"use strict";JW.exports={map:AW(),asyncMap:OW(),filter:DS(),filterNot:HW(),through:WW(),take:VW(),unique:tR(),nonUnique:GW(),flatten:KW()}});var nR=$((HCe,ZW)=>{"use strict";ZW.exports=function t(e){var n=arguments.length;if(typeof e=="function"&&e.length===1){for(var r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(a){if(r==null)throw new TypeError("partial sink should only be called once!");var c=r;switch(r=null,n){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var i=e;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<n;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var xv=$((kf,nj)=>{"use strict";var QW=hW(),ej=NW(),tj=XW();kf=nj.exports=nR();kf.pull=kf;for(ls in QW)kf[ls]=QW[ls];var ls;for(ls in tj)kf[ls]=tj[ls];var ls;for(ls in ej)kf[ls]=ej[ls];var ls});var mR=$((hEe,_j)=>{var pEe=_j.exports=function(t){(function e(){var n=!0,r=!1,o=!1;do o=!0,n=!1,t.call(this,function(){o?n=!0:e()}),o=!1;while(n)})()}});var Ij=$((gEe,Dj)=>{var Koe=mR();Dj.exports=function(t,e){return function(n){var r=[],o,i;function s(l){r.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(o=!0,s(null)),l=="error"&&(i=u)},queue:s},c;return function(l,u){if(o=o||l,l)return n(l,function(){if(c){var f=c;c=null,f(l)}u(l)});c=u,Koe(function f(m){if(c)if(u=c,i)c=null,u(i);else if(r.length){var d=r.shift();c=null,u(d===null,d)}else n(o,function(p,h){if(p&&p!==!0)return i=p,m();if(o=o||p)e.call(a);else if(h!==null&&(t.call(a,h),i||o))return n(i||o,function(){c=null,u(i||o)});m(f)})})}}}});var bj=$((vEe,Pj)=>{Pj.exports=function(){var t=[],e=0;function n(){return t.reduce(function(r,o){return r+o.length},0)}return{length:e,data:this,add:function(r){if(!Buffer.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=e=e+r.length,t.push(r),this},has:function(r){return r==null?e>0:e>=r},get:function(r){var o;if(r==null||r===e){e=0;var i=t;return t=[],i.length==1?i[0]:Buffer.concat(i)}else if(t.length>1&&r<=(o=t[0].length)){var s=t[0].slice(0,r);return r===o?t.shift():t[0]=t[0].slice(r,o),e-=r,s}else if(r<e){for(var a=[],c=0;c+t[0].length<r;){var l=t.shift();c+=l.length,a.push(l)}return c<r&&(a.push(t[0].slice(0,r-c)),t[0]=t[0].slice(r-c,t[0].length),this.length=e=e-r),Buffer.concat(a)}else throw new Error("could not get "+r+" bytes")}}}});var Nj=$((wEe,kj)=>{"use strict";var Joe=bj();function Xoe(t){return Number.isFinite(t)}function Tj(t){return typeof t=="function"}function Rj(t,e){return e?function(n,r){var o=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),r)},e);t(n,function(i,s){clearTimeout(o),r(i,s)})}:t}kj.exports=function(t){var e=[],n,r,o=!1,i=Joe(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&i.has(1))e.shift().cb(null,i.get());else if(i.has(e[0].length)){var m=e.shift();m.cb(null,i.get(m.length))}else if(s==!0&&e[0].length&&i.length<e[0].length){var d="stream ended with:"+i.length+" but wanted:"+e[0].length;e.shift().cb(new Error(d))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!i.has(1)||c}function u(){var m=l();m&&!o&&n&&!o&&!a&&(o=!0,r(null,function(d,p){if(o=!1,d)return s=d,l();i.add(p),u()}))}function f(m){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}r=Rj(m,t),n=m,u()}return f.abort=function(m,d){c=m||!0,n?(o=!0,n(c,function(){for(;e.length;)e.shift().cb(c);d&&d(c)})):d()},f.read=function(m,d,p){if(Tj(d)&&(p=d,d=t),Tj(p))e.push({length:Xoe(m)?m:null,cb:p}),u();else return a=!0,function(h,g){if(o||i.has(1)){if(h)return n(h,g);e.push({length:null,cb:g}),u()}else Rj(n,d)(h,function(v,C){g(v,C)})}},f}});var Vj=$((Lf,jj)=>{var Zoe=Ij(),Qoe=Nj(),Lj=FC(),Aj=0,Fj=1,Oj=2,Uj="GOODBYE";function $j(t){let e=Buffer.alloc(9),n=0,r=t.value!==void 0?t.value:t.end;return typeof t=="string"&&t===Uj?(e.fill(0),[e,null]):(typeof r=="string"?(n=Fj,r=Buffer.from(r,"utf-8")):Buffer.isBuffer(r)?n=Aj:(n=Oj,r=Buffer.from(JSON.stringify(r),"utf-8")),n=t.stream<<3|t.end<<2|n,e[0]=n,e.writeUInt32BE(r.length,1),e.writeInt32BE(t.req||0,5),[e,r])}function Mj(t){if(t.length!==9)throw new Error("expected header to be 9 bytes long");let e=t[0],n=t.readUInt32BE(1);return{req:t.readInt32BE(5),stream:!!(e&8),end:!!(e&4),value:null,length:n,type:e&3}}function Hj(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(e.type===Aj)e.value=t;else if(e.type===Fj)e.value=t.toString();else if(e.type===Oj)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function Bj(t){return Zoe(function(n){t&&t("encoded: %o",n);let[r,o]=$j(n);this.queue(r),o!==null&&this.queue(o)})}function Wj(t){let e=Qoe(),n=!1;return function(o){return e(o),function(s,a){if(n)return a(!0);if(s)return e.abort(s,a);e.read(9,function(l,u){if(l)return a(l);let f=Mj(u);if(f.length===0)return n=!0,a(null,Uj);e.read(f.length,function(d,p){if(d)return a(d);try{Hj(p,f)}catch(h){return a(h)}t&&t("decoded: %o",f),a(null,f)})})}}}Lf=jj.exports=function(e,n){let r=n===!0?Lj("packet-stream-codec"):typeof n=="string"?Lj(n):null;return{source:Bj(r)(e.source),sink(o){return e.sink(Wj(r)(o))}}};Lf.encodePair=$j;Lf.decodeHead=Mj;Lf.decodeBody=Hj;Lf.encode=Bj;Lf.decode=Wj});var pR=$((yEe,Yj)=>{function eie(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}function tie(t){console.error("packet-stream asked to read after closed",t)}Yj.exports={flat:eie,closedread:tie}});var zj=$((CEe,Gj)=>{var{flat:qj,closedread:nie}=pR();function TS(t,e,n){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=n}TS.prototype.write=function(t,e){let n=this._ps;e?(this.writeEnd=e,n&&(n.read({req:this.id,stream:!0,end:!0,value:qj(e)}),this.readEnd&&this.destroy(e),n._maybedone(e))):n&&n.read({req:this.id,stream:!0,end:!1,value:t})};TS.prototype.end=function(t){this.write(null,qj(t||!0))};TS.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=nie,this._ps=null)};Gj.exports=TS});var Xj=$((EEe,Jj)=>{var Kj=zj(),{flat:hR,closedread:rie}=pR();function Oi(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}Oi.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};Oi.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));let n=this._req_counter++;this._requests.set(n,(r,o)=>{this._requests.delete(n),e(r,o),this._maybedone(r)}),this.read({req:n,stream:!1,end:!1,value:t})};Oi.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let t=this._req_counter++,e=new Kj(t,this,()=>{this._outstreams.delete(t)});return this._outstreams.set(t,e),e};Oi.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};Oi.prototype.destroy=function(t){t=t||hR(t),this.ended=t,this._closing=!0;let e=t===!0?new Error("unexpected end of parent stream"):t,n=0;this._requests.forEach(r=>{n++,r(e)}),this._instreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),this._outstreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),n===0&&t===!0&&(e=null),this._maybedone(e)};Oi.prototype._maybedone=function(t){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,t||!0),this._closed=!0,this._closecbs.forEach(e=>{e(t)}),this.opts=null,this._closecbs.length=0,this.read=rie,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};Oi.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};Oi.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};Oi.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};Oi.prototype._onrequest=function(t){let e=t.req*-1;if(t.req<0)this._requests.has(e)&&this._requests.get(e)(t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){let n=!1;this.opts.request(t.value,(r,o)=>{if(n)throw new Error("cb called twice from local api");n=!0,r?this.read({value:hR(r),end:!0,req:e}):this.read({value:o,end:!1,req:e}),this._maybedone()})}else{if(this.ended){let n=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:hR(n),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};Oi.prototype._onstream=function(t){if(t.req<0){let e=t.req*-1,n=this._outstreams.get(e);if(!n)return console.error("no stream for incoming msg",t);t.end?(n.writeEnd&&this._outstreams.delete(e),n.readEnd=!0,n.read(null,t.value),this._maybedone()):n.read(t.value)}else{let e=t.req,n=this._instreams.get(e);n||(n=new Kj(e*-1,this,()=>{this._instreams.delete(e)}),this._instreams.set(e,n),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)),t.end?(n.writeEnd&&this._instreams.delete(e),n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};Jj.exports=t=>new Oi(t)});var Qj=$((SEe,Pv)=>{"use strict";var oie=xv();function iie(t){let e=!1;return(n,r)=>{e||(e=!0,t(n,r))}}function gR(t,e){let n=[],r=!1,o=!1,i,s,a=iie((c,l)=>{e&&e(c,l),t=null,e=null,i=null,s&&s(c||!0,()=>{})});return t.read=function(c,l){if(r=r||l,i){let u=i;i=null,u(r,c)}else!r&&!o&&n.push(c);r&&a(r!==!0?r:null)},{source(c,l){c?(t&&t.write(null,c),l(c),n.length=0,o=!0,a(c!==!0?c:null)):n.length?l(null,n.shift()):r?l(r):i=l},sink(c){if(r)return s=null,c(r,()=>{});s=c,oie.drain(l=>{if(r)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function Zj(t,e){return gR(t,n=>{t.writeEnd||t.write(null,n||!0),e&&e(n)})}function sie(t){return Zj(t).source}function aie(t,e){return Zj(t,e).sink}Pv.exports=gR;Pv.exports.source=sie;Pv.exports.sink=aie;Pv.exports.duplex=gR});var tV=$((xEe,eV)=>{eV.exports=function(e){var n,r,o;function i(s){return function(a,c){s(a,function(l,u){if(l&&!o)return o=!0,c(null,e);l&&n?c(l):l?r=c:c(null,u)})}}return i.end=function(){return n=!0,r&&r(n),i},i}});var rV=$((_Ee,nV)=>{var cie=tV(),vR=xv();nV.exports=function(t,e){e=e||"GOODBYE";var n=cie(e);return{source:vR(t.source,n),sink:vR(vR.filter(function(r){if(r!==e)return!0;n.end()}),t.sink)}}});var bv=$(fs=>{"use strict";var RS=xv();function lie(t){return t?Object.keys(t).length===0:!0}fs.set=function(e,n,r){let o,i;for(let s=0;s<n.length;s++){let a=n[s];e[a]=e[a]||{},o=e,i=a,e=e[a]}o[i]=r};fs.get=function(e,n){if(typeof n=="string")return e[n];let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],e==null)return e}return r};fs.prefix=function(e,n){let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],typeof e!="object")return e}return typeof r!="object"?!!r:!1};function uie(t,e){for(let n in e){let r=e[n];t[r]||(t[r]={}),t=t[r]}return t}function fie(t,e){(function n(r,o){let i=e[o];if(r)e.length-1===o?delete r[i]:o<e.length&&n(r[i],o+1);else return;lie(r[i])&&delete r[i]})(t,0)}function die(t,e){for(let n in e)t[n]=e[n];return t}fs.mount=function(e,n,r){if(!Array.isArray(n))throw new Error("path must be array of strings");return die(uie(e,n),r)};fs.unmount=function(e,n){return fie(e,n)};var kS=t=>t==="source",NS=t=>t==="sink",wR=t=>t==="duplex",mie=t=>t==="sync",pie=t=>t==="async",oV=t=>mie(t)||pie(t),hie=t=>kS(t)||NS(t)||wR(t);fs.isRequest=oV;fs.isStream=hie;function yR(t){return function(e){e(t||!0,()=>{})}}function iV(t){return{source:RS.error(t),sink:yR(t)}}fs.errorAsStream=function(e,n){return kS(e)?RS.error(n):NS(e)?yR(n):iV(n)};fs.errorAsStreamOrCb=function(e,n,r){return oV(e)?r(n):wR(e)?iV(n):kS(e)?RS.error(n):NS(e)?yR(n):r(n)};fs.pipeToStream=function(e,n,r){kS(e)?n(r):NS(e)?r(n):wR(e)&&RS(n,r,n)}});var CR=$((IEe,sV)=>{"use strict";function gie(t){return typeof t=="string"?[`Error: ${t}`]:t.stack?t.stack.split(`
`):[`${t.name}: ${t.message}`]}sV.exports=function(e,n){let r=new Error(n),o=r.stack.split(`
`);o.splice(1,1);let i=gie(e);i[0]="  "+i[0];for(let s=1;s<o.length;s++)if(i.includes(o[s])){o.splice(s);break}return r.stack=o.concat(i).join(`
`),r}});var uV=$((PEe,lV)=>{"use strict";var vie=Xj(),ER=Qj(),wie=rV(),hp=bv(),aV=CR(),cV=FC()("muxrpc:psc");lV.exports=function(e,n,r){let o=vie({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,f=!1;l.push((m,d)=>{f=!0,u=!0,a(m,d)});try{e("async",c,l)}catch(m){if(u||f)throw aV(m,"no callback provided to muxrpc async funtion");a(m)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:f,args:m}=c,d,p;if(s.read=null,!hp.isStream(f))return s.write(null,new Error(`unsupported stream type: ${f}`));try{p=e(f,u,m)}catch(v){d=v}let g=ER[f==="source"?"sink":f==="sink"?"source":"duplex"](s);return hp.pipeToStream(f,g,d?hp.errorAsStream(f,d):p)}},close(s){if(o=null,i.ended=!0,!i.closed&&(i.closed=!0,r)){let a=r;r=null,a(s)}}}),i=wie(ER(o,()=>{}));return i=n?n(i,cV.enabled?cV.namespace:!1):i,i.remoteCall=function(s,a,c,l){if(a==="emit")return o.message(c);if(!(hp.isRequest(s)||hp.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(hp.isRequest(s))return o.request({name:a,args:c},l);let u=o.stream(),f=ER[s](u,l);return u.write({name:a,args:c,type:s}),f},i.isOpen=function(){return!o.ended},i.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!o){a&&a();return}if(s){o.destroy(s),a&&a();return}return o.close(c=>{if(a)a(c);else if(c)throw aV(c,"no callback provided for muxrpc close")}),this},i.closed=!1,i}});var dV=$((bEe,fV)=>{"use strict";var yie=CR(),Cie=bv();function SR(t,e,n,r){for(let o in e){let i=e[o],s=n?n.concat(o):[o];if(i&&typeof i=="object"){let a=i;t[o]=SR({},a,s,r)}else{let a=i;t[o]=(...c)=>r(a,s,c)}}return t}function Eie(t){if(t)throw yie(t,"callback not provided")}function Sie(t,e,n,r){t=t||{};function o(i,s,a){let c=typeof a[a.length-1]=="function"?a.pop():i==="sync"||i==="async"?null:Eie;if(typeof c=="function"){let l;try{l=n(i,s,a,c)}catch(u){return Cie.errorAsStreamOrCb(i,u,c)}return l}else return new Promise((l,u)=>{n(i,s,a,(f,m)=>{f?u(f):l(m)})})}return r?o("async","manifest",[function(i,s){if(i)return r(i);SR(t,s,null,o),r(null,s,t)}]):SR(t,e,null,o),t}fV.exports=Sie});var hV=$((TEe,pV)=>{"use strict";var LS=bv();function mV(t){return Array.isArray(t)?t:t.split(".")}function xie(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}pV.exports=function(e){if(xie(e))return e;if(typeof e=="function")return{pre:e};let n=null,r={};function o(i){if(i.allow){n={};for(let s of i.allow)LS.set(n,mV(s),!0)}else n=null;if(i.deny)for(let s of i.deny)LS.set(r,mV(s),!0);else r={};return this}return e&&o(e),o.pre=i=>{if(i=Array.isArray(i)?i:[i],n&&!LS.prefix(n,i))return new Error(`method:${i} is not in list of allowed methods`);if(r&&LS.prefix(r,i))return new Error(`method:${i} is on list of disallowed methods`)},o.post=()=>{},o.test=i=>o.pre(i),o.get=()=>({allow:n,deny:r}),o}});var vV=$((REe,gV)=>{"use strict";var _ie=hV(),xR=bv();gV.exports=function(e,n,r){r=_ie(r);function o(s,a){return s===xR.get(n,a)}function i(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&o("sync",a)){let l=c.pop(),u;try{u=xR.get(e,a).apply(this,c)}catch(f){return l(f)}return l(null,u)}if(!o(s,a))throw new Error(`no ${s}:${a}`);return xR.get(e,a).apply(this,c)}return function(a,c,l){let u=r.pre(c,l);if(u)throw u;return i.call(this,a,c,l)}}});var CV=$((kEe,yV)=>{"use strict";var Die=Vj(),Iie=require("events").EventEmitter,Pie=uV(),bie=dV(),Tie=vV();function wV(t,e,n,r,o,i,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new Iie;i||(i=Die);let l,u={_emit(m,d){return c&&c._emit(m,d),u},id:r},f=Pie(Tie(n,e,o).bind(u),i,m=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let d=l;l=null,d(m)}});if(bie(c,t,(m,d,p,h)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(m,d,p,h)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",d=>{u.id=d});let m=!0;c.createStream=d=>{if(l=d,m)return m=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(m,d){return f.close(m,d),this},c}yV.exports=function(t,e,n){return arguments.length>3?wV.apply(this,arguments):function(r,o,i){return wV(t,e,r,i,o,n,!0)}}});var US=$((cc,xV)=>{var NEe=nR(),Rie=mR();function EV(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function SV(t,e,n){var r,o=!1,i;function s(){i||(i=!0,n&&n(r===!0?null:r))}function a(){o||(o=!0,l(),r?s():t(r=!0,s))}function c(u){l(),r||t(r=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){Rie(function(u){t(null,function(f,m){if(r=r||f,f===!0)return e._isStdio?s():e.end();if(r=r||f)return EV(e),s(r);if(e._isStdio)e.write(m,function(){u()});else{var d=e.write(m);d===!1?e.once("drain",u):u()}})})})}function kie(t){var e=!1,n=!1,r;function o(){var i=t.read();if(i!==null&&r){var s=r;r=null,s(null,i)}}return t.on("readable",function(){n=!0,r&&o()}).on("end",function(){e=!0,r&&r(e)}).on("error",function(i){e=i,r&&r(e)}),function(i,s){r=s,e?s(e):n&&o()}}function AS(t){var e=[],n=[],r,o=!1,i;function s(){for(;(e.length||r)&&n.length;)n.shift()(e.length?null:r,e.shift());!e.length&&o&&(o=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(o=!0,t.pause())}),t.on("end",function(){r=!0,s()}),t.on("close",function(){r=!0,s()}),t.on("error",function(a){r=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;n.length;)n.shift()(a);c(a)};var l=u;if(r)return u();t.once("close",u),EV(t)}else n.push(c),s()}}var Nie=AS,FS=function(t,e){return function(n){return SV(n,t,e)}},OS=function(t){return AS(t)};cc=xV.exports=function(t,e){return t.writable&&t.write?t.readable?function(n){return SV(n,t,e),AS(t)}:FS(t,e):OS(t)};cc.sink=FS;cc.source=OS;cc.read=Nie;cc.read1=AS;cc.read2=kie;cc.duplex=function(t,e){return{source:OS(t),sink:FS(t,e)}};cc.transform=function(t){return function(e){var n=OS(t);return FS(t)(e),n}}});var DV=$((LEe,$S)=>{var Lie=require("stream");$S.exports=_R;$S.exports.source=function(t){return _R(null,t)};$S.exports.sink=function(t){return _R(t,null)};var _V=typeof setImmediate>"u"?process.nextTick:setImmediate;function _R(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var n=[],r=[],o,i,s=new Lie;s.writable=s.readable=!0,s.write=function(g){return n.length?n.shift()(null,g):r.push(g),n.length||(i=!0),!!n.length},s.end=function(){e?r.length?h():e(o=!0,n.length?n.shift():function(){}):n.length&&n.shift()(!0)},s.source=function(g,v){r.length?(v(null,r.shift()),r.length||s.emit("drain")):((o=o||g)?v(o):n.push(v),i&&(i=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,f=!1,m=!1;if(s.sink=function(g){e=g,_V(h)},e){s.sink(e),s.paused=!0;var d=s.on.bind(s);s.on=(g,v)=>{var C=d(g,v);return g==="data"&&s.paused&&_V(s.resume.bind(s)),C};var p=s.pipe.bind(s);s.pipe=function(g,v){var C=p(g,v);return s.paused&&s.resume(),C}}function h(){if(f=!1,!(!e||m)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");m=!0,e(null,function g(v,C){m=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(C),f=!0):v&&(o=v)!==!0?s.emit("error",v):(o=o||v)?s.emit("end"):(s.emit("data",C),m=!0,e(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,h(),s},s.destroy=function(){!o&&e&&e(o=!0,function(){}),o=!0,n.length&&n.shift()(!0),s.emit("close")},s}});var PV=$((AEe,IV)=>{IV.exports=Aie;function Aie(t,e){typeof t=="function"&&(e=t,t=!1);var n=[],r,o;function i(f,m){f&&(r=f,o&&u(r)),o=m,l()}var s;function a(f){s=s||f||!0,l()}function c(f){if(!s){if(o){u(r,f);return}n.push(f)}}if(t)return{push:c,end:a,source:i,buffer:n};return i.push=c,i.end=a,i.buffer=n,i;function l(){o&&(r?u(r):!n.length&&s?u(s):n.length&&u(null,n.shift()))}function u(f,m){var d=o;if(f&&e){var p=e;e=null,p(f===!0?null:f)}o=null,d(f,m)}}});var BR=$((Dxe,iY)=>{"use strict";var rY=require("child_process"),pse=1024*1024,oY={exec(t,e){rY.exec(t,{maxBuffer:2*pse,windowsHide:!0},e)},spawn(t,e,n){return rY.spawn(t,e,n)},stripLine(t,e){let n=0;for(;e-- >0;){let r=t.indexOf(`
`,n);r>=0&&(n=r+1)}return n>0?t.substring(n):t},split(t,e){let n=t.trim().split(/\s+/);return n.length>e&&(n[e-1]=n.slice(e-1).join(" ")),n},extractColumns(t,e,n){let r=t.split(/(\r\n|\n|\r)/),o=[];return n||(n=Math.max.apply(null,e)+1),r.forEach(i=>{let s=oY.split(i,n),a=[];e.forEach(c=>{a.push(s[c]||"")}),o.push(a)}),o},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n|\n\n)/).filter(n=>n&&n.trim().length>0).map(n=>n.split(/(\r\n|\n|\r)/).filter(r=>r.trim().length>0));return e.forEach(n=>{for(let r=0;n[r];){let o=n[r];o.startsWith(" ")?(n[r-1]+=o.trimLeft(),n.splice(r,1)):r+=1}}),e.map(n=>{let r={};return n.forEach(o=>{let i=o.indexOf(":"),s=o.slice(0,i).trim();r[s]=o.slice(i+1).trim()}),r})}};iY.exports=oY});var aY=$((sY,ax)=>{(function(t,e){"use strict";typeof define=="function"&&define.amd?define(e):typeof ax=="object"&&ax.exports?ax.exports=e():t.log=e()})(sY,function(){"use strict";var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function s(p,h){var g=p[h];if(typeof g.bind=="function")return g.bind(p);try{return Function.prototype.bind.call(g,p)}catch{return function(){return Function.prototype.apply.apply(g,[p,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(p){return p==="debug"&&(p="log"),typeof console===e?!1:p==="trace"&&n?a:console[p]!==void 0?s(console,p):console.log!==void 0?s(console,"log"):t}function l(){for(var p=this.getLevel(),h=0;h<r.length;h++){var g=r[h];this[g]=h<p?t:this.methodFactory(g,p,this.name)}if(this.log=this.debug,typeof console===e&&p<this.levels.SILENT)return"No console available for logging"}function u(p){return function(){typeof console!==e&&(l.call(this),this[p].apply(this,arguments))}}function f(p,h,g){return c(p)||u.apply(this,arguments)}function m(p,h){var g=this,v,C,w,y="loglevel";typeof p=="string"?y+=":"+p:typeof p=="symbol"&&(y=void 0);function S(k){var E=(r[k]||"silent").toUpperCase();if(!(typeof window===e||!y)){try{window.localStorage[y]=E;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+E+";"}catch{}}}function I(){var k;if(!(typeof window===e||!y)){try{k=window.localStorage[y]}catch{}if(typeof k===e)try{var E=window.document.cookie,_=encodeURIComponent(y),T=E.indexOf(_+"=");T!==-1&&(k=/^([^;]+)/.exec(E.slice(T+_.length+1))[1])}catch{}return g.levels[k]===void 0&&(k=void 0),k}}function x(){if(!(typeof window===e||!y)){try{window.localStorage.removeItem(y)}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function A(k){var E=k;if(typeof E=="string"&&g.levels[E.toUpperCase()]!==void 0&&(E=g.levels[E.toUpperCase()]),typeof E=="number"&&E>=0&&E<=g.levels.SILENT)return E;throw new TypeError("log.setLevel() called with invalid level: "+k)}g.name=p,g.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},g.methodFactory=h||f,g.getLevel=function(){return w??C??v},g.setLevel=function(k,E){return w=A(k),E!==!1&&S(w),l.call(g)},g.setDefaultLevel=function(k){C=A(k),I()||g.setLevel(k,!1)},g.resetLevel=function(){w=null,x(),l.call(g)},g.enableAll=function(k){g.setLevel(g.levels.TRACE,k)},g.disableAll=function(k){g.setLevel(g.levels.SILENT,k)},g.rebuild=function(){if(i!==g&&(v=A(i.getLevel())),l.call(g),i===g)for(var k in o)o[k].rebuild()},v=A(i?i.getLevel():"WARN");var F=I();F!=null&&(w=A(F)),l.call(g)}i=new m,i.getLogger=function(h){if(typeof h!="symbol"&&typeof h!="string"||h==="")throw new TypeError("You must supply a name when creating a logger.");var g=o[h];return g||(g=o[h]=new m(h,i.methodFactory)),g};var d=typeof window!==e?window.log:void 0;return i.noConflict=function(){return typeof window!==e&&window.log===i&&(window.log=d),i},i.getLoggers=function(){return o},i.default=i,i})});var WR=$((Ixe,cY)=>{"use strict";var hse=aY();cY.exports=hse});var uY=$((Pxe,lY)=>{"use strict";var gse=require("os"),cx=require("fs"),Ui=BR(),vse=WR(),wse=t=>new Promise((e,n)=>{cx.existsSync(t)?e():cx.mkdir(t,r=>{r?n(r):e()})}),jR={darwin(t){return new Promise((e,n)=>{Ui.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(r,o,i){if(r)n(r);else{if(r=i.toString().trim(),r){n(r);return}let s=Ui.stripLine(o.toString(),2),a=Ui.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);return!!(l&&l[1]===String(t))});a&&a[2].length?e(parseInt(a[2],10)):n(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,n)=>{Ui.exec("netstat -tunlp",function(o,i,s){if(o)n(o);else{let a=s.toString().trim();a&&vse.warn(a);let c=Ui.stripLine(i.toString(),2),l=Ui.extractColumns(c,[3,6],7).find(u=>{let f=String(u[0]).match(/:(\d+)$/);return!!(f&&f[1]===String(t))});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,n)=>{Ui.exec("netstat -ano",function(r,o,i){if(r)n(r);else{if(r=i.toString().trim(),r){n(r);return}let s=Ui.stripLine(o.toString(),4),a=Ui.extractColumns(s,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);return!!(l&&l[1]===String(t))});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):n(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,n)=>{let r=gse.tmpdir()+"/.find-process",o=r+"/"+process.pid,i='netstat -tunp >> "'+o+'"';wse(r).then(()=>{Ui.exec(i,()=>{cx.readFile(o,"utf8",(s,a)=>{if(cx.unlink(o,()=>{}),s)n(s);else{a=Ui.stripLine(a,2);let c=Ui.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(t))});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})})})}};function yse(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in jR))return r(new Error(`platform ${e} is unsupported`));let o=jR[e];typeof o=="string"&&(o=jR[o]),o(t).then(n,r)})}lY.exports=yse});var pY=$((bxe,mY)=>{"use strict";var lx=require("path"),Ol=BR();function VR(t,e){return e?t&&t.match?t.match(e):!1:!0}function fY(t){let e=t.split(lx.sep),n=e[e.length-1];n&&(e[e.length-1]=n.split(" ")[0]);let r=[];for(let o of e){let i=o.indexOf(" -");if(i>=0){r.push(o.substring(0,i).trim());break}else if(o.endsWith(" ")){r.push(o.trim());break}r.push(o)}return r.join(lx.sep)}function dY(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return lx.basename(t.substring(0,e))}return lx.basename(t)}var YR={darwin(t){return new Promise((e,n)=>{let r;"pid"in t?r=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:r="ps ax -ww -o pid,ppid,uid,gid,args",Ol.exec(r,function(o,i,s){if(o)"pid"in t?e([]):n(o);else{if(o=s.toString().trim(),o){n(o);return}let a=Ol.stripLine(i.toString(),1),l=Ol.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?VR(u[4],t.name):!!u[0]).map(u=>{let f=String(u[4]),m=fY(f);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:dY(m),bin:m,cmd:u[4]}});t.config.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,n)=>{let r="[Console]::OutputEncoding = [System.Text.Encoding]::UTF8; Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",o=[],i=Ol.spawn("powershell.exe",["/c",r],{detached:!1,windowsHide:!0});i.stdout.on("data",s=>{o.push(s.toString())}),i.on("error",s=>{n(new Error("Command '"+r+"' failed with reason: "+s.toString()))}),i.on("close",s=>{if(s!==0)return n(new Error("Command '"+r+"' terminated with code: "+s));let a=Ol.parseTable(o.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.config.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:VR(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,n)=>{Ol.exec("ps",function(o,i,s){if(o)"pid"in t?e([]):n(o);else{if(o=s.toString().trim(),o){n(o);return}let a=Ol.stripLine(i.toString(),1),l=Ol.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?VR(u[1],t.name):!!u[0]).map(u=>{let f=String(u[1]),m=fY(f);return{pid:parseInt(u[0],10),name:dY(m),bin:m,cmd:f}});t.config.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function Cse(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in YR))return r(new Error(`platform ${e} is unsupported`));let o=YR[e];typeof o=="string"&&(o=YR[o]),o(t).then(i=>{if(t.skipSelf){let s=i.filter(a=>a.pid!==process.pid);n(s)}else n(i)},r)})}mY.exports=Cse});var vY=$((Txe,gY)=>{"use strict";var Ese=uY(),hY=pY(),Sse=WR(),qR={port(t,e){return Ese(t).then(n=>qR.pid(n,e),()=>[])},pid(t,e){return hY({pid:t,config:e})},name(t,e){return hY({name:t,config:e,skipSelf:!0})}};function xse(t,e,n){let r=Object.assign({logLevel:"warn",strict:typeof n=="boolean"?n:!1},n);return Sse.setLevel(r.logLevel),new Promise((o,i)=>{if(!(t in qR))i(new Error(`do not support find by "${t}"`));else{let s=/^\d+$/.test(e);t==="pid"&&!s?i(new Error("pid must be a number")):t==="port"&&!s?i(new Error("port must be a number")):qR[t](e,r).then(o,i)}})}gY.exports=xse});var yY=$((Rxe,wY)=>{"use strict";wY.exports=vY()});var Bp,vc,ra,ys,Wp,lw,zk=ne(()=>{Bp="function",vc="object",ra="undefined",ys="prototype",Wp=Object,lw=Wp[ys]});function oa(t,e){return t||e}function Ln(t,e){return t[e]}function Gn(t,e){try{return{v:t.apply(this,e)}}catch(n){return{e:n}}}function Nue(t,e){var n=Gn(t);return n.e?e:n.v}function f_(t){return function(e){return typeof e===t}}function rG(t){var e="[object "+t+"]";return function(n){return!!(n&&d_(n)===e)}}function d_(t){return fN[u_].call(t)}function dN(t,e){return typeof t===e}function Ve(t){return typeof t===ed||t===ed}function Lue(t){return!m_(t)}function ae(t){return t===kn||Ve(t)}function Aue(t){return t===kn||!m_(t)}function m_(t){return!!t||t!==$o}function Fue(t){return!Kk&&(Kk=["string","number","boolean",ed,"symbol","bigint"]),t!==fw&&Kk.indexOf(t)!==-1}function tn(t){return!t&&ae(t)?!1:!!t&&typeof t===fw}function uo(t){return!!(t&&t.then&&Re(t.then))}function mN(t){return!t||!Cs(t)}function Cs(t){return!(!t||Nue(function(){return!(t&&0+t)},!t))}function mr(t,e){return!!t&&fN.hasOwnProperty[Dr](t,e)}function Oue(t,e){return mr(t,e)||!!h_(t,e)}function Ie(t,e,n){if(t&&tn(t)){for(var r in t)if(Es(t,r)&&e[Dr](n||t,r,t[r])===-1)break}}function oG(t){var e={};if(e[n_.c]=!0,e[n_.e]=!0,t.l){e.get=function(){return t.l.v};var n=h_(t.l,"v");n&&n.set&&(e.set=function(r){t.l.v=r})}return Ie(t,function(r,o){e[n_[r]]=Lue(o)?e[n_[r]]:o}),e}function pN(t,e,n,r,o,i){var s={e:i,c:o};return n&&(s.g=n),r&&(s.s=r),Mo(t,e,oG(s))}function gt(t,e,n){return Mo(t,e,oG(n))}function sG(t,e,n,r,o){var i={};return Ie(t,function(s,a){a_(i,s,e?a:s),a_(i,a,n?a:s)}),r?r(i):i}function a_(t,e,n,r){Mo(t,e,{value:n,enumerable:!0,writable:!1})}function Ee(t,e){var n=lN,r=fN[u_][Dr](t);r===Uue&&(t={stack:Sn(t.stack),message:Sn(t.message),name:Sn(t.name)});try{n=JSON.stringify(t,kn,e?typeof e=="number"?e:4:$o),n=(n?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):kn)||Sn(t)}catch(o){n=" - "+Ee(o,e)}return r+": "+n}function An(t){throw new Error(t)}function Pr(t){throw new TypeError(t)}function cG(t){return t}function $ue(t){return t[aN]||kn}function Ss(t){return aG&&Ie(t,function(e,n){(we(n)||tn(n))&&Ss(n)}),fo(t)}function lG(t){return sG(t,1,0,fo)}function Mue(t){return sG(t,0,0,fo)}function Hue(t){var e={};return Ie(t,function(n,r){a_(e,n,r[1]),a_(e,r[0],r[1])}),fo(e)}function uG(t){return Hue(t)}function dG(){var t;return typeof globalThis!==ed&&(t=globalThis),!t&&typeof self!==ed&&(t=self),!t&&typeof window!==ed&&(t=window),!t&&typeof global!==ed&&(t=global),t}function mG(){if(!Jk){var t=Gn(dG).v||{};Jk=t[J3]=t[J3]||{}}return Jk}function Gp(t,e,n){var r=e?e[t]:kn;return function(o){var i=(o?o[t]:kn)||r;if(i||n){var s=arguments;return(i||n).apply(o,i?yc[Dr](s,1):s)}Pr('"'+Sn(t)+'" not defined for '+Ee(o))}}function Bue(t){return function(e){return e[t]}}function Wue(t,e,n){return ae(t)&&Pr("Invalid "+Ee(t)),n<0?lN:(e=e||0,e<0&&(e=sa(e+t[td],0)),Ve(n)?X3(t,e):X3(t,e,e+n))}function od(t,e){return zn(t,0,e)}function jue(){if(!Xk){var t=mG();Xk=t.gblSym=t.gblSym||{k:{},s:{}}}return Xk}function gN(t){var e={description:Sn(t),toString:function(){return uN+"("+t+")"}};return e[kue]=!0,e}function Vue(t){var e=jue();if(!Es(e.k,t)){var n=gN(t),r=br(e.s).length;n[Z3]=function(){return r+"_"+n[u_]()},e.k[t]=n,e.s[n[Z3]()]=Sn(t)}return e.k[t]}function Yue(t){!r_&&(r_={});var e,n=fG[t];return n&&(e=r_[n]=r_[n]||gN(uN+"."+n)),e}function ou(){Nn=mG()}function pG(t){var e={};return!Nn&&ou(),e.b=Nn.lzy,Mo(e,"v",{configurable:!0,get:function(){var n=t();return Nn.lzy||Mo(e,"v",{value:n}),e.b=Nn.lzy,n}}),e}function ui(t){return Mo({toJSON:function(){return t}},"v",{value:t})}function pw(t,e){var n;return function(){return!Nn&&ou(),(!n||Nn.lzy)&&(n=ui(Gn(t,e).v)),n.v}}function mo(t){return!Nn&&ou(),(!uw||t===!1||Nn.lzy)&&(uw=ui(Gn(dG).v||kn)),uw.v}function vt(t,e){var n;if(!uw||e===!1?n=mo(e):n=uw.v,n&&n[t])return n[t];if(t===hG)try{return window}catch{}return kn}function id(){return!!Fn()}function zp(){return!!On()}function hw(){return!!Kn()}function vN(){return!!g_()}function v_(){return Vp=ui(Gn(vt,[uN]).v),Vp}function que(t){var e=(Nn.lzy?0:Vp)||v_();return e.v?e.v[t]:$o}function vG(){return!!Gue()}function Gue(){return!Nn&&ou(),((Nn.lzy?0:Vp)||v_()).v}function gw(t,e){var n=fG[t];!Nn&&ou();var r=(Nn.lzy?0:Vp)||v_();return r.v?r.v[n||t]:e?$o:Yue(t)}function Kp(t,e){!Nn&&ou();var n=(Nn.lzy?0:Vp)||v_();return n.v?n.v(t):e?kn:gN(t)}function w_(t){return!Nn&&ou(),Zk=(Nn.lzy?0:Zk)||ui(Gn(que,["for"]).v),(Zk.v||Vue)(t)}function c_(t){return!!t&&Re(t.next)}function wN(t){return!Aue(t)&&Re(t[gw(3)])}function y_(t,e,n){if(t&&(c_(t)||(!o_&&(o_=ui(gw(3))),t=t[o_.v]?t[o_.v]():kn),c_(t))){var r=$o,o=$o;try{for(var i=0;!(o=t.next()).done&&e[Dr](n||t,o.value,i,t)!==-1;)i++}catch(s){r={e:s},t.throw&&(o=kn,t.throw(r))}finally{try{o&&!o.done&&t.return&&t.return(o)}finally{if(r)throw r.e}}}}function jp(t,e,n){return t.apply(e,n)}function xs(t,e){return!Ve(e)&&t&&(we(e)?jp(t.push,t,e):c_(e)||wN(e)?y_(e,function(n){t.push(n)}):t.push(e)),t}function ee(t,e,n){if(t)for(var r=t[td]>>>0,o=0;o<r&&!(o in t&&e[Dr](n||t,t[o],o,t)===-1);o++);}function Jp(t,e,n){return((t?t.slice:kn)||yc).apply(t,yc[Dr](arguments,1))}function zue(t,e,n){return wt(t,e,n)!==-1}function Kue(t){if(!t)return{};var e=typeof t;e!==fw&&e!==l_&&Pr("Prototype must be an Object or function: "+Ee(t));function n(){}return n[wc]=t,new n}function wG(t,e){var n=li.setPrototypeOf||function(r,o){var i;!Qk&&(Qk=ui((i={},i[aN]=[],i instanceof Array))),Qk.v?r[aN]=o:Ie(o,function(s,a){return r[s]=a})};return n(t,e)}function Jue(t,e,n){Gn(gt,[e,s_,{v:t,c:!0,e:!1}]),e=wG(e,n);function r(){this[i_]=e,Gn(gt,[this,s_,{v:t,c:!0,e:!1}])}return e[wc]=n===kn?ca(n):(r[wc]=n[wc],new r),e}function Q3(t,e){e&&(t[s_]=e)}function CN(t,e,n){var r=n||Error,o=r[wc][s_],i=Error.captureStackTrace;return Jue(t,function(){var s=this,a=arguments;try{Gn(Q3,[r,t]);var c=jp(r,s,yc[Dr](a))||s;if(c!==s){var l=cN(s);l!==cN(c)&&wG(c,l)}return i&&i(c,s[i_]),e&&e(c,a),c}finally{Gn(Q3,[r,o])}},r)}function xn(){return(Date.now||Xue)()}function Xue(){return new Date().getTime()}function Zue(t){return function(n){return ae(n)&&Pr("strTrim called ["+Ee(n)+"]"),n&&n.replace&&(n=n.replace(t,lN)),n}}function Tr(t){if(!t||typeof t!==fw)return!1;nN||(nN=zp()?On():!0);var e=!1;if(t!==nN){tN||(eN=Function[wc][u_],tN=eN[Dr](li));try{var n=cN(t);e=!n,e||(mr(n,i_)&&(n=n[i_]),e=!!(n&&typeof n===l_&&eN[Dr](n)===tN))}catch{}}return e}function efe(t){return t.value&&EG(t),!0}function tfe(t,e,n,r){var o;return ee(t,function(i){if(i.k===e)return o=i,-1}),o||(o={k:e,v:e},t.push(o),r(o)),o.v}function EN(t,e,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],s={handler:n.handler,src:n.src,path:i},a=typeof e,c=!1,l=e===kn;l||(e&&a===fw?c=Tr(e):l=Fue(a));var u={type:a,isPrim:l,isPlain:c,value:e,result:e,path:i,origin:n.src,copy:function(f,m){return EN(t,f,m?s:n,m)},copyTo:function(f,m){return CG(t,f,m,s)}};return u.isPrim?o&&o[Dr](n,u)?u.result:e:tfe(t,e,i,function(f){gt(u,"result",{g:function(){return f.v},s:function(p){f.v=p}});for(var m=0,d=o;!(d||(m<eG.length?eG[m++]:efe))[Dr](n,u);)d=kn})}function CG(t,e,n,r){if(!ae(n))for(var o in n)e[o]=EN(t,n[o],r,o);return e}function nfe(t,e,n){var r={handler:n,src:e,path:[]};return CG([],t,e,r)}function rfe(t,e){var n={handler:e,src:t};return EN([],t,n)}function ofe(t){var e=t.value;if(we(e)){var n=t.result=[];return n.length=e.length,t.copyTo(n,e),!0}return!1}function ife(t){var e=t.value;return p_(e)?(t.result=new Date(e.getTime()),!0):!1}function sfe(t){return t.type===l_}function EG(t){var e=t.value;if(e&&t.isPlain){var n=t.result={};return t.copyTo(n,e),!0}return!1}function afe(t,e){return ee(e,function(n){nfe(t,n)}),t}function SN(t,e,n,r,o,i,s){return afe(rfe(t)||{},yc[Dr](arguments))}function sd(){return!Nn&&ou(),(!rN||Nn.lzy)&&(rN=ui(Gn(vt,["performance"]).v)),rN.v}function ww(){var t=sd();return t&&t.now?t.now():xn()}function cfe(t,e,n){ke(t)||Pr("'"+Ee(t)+"' is not a string");var r=ke(e)?e:Sn(e),o=!Ve(n)&&n<t[td]?n:t[td];return zn(t,o-r[td],o)===r}function lfe(t,e,n){ke(t)||Pr("'"+Ee(t)+"' is not a string");var r=ke(e)?e:Sn(e),o=n>0?n:0;return zn(t,o,o+r[td])===r}function ffe(t,e,n){var r=!0,o=t?e(kn):kn,i;function s(){return r=!1,o&&o[iN]&&o[iN](),i}function a(){o&&n(o),o=kn}function c(){return o=e(o),r||s(),i}function l(u){!u&&o&&a(),u&&!o&&c()}return i={cancel:a,refresh:c},i[sN]=function(){return o&&o[sN]?o[sN]():r},i[oN]=function(){return r=!0,o&&o[oN]&&o[oN](),i},i[iN]=s,i=Mo(i,ufe,{get:function(){return!!o},set:l}),{h:i,dn:function(){o=kn}}}function xN(t,e,n){var r=we(e),o=r?e.length:0,i=(o>0?e[0]:r?$o:e)||setTimeout,s=(o>1?e[1]:$o)||clearTimeout,a=n[0];n[0]=function(){c.dn(),jp(a,$o,yc[Dr](arguments))};var c=ffe(t,function(l){if(l){if(l.refresh)return l.refresh(),l;jp(s,$o,[l])}return jp(i,$o,n)},function(l){jp(s,$o,[l])});return c.h}function fi(t,e){return xN(!0,$o,yc[Dr](arguments))}function xG(t,e,n){return xN(!0,t,yc[Dr](arguments,1))}function _G(t,e){return xN(!1,$o,yc[Dr](arguments))}var $o,kn,lN,l_,fw,wc,aN,ed,i_,uN,kue,td,s_,Dr,u_,li,fN,tG,nd,dw,nG,mw,yc,Kk,ke,Re,we,p_,Ir,ia,rd,h_,Es,n_,Mo,iG,Sn,Uue,aG,Yp,br,fo,hN,cN,fG,J3,Jk,qp,ru,sa,X3,zn,aa,Z3,Xk,r_,Nn,hG,uw,Fn,On,Kn,g_,gG,Vp,Zk,o_,wt,Cc,yN,vw,ca,Qk,Que,tt,ji,yG,eN,tN,nN,eG,Xp,rN,SG,ad,Vi,Zp,oN,iN,sN,ufe,Ne=ne(()=>{$o=void 0,kn=null,lN="",l_="function",fw="object",wc="prototype",aN="__proto__",ed="undefined",i_="constructor",uN="Symbol",kue="_polyfill",td="length",s_="name",Dr="call",u_="toString",li=oa(Object),fN=Ln(li,wc),tG=oa(String),nd=Ln(tG,wc),dw=oa(Math),nG=oa(Array),mw=Ln(nG,wc),yc=Ln(mw,"slice");ke=f_("string"),Re=f_(l_);we=Ln(nG,"isArray"),p_=rG("Date"),Ir=f_("number"),ia=f_("boolean"),rd=rG("Error");h_=Ln(li,"getOwnPropertyDescriptor");Es=oa(Ln(li,"hasOwn"),Oue);n_={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};Mo=Ln(li,"defineProperty"),iG=Ln(li,"defineProperties");Sn=oa(tG),Uue="[object Error]";aG=Ln(li,"freeze");Yp=Ln(li,"assign"),br=Ln(li,"keys");fo=oa(aG,cG),hN=oa(Ln(li,"seal"),cG),cN=oa(Ln(li,"getPrototypeOf"),$ue);fG=Mue({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),J3="__tsUtils$gblCfg";qp=Gp;ru=Ln(dw,"min"),sa=Ln(dw,"max"),X3=qp("slice",nd),zn=qp("substring",nd),aa=Gp("substr",nd,Wue);Z3="_urid";hG="window";Fn=pw(vt,["document"]);On=pw(vt,[hG]);Kn=pw(vt,["navigator"]);g_=pw(vt,["history"]),gG=pw(function(){return!!Gn(function(){return process&&(process.versions||{}).node}).v});wt=qp("indexOf",mw),Cc=qp("map",mw);yN=Gp("includes",mw,zue),vw=qp("reduce",mw),ca=oa(Ln(li,"create"),Kue);Que=Zue(/^\s+|(?=\s)\s+$/g),tt=Gp("trim",nd,Que),ji=Ln(dw,"floor"),yG=Ln(dw,"ceil");eG=[ofe,EG,sfe,ife];Xp=Bue(td);SG=Ln(dw,"round"),ad=Gp("endsWith",nd,cfe);Vi=qp("indexOf",nd),Zp=Gp("startsWith",nd,lfe);oN="ref",iN="unref",sN="hasRef",ufe="enabled"});function Ho(t,e){typeof e!==Bp&&e!==null&&Pr("Class extends value "+String(e)+" is not a constructor or null"),_N(t,e);function n(){this.constructor=t}t[ys]=e===null?ca(e):(n[ys]=e[ys],new n)}function C_(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var QPe,ebe,DG,mfe,Yi,_N,IG=ne(()=>{Ne();zk();QPe=(mo()||{}).Symbol,ebe=(mo()||{}).Reflect,DG="hasOwnProperty",mfe=function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)lw[DG].call(e,o)&&(t[o]=e[o])}return t},Yi=Yp||mfe,_N=function(t,e){return _N=Wp.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r[DG](o)&&(n[o]=r[o])},_N(t,e)}});var PG=ne(()=>{});var Bo=ne(()=>{zk();IG();PG();Ne()});function __(t){return t&&(t===NN[Ec]||t===Array[Ec])}function LN(t){return __(t)||t===Function[Ec]}function cd(t){var e;if(t){if(Cw)return Cw(t);var n=t[kN]||t[Ec]||(t[D_]?t[D_][Ec]:null);e=t[S_]||n,mr(t,S_)||(delete t[DN],e=t[S_]=t[DN]||t[S_],t[DN]=n)}return e}function b_(t,e){var n=[];if(RG)n=RG(t);else for(var r in t)typeof r=="string"&&mr(t,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)e(n[o])}function AN(t,e,n){return e!==D_&&typeof t[e]===I_&&(n||mr(t,e))&&e!==kN&&e!==Ec}function T_(t){Pr("DynamicProto: "+t)}function hfe(t){var e=ca(null);return b_(t,function(n){!e[n]&&AN(t,n,!1)&&(e[n]=t[n])}),e}function FN(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}function gfe(t,e,n,r){function o(c,l,u){var f=l[u];if(f[PN]&&r){var m=c[P_]||{};m[yw]!==!1&&(f=(m[l[Qp]]||{})[u]||f)}return function(){return f.apply(c,arguments)}}var i=ca(null);b_(n,function(c){i[c]=o(e,n,c)});for(var s=cd(t),a=[];s&&!LN(s)&&!FN(a,s);)b_(s,function(c){!i[c]&&AN(s,c,!Cw)&&(i[c]=o(e,s,c))}),a.push(s),s=cd(s);return i}function vfe(t,e,n,r){var o=null;if(t&&mr(n,Qp)){var i=t[P_]||ca(null);if(o=(i[n[Qp]]||ca(null))[e],o||T_("Missing ["+e+"] "+I_),!o[bN]&&i[yw]!==!1){for(var s=!mr(t,e),a=cd(t),c=[];s&&a&&!LN(a)&&!FN(c,a);){var l=a[e];if(l){s=l===r;break}c.push(a),a=cd(a)}try{s&&(t[e]=o),o[bN]=1}catch{i[yw]=!1}}}return o}function wfe(t,e,n){var r=e[t];return r===n&&(r=cd(e)[t]),typeof r!==I_&&T_("["+t+"] is not a "+I_),r}function yfe(t,e,n,r,o){function i(c,l){var u=function(){var f=vfe(this,l,c,u)||wfe(l,c,u);return f.apply(this,arguments)};return u[PN]=1,u}if(!__(t)){var s=n[P_]=n[P_]||ca(null);if(!__(s)){var a=s[e]=s[e]||ca(null);s[yw]!==!1&&(s[yw]=!!o),__(a)||b_(n,function(c){AN(n,c,!1)&&n[c]!==r[c]&&(a[c]=n[c],delete n[c],(!mr(t,c)||t[c]&&!t[c][PN])&&(t[c]=i(t,c)))})}}}function Cfe(t,e){if(Cw){for(var n=[],r=cd(e);r&&!LN(r)&&!FN(n,r);){if(r===t)return!0;n.push(r),r=cd(r)}return!1}return!0}function IN(t,e){return mr(t,Ec)?t.name||e||bG:((t||{})[D_]||{}).name||e||bG}function Je(t,e,n,r){mr(t,Ec)||T_("theClass is an invalid class definition.");var o=t[Ec];Cfe(o,e)||T_("["+IN(t)+"] not in hierarchy of ["+IN(e)+"]");var i=null;mr(o,Qp)?i=o[Qp]:(i=pfe+IN(t,"_")+"$"+RN.n,RN.n++,o[Qp]=i);var s=Je[NG],a=!!s[x_];a&&r&&r[x_]!==void 0&&(a=!!r[x_]);var c=hfe(e),l=gfe(o,e,c,a);n(e,l);var u=!!Cw&&!!s[TN];u&&r&&(u=!!r[TN]),yfe(o,i,e,c,u!==!1)}var E_,D_,Ec,I_,P_,PN,Qp,pfe,bN,yw,NG,bG,kN,S_,TG,DN,x_,TN,NN,Cw,RG,kG,RN,pr=ne(()=>{Ne();D_="constructor",Ec="prototype",I_="function",P_="_dynInstFuncs",PN="_isDynProxy",Qp="_dynClass",pfe="_dynCls$",bN="_dynInstChk",yw=bN,NG="_dfOpts",bG="_unknown_",kN="__proto__",S_="_dyn"+kN,TG="__dynProto$Gbl",DN="_dynInstProto",x_="useBaseInst",TN="setInstFuncs",NN=Object,Cw=NN.getPrototypeOf,RG=NN.getOwnPropertyNames,kG=mo(),RN=kG[TG]||(kG[TG]={o:(E_={},E_[TN]=!0,E_[x_]=!0,E_),n:1e3});Je[NG]=RN.o});var ON,LG=ne(()=>{ON=100});var fn,UN,Ew=ne(()=>{Ne();fn=lG,UN=uG});var _s,Efe,AG=ne(()=>{Ew();_s=fn({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Efe=fn({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})});var di,$N=ne(()=>{Ew();di=fn({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})});var Wo,me,eh,Sc,la,iu,Ge,ua,kt,xc,_c,fa,th,nh,jo,ld,Sw,su,po,Jn,R_,au,MN,qi,xw,rh,k_,da,mi,oh,ma,Vo,cu,ud,pi,lu,_w,Gi,Ds,hi,ih,fd,HN,Dw,uu,dd,Is,BN,sh,N_,md,pd,xt=ne(()=>{Wo="toLowerCase",me="length",eh="warnToConsole",Sc="throwInternal",la="watch",iu="apply",Ge="push",ua="splice",kt="logger",xc="cancel",_c="initialize",fa="identifier",th="removeNotificationListener",nh="addNotificationListener",jo="isInitialized",ld="value",Sw="getNotifyMgr",su="getPlugin",po="name",Jn="processNext",R_="getProcessTelContext",au="enabled",MN="stopPollingInternalLogs",qi="unload",xw="onComplete",rh="version",k_="loggingLevelConsole",da="createNew",mi="teardown",oh="messageId",ma="message",Vo="diagLog",cu="_doTeardown",ud="update",pi="getNext",lu="setNextPlugin",_w="userAgent",Gi="split",Ds="replace",hi="type",ih="evtName",fd="status",HN="getAllResponseHeaders",Dw="isChildEvt",uu="data",dd="getCtx",Is="setCtx",BN="itemsReceived",sh="urlString",N_="headers",md="timeout",pd="traceFlags"});function FG(t,e){WN||(WN=CN("AggregationError",function(r,o){o[me]>1&&(r.errors=o[1])}));var n=t||"One or more errors occurred.";throw ee(e,function(r,o){n+=`
`.concat(o," > ").concat(Ee(r))}),new WN(n,e||[])}var WN,OG=ne(()=>{Ne();xt()});function gi(t,e){return HG(t,function(n){return e?e({status:"fulfilled",rejected:!1,value:n}):n},function(n){return e?e({status:JN,rejected:!0,reason:n}):n})}function HG(t,e,n,r){var o=t;try{if(uo(t))(e||n)&&(o=t.then(e,n));else try{e&&(o=e(t))}catch(i){if(n)o=n(i);else throw i}}finally{r&&Sfe(o,r)}return o}function Sfe(t,e){var n=t;return e&&(uo(t)?t.finally?n=t.finally(e):n=t.then(function(r){return e(),r},function(r){throw e(),r}):e()),n}function xfe(t,e,n,r){jN=jN||{toString:function(){return"[[PromiseState]]"}},VN=VN||{toString:function(){return"[[PromiseResult]]"}},YN=YN||{toString:function(){return"[[PromiseIsHandled]]"}};var o={};o[jN]={get:e},o[VN]={get:n},o[YN]={get:r},iG(t,o)}function _fe(t){var e;return t&&t.createEvent&&(e=t.createEvent("Event")),!!e&&e.initEvent}function Dfe(t,e,n,r){var o=Fn();!L_&&(L_=ui(!!Gn(_fe,[o]).v));var i=L_.v?o.createEvent("Event"):r?new Event(e):{};if(n&&n(i),L_.v&&i.initEvent(e,!1,!0),i&&t[$G])t[$G](i);else{var s=t["on"+e];if(s)s(i);else{var a=vt("console");a&&(a.error||a.log)(e,Ee(i))}}}function MG(t){return Re(t)?t.toString():Ee(t)}function jG(t,e,n){var r=Jp(arguments,3),o=0,i=!1,s,a=[],c=Pfe++,l=Iw.length>0?Iw[Iw.length-1]:void 0,u=!1,f=null,m;function d(S,I){try{Iw.push(c),u=!0,f&&f.cancel(),f=null;var x=t(function(A,F){a.push(function(){try{var k=o===2?S:I,E=Ve(k)?s:Re(k)?k(s):k;uo(E)?E.then(A,F):k?A(E):o===3?F(E):A(E)}catch(_){F(_)}}),i&&v()},r);return x}finally{Iw.pop()}}function p(S){return d(void 0,S)}function h(S){var I=S,x=S;return Re(S)&&(I=function(A){return S&&S(),A},x=function(A){throw S&&S(),A}),d(I,x)}function g(){return BG[o]}function v(){if(a.length>0){var S=a.slice();a=[],u=!0,f&&f.cancel(),f=null,e(S)}}function C(S,I){return function(x){if(o===I){if(S===2&&uo(x)){o=1,x.then(C(2,1),C(3,1));return}o=S,i=!0,s=x,v(),!u&&S===3&&!f&&(f=fi(w,bfe))}}}function w(){if(!u)if(u=!0,gG())process.emit(WG,s,m);else{var S=On()||mo();!qN&&(qN=ui(Gn(vt,[A_+"RejectionEvent"]).v)),Dfe(S,Ife,function(I){return gt(I,"promise",{g:function(){return m}}),I.reason=s,I},!!qN.v)}}m={then:d,catch:p,finally:h},Mo(m,"state",{get:g}),UG&&xfe(m,g,function(){return d_(s)},function(){return u}),vG()&&(m[gw(11)]="IPromise");function y(){return"IPromise"+(UG?"["+c+(Ve(l)?"":":"+l)+"]":"")+" "+g()+(i?" - "+MG(s):"")}return m.toString=y,function(){Re(n)||Pr(A_+": executor is not a function - "+MG(n));var I=C(3,0);try{n.call(m,C(2,0),I)}catch(x){I(x)}}(),m}function Tfe(t){return function(e){var n=Jp(arguments,1);return t(function(r,o){try{var i=[],s=1;y_(e,function(a,c){a&&(s++,HG(a,function(l){i[c]=l,--s===0&&r(i)},o))}),s--,s===0&&r(i)}catch(a){o(a)}},n)}}function Rfe(t){return ui(function(e){var n=Jp(arguments,1);return t(function(r,o){var i=[],s=1;function a(c,l){s++,gi(c,function(u){u.rejected?i[l]={status:JN,reason:u.reason}:i[l]={status:"fulfilled",value:u.value},--s===0&&r(i)})}try{we(e)?ee(e,a):wN(e)?y_(e,a):Pr("Input is not an iterable"),s--,s===0&&r(i)}catch(c){o(c)}},n)})}function VG(t){ee(t,function(e){try{e()}catch{}})}function kfe(t){var e=Ir(t)?t:0;return function(n){fi(function(){VG(n)},e)}}function YG(t,e){return jG(YG,kfe(e),t,e)}function Nfe(t,e){!GN&&(GN=ui(Gn(vt,[A_]).v||null));var n=GN.v;if(!n)return YG(t);Re(t)||Pr(A_+": executor is not a function - "+Ee(t));var r=0;function o(){return BG[r]}var i=new n(function(s,a){function c(u){r=2,s(u)}function l(u){r=3,a(u)}t(c,l)});return Mo(i,"state",{get:o}),i}function Pw(t){return jG(Pw,VG,t)}function qG(t,e){return!zN&&(zN=Rfe(Pw)),zN.v(t,e)}function zi(t,e){return!KN&&(KN=ui(Nfe)),KN.v.call(this,t,e)}var A_,JN,jN,VN,YN,UG,BG,$G,L_,WG,Ife,Iw,Pfe,bfe,qN,GN,zN,KN,GG,Ube,hd=ne(()=>{Ne();A_="Promise",JN="rejected";UG=!1;BG=["pending","resolving","resolved",JN],$G="dispatchEvent";WG="unhandledRejection",Ife=WG.toLowerCase(),Iw=[],Pfe=0,bfe=10;GG=Tfe(zi),Ube=gw(11)});var vi,Le,gd,dn,F_,bw,Dc,vd,Yo,wd,ah,fu,ch,pa,O_,U_,$_,lh,M_,H_,zG,Un=ne(()=>{vi=void 0,Le="",gd="channels",dn="core",F_="createPerfMgr",bw="disabled",Dc="extensionConfig",vd="extensions",Yo="processTelemetry",wd="priority",ah="eventsSent",fu="eventsDiscarded",ch="eventsSendRequest",pa="perfEvent",O_="offlineEventsStored",U_="offlineBatchSent",$_="offlineBatchDrop",lh="getPerfMgr",M_="domain",H_="path",zG="Not dynamic - "});function du(t){return!ae(t)}function yd(t){var e=t;return e&&ke(e)&&(e=e[Ds](Afe,function(n,r){return r.toUpperCase()}),e=e[Ds](Ffe,"_"),e=e[Ds](Ofe,function(n,r){return"_"+r})),e}function _n(t,e){return t&&e?Vi(t,e)!==-1:!1}function Ps(t){return t&&t.toISOString()||""}function nn(t){return rd(t)?t[po]:Le}function Ki(t,e,n,r,o){var i=n;return t&&(i=t[e],i!==n&&(!o||o(i))&&(!r||r(n))&&(i=n,t[e]=i)),i}function Tw(t,e,n){var r;return t?(r=t[e],!r&&ae(r)&&(r=Ve(n)?{}:n,t[e]=r)):r=Ve(n)?{}:n,r}function JG(t,e){var n=null,r=null;return Re(t)?n=t:r=t,function(){var o=arguments;if(n&&(r=n()),r)return r[e][iu](r,o)}}function XN(t,e,n){if(t&&e&&tn(t)&&tn(e)){var r=function(i){if(ke(i)){var s=e[i];Re(s)?(!n||n(i,!0,e,t))&&(t[i]=JG(e,i)):(!n||n(i,!1,e,t))&&(Es(t,i)&&delete t[i],gt(t,i,{g:function(){return e[i]},s:function(a){e[i]=a}}))}};for(var o in e)r(o)}return t}function Ic(t,e,n,r,o){t&&e&&n&&(o!==!1||Ve(t[e]))&&(t[e]=JG(n,r))}function wi(t,e,n,r){return t&&e&&tn(t)&&we(n)&&ee(n,function(o){ke(o)&&Ic(t,o,e,o,r)}),t}function ZN(t){return function(){function e(){var n=this;t&&Ie(t,function(r,o){n[r]=o})}return e}()}function qo(t){return t&&Yp&&(t=Wp(Yp({},t))),t}function B_(t,e,n,r,o,i){var s=arguments,a=s[0]||{},c=s[me],l=!1,u=1;for(c>0&&ia(a)&&(l=a,a=s[u]||{},u++),tn(a)||(a={});u<c;u++){var f=s[u],m=we(f),d=tn(f);for(var p in f){var h=m&&p in f||d&&Es(f,p);if(h){var g=f[p],v=void 0;if(l&&g&&((v=we(g))||Tr(g))){var C=a[p];v?we(C)||(C=[]):Tr(C)||(C={}),g=B_(l,C,g)}g!==void 0&&(a[p]=g)}}}return a}function bs(t){try{return t.responseText}catch{}return null}function Cd(t,e){return t?"XDomainRequest,Response:"+bs(t)||"":e}function Pc(t,e){return t?"XMLHttpRequest,Status:"+t[fd]+",Response:"+bs(t)||t.response||"":e}function bc(t,e){return e&&(Ir(e)?t=[e].concat(t):we(e)&&(t=e.concat(t))),t}function QN(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,Ufe,r),n&&s(a,KG,n),a.open(t,e,!o),n&&s(a,KG,n),!o&&i&&s(a,$fe,i),a}function W_(t){var e={};if(ke(t)){var n=tt(t)[Gi](/[\r\n]+/);ee(n,function(r){if(r){var o=r.indexOf(": ");if(o!==-1){var i=tt(r.substring(0,o))[Wo](),s=tt(r.substring(o+1));e[i]=s}else e[tt(r)]=1}})}return e}function uh(t,e,n){if(!t[n]&&e&&e.getResponseHeader){var r=e.getResponseHeader(n);r&&(t[n]=tt(r))}return t}function Tc(t,e){var n={};return t[HN]?n=W_(t[HN]()):e&&(n=uh(n,t,Bfe),n=uh(n,t,Mfe),n=uh(n,t,Hfe)),n}var Lfe,Afe,Ffe,Ofe,Vbe,Ufe,KG,$fe,Mfe,Hfe,Bfe,ha=ne(()=>{Bo();Ne();xt();Un();Lfe="getPrototypeOf",Afe=/-([a-z])/g,Ffe=/([^\w\d_$])/g,Ofe=/^(\d+[\w\d_$])/,Vbe=Object[Lfe];Ufe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",KG="withCredentials",$fe="timeout";Mfe="kill-duration",Hfe="kill-duration-seconds",Bfe="time-delta-millis"});function ez(t,e){var n=!1;if(t){try{if(n=e in t,!n){var r=t[ys];r&&(n=e in r)}}catch{}if(!n)try{var o=new t;n=!Ve(o[e])}catch{}}return n}function iL(t){QG=t}function Ed(t){if(t&&QG){var e=vt("__mockLocation");if(e)return e}return typeof location===vc&&location?location:vt(jfe)}function Rw(){return typeof console!==ra?console:vt(Vfe)}function ga(){return!!(typeof JSON===vc&&JSON||vt(XG)!==null)}function Rr(){return ga()?JSON||vt(XG):null}function kw(){return vt(Yfe)}function Nw(){return vt(qfe)}function mu(){var t=Kn();return t&&t.product?t.product===Gfe:!1}function pu(){var t=Kn();if(t&&(t[_w]!==tL||eL===null)){tL=t[_w];var e=(tL||Le)[Wo]();eL=_n(e,rL)||_n(e,oL)}return eL}function Lw(t){if(t===void 0&&(t=null),!t){var e=Kn()||{};t=e?(e.userAgent||Le)[Wo]():Le}var n=(t||Le)[Wo]();if(_n(n,rL)){var r=Fn()||{};return sa(parseInt(n[Gi](rL)[1]),r[Wfe]||0)}else if(_n(n,oL)){var o=parseInt(n[Gi](oL)[1]);if(o)return o+4}return null}function Ji(t){return(nL===null||t===!1)&&(nL=hw()&&!!Kn().sendBeacon),nL}function Rc(t){var e=!1;try{e=!!vt("fetch");var n=vt("Request");e&&t&&n&&(e=ez(n,"keepalive"))}catch{}return e}function Aw(){return fh===null&&(fh=typeof XDomainRequest!==ra,fh&&dh()&&(fh=fh&&!ez(vt(ZG),"withCredentials"))),fh}function dh(){var t=!1;try{var e=vt(ZG);t=!!e}catch{}return t}function tz(t,e){if(t)for(var n=0;n<t[me];n++){var r=t[n];if(r[po]&&r[po]===e)return r}return{}}function sL(t){var e=Fn();return e&&t?tz(e.querySelectorAll("meta"),t).content:null}function aL(t){var e,n=sd();if(n){var r=n.getEntriesByType("navigation")||[];e=tz((r[me]>0?r[0]:{}).serverTiming,t).description}return e}var Wfe,jfe,Vfe,XG,Yfe,qfe,Gfe,rL,oL,ZG,eL,tL,QG,fh,nL,hu=ne(()=>{"use strict";Bo();Ne();xt();ha();Un();Wfe="documentMode",jfe="location",Vfe="console",XG="JSON",Yfe="crypto",qfe="msCrypto",Gfe="ReactNative",rL="msie",oL="trident/",ZG="XMLHttpRequest",eL=null,tL=null,QG=!1,fh=null,nL=null});function zfe(t){t<0&&(t>>>=0),Fw=rz+t&gu,Ow=oz-t&gu,iz=!0}function Kfe(){try{var t=xn()&2147483647;zfe((Math.random()*nz^t)+t)}catch{}}function cL(t){return t>0?ji(kc()/gu*(t+1))>>>0:0}function kc(t){var e=0,n=kw()||Nw();return n&&n.getRandomValues&&(e=n.getRandomValues(new Uint32Array(1))[0]&gu),e===0&&pu()&&(iz||Kfe(),e=sz()&gu),e===0&&(e=ji(nz*Math.random()|0)),t||(e>>>=0),e}function sz(t){Ow=36969*(Ow&65535)+(Ow>>16)&gu,Fw=18e3*(Fw&65535)+(Fw>>16)&gu;var e=(Ow<<16)+(Fw&65535)>>>0&gu|0;return t||(e>>>=0),e}function Uw(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=kc()>>>0,r=0,o=Le;o[me]<t;)r++,o+=e.charAt(n&63),n>>>=6,r===5&&(n=(kc()<<2&4294967295|n&3)>>>0,r=0);return o}var nz,gu,rz,oz,iz,Fw,Ow,j_=ne(()=>{Ne();xt();hu();Un();nz=4294967296,gu=4294967295,rz=123456789,oz=987654321,iz=!1,Fw=rz,Ow=oz});function cz(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType}function Zfe(t,e){var n=e[t.id];if(!n){n={};try{cz(e)&&gt(e,t.id,{e:!1,v:n})}catch{}}return n}function kr(t,e){return e===void 0&&(e=!1),yd(t+Xfe+++(e?"."+az:Le)+Jfe)}function V_(t){var e={id:kr("_aiData-"+(t||Le)+"."+az),accept:function(n){return cz(n)},get:function(n,r,o,i){var s=n[e.id];return s?s[yd(r)]:(i&&(s=Zfe(e,n),s[yd(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return e}var az,Jfe,Xfe,mh=ne(()=>{Ne();ha();Un();j_();az="3.3.6",Jfe="."+Uw(6),Xfe=0});function Y_(t){return t&&tn(t)&&(t.isVal||t.fb||Es(t,"v")||Es(t,"mrg")||Es(t,"ref")||t.set)}function lz(t,e,n){var r,o=n.dfVal||m_;if(e&&n.fb){var i=n.fb;we(i)||(i=[i]);for(var s=0;s<i[me];s++){var a=i[s],c=e[a];if(o(c)?r=c:t&&(c=t.cfg[a],o(c)&&(r=c),t.set(t.cfg,Sn(a),c)),o(r))break}}return!o(r)&&o(n.v)&&(r=n.v),r}function lL(t,e,n){var r=n;if(n&&Y_(n)&&(r=lz(t,e,n)),r){Y_(r)&&(r=lL(t,e,r));var o;we(r)?(o=[],o[me]=r[me]):Tr(r)&&(o={}),o&&(Ie(r,function(i,s){s&&Y_(s)&&(s=lL(t,e,s)),o[i]=s}),r=o)}return r}function $w(t,e,n,r){var o,i,s,a=r,c,l,u,f;Y_(a)?(o=a.isVal,i=a.set,u=a.rdOnly,f=a.blkVal,c=a.mrg,l=a.ref,!l&&Ve(l)&&(l=!!c),s=lz(t,e,a)):s=r,f&&t.blkVal(e,n);var m,d=!0,p=e[n];(p||!ae(p))&&(m=p,d=!1,o&&m!==s&&!o(m)&&(m=s,d=!0),i&&(m=i(m,s,e),d=m===s)),d?s?m=lL(t,e,s):m=s:(Tr(m)||we(s))&&c&&s&&(Tr(s)||we(s))&&Ie(s,function(h,g){$w(t,m,h,g)}),t.set(e,n,m),l&&t.ref(e,n),u&&t.rdOnly(e,n)}var uL=ne(()=>{Ne();xt()});function fL(t){if(t){var e;if(we(t)?(e=[],e[me]=t[me]):Tr(t)&&(e={}),e)return Ie(t,function(n,r){e[n]=fL(r)}),e}return t}function Mw(t){if(t){var e=t[va]||t;if(e.cfg&&(e.cfg===t||e.cfg[va]===e))return e}return null}function Hw(t){if(t&&(Tr(t)||we(t)))try{t[uz]=!0}catch{}return t}function dL(t){if(t)try{t[fz]=!0}catch{}return t}function q_(t,e,n){var r=!1;return n&&!t[e.blkVal]&&(r=n[fz],!r&&!n[uz]&&(r=Tr(n)||we(n))),r}function G_(t){Pr("InvalidAccess:"+t)}var va,uz,fz,z_=ne(()=>{Ne();xt();va=w_("[[ai_dynCfg_1]]"),uz=w_("[[ai_blkDynCfg_1]]"),fz=w_("[[ai_frcDynCfg_1]]")});function ede(t,e,n){we(e)&&ee(Qfe,function(r){var o=e[r];e[r]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=o[iu](this,i);return Bw(t,e,n,"Patching"),a}})}function K_(t,e){var n=h_(t,e);return n&&n.get}function tde(t,e,n,r){var o={n,h:[],trk:function(l){l&&l.fn&&(wt(o.h,l)===-1&&o.h[Ge](l),t.trk(l,o))},clr:function(l){var u=wt(o.h,l);u!==-1&&o.h[ua](u,1)}},i=!0,s=!1;function a(){i&&(s=s||q_(a,t,r),r&&!r[va]&&s&&(r=Bw(t,r,n,"Converting")),i=!1);var l=t.act;return l&&o.trk(l),r}a[t.prop]={chng:function(){t.add(o)}};function c(l){if(r!==l){a[t.ro]&&!t.upd&&G_("["+n+"] is read-only:"+Ee(e)),i&&(s=s||q_(a,t,r),i=!1);var u=s&&a[t.rf];if(s)if(u){Ie(r,function(m){r[m]=l?l[m]:vi});try{Ie(l,function(m,d){Ww(t,r,m,d)}),l=r}catch(m){ph((t.hdlr||{})[kt],n,"Assigning",m),s=!1}}else r&&r[va]&&Ie(r,function(m){var d=K_(r,m);if(d){var p=d[t.prop];p&&p.chng()}});if(l!==r){var f=l&&q_(a,t,l);!u&&f&&(l=Bw(t,l,n,"Converting")),r=l,s=f}t.add(o)}}gt(e,o.n,{g:a,s:c})}function Ww(t,e,n,r){if(e){var o=K_(e,n),i=o&&!!o[t.prop];i?e[n]=r:tde(t,e,n,r)}return e}function J_(t,e,n,r){if(e){var o=K_(e,n),i=o&&!!o[t.prop],s=r&&r[0],a=r&&r[1],c=r&&r[2];if(!i){if(c)try{Hw(e)}catch(l){ph((t.hdlr||{})[kt],n,"Blocking",l)}try{Ww(t,e,n,e[n]),o=K_(e,n)}catch(l){ph((t.hdlr||{})[kt],n,"State",l)}}s&&(o[t.rf]=s),a&&(o[t.ro]=a),c&&(o[t.blkVal]=!0)}return e}function Bw(t,e,n,r){try{Ie(e,function(o,i){Ww(t,e,o,i)}),e[va]||(Mo(e,va,{get:function(){return t.hdlr}}),ede(t,e,n))}catch(o){ph((t.hdlr||{})[kt],n,r,o)}return e}var Qfe,ph,dz=ne(()=>{Ne();Un();xt();z_();Qfe=["push","pop","shift","unshift","splice"],ph=function(t,e,n,r){t&&t[Sc](3,108,"".concat(n," [").concat(e,"] failed - ")+Ee(r))}});function mz(t){var e=Kp(jw+"get"+t.uid+Vw),n=Kp(jw+"ro"+t.uid+Vw),r=Kp(jw+"rf"+t.uid+Vw),o=Kp(jw+"blkVal"+t.uid+Vw),i=Kp(jw+"dtl"+t.uid+Vw),s=null,a=null,c;function l(d,p){var h=c.act;try{c.act=d,d&&d[i]&&(ee(d[i],function(v){v.clr(d)}),d[i]=[]),p({cfg:t.cfg,set:t.set.bind(t),setDf:t.setDf.bind(t),ref:t.ref.bind(t),rdOnly:t.rdOnly.bind(t)})}catch(v){var g=t[kt];throw g&&g[Sc](1,107,Ee(v)),v}finally{c.act=h||null}}function u(){if(s){var d=s;s=null,a&&a[xc](),a=null;var p=[];if(ee(d,function(h){if(h&&(h[i]&&(ee(h[i],function(g){g.clr(h)}),h[i]=null),h.fn))try{l(h,h.fn)}catch(g){p[Ge](g)}}),s)try{u()}catch(h){p[Ge](h)}p[me]>0&&FG("Watcher error(s): ",p)}}function f(d){if(d&&d.h[me]>0){s||(s=[]),a||(a=fi(function(){a=null,u()},0));for(var p=0;p<d.h[me];p++){var h=d.h[p];h&&wt(s,h)===-1&&s[Ge](h)}}}function m(d,p){if(d){var h=d[i]=d[i]||[];wt(h,p)===-1&&h[Ge](p)}}return c={prop:e,ro:n,rf:r,blkVal:o,hdlr:t,add:f,notify:u,use:l,trk:m},c}var jw,Vw,pz=ne(()=>{Ne();OG();xt();jw="[[ai_",Vw="]]"});function nde(t,e){var n={fn:e,rm:function(){n.fn=null,t=null,e=null}};return gt(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),t.use(n,e),n}function rde(t,e,n){var r=Mw(e);if(r)return r;var o=kr("dyncfg",!0),i=e&&n!==!1?e:fL(e),s;function a(){s.notify()}function c(g,v,C){try{g=Ww(s,g,v,C)}catch(w){ph(t,v,"Setting value",w)}return g[v]}function l(g){return nde(s,g)}function u(g,v){s.use(null,function(C){var w=s.upd;try{Ve(v)||(s.upd=v),g(C)}finally{s.upd=w}})}function f(g,v){var C;return J_(s,g,v,(C={},C[0]=!0,C))[v]}function m(g,v){var C;return J_(s,g,v,(C={},C[1]=!0,C))[v]}function d(g,v){var C;return J_(s,g,v,(C={},C[2]=!0,C))[v]}function p(g,v){return v&&Ie(v,function(C,w){$w(h,g,C,w)}),g}var h={uid:null,cfg:i,logger:t,notify:a,set:c,setDf:p,watch:l,ref:f,rdOnly:m,blkVal:d,_block:u};return gt(h,"uid",{c:!1,e:!1,w:!1,v:o}),s=mz(h),Bw(s,i,"config","Creating"),h}function ode(t,e){t?(t[eh](e),t[Sc](2,108,e)):G_(e)}function jt(t,e,n,r){var o=rde(n,t||{},r);return e&&o.setDf(o.cfg,e),o}function hr(t,e,n){var r=t[va]||t;return r.cfg&&(r.cfg===t||r.cfg[va]===r)?r[la](e):(ode(n,zG+Ee(t)),jt(t,null,n)[la](e))}var vu=ne(()=>{Ne();mh();Un();xt();uL();dz();pz();z_()});function Nc(t,e){if(t&&t[qi])return t[qi](e)}function X_(t,e,n){var r;return n||(r=zi(function(o){n=o})),t&&Xp(t)>0?gi(Nc(t[0],e),function(){X_(Jp(t,1),e,n)}):n(),r}var mL=ne(()=>{hd();Ne();xt()});var hz,pL,hL=ne(()=>{hz=500,pL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"});function ide(t,e,n){return!t&&ae(t)?e:ia(t)?t:Sn(t)[Wo]()==="true"}function gL(t){return{mrg:!0,v:t}}function hh(t,e,n){return{fb:n,isVal:t,v:e}}function Xi(t,e){return{fb:e,set:ide,v:!!t}}var vL=ne(()=>{Ne();xt()});function sde(t,e){return function(){var n=arguments,r=yL(e);if(r){var o=r.listener;o&&o[t]&&o[t][iu](o,n)}}}function ade(){var t=vt("Microsoft");return t&&(Q_=t.ApplicationInsights),Q_}function yL(t){var e=Q_;return!e&&t.disableDbgExt!==!0&&(e=Q_||ade()),e?e.ChromeDbgExt:null}function gz(t){if(!Z_){Z_={};for(var e=0;e<wL[me];e++)Z_[wL[e]]=sde(wL[e],t)}return Z_}var wL,Q_,Z_,CL=ne(()=>{Ne();xt();Un();wL=[ah,fu,ch,pa],Q_=null});function vz(t){return t?'"'+t[Ds](/\"/g,Le)+'"':Le}function EL(t,e){var n=Rw();if(n){var r="log";n[t]&&(r=t),Re(n[r])&&n[r](e)}}function Lc(t,e){return(t||{})[kt]||new wu(e)}function SL(t){return t||new wu}function se(t,e,n,r,o,i){i===void 0&&(i=!1),SL(t)[Sc](e,n,r,o,i)}function ho(t,e){SL(t)[eh](e)}function xL(t,e,n){SL(t).logInternalMessage(e,n)}var gh,wz,cde,lde,ude,fde,dde,Sd,wu,Ts=ne(()=>{"use strict";pr();Ne();vu();xt();CL();hu();Un();wz="warnToConsole",cde="AI (Internal): ",lde="AI: ",ude="AITR_",fde={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},dde=(gh={},gh[0]=null,gh[1]="errorToConsole",gh[2]=wz,gh[3]="debugToConsole",gh);Sd=function(){function t(e,n,r,o){r===void 0&&(r=!1);var i=this;i[oh]=e,i[ma]=(r?lde:cde)+e;var s=Le;ga()&&(s=Rr().stringify(o));var a=(n?" message:"+vz(n):Le)+(o?" props:"+vz(s):Le);i[ma]+=a}return t.dataType="MessageData",t}();wu=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},o,i,s,a,c;Je(t,this,function(l){c=f(e||{}),l.consoleLoggingLevel=function(){return o},l[Sc]=function(p,h,g,v,C){C===void 0&&(C=!1);var w=new Sd(h,g,C,v);if(a)throw Ee(w);var y=dde[p]||wz;if(Ve(w[ma]))d("throw"+(p===1?"Critical":"Warning"),w);else{if(C){var S=+w[oh];!r[S]&&o>=p&&(l[y](w[ma]),r[S]=!0)}else o>=p&&l[y](w[ma]);u(p,w)}},l.debugToConsole=function(p){EL("debug",p),d("warning",p)},l[eh]=function(p){EL("warn",p),d("warning",p)},l.errorToConsole=function(p){EL("error",p),d("error",p)},l.resetInternalMessageCount=function(){n=0,r={}},l.logInternalMessage=u,l[qi]=function(p){c&&c.rm(),c=null};function u(p,h){if(!m()){var g=!0,v=ude+h[oh];if(r[v]?g=!1:r[v]=!0,g&&(p<=i&&(l.queue[Ge](h),n++,d(p===1?"error":"warn",h)),n===s)){var C="Internal events throttle limit per PageView reached for this app.",w=new Sd(23,C,!1);l.queue[Ge](w),p===1?l.errorToConsole(C):l[eh](C)}}}function f(p){return hr(jt(p,fde,l).cfg,function(h){var g=h.cfg;o=g[k_],i=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function m(){return n>=s}function d(p,h){var g=yL(e||{});g&&g[Vo]&&g[Vo](p,h)}})}return t.__ieDyn=1,t}()});function TL(){!wa&&(wa=pG(function(){return Fn()}))}function pde(t,e){var n=Ac[yu]||nD[yu];return n||(n=Ac[yu]=Ac(t,e),nD[yu]=n),n}function tD(t){return t?t.isEnabled():!0}function bz(t,e){return e&&t&&we(t.ignoreCookies)?wt(t.ignoreCookies,e)!==-1:!1}function hde(t,e){return e&&t&&we(t.blockedCookies)&&wt(t.blockedCookies,e)!==-1?!0:bz(t,e)}function _z(t,e){var n=e[au];if(ae(n)){var r=void 0;Ve(t[Ez])||(r=!t[Ez]),Ve(t[PL])||(r=!t[PL]),n=r}return n}function RL(t,e){var n;if(t)n=t.getCookieMgr();else if(e){var r=e.cookieCfg;r&&r[yu]?n=r[yu]:n=Ac(e)}return n||(n=pde(e,(t||{})[kt])),n}function Ac(t,e){var n,r,o,i,s,a,c,l;t=jt(t||nD,null,e).cfg,i=hr(t,function(f){f.setDf(f.cfg,mde),n=f.ref(f.cfg,"cookieCfg"),r=n[H_]||"/",o=n[M_],s=_z(t,n)!==!1,a=n.getCookie||gde,c=n.setCookie||Pz,l=n.delCookie||Pz},e);var u={isEnabled:function(){var f=_z(t,n)!==!1&&s&&vh(e),m=nD[yu];return f&&m&&u!==m&&(f=tD(m)),f},setEnabled:function(f){s=f!==!1,n[au]=f},set:function(f,m,d,p,h){var g=!1;if(tD(u)&&!hde(n,f)){var v={},C=tt(m||Le),w=Vi(C,";");if(w!==-1&&(C=tt(od(m,w)),v=Tz(zn(m,w+1))),Ki(v,M_,p||o,Cs,Ve),!ae(d)){var y=pu();if(Ve(v[DL])){var S=xn(),I=S+d*1e3;if(I>0){var x=new Date;x.setTime(I),Ki(v,DL,Dz(x,y?yz:Cz)||Dz(x,y?yz:Cz)||Le,Cs)}}y||Ki(v,"max-age",Le+d,null,Ve)}var A=Ed();A&&A.protocol==="https:"&&(Ki(v,"secure",null,null,Ve),IL===null&&(IL=!rD((Kn()||{})[_w])),IL&&Ki(v,"SameSite","None",null,Ve)),Ki(v,H_,h||r,null,Ve),c(f,Iz(C,v)),g=!0}return g},get:function(f){var m=Le;return tD(u)&&!bz(n,f)&&(m=a(f)),m},del:function(f,m){var d=!1;return tD(u)&&(d=u.purge(f,m)),d},purge:function(f,m){var d,p=!1;if(vh(e)){var h=(d={},d[H_]=m||"/",d[DL]="Thu, 01 Jan 1970 00:00:01 GMT",d);pu()||(h["max-age"]="0"),l(f,Iz(Le,h)),p=!0}return p},unload:function(f){i&&i.rm(),i=null}};return u[yu]=u,u}function vh(t){if(eD===null){eD=!1,!wa&&TL();try{var e=wa.v||{};eD=e[bL]!==void 0}catch(n){se(t,2,68,"Cannot access document.cookie - "+nn(n),{exception:Ee(n)})}}return eD}function Tz(t){var e={};if(t&&t[me]){var n=tt(t)[Gi](";");ee(n,function(r){if(r=tt(r||Le),r){var o=Vi(r,"=");o===-1?e[r]=null:e[tt(od(r,o))]=tt(zn(r,o+1))}})}return e}function Dz(t,e){return Re(t[e])?t[e]():null}function Iz(t,e){var n=t||Le;return Ie(e,function(r,o){n+="; "+r+(ae(o)?Le:"="+o)}),n}function gde(t){var e=Le;if(!wa&&TL(),wa.v){var n=wa.v[bL]||Le;Sz!==n&&(xz=Tz(n),Sz=n),e=tt(xz[t]||Le)}return e}function Pz(t,e){!wa&&TL(),wa.v&&(wa.v[bL]=t+"="+e)}function rD(t){return ke(t)?!!(_n(t,"CPU iPhone OS 12")||_n(t,"iPad; CPU OS 12")||_n(t,"Macintosh; Intel Mac OS X 10_14")&&_n(t,"Version/")&&_n(t,"Safari")||_n(t,"Macintosh; Intel Mac OS X 10_14")&&ad(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||_n(t,"Chrome/5")||_n(t,"Chrome/6")||_n(t,"UnrealEngine")&&!_n(t,"Chrome")||_n(t,"UCBrowser/12")||_n(t,"UCBrowser/11")):!1}var _L,xd,yz,Cz,bL,DL,Ez,PL,yu,eD,IL,Sz,wa,xz,nD,mde,kL=ne(()=>{Ne();vL();vu();xt();Ts();hu();ha();Un();yz="toGMTString",Cz="toUTCString",bL="cookie",DL="expires",Ez="isCookieUseDisabled",PL="disableCookiesUsage",yu="_ckMgr",eD=null,IL=null,Sz=null,xz={},nD={},mde=(_L={cookieCfg:gL((xd={},xd[M_]={fb:"cookieDomain",dfVal:du},xd.path={fb:"cookiePath",dfVal:du},xd.enabled=vi,xd.ignoreCookies=vi,xd.blockedCookies=vi,xd)),cookieDomain:vi,cookiePath:vi},_L[PL]=vi,_L)});function wde(t){t.h=null;var e=t.cb;t.cb=[],ee(e,function(n){Gn(n.fn,[n.arg])})}function Cu(t,e,n,r){ee(t,function(o){o&&o[e]&&(n?(n.cb[Ge]({fn:r,arg:o}),n.h=n.h||fi(wde,0,n)):Gn(r,[o]))})}var vde,Yw,NL=ne(()=>{pr();hd();Ne();vu();xt();Un();vde={perfEvtsSendAll:!1};Yw=function(){function t(e){this.listeners=[];var n,r,o=[],i={h:null,cb:[]},s=jt(e,vde);r=s[la](function(a){n=!!a.cfg.perfEvtsSendAll}),Je(t,this,function(a){gt(a,"listeners",{g:function(){return o}}),a[nh]=function(c){o[Ge](c)},a[th]=function(c){for(var l=wt(o,c);l>-1;)o[ua](l,1),l=wt(o,c)},a[ah]=function(c){Cu(o,ah,i,function(l){l[ah](c)})},a[fu]=function(c,l){Cu(o,fu,i,function(u){u[fu](c,l)})},a[ch]=function(c,l){Cu(o,ch,l?i:null,function(u){u[ch](c,l)})},a[pa]=function(c){c&&(n||!c[Dw]())&&Cu(o,pa,null,function(l){c.isAsync?fi(function(){return l[pa](c)},0):l[pa](c)})},a[O_]=function(c){c&&c[me]&&Cu(o,O_,i,function(l){l[O_](c)})},a[U_]=function(c){c&&c[uu]&&Cu(o,U_,i,function(l){l[U_](c)})},a[$_]=function(c,l){if(c>0){var u=l||0;Cu(o,$_,i,function(f){f[$_](c,u)})}},a[qi]=function(c){var l=function(){r&&r.rm(),r=null,o=[],i.h&&i.h[xc](),i.h=null,i.cb=[]},u;if(Cu(o,"unload",null,function(f){var m=f[qi](c);m&&(u||(u=[]),u[Ge](m))}),u)return zi(function(f){return gi(GG(u),function(){l(),f()})});l()}})}return t.__ieDyn=1,t}()});function mn(t,e,n,r,o){if(t){var i=t;if(i[lh]&&(i=i[lh]()),i){var s=void 0,a=i[dd](LL);try{if(s=i.create(e(),r,o),s){if(a&&s[Is]&&(s[Is](_d[AL],a),a[dd]&&a[Is])){var c=a[dd](_d[qw]);c||(c=[],a[Is](_d[qw],c)),c[Ge](s)}return i[Is](LL,s),n(s)}}catch(l){s&&s[Is]&&s[Is]("exception",l)}finally{s&&i.fire(s),i[Is](LL,a)}}}return n()}function FL(){return yde}var wh,AL,qw,yde,_d,Gw,LL,oD=ne(()=>{pr();Ne();xt();Un();wh="ctx",AL="ParentContextKey",qw="ChildrenContextKey",yde=null,_d=function(){function t(e,n,r){var o=this;if(o.start=xn(),o[po]=e,o.isAsync=r,o[Dw]=function(){return!1},Re(n)){var i;gt(o,"payload",{g:function(){return!i&&Re(n)&&(i=n(),n=null),i}})}o[dd]=function(s){return s?s===t[AL]||s===t[qw]?o[s]:(o[wh]||{})[s]:null},o[Is]=function(s,a){if(s)if(s===t[AL])o[s]||(o[Dw]=function(){return!0}),o[s]=a;else if(s===t[qw])o[s]=a;else{var c=o[wh]=o[wh]||{};c[s]=a}},o.complete=function(){var s=0,a=o[dd](t[qw]);if(we(a))for(var c=0;c<a[me];c++){var l=a[c];l&&(s+=l.time)}o.time=xn()-o.start,o.exTime=o.time-s,o.complete=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),Gw=function(){function t(e){this.ctx={},Je(t,this,function(n){n.create=function(r,o,i){return new _d(r,o,i)},n.fire=function(r){r&&(r.complete(),e&&Re(e[pa])&&e[pa](r))},n[Is]=function(r,o){if(r){var i=n[wh]=n[wh]||{};i[r]=o}},n[dd]=function(r){return(n[wh]||{})[r]}})}return t.__ieDyn=1,t}(),LL="CoreUtils.doPerf"});function zw(){var t=Dd();return zn(t,0,8)+"-"+zn(t,8,12)+"-"+zn(t,12,16)+"-"+zn(t,16,20)+"-"+zn(t,20)}function Dd(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=Le,n,r=0;r<4;r++)n=kc(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+(kc()&3)|0];return aa(e,0,8)+aa(e,9,4)+"4"+aa(e,13,3)+o+aa(e,16,3)+aa(e,19,12)}var OL=ne(()=>{"use strict";Ne();Un();j_()});function Fc(t,e,n){return t&&t[me]===e&&t!==n?!!t.match(/^[\da-f]*$/i):!1}function kz(t,e,n){return Fc(t,e)?t:n}function Nz(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[me]<2;)e="0"+e;return e}function ML(t,e,n,r){return{version:Fc(r,2,$L)?r:UL,traceId:Id(t)?t:Dd(),spanId:Pd(e)?e:od(Dd(),16),traceFlags:n>=0&&n<=255?n:1}}function Kw(t,e){if(!t||(we(t)&&(t=t[0]||""),!t||!ke(t)||t[me]>8192))return null;if(t.indexOf(",")!==-1){var n=t[Gi](",");t=n[e>0&&n[me]>e?e:0]}var r=Cde.exec(tt(t));return!r||r[1]===$L||r[2]===iD||r[3]===sD?null:{version:(r[1]||Le)[Wo](),traceId:(r[2]||Le)[Wo](),spanId:(r[3]||Le)[Wo](),traceFlags:parseInt(r[4],16)}}function Id(t){return Fc(t,32,iD)}function Pd(t){return Fc(t,16,sD)}function aD(t){return!(!t||!Fc(t[rh],2,$L)||!Fc(t.traceId,32,iD)||!Fc(t.spanId,16,sD)||!Fc(Nz(t[pd]),2))}function HL(t){return aD(t)?(t[pd]&Rz)===Rz:!1}function BL(t){if(t){var e=Nz(t[pd]);Fc(e,2)||(e="01");var n=t[rh]||UL;return n!=="00"&&n!=="ff"&&(n=UL),"".concat(n.toLowerCase(),"-").concat(kz(t.traceId,32,iD).toLowerCase(),"-").concat(kz(t.spanId,16,sD).toLowerCase(),"-").concat(e.toLowerCase())}return""}function WL(t){var e="traceparent",n=Kw(sL(e),t);return n||(n=Kw(aL(e),t)),n}var Cde,UL,$L,iD,sD,Rz,jL=ne(()=>{Ne();xt();OL();hu();Un();Cde=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,UL="00",$L="ff",iD="00000000000000000000000000000000",sD="0000000000000000",Rz=1});function Oc(t){return Ede.get(t,"state",{},!0)}function VL(t,e){for(var n=[],r=null,o=t[pi](),i;o;){var s=o[su]();if(s){r&&r[lu]&&s[Yo]&&r[lu](s),i=Oc(s);var a=!!i[jo];s[jo]&&(a=s[jo]()),a||n[Ge](s),r=s,o=o[pi]()}}ee(n,function(c){var l=t[dn]();c[_c](t.getCfg(),l,e,t[pi]()),i=Oc(c),!c[dn]&&!i[dn]&&(i[dn]=l),i[jo]=!0,delete i[mi]})}function cD(t){return t.sort(function(e,n){var r=0;if(n){var o=n[Yo];e[Yo]?r=o?e[wd]-n[wd]:1:o&&(r=-1)}else r=e?1:-1;return r})}function Lz(t){var e={};return{getName:function(){return e[po]},setName:function(n){t&&t.setName(n),e[po]=n},getTraceId:function(){return e.traceId},setTraceId:function(n){t&&t.setTraceId(n),Id(n)&&(e.traceId=n)},getSpanId:function(){return e.spanId},setSpanId:function(n){t&&t.setSpanId(n),Pd(n)&&(e.spanId=n)},getTraceFlags:function(){return e[pd]},setTraceFlags:function(n){t&&t.setTraceFlags(n),e[pd]=n}}}var Ede,YL=ne(()=>{"use strict";Ne();xt();mh();Un();jL();Ede=V_("plugin")});function xde(t,e,n){for(;t;){if(t[su]()===n)return t;t=t[pi]()}return Eu([n],e.config||{},e)}function qL(t,e,n,r){var o=null,i=[];e||(e=jt({},null,n[kt])),r!==null&&(o=r?xde(t,n,r):t);var s={_next:c,ctx:{core:function(){return n},diagLog:function(){return Lc(n,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:u,getConfig:f,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(d){o=d},iterate:m,onComplete:a}};function a(d,p){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];d&&i[Ge]({func:d,self:Ve(p)?s.ctx:p,args:h})}function c(){var d=o;if(o=d?d[pi]():null,!d){var p=i;p&&p[me]>0&&(ee(p,function(h){try{h.func.call(h.self,h.args)}catch(g){se(n[kt],2,73,"Unexpected Exception during onComplete - "+Ee(g))}}),i=[])}return d}function l(d,p){var h=null,g=e.cfg;if(g&&d){var v=g[Dc];!v&&p&&(v={}),g[Dc]=v,v=e.ref(g,Dc),v&&(h=v[d],!h&&p&&(h={}),v[d]=h,h=e.ref(v,d))}return h}function u(d,p){var h=l(d,!0);return p&&Ie(p,function(g,v){if(ae(h[g])){var C=e.cfg[g];(C||!ae(C))&&(h[g]=C)}$w(e,h,g,v)}),e.setDf(h,p)}function f(d,p,h){h===void 0&&(h=!1);var g,v=l(d,!1),C=e.cfg;return v&&(v[p]||!ae(v[p]))?g=v[p]:(C[p]||!ae(C[p]))&&(g=C[p]),g||!ae(g)?g:h}function m(d){for(var p;p=s._next();){var h=p[su]();h&&d(h)}}return s}function go(t,e,n,r){var o=jt(e),i=qL(t,o,n,r),s=i.ctx;function a(l){var u=i._next();return u&&u[Yo](l,s),!u}function c(l,u){return l===void 0&&(l=null),we(l)&&(l=Eu(l,o.cfg,n,u)),go(l||s[pi](),o.cfg,n,u)}return s[Jn]=a,s[da]=c,s}function yh(t,e,n){var r=jt(e.config),o=qL(t,r,e,n),i=o.ctx;function s(c){var l=o._next();return l&&l[qi](i,c),!l}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=Eu(c,r.cfg,e,l)),yh(c||i[pi](),e,l)}return i[Jn]=s,i[da]=a,i}function Jw(t,e,n){var r=jt(e.config),o=qL(t,r,e,n),i=o.ctx;function s(c){return i.iterate(function(l){Re(l[ud])&&l[ud](i,c)})}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=Eu(c,r.cfg,e,l)),Jw(c||i[pi](),e,l)}return i[Jn]=s,i[da]=a,i}function Eu(t,e,n,r){var o=null,i=!r;if(we(t)&&t[me]>0){var s=null;ee(t,function(a){if(!i&&r===a&&(i=!0),i&&a&&Re(a[Yo])){var c=_de(a,e,n);o||(o=c),s&&s._setNext(c),s=c}})}return r&&!o?Eu([r],e,n):o}function _de(t,e,n){var r=null,o=Re(t[Yo]),i=Re(t[lu]),s;t?s=t[fa]+"-"+t[wd]+"-"+Oz++:s="Unknown-0-"+Oz++;var a={getPlugin:function(){return t},getNext:function(){return r},processTelemetry:u,unload:f,update:m,_id:s,_setNext:function(d){r=d}};function c(){var d;return t&&Re(t[Fz])&&(d=t[Fz]()),d||(d=go(a,e,n)),d}function l(d,p,h,g,v){var C=!1,w=t?t[fa]:Sde,y=d[Az];return y||(y=d[Az]={}),d.setNext(r),t&&mn(d[dn](),function(){return w+":"+h},function(){y[s]=!0;try{var S=r?r._id:Le;S&&(y[S]=!1),C=p(d)}catch(x){var I=r?y[r._id]:!0;I&&(C=!0),(!r||!I)&&se(d[Vo](),1,73,"Plugin ["+w+"] failed during "+h+" - "+Ee(x)+", run flags: "+Ee(y))}},g,v),C}function u(d,p){p=p||c();function h(g){if(!t||!o)return!1;var v=Oc(t);return v[mi]||v[bw]?!1:(i&&t[lu](r),t[Yo](d,g),!0)}l(p,h,"processTelemetry",function(){return{item:d}},!d.sync)||p[Jn](d)}function f(d,p){function h(){var g=!1;if(t){var v=Oc(t),C=t[dn]||v[dn];t&&(!C||C===d.core())&&!v[mi]&&(v[dn]=null,v[mi]=!0,v[jo]=!1,t[mi]&&t[mi](d,p)===!0&&(g=!0))}return g}l(d,h,"unload",function(){},p.isAsync)||d[Jn](p)}function m(d,p){function h(){var g=!1;if(t){var v=Oc(t),C=t[dn]||v[dn];t&&(!C||C===d.core())&&!v[mi]&&t[ud]&&t[ud](d,p)===!0&&(g=!0)}return g}l(d,h,"update",function(){},!1)||d[Jn](p)}return fo(a)}var Sde,Az,Fz,Oz,GL,lD=ne(()=>{"use strict";Ne();uL();vu();xt();Ts();ha();Un();oD();YL();Sde="TelemetryPluginChain",Az="_hasRun",Fz="_getTelCtx",Oz=0;GL=function(){function t(e,n,r,o){var i=this,s=go(e,n,r,o);wi(i,s,br(s))}return t}()});function bd(){var t=[];function e(r){r&&t[Ge](r)}function n(r,o){ee(t,function(i){try{i(r,o)}catch(s){se(r[Vo](),2,73,"Unexpected error calling unload handler - "+Ee(s))}}),t=[]}return{add:e,run:n}}var uD=ne(()=>{Ne();xt();Ts()});function zL(t,e){Xw=t,Zw=e}function Qw(){var t=[];function e(r){var o=t;t=[],ee(o,function(i){try{(i.rm||i.remove).call(i)}catch(s){se(r,2,73,"Unloading:"+Ee(s))}}),Xw&&o[me]>Xw&&(Zw?Zw("doUnload",o):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function n(r){r&&(xs(t,r),Xw&&t[me]>Xw&&(Zw?Zw("Add",t):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:e,add:n}}var Xw,Zw,fD=ne(()=>{Ne();xt();Ts()});var KL,Su,Dde,Uc,JL=ne(()=>{"use strict";pr();Ne();vu();xt();Ts();ha();Un();lD();uD();fD();Su="getPlugin",Dde=(KL={},KL[Dc]={isVal:du,v:{}},KL),Uc=function(){function t(){var e=this,n,r,o,i,s;l(),Je(t,e,function(u){u[_c]=function(f,m,d,p){c(f,m,p),n=!0},u[mi]=function(f,m){var d=u[dn];if(!d||f&&d!==f[dn]())return;var p,h=!1,g=f||yh(null,d,o&&o[Su]?o[Su]():o),v=m||{reason:0,isAsync:!1};function C(){h||(h=!0,i.run(g,m),s.run(g[Vo]()),p===!0&&g[Jn](v),l())}return!u[cu]||u[cu](g,v,C)!==!0?C():p=!0,p},u[ud]=function(f,m){var d=u[dn];if(!d||f&&d!==f[dn]())return;var p,h=!1,g=f||Jw(null,d,o&&o[Su]?o[Su]():o),v=m||{reason:0};function C(){h||(h=!0,c(g.getCfg(),g.core(),g[pi]()))}return!u._doUpdate||u._doUpdate(g,v,C)!==!0?C():p=!0,p},Ic(u,"_addUnloadCb",function(){return i},"add"),Ic(u,"_addHook",function(){return s},"add"),gt(u,"_unloadHooks",{g:function(){return s}})}),e[Vo]=function(u){return a(u)[Vo]()},e[jo]=function(){return n},e.setInitialized=function(u){n=u},e[lu]=function(u){o=u},e[Jn]=function(u,f){f?f[Jn](u):o&&Re(o[Yo])&&o[Yo](u,null)},e._getTelCtx=a;function a(u){u===void 0&&(u=null);var f=u;if(!f){var m=r||go(null,{},e[dn]);o&&o[Su]?f=m[da](null,o[Su]):f=m[da](null,o)}return f}function c(u,f,m){jt(u,Dde,Lc(f)),!m&&f&&(m=f[R_]()[pi]());var d=o;o&&o[Su]&&(d=o[Su]()),e[dn]=f,r=go(m,u,f,d)}function l(){n=!1,e[dn]=null,r=null,o=null,s=Qw(),i=bd()}}return t.__ieDyn=1,t}()});function Ide(t,e,n){var r={id:e,fn:n};xs(t,r);var o={remove:function(){ee(t,function(i,s){if(i.id===r.id)return t[ua](s,1),-1})}};return o}function Pde(t,e,n){for(var r=!1,o=t[me],i=0;i<o;++i){var s=t[i];if(s)try{if(s.fn[iu](null,[e])===!1){r=!0;break}}catch(a){se(n,2,64,"Telemetry initializer failed: "+nn(a),{exception:Ee(a)},!0)}}return!r}var Uz,$z=ne(()=>{Bo();pr();Ne();xt();JL();Ts();ha();Un();Uz=function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,o;i(),Je(e,n,function(s,a){s.addTelemetryInitializer=function(c){return Ide(o,r++,c)},s[Yo]=function(c,l){Pde(o,c,l?l[Vo]():s[Vo]())&&s[Jn](c,l)},s[cu]=function(){i()}});function i(){r=0,o=[]}return n}return e.__ieDyn=1,e}(Uc)});function Nde(t,e){return new Gw(e)}function Lde(t,e,n){var r=[],o=[],i={};return ee(n,function(s){(ae(s)||ae(s[_c]))&&An(Wz);var a=s[wd],c=s[fa];s&&a&&(ae(i[a])?i[a]=c:ho(t,"Two extensions have same priority #"+a+" - "+i[a]+", "+c)),!a||a<e?r[Ge](s):o[Ge](s)}),{core:r,channels:o}}function Hz(t,e){var n=!1;return ee(e,function(r){if(r===t)return n=!0,-1}),n}function ZL(t,e,n,r){n&&Ie(n,function(o,i){r&&Tr(i)&&Tr(e[o])&&ZL(t,e[o],i,r),r&&Tr(i)&&Tr(e[o])?ZL(t,e[o],i,r):t.set(e,o,i)})}function Bz(t,e){var n=null,r=-1;return ee(t,function(o,i){if(o.w===e)return n=o,r=i,-1}),{i:r,l:n}}function Ade(t,e){var n=Bz(t,e).l;return n||(n={w:e,rm:function(){var r=Bz(t,e);r.i!==-1&&t[ua](r.i,1)}},t[Ge](n)),n}function Fde(t,e,n){ee(e,function(r){var o=hr(t,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function Ode(t,e,n,r){return e.add(t[la](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[th](r),r=null),n&&!r&&i!==!0&&(r=gz(o.cfg),n[nh](r))})),r}function Ude(t){return gt({rm:function(){t.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(t)+">"}})}var xu,Wz,bde,Mz,Tde,Rde,kde,XL,$c,jz=ne(()=>{"use strict";Bo();pr();hd();Ne();vu();$N();xt();mL();hL();kL();mh();CL();Ts();ha();Un();NL();oD();lD();YL();$z();uD();fD();Wz="Plugins must provide initialize method",bde="_notificationManager",Mz="SDK is still unloading...",Tde="SDK is not initialized",Rde=100,kde=5e4,XL=Ss((xu={cookieCfg:{}},xu[vd]={rdOnly:!0,ref:!0,v:[]},xu[gd]={rdOnly:!0,ref:!0,v:[]},xu[Dc]={ref:!0,v:{}},xu[F_]=vi,xu.loggingLevelConsole=0,xu.diagnosticLogInterval=vi,xu));$c=function(){function t(){var e,n,r,o,i,s,a,c,l,u,f,m,d,p,h,g,v,C,w,y,S,I,x,A,F,k,E,_,T,D,b,R,L;Je(t,this,function(N){q(),N._getDbgPlgTargets=function(){return[x,o]},N[jo]=function(){return n},N.activeStatus=function(){return k},N._setPendingStatus=function(){k=3},N[_c]=function(j,oe,xe,le){d&&An(Mz),N[jo]()&&An("Core cannot be initialized more than once"),e=jt(j,XL,xe||N[kt],!1),j=e.cfg,yt(e[la](function(rt){var ht=rt.cfg,wn=k===3;if(!wn){_=ht.initInMemoMaxSize||Rde;var Wn=ht.instrumentationKey,Or=ht.endpointUrl;if(ae(Wn)){S=null,k=di.INACTIVE;var Ur="Please provide instrumentation key";n?(se(r,1,100,Ur),W()):An(Ur);return}var _i=[];if(uo(Wn)?(_i[Ge](Wn),S=null):S=Wn,uo(Or)?(_i[Ge](Or),E=null):E=Or,_i[me]){T=!1,k=3;var tr=du(ht.initTimeOut)?ht.initTimeOut:kde,Wa=qG(_i);D=fi(function(){D=null,T||B()},tr),gi(Wa,function(Q){try{if(T)return;if(!Q.rejected){var ie=Q[ld];if(ie&&ie[me]){var ve=ie[0];if(S=ve&&ve[ld],ie[me]>1){var be=ie[1];E=be&&be[ld]}}S&&(j.instrumentationKey=S,j.endpointUrl=E)}B()}catch{T||B()}})}else B();var M=rt.ref(rt.cfg,Dc);Ie(M,function(Q){rt.ref(M,Q)})}})),i=le,w=Ode(e,C,i&&N[Sw](),w),Xt(),N[kt]=xe;var De=j[vd];if(u=[],u[Ge].apply(u,C_(C_([],oe,!1),De,!1)),f=j[gd],Be(null),(!m||m[me]===0)&&An("No "+gd+" available"),f&&f[me]>1){var Qe=N[su]("TeeChannelController");(!Qe||!Qe.plugin)&&se(r,1,28,"TeeChannel required")}Fde(j,I,r),I=null,n=!0,k===di.ACTIVE&&W()},N.getChannels=function(){var j=[];return m&&ee(m,function(oe){j[Ge](oe)}),fo(j)},N.track=function(j){mn(N[lh](),function(){return"AppInsightsCore:track"},function(){j===null&&(Dt(j),An("Invalid telemetry item")),!j[po]&&ae(j[po])&&(Dt(j),An("telemetry name required")),j.iKey=j.iKey||S,j.time=j.time||Ps(new Date),j.ver=j.ver||"4.0",!d&&N[jo]()&&k===di.ACTIVE?ce()[Jn](j):k!==di.INACTIVE&&o[me]<=_&&o[Ge](j)},function(){return{item:j}},!j.sync)},N[R_]=ce,N[Sw]=function(){return i||(i=new Yw(e.cfg),N[bde]=i),i},N[nh]=function(j){N.getNotifyMgr()[nh](j)},N[th]=function(j){i&&i[th](j)},N.getCookieMgr=function(){return c||(c=Ac(e.cfg,N[kt])),c},N.setCookieMgr=function(j){c!==j&&(Nc(c,!1),c=j)},N[lh]=function(){return s||a||FL()},N.setPerfMgr=function(j){s=j},N.eventCnt=function(){return o[me]},N.releaseQueue=function(){if(n&&o[me]>0){var j=o;o=[],k===2?ee(j,function(oe){oe.iKey=oe.iKey||S,ce()[Jn](oe)}):se(r,2,20,"core init status is not active")}},N.pollInternalLogs=function(j){return h=j||null,L=!1,b&&b[xc](),z(!0)};function B(){T=!0,ae(S)?(k=di.INACTIVE,se(r,1,112,"ikey can't be resolved from promises")):k=di.ACTIVE,W()}function W(){n&&(N.releaseQueue(),N.pollInternalLogs())}function z(j){if((!b||!b[au])&&!L){var oe=j||r&&r.queue[me]>0;oe&&(R||(R=!0,yt(e[la](function(xe){var le=xe.cfg.diagnosticLogInterval;(!le||!(le>0))&&(le=1e4);var De=!1;b&&(De=b[au],b[xc]()),b=_G(Pn,le),b.unref(),b[au]=De}))),b[au]=!0)}return b}N[MN]=function(){L=!0,b&&b[xc](),Pn()},wi(N,function(){return p},["addTelemetryInitializer"]),N[qi]=function(j,oe,xe){j===void 0&&(j=!0),n||An(Tde),d&&An(Mz);var le={reason:50,isAsync:j,flushComplete:!1},De;j&&!oe&&(De=zi(function(ht){oe=ht}));var Qe=yh(Mt(),N);Qe[xw](function(){C.run(N[kt]),X_([c,i,r],j,function(){q(),oe&&oe(le)})},N);function rt(ht){le.flushComplete=ht,d=!0,v.run(Qe,le),N[MN](),Qe[Jn](le)}return Pn(),vn(j,rt,6,xe)||rt(!1),De},N[su]=mt,N.addPlugin=function(j,oe,xe,le){if(!j){le&&le(!1),nt(Wz);return}var De=mt(j[fa]);if(De&&!oe){le&&le(!1),nt("Plugin ["+j[fa]+"] is already loaded!");return}var Qe={reason:16};function rt(Wn){u[Ge](j),Qe.added=[j],Be(Qe),le&&le(!0)}if(De){var ht=[De.plugin],wn={reason:2,isAsync:!!xe};So(ht,wn,function(Wn){Wn?(Qe.removed=ht,Qe.reason|=32,rt(!0)):le&&le(!1)})}else rt(!1)},N.updateCfg=function(j,oe){oe===void 0&&(oe=!0);var xe;if(N[jo]()){xe={reason:1,cfg:e.cfg,oldCfg:SN({},e.cfg),newConfig:SN({},j),merge:oe},j=xe.newConfig;var le=e.cfg;j[vd]=le[vd],j[gd]=le[gd]}e._block(function(De){var Qe=De.cfg;ZL(De,Qe,j,oe),oe||Ie(Qe,function(rt){Es(j,rt)||De.set(Qe,rt,vi)}),De.setDf(Qe,XL)},!0),e.notify(),xe&&pt(xe)},N.evtNamespace=function(){return g},N.flush=vn,N.getTraceCtx=function(j){return y||(y=Lz()),y},N.setTraceCtx=function(j){y=j||null},N.addUnloadHook=yt,Ic(N,"addUnloadCb",function(){return v},"add"),N.onCfgChange=function(j){var oe;return n?oe=hr(e.cfg,j,N[kt]):oe=Ade(I,j),Ude(oe)},N.getWParam=function(){return id()||e.cfg.enableWParam?0:-1};function V(){var j={};A=[];var oe=function(xe){xe&&ee(xe,function(le){if(le[fa]&&le[rh]&&!j[le.identifier]){var De=le[fa]+"="+le[rh];A[Ge](De),j[le.identifier]=le}})};oe(m),f&&ee(f,function(xe){oe(xe)}),oe(u)}function q(){n=!1,e=jt({},XL,N[kt]),e.cfg[k_]=1,gt(N,"config",{g:function(){return e.cfg},s:function(oe){N.updateCfg(oe,!1)}}),gt(N,"pluginVersionStringArr",{g:function(){return A||V(),A}}),gt(N,"pluginVersionString",{g:function(){return F||(A||V(),F=A.join(";")),F||Le}}),gt(N,"logger",{g:function(){return r||(r=new wu(e.cfg),e[kt]=r),r},s:function(oe){e[kt]=oe,r!==oe&&(Nc(r,!1),r=oe)}}),N[kt]=new wu(e.cfg),x=[];var j=N.config[vd]||[];j.splice(0,j[me]),xs(j,x),p=new Uz,o=[],Nc(i,!1),i=null,s=null,a=null,Nc(c,!1),c=null,l=null,u=[],f=null,m=null,d=!1,h=null,g=kr("AIBaseCore",!0),v=bd(),y=null,S=null,C=Qw(),I=[],F=null,A=null,L=!1,b=null,R=!1,k=0,E=null,_=null,T=!1,D=null}function ce(){var j=go(Mt(),e.cfg,N);return j[xw](z),j}function Be(j){var oe=Lde(N[kt],hz,u);l=null,F=null,A=null,m=(f||[])[0]||[],m=cD(xs(m,oe[gd]));var xe=xs(cD(oe[dn]),m);x=fo(xe);var le=N.config[vd]||[];le.splice(0,le[me]),xs(le,x);var De=ce();m&&m[me]>0&&VL(De[da](m),xe),VL(De,xe),j&&pt(j)}function mt(j){var oe=null,xe=null,le=[];return ee(x,function(De){if(De[fa]===j&&De!==p)return xe=De,-1;De.getChannel&&le[Ge](De)}),!xe&&le[me]>0&&ee(le,function(De){if(xe=De.getChannel(j),!xe)return-1}),xe&&(oe={plugin:xe,setEnabled:function(De){Oc(xe)[bw]=!De},isEnabled:function(){var De=Oc(xe);return!De[mi]&&!De[bw]},remove:function(De,Qe){De===void 0&&(De=!0);var rt=[xe],ht={reason:1,isAsync:De};So(rt,ht,function(wn){wn&&Be({reason:32,removed:rt}),Qe&&Qe(wn)})}}),oe}function Mt(){if(!l){var j=(x||[]).slice();wt(j,p)===-1&&j[Ge](p),l=Eu(cD(j),e.cfg,N)}return l}function So(j,oe,xe){if(j&&j[me]>0){var le=Eu(j,e.cfg,N),De=yh(le,N);De[xw](function(){var Qe=!1,rt=[];ee(u,function(wn,Wn){Hz(wn,j)?Qe=!0:rt[Ge](wn)}),u=rt,F=null,A=null;var ht=[];f&&(ee(f,function(wn,Wn){var Or=[];ee(wn,function(Ur){Hz(Ur,j)?Qe=!0:Or[Ge](Ur)}),ht[Ge](Or)}),f=ht),xe&&xe(Qe),z()}),De[Jn](oe)}else xe(!1)}function Pn(){if(r&&r.queue){var j=r.queue.slice(0);r.queue[me]=0,ee(j,function(oe){var xe={name:h||"InternalMessageId: "+oe[oh],iKey:S,time:Ps(new Date),baseType:Sd.dataType,baseData:{message:oe[ma]}};N.track(xe)})}}function vn(j,oe,xe,le){var De=1,Qe=!1,rt=null;le=le||5e3;function ht(){De--,Qe&&De===0&&(rt&&rt[xc](),rt=null,oe&&oe(Qe),oe=null)}if(m&&m[me]>0){var wn=ce()[da](m);wn.iterate(function(Wn){if(Wn.flush){De++;var Or=!1;Wn.flush(j,function(){Or=!0,ht()},xe)||Or||(j&&rt==null?rt=fi(function(){rt=null,ht()},le):ht())}})}return Qe=!0,ht(),!0}function Xt(){var j;yt(e[la](function(oe){var xe=oe.cfg.enablePerfMgr;if(xe){var le=oe.cfg[F_];(j!==le||!j)&&(le||(le=Nde),Tw(oe.cfg,F_,le),j=le,a=null),!s&&!a&&Re(le)&&(a=le(N,N[Sw]()))}else a=null,j=null}))}function pt(j){var oe=Jw(Mt(),N);oe[xw](z),(!N._updateHook||N._updateHook(oe,j)!==!0)&&oe[Jn](j)}function nt(j){var oe=N[kt];oe?(se(oe,2,73,j),z()):An(j)}function Dt(j){var oe=N[Sw]();oe&&oe[fu]([j],2)}function yt(j){C.add(j)}})}return t.__ieDyn=1,t}()});function Td(t,e){try{if(t&&t!==""){var n=Rr().parse(t);if(n&&n[BN]&&n[BN]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[me])return n}}catch(r){se(e,1,43,"Cannot parse the response. "+(r[po]||Ee(r)),{response:t})}return null}var Vz=ne(()=>{Ne();xt();Ts();hu()});var ya,$de,Yz,QL,Rd,qz=ne(()=>{pr();hd();Ne();xt();hL();Ts();hu();ha();ya="",$de="NoResponseBody",Yz="&"+$de+"=true",QL="POST",Rd=function(){function t(){var e=0,n,r,o,i,s,a,c,l,u,f,m,d,p,h;Je(t,this,function(g,v){var C=!0;T(),g[_c]=function(D,b){o=b,r&&se(o,1,28,"Sender is already initialized"),g.SetConfig(D),r=!0},g._getDbgPlgTargets=function(){return[r,i,a,n]},g.SetConfig=function(D){try{if(s=D.senderOnCompleteCallBack||{},a=!!D.disableCredentials,c=D.fetchCredentials,i=!!D.isOneDs,n=!!D.enableSendPromise,u=!!D.disableXhr,f=!!D.disableBeacon,m=!!D.disableBeaconSync,h=D.timeWrapper,p=!!D.addNoResponse,d=!!D.disableFetchKeepAlive,l={sendPOST:k},i||(C=!1),a){var b=Ed();b&&b.protocol&&b.protocol[Wo]()==="file:"&&(C=!1)}return!0}catch{}return!1},g.getSyncFetchPayload=function(){return e},g.getSenderInst=function(D,b){return D&&D[me]?I(D,b):null},g.getFallbackInst=function(){return l},g[cu]=function(D,b){T()};function w(D,b){x(b,200,{},D)}function y(D,b){se(o,2,26,"Failed to send telemetry.",{message:D}),x(b,400,{})}function S(D){y("No endpoint url is provided for the batch",D)}function I(D,b){for(var R=0,L=null,N=0;L==null&&N<D[me];)R=D[N],!u&&R===1?Aw()?L=_:dh()&&(L=k):R===2&&Rc(b)&&(!b||!d)?L=E:R===3&&Ji()&&(b?!m:!f)&&(L=F),N++;return L?{_transport:R,_isSync:b,sendPOST:L}:null}function x(D,b,R,L){try{D&&D(b,R,L)}catch{}}function A(D,b){var R=Kn(),L=D[sh];if(!L)return S(b),!0;L=D[sh]+(p?Yz:ya);var N=D[uu],B=i?N:new Blob([N],{type:"text/plain;charset=UTF-8"}),W=R.sendBeacon(L,B);return W}function F(D,b,R){var L=D[uu];try{if(L)if(A(D,b))w(ya,b);else{var N=s&&s.beaconOnRetry;N&&Re(N)?N(D,b,A):(l&&l.sendPOST(D,b,!0),se(o,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(B){i&&ho(o,"Failed to send telemetry using sendBeacon API. Ex:"+Ee(B)),x(b,i?0:400,{},ya)}}function k(D,b,R){var L,N,B,W=D[N_]||{};!R&&n&&(L=zi(function(ce,Be){N=ce,B=Be})),i&&R&&D.disableXhrSync&&(R=!1);var z=D[sh];if(!z){S(b),N&&N(!1);return}var V=QN(QL,z,C,!0,R,D[md]);i||V.setRequestHeader("Content-type","application/json"),ee(br(W),function(ce){V.setRequestHeader(ce,W[ce])}),V.onreadystatechange=function(){i||(q(V),V.readyState===4&&N&&N(!0))},V.onload=function(){i&&q(V)};function q(ce){var Be=s&&s.xhrOnComplete,mt=Be&&Re(Be);if(mt)Be(ce,b,D);else{var Mt=bs(ce);x(b,ce[fd],Tc(ce,i),Mt)}}return V.onerror=function(ce){x(b,i?V[fd]:400,Tc(V,i),i?ya:Pc(V)),B&&B(ce)},V.ontimeout=function(){x(b,i?V[fd]:500,Tc(V,i),i?ya:Pc(V)),N&&N(!1)},V.send(D[uu]),L}function E(D,b,R){var L,N=D[sh],B=D[uu],W=i?B:new Blob([B],{type:"application/json"}),z,V,q,ce=new Headers,Be=B[me],mt=!1,Mt=!1,So=D[N_]||{},Pn=(L={method:QL,body:W},L[pL]=!0,L);D.headers&&br(D.headers)[me]>0&&(ee(br(So),function(nt){ce.append(nt,So[nt])}),Pn[N_]=ce),c?Pn.credentials=c:C&&i&&(Pn.credentials="include"),R&&(Pn.keepalive=!0,e+=Be,i?D._sendReason===2&&(mt=!0,p&&(N+=Yz)):mt=!0);var vn=new Request(N,Pn);try{vn[pL]=!0}catch{}if(!R&&n&&(z=zi(function(nt,Dt){V=nt,q=Dt})),!N){S(b),V&&V(!1);return}function Xt(nt){x(b,i?0:400,{},i?ya:nt)}function pt(nt,Dt,yt){var j=nt[fd],oe=s.fetchOnComplete;oe&&Re(oe)?oe(nt,b,yt||ya,Dt):x(b,j,{},yt||ya)}try{gi(fetch(i?N:vn,i?Pn:null),function(nt){if(R&&(e-=Be,Be=0),!Mt)if(Mt=!0,nt.rejected)Xt(nt.reason&&nt.reason[ma]),q&&q(nt.reason);else{var Dt=nt[ld];try{!i&&!Dt.ok?(Xt(Dt.statusText),V&&V(!1)):i&&!Dt.body?(pt(Dt,null,ya),V&&V(!0)):gi(Dt.text(),function(yt){pt(Dt,D,yt[ld]),V&&V(!0)})}catch(yt){Xt(Ee(yt)),q&&q(yt)}}})}catch(nt){Mt||(Xt(Ee(nt)),q&&q(nt))}return mt&&!Mt&&(Mt=!0,x(b,200,{}),V&&V(!0)),i&&!Mt&&D[md]>0&&h&&h.set(function(){Mt||(Mt=!0,x(b,500,{}),V&&V(!0))},D[md]),z}function _(D,b,R){var L=On(),N=new XDomainRequest,B=D[uu];N.onload=function(){var ce=bs(N),Be=s&&s.xdrOnComplete;Be&&Re(Be)?Be(N,b,D):x(b,200,{},ce)},N.onerror=function(){x(b,400,{},i?ya:Cd(N))},N.ontimeout=function(){x(b,500,{})},N.onprogress=function(){};var W=L&&L.location&&L.location.protocol||"",z=D[sh];if(!z){S(b);return}if(!i&&z.lastIndexOf(W,0)!==0){var V="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";se(o,2,40,". "+V),y(V,b);return}var q=i?z:z[Ds](/^(https?:)/,"");N.open(QL,q),D[md]&&(N[md]=D[md]),N.send(B),i&&R?h&&h.set(function(){N.send(B)},0):N.send(B)}function T(){e=0,r=!1,n=!1,o=null,i=null,s=null,a=null,c=null,l=null,u=!1,f=!1,m=!1,d=!1,p=!1,h=null}})}return t.__ieDyn=1,t}()});function Xz(t){return t&&t[Ds]?t[Ds](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Le):t}function pD(t,e){if(e){var n=Le;we(e)?(n=Le,ee(e,function(o){o=Xz(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=Xz(e),n&&(n[0]!=="."&&(n="."+n),t=(t||Le)+n)}var r=Wde.exec(t||Le)||[];return{type:r[1],ns:(r[2]||Le).replace(Mde,".").replace(Hde,Le)[Gi](".").sort().join(".")}}function eA(t,e,n){var r=[],o=ty.get(t,dD,{},!1),i=pD(e,n);return Ie(o,function(s,a){ee(a,function(c){(!i[hi]||i[hi]===c[ih][hi])&&(!i.ns||i.ns===i.ns)&&r[Ge]({name:c.evtName[hi]+(c[ih].ns?"."+c[ih].ns:Le),handler:c.handler})})}),r}function i6(t,e,n){n===void 0&&(n=!0);var r=ty.get(t,dD,{},n),o=r[e];return o||(o=r[e]=[]),o}function s6(t,e,n,r){t&&e&&e[hi]&&(t[Jz]?t[Jz](e[hi],n,r):t[Kz]&&t[Kz](Qz+e[hi],n))}function jde(t,e,n,r){var o=!1;return t&&e&&e[hi]&&n&&(t[zz]?(t[zz](e[hi],n,r),o=!0):t[Gz]&&(t[Gz](Qz+e[hi],n),o=!0)),o}function Zz(t,e,n,r){for(var o=e[me];o--;){var i=e[o];i&&(!n.ns||n.ns===i[ih].ns)&&(!r||r(i))&&(s6(t,i[ih],i.handler,i.capture),e[ua](o,1))}}function Vde(t,e,n){if(e[hi])Zz(t,i6(t,e[hi]),e,n);else{var r=ty.get(t,dD,{});Ie(r,function(o,i){Zz(t,i,e,n)}),br(r)[me]===0&&ty.kill(t,dD)}}function yi(t,e){var n;return e?(we(e)?n=[t].concat(e):n=[t,e],n=pD("xx",n).ns[Gi](".")):n=t,n}function Ca(t,e,n,r,o){o===void 0&&(o=!1);var i=!1;if(t)try{var s=pD(e,r);if(i=jde(t,s,n,o),i&&ty.accept(t)){var a={guid:Bde++,evtName:s,handler:n,capture:o};i6(t,s.type)[Ge](a)}}catch{}return i}function Mc(t,e,n,r,o){if(o===void 0&&(o=!1),t)try{var i=pD(e,r),s=!1;Vde(t,i,function(a){return i.ns&&!n||a.handler===n?(s=!0,!0):!1}),s||s6(t,i,n,o)}catch{}}function tA(t,e,n,r){return r===void 0&&(r=!1),Ca(t,e,n,null,r)}function nA(t,e,n,r){r===void 0&&(r=!1),Mc(t,e,n,null,r)}function hD(t,e,n){var r=!1,o=On();o&&(r=Ca(o,t,e,n),r=Ca(o.body,t,e,n)||r);var i=Fn();return i&&(r=Ca(i,t,e,n)||r),r}function gD(t,e,n){var r=On();r&&(Mc(r,t,e,n),Mc(r.body,t,e,n));var o=Fn();o&&Mc(o,t,e,n)}function Ch(t,e,n,r){var o=!1;return e&&t&&t[me]>0&&ee(t,function(i){i&&(!n||wt(n,i)===-1)&&(o=hD(i,e,r)||o)}),o}function vD(t,e,n,r){var o=!1;return e&&t&&we(t)&&(o=Ch(t,e,n,r),!o&&n&&n[me]>0&&(o=Ch(t,e,null,r))),o}function _u(t,e,n){t&&we(t)&&ee(t,function(r){r&&gD(r,e,n)})}function ny(t,e,n){return vD([n6,t6,mD],t,e,n)}function ry(t,e){_u([n6,t6,mD],t,e)}function Eh(t,e,n){function r(s){var a=Fn();t&&a&&a.visibilityState==="hidden"&&t(s)}var o=yi(r6,n),i=Ch([mD],t,e,o);return(!e||wt(e,ey)===-1)&&(i=Ch([ey],r,e,o)||i),!i&&e&&(i=Eh(t,null,n)),i}function oy(t,e){var n=yi(r6,e);_u([mD],t,n),_u([ey],null,n)}function Sh(t,e,n){function r(s){var a=Fn();t&&a&&a.visibilityState==="visible"&&t(s)}var o=yi(o6,n),i=Ch([e6],t,e,o);return i=Ch([ey],r,e,o)||i,!i&&e&&(i=Sh(t,null,n)),i}function iy(t,e){var n=yi(o6,e);_u([e6],t,n),_u([ey],null,n)}var Qz,Gz,zz,Kz,Jz,dD,ey,mD,e6,t6,n6,r6,o6,Mde,Hde,Bde,ty,Wde,a6=ne(()=>{Ne();xt();mh();Un();Qz="on",Gz="attachEvent",zz="addEventListener",Kz="detachEvent",Jz="removeEventListener",dD="events",ey="visibilitychange",mD="pagehide",e6="pageshow",t6="unload",n6="beforeunload",r6=kr("aiEvtPageHide"),o6=kr("aiEvtPageShow"),Mde=/\.[\.]+/g,Hde=/[\.]+$/,Bde=1,ty=V_("events"),Wde=/^([^.]*)(?:\.(.+)|)/});var rA,c6=ne(()=>{Ew();rA=fn({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var Ot=ne(()=>{LG();AG();$N();jz();JL();j_();OL();mL();ha();Vz();qz();Ne();Ew();a6();hu();Bo();NL();oD();Ts();lD();c6();kL();mh();uD();fD();jL();vu();z_();vL()});var Ea,l6,oA,wD,yD=ne(()=>{Ea="",l6="https://browser.events.data.microsoft.com/OneCollector/1.0/",oA="version",wD="properties"});var iA,xh,Sa,sA,Vt,Hc,CD,ED,SD,xD,sy,_D=ne(()=>{iA="initialize",xh="indexOf",Sa="timings",sA="pollInternalLogs",Vt="value",Hc="length",CD="processTelemetryStart",ED="handleField",SD="rmSanitizer",xD="rmFieldSanitizer",sy="canHandle"});function gr(t){return!(t===Ea||ae(t))}function DD(t){if(t){var e=Vi(t,"-");if(e>-1)return od(t,e)}return Ea}function p6(){return aA===null&&(aA=!Ve(Uint8Array)&&!Kde()&&!mu()),aA}function ID(t){return!!(t&&Ir(t)&&t>=1&&t<=4)}function PD(t,e,n){if(!e&&!gr(e)||typeof t!="string")return null;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||we(e))e={value:e};else if(r==="object"&&!f6.call(e,"value"))e={value:n?JSON.stringify(e):e};else if(ae(e[Vt])||e[Vt]===Ea||!ke(e[Vt])&&!Ir(e[Vt])&&!ia(e[Vt])&&!we(e[Vt]))return null;if(we(e[Vt])&&!lA(e[Vt]))return null;if(!ae(e.kind)){if(we(e[Vt])||!ay(e.kind))return null;e[Vt]=e[Vt].toString()}return e}function Dh(t,e,n){var r=-1;if(!Ve(t))if(e>0&&(e===32?r=8192:e<=13&&(r=e<<5)),zde(n))r===-1&&(r=0),r|=n;else{var o=Gde[xa(t)]||-1;r!==-1&&o!==-1?r|=o:o===6&&(r=o)}return r}function h6(t,e,n){n===void 0&&(n=!0);var r;return t&&(r=t.get(e),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||Ea}function g6(t){t===void 0&&(t="D");var e=zw();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,Ea)),e}function kd(t,e,n,r,o){var i={},s=!1,a=0,c=arguments[Hc],l=arguments;for(ia(l[0])&&(s=l[0],a++);a<c;a++){var t=l[a];Ie(t,function(f,m){s&&m&&tn(m)?we(m)?(i[f]=i[f]||[],ee(m,function(d,p){d&&tn(d)?i[f][p]=kd(!0,i[f][p],d):i[f][p]=d})):i[f]=kd(!0,i[f],m):i[f]=m})}return i}function ay(t){return t===0||t>0&&t<=13||t===32}function zde(t){return t>=0&&t<=9}function Kde(){var t=Kn();if(!Ve(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[xh]("safari")>=0||e[xh]("firefox")>=0)&&e[xh]("chrome")<0)return!0}return!1}function lA(t){return t[Hc]>0}function cy(t,e){var n=t;n[Sa]=n[Sa]||{},n[Sa][CD]=n[Sa][CD]||{},n[Sa][CD][e]=Go()}function xa(t){var e=0;if(t!=null){var n=typeof t;n==="string"?e=1:n==="number"?e=2:n==="boolean"?e=3:n===vc&&(e=4,we(t)?(e=4096,t[Hc]>0&&(e|=xa(t[0]))):f6.call(t,"value")&&(e=8192|xa(t[Vt])))}return e}function bD(){return!!vt("chrome")}function v6(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,Yde,r),n&&s(a,u6,n),a.open(t,e,!o),n&&s(a,u6,n),!o&&i&&s(a,qde,i),a}function Du(t){return t>0}var Bc,cA,_h,f6,Yde,u6,qde,Gde,aA,d6,m6,Go,TD=ne(()=>{Ot();Bo();Ne();yD();_D();cA="4.3.6",_h="1DS-Web-JS-"+cA,f6=lw.hasOwnProperty,Yde="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",u6="withCredentials",qde="timeout",Gde=(Bc={},Bc[0]=0,Bc[2]=6,Bc[1]=1,Bc[3]=7,Bc[4098]=6,Bc[4097]=1,Bc[4099]=7,Bc),aA=null,d6=id(),m6=zp();Go=ww});function Xde(t){return t&&(!t.getProperty||!t.setProperty)&&An("Invalid property storage override passed."),!0}var Jde,w6,y6=ne(()=>{Bo();pr();Ot();Ne();yD();TD();_D();Jde=Ss({endpointUrl:l6,propertyStorageOverride:{isVal:Xde}});w6=function(t){Ho(e,t);function e(){var n=t.call(this)||this;return Je(e,n,function(r,o){r[iA]=function(i,s,a,c){mn(r,function(){return"AppInsightsCore.initialize"},function(){try{o[iA](jt(i,Jde,a||r.logger,!1).cfg,s,a,c)}catch(f){var l=r.logger,u=Ee(f);u[xh]("channels")!==-1&&(u+=`
 - Channels must be provided through config.channels only!`),se(l,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},r.track=function(i){mn(r,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s[Sa]=s[Sa]||{},s[Sa].trackStart=Go(),ID(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=_h;var c=s.baseData=s.baseData||{};c[wD]=c[wD]||{};var l=c[wD];l[oA]=l[oA]||r.pluginVersionString||Ea}o.track(s)},function(){return{item:i}},!i.sync)},r[sA]=function(i){return o[sA](i||"InternalLog")}}),n}return e.__ieDyn=1,e}($c)});var C6,E6,S6,x6,_6,D6=ne(()=>{Ot();C6=fn({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),E6=fn({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),S6=fn({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),x6=fn({Normal:1,Critical:2}),_6=fn({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});function I6(t){return t=="__proto__"||t=="constructor"||t=="prototype"}var P6,b6=ne(()=>{Ot();Ne();yD();TD();_D();P6=function(){function t(e){var n=this,r={},o=[],i=[];e&&i.push(e);function s(u,f){var m,d=r[u];if(d&&(m=d[f]),!m&&m!==null){if(ke(u)&&ke(f))if(i[Hc]>0){for(var p=0;p<i[Hc];p++)if(i[p][ED](u,f)){m={canHandle:!0,fieldHandler:i[p]};break}}else o[Hc]===0&&(m={canHandle:!0});if(!m&&m!==null){m=null;for(var p=0;p<o[Hc];p++)if(o[p][ED](u,f)){m={canHandle:!0,handler:o[p],fieldHandler:null};break}}if(!d){if(I6(u))return null;d=r[u]={}}if(I6(f))return null;d[f]=m}return m}n.clearCache=function(){r={}},n.addSanitizer=function(u){u&&(yN(o,u)||o.push(u),r={})},n.addFieldSanitizer=function(u){u&&(yN(i,u)||i.push(u),r={})},n[SD]=function(u){if(u){var f=wt(o,u);f!==-1&&(o.splice(f,1),r={}),ee(o,function(m){m&&m[SD]&&m[SD](u)})}},n[xD]=function(u){if(u){var f=wt(i,u);f!==-1&&(i.splice(f,1),r={}),ee(o,function(m){m&&m[xD]&&m[xD](u)})}},n.isEmpty=function(){return Xp(o)+Xp(i)===0},n[ED]=function(u,f){var m=s(u,f);return m?m[sy]:!1},n[Vt]=function(u,f,m,d){var p=s(u,f);if(p&&p[sy]){if(!p[sy])return null;if(p.handler)return p.handler[Vt](u,f,m,d);if(!ke(f)||ae(m)||m===Ea)return null;var h=null,g=xa(m);if((g&8192)===8192){var v=g&-8193;if(h=m,!gr(h[Vt])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=c(u,f,m):g===4&&(h=c(u,f,d?JSON.stringify(m):m));if(h)return a(p,u,f,g,h,d)}return null},n.property=function(u,f,m,d){var p=s(u,f);if(!p||!p[sy]||!ke(f)||ae(m)||!gr(m[Vt]))return null;var h=xa(m[Vt]);return h===0?null:a(p,u,f,h,m,d)};function a(u,f,m,d,p,h){if(u.handler)return u.handler.property(f,m,p,h);if(!ae(p.kind)){if((d&4096)===4096||!ay(p.kind))return null;p[Vt]=p[Vt].toString()}return l(u.fieldHandler,f,m,d,p)}function c(u,f,m){return gr(m)?{value:m}:null}function l(u,f,m,d,p){if(p&&u){var h=u.getSanitizer(f,m,d,p.kind,p.propertyType);if(h)if(d===4){var g={},v=p[Vt];Ie(v,function(w,y){var S=f+"."+m;if(gr(y)){var I=c(S,w,y);I=l(u,S,w,xa(y),I),I&&(g[w]=I[Vt])}}),p[Vt]=g}else{var C={path:f,name:m,type:d,prop:p,sanitizer:n};p=h.call(n,C)}}return p}}return t.getFieldType=xa,t}()});var T6={};EC(T6,{ActiveStatus:()=>di,AppInsightsCore:()=>w6,BaseTelemetryPlugin:()=>Uc,DiagnosticLogger:()=>wu,EventLatency:()=>E6,EventPersistence:()=>x6,EventPropertyType:()=>S6,EventsDiscardedReason:()=>_s,FullVersionString:()=>_h,InternalAppInsightsCore:()=>$c,LoggingSeverity:()=>rA,MinChannelPriorty:()=>ON,NotificationManager:()=>Yw,PerfEvent:()=>_d,PerfManager:()=>Gw,ProcessTelemetryContext:()=>GL,SenderPostManager:()=>Rd,TraceLevel:()=>_6,Undefined:()=>ra,ValueKind:()=>C6,ValueSanitizer:()=>P6,Version:()=>cA,_InternalLogMessage:()=>Sd,__getRegisteredEvents:()=>eA,_appendHeader:()=>uh,_getAllResponseHeaders:()=>Tc,_logInternalMessage:()=>xL,_testHookMaxUnloadHooksCb:()=>zL,_throwInternal:()=>se,_warnToConsole:()=>ho,addEventHandler:()=>hD,addEventListeners:()=>vD,addPageHideEventListener:()=>Eh,addPageShowEventListener:()=>Sh,addPageUnloadEventListener:()=>ny,areCookiesSupported:()=>vh,arrForEach:()=>ee,arrIndexOf:()=>wt,arrMap:()=>Cc,arrReduce:()=>vw,attachEvent:()=>tA,blockDynamicConversion:()=>Hw,convertAllHeadersToMap:()=>W_,cookieAvailable:()=>vh,createCookieMgr:()=>Ac,createDynamicConfig:()=>jt,createEnumStyle:()=>fn,createGuid:()=>g6,createProcessTelemetryContext:()=>go,createTraceParent:()=>ML,createUniqueNamespace:()=>kr,createUnloadHandlerContainer:()=>bd,dateNow:()=>xn,detachEvent:()=>nA,disallowsSameSiteNone:()=>rD,doPerf:()=>mn,dumpObj:()=>Ee,eventOff:()=>Mc,eventOn:()=>Ca,extend:()=>kd,findW3cTraceParent:()=>WL,forceDynamicConversion:()=>dL,formatErrorMessageXdr:()=>Cd,formatErrorMessageXhr:()=>Pc,formatTraceParent:()=>BL,generateW3CId:()=>Dd,getCommonSchemaMetaData:()=>Dh,getConsole:()=>Rw,getCookieValue:()=>h6,getCrypto:()=>kw,getDocument:()=>Fn,getDynamicConfigHandler:()=>Mw,getExceptionName:()=>nn,getFieldValueType:()=>xa,getGlobal:()=>mo,getGlobalInst:()=>vt,getHistory:()=>g_,getIEVersion:()=>Lw,getISOString:()=>Ps,getJSON:()=>Rr,getLocation:()=>Ed,getMsCrypto:()=>Nw,getNavigator:()=>Kn,getPerformance:()=>sd,getResponseText:()=>bs,getSetValue:()=>Tw,getTenantId:()=>DD,getTime:()=>Go,getWindow:()=>On,hasDocument:()=>id,hasHistory:()=>vN,hasJSON:()=>ga,hasNavigator:()=>hw,hasOwnProperty:()=>mr,hasWindow:()=>zp,isArray:()=>we,isArrayValid:()=>lA,isBeaconsSupported:()=>Ji,isBoolean:()=>ia,isChromium:()=>bD,isDate:()=>p_,isDocumentObjectAvailable:()=>d6,isError:()=>rd,isFetchSupported:()=>Rc,isFunction:()=>Re,isGreaterThanZero:()=>Du,isIE:()=>pu,isLatency:()=>ID,isNotTruthy:()=>mN,isNullOrUndefined:()=>ae,isNumber:()=>Ir,isObject:()=>tn,isReactNative:()=>mu,isSampledFlag:()=>HL,isString:()=>ke,isTruthy:()=>Cs,isTypeof:()=>dN,isUint8ArrayAvailable:()=>p6,isUndefined:()=>Ve,isValidSpanId:()=>Pd,isValidTraceId:()=>Id,isValidTraceParent:()=>aD,isValueAssigned:()=>gr,isValueKind:()=>ay,isWindowObjectAvailable:()=>m6,isXhrSupported:()=>dh,mergeEvtNamespace:()=>yi,newGuid:()=>zw,newId:()=>Uw,normalizeJsName:()=>yd,objDefineAccessors:()=>pN,objForEachKey:()=>Ie,objFreeze:()=>fo,objKeys:()=>br,objSeal:()=>hN,onConfigChange:()=>hr,openXhr:()=>v6,optimizeObject:()=>qo,parseResponse:()=>Td,parseTraceParent:()=>Kw,perfNow:()=>ww,prependTransports:()=>bc,proxyAssign:()=>XN,proxyFunctionAs:()=>Ic,proxyFunctions:()=>wi,random32:()=>kc,randomValue:()=>cL,removeEventHandler:()=>gD,removeEventListeners:()=>_u,removePageHideEventListener:()=>oy,removePageShowEventListener:()=>iy,removePageUnloadEventListener:()=>ry,safeGetCookieMgr:()=>RL,safeGetLogger:()=>Lc,sanitizeProperty:()=>PD,setEnableEnvMocks:()=>iL,setProcessTelemetryTimings:()=>cy,setValue:()=>Ki,strContains:()=>_n,strEndsWith:()=>ad,strFunction:()=>Bp,strObject:()=>vc,strPrototype:()=>ys,strStartsWith:()=>Zp,strTrim:()=>tt,strUndefined:()=>ra,throwError:()=>An,toISOString:()=>Ps,useXDomainRequest:()=>Aw});var Nd=ne(()=>{y6();D6();b6();Ot();TD()});var Ld,RD,kD,uA=ne(()=>{Ld="REAL_TIME",RD="NEAR_REAL_TIME",kD="BEST_EFFORT"});var Rs,ND,R6,fA,k6,N6,dA,LD,ly,Ih,L6,A6,F6,AD,mA,FD,OD,UD,uy,pA,hA,O6,Ph,gA,$D,fy=ne(()=>{Rs="",ND="drop",R6="send",fA="requeue",k6="rspFail",N6="oth",dA="no-cache, no-store",LD="application/x-json-stream",ly="cache-control",Ih="content-type",L6="kill-tokens",A6="kill-duration",F6="time-delta-millis",AD="client-version",mA="client-id",FD="time-delta-to-apply-millis",OD="upload-time",UD="apikey",uy="AuthMsaDeviceTicket",pA="WebAuthToken",hA="AuthXToken",O6="NoResponseBody",Ph="msfpc",gA="trace",$D="user"});var dy,MD,HD,my,ze,_a,Ci,pn,Da,Xn,Ia,BD,Ad,WD,Fd,jD,VD,U6,vA,wA,$6,YD,yA,CA,M6,EA,SA,xA,qD,GD,zD,py,_A,ks,bh,Xr,zo,hy,Th,gy,H6,KD,JD,Rh,DA,vy,XD,ZD,QD,eI,wy,B6,IA,W6,j6,yy,Iu,Od,kh=ne(()=>{dy="allowRequestSending",MD="shouldAddClockSkewHeaders",HD="getClockSkewHeaderValue",my="setClockSkew",ze="length",_a="concat",Ci="iKey",pn="count",Da="events",Xn="push",Ia="split",BD="toLowerCase",Ad="hdrs",WD="useHdrs",Fd="initialize",jD="setTimeoutOverride",VD="clearTimeoutOverride",U6="payloadPreprocessor",vA="overrideEndpointUrl",wA="avoidOptions",$6="disableEventTimings",YD="enableCompoundKey",yA="disableXhrSync",CA="disableFetchKeepAlive",M6="addNoResponse",EA="useSendBeacon",SA="fetchCredentials",xA="alwaysUseXhrOverride",qD="serializeOfflineEvt",GD="getOfflineRequestDetails",zD="createPayload",py="createOneDSPayload",_A="payloadBlob",ks="headers",bh="_thePayload",Xr="batches",zo="sendType",hy="canSendRequest",Th="sendQueuedRequests",gy="setUnloading",H6="isTenantKilled",KD="sendSynchronousBatch",JD="_transport",Rh="getWParam",DA="isBeacon",vy="timings",XD="isTeardown",ZD="_sendReason",QD="setKillSwitchTenants",eI="_backOffTransmission",wy="identifier",B6="ignoreMc1Ms0CookieProcessing",IA="autoFlushEventsLimit",W6="disableAutoBatchFlushLimit",j6="overrideInstrumentationKey",yy="sendAttempt",Iu="latency",Od="sync"});function Y6(t){var e=(t.ext||{}).intweb;return e&&gr(e[Ph])?e[Ph]:null}function V6(t){for(var e=null,n=0;e===null&&n<t[ze];n++)e=Y6(t[n]);return e}var Pu,tI=ne(()=>{Nd();fy();kh();Pu=function(){function t(e,n){var r=n?[][_a](n):[],o=this,i=V6(r);o[Ci]=function(){return e},o.Msfpc=function(){return i||Rs},o[pn]=function(){return r[ze]},o[Da]=function(){return r},o.addEvent=function(s){return s?(r[Xn](s),i||(i=Y6(s)),!0):!1},o[Ia]=function(s,a){var c;if(s<r[ze]){var l=r[ze]-s;ae(a)||(l=a<l?a:l),c=r.splice(s,l),i=V6(r)}return new t(e,c)}}return t.create=function(e,n){return new t(e,n)},t}()});var q6,G6=ne(()=>{pr();kh();q6=function(){function t(){var e=!0,n=!0,r=!0,o="use-collector-delta",i=!1;Je(t,this,function(s){s[dy]=function(){return e},s.firstRequestSent=function(){r&&(r=!1,i||(e=!1))},s[MD]=function(){return n},s[HD]=function(){return o},s[my]=function(a){i||(a?(o=a,n=!0,i=!0):n=!1,e=!0)}})}return t.__ieDyn=1,t}()});var Zde,z6,K6=ne(()=>{pr();Nd();kh();Zde=1e3,z6=function(){function t(){var e={};function n(r){var o=[];return r&&ee(r,function(i){o[Xn](tt(i))}),o}Je(t,this,function(r){r[QD]=function(o,i){if(o&&i)try{var s=n(o[Ia](","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*Zde,c=0;c<s[ze];++c)e[s[c]]=xn()+a}catch{return[]}return[]},r[H6]=function(o){var i=e,s=tt(o);return i[s]!==void 0&&i[s]>xn()?!0:(delete i[s],!1)}})}return t.__ieDyn=1,t}()});function X6(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function nI(t){var e=0,n=J6*Qde,r=J6*eme,o=ji(Math.random()*(r-n))+n;return e=Math.pow(2,t)*o,ru(e,tme)}var Qde,eme,J6,tme,PA=ne(()=>{Ne();Qde=.8,eme=1.2,J6=3e3,tme=6e5});function sme(t,e,n,r,o){if(o&&e){var i=t(o.value,o.kind,o.propertyType);if(i>-1){var s=e[Z6];s||(s=e[Z6]={f:{}});var a=s[rI];if(a||(a=s[rI]={}),n)for(var c=0;c<n.length;c++){var l=n[c];a[l]||(a[l]={f:{}});var u=a[l][rI];u||(u=a[l][rI]={}),a=u}a=a[r]={},we(o.value)?a.a={t:i}:a.t=i}}}var nme,rme,Q6,e4,ome,Z6,rI,ime,t4,n4=ne(()=>{pr();Nd();tI();fy();Ne();nme=20,rme=3984588,Q6=65e3,e4=2e6,ome=ru(e4,Q6),Z6="metadata",rI="f",ime=/\./,t4=function(){function t(e,n,r,o,i,s){var a="data",c="baseData",l="ext",u=!!o,f=!0,m=n,d={},p=!!s,h=i||Dh;Je(t,this,function(g){g.createPayload=function(w,y,S,I,x,A){return{apiKeys:[],payloadBlob:Rs,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:w,isTeardown:y,isSync:S,isBeacon:I,sendType:A,sendReason:x}},g.appendPayload=function(w,y,S){var I=w&&y&&!w.overflow;return I&&mn(e,function(){return"Serializer:appendPayload"},function(){for(var x=y.events(),A=w.payloadBlob,F=w.numEvents,k=!1,E=[],_=[],T=w.isBeacon,D=T?Q6:rme,b=T?ome:e4,R=0,L=0;R<x.length;){var N=x[R];if(N){if(F>=S){w.overflow=y.split(R);break}var B=g.getEventBlob(N);if(B&&B.length<=b){var W=B.length,z=A.length;if(z+W>D){w.overflow=y.split(R);break}A&&(A+=`
`),A+=B,L++,L>nme&&(aa(A,0,1),L=0),k=!0,F++}else B?E.push(N):_.push(N),x.splice(R,1),R--}R++}if(E.length>0&&w.sizeExceed.push(Pu.create(y.iKey(),E)),_.length>0&&w.failedEvts.push(Pu.create(y.iKey(),_)),k){w.batches.push(y),w.payloadBlob=A,w.numEvents=F;var V=y.iKey();wt(w.apiKeys,V)===-1&&w.apiKeys.push(V)}},function(){return{payload:w,theBatch:{iKey:y.iKey(),evts:y.events()},max:S}}),I},g.getEventBlob=function(w){try{return mn(e,function(){return"Serializer.getEventBlob"},function(){var y={};y.name=w.name,y.time=w.time,y.ver=w.ver,y.iKey="o:"+DD(w.iKey);var S={},I;p||(I=function(k,E,_){sme(h,S,k,E,_)});var x=w[l];x&&(y[l]=S,Ie(x,function(k,E){var _=S[k]={};C(E,_,"ext."+k,!0,null,null,!0)}));var A=y[a]={};A.baseType=w.baseType;var F=A[c]={};return C(w.baseData,F,c,!1,[c],I,f),C(w.data,A,a,!1,[],I,f),JSON.stringify(y)},function(){return{item:w}})}catch{return null}};function v(w,y){var S=d[w];return S===void 0&&(w.length>=7&&(S=Zp(w,"ext.metadata")||Zp(w,"ext.web")),d[w]=S),S}function C(w,y,S,I,x,A,F){Ie(w,function(k,E){var _=null;if(E||gr(E)){var T=S,D=k,b=x,R=y;if(u&&!I&&ime.test(k)){var L=k.split("."),N=L.length;if(N>1){b&&(b=b.slice());for(var B=0;B<N-1;B++){var W=L[B];R=R[W]=R[W]||{},T+="."+W,b&&b.push(W)}D=L[N-1]}}var z=I&&v(T,D);if(!z&&m&&m.handleField(T,D)?_=m.value(T,D,E,r):_=PD(D,E,r),_){var V=_.value;if(R[D]=V,A&&A(b,D,_),F&&typeof V=="object"&&!we(V)){var q=b;q&&(q=q.slice(),q.push(D)),C(E,V,T+"."+D,I,q,A,F)}}}})}})}return t.__ieDyn=1,t}()});function Nh(t,e){return{set:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return xG([t,e],n,r,o)}}}var bA=ne(()=>{Ne()});function $d(t,e,n){RA[t]=e,n!==!1&&(kA[e]=t)}function oI(t,e){var n=!1;if(t&&e){var r=br(t);if(r&&r[ze]>0)for(var o=e[BD](),i=0;i<r[ze];i++){var s=r[i];if(s&&mr(e,s)&&s[BD]()===o){n=!0;break}}}return n}function Lh(t,e,n,r){e&&n&&n[ze]>0&&(r&&RA[e]?(t[Ad][RA[e]]=n,t[WD]=!0):t.url+="&"+e+"="+n)}function ume(t,e,n){for(var r=0;r<t[ze];r++)if(t[r].name===e){t[r].value=n;return}t[Xn]({name:e,value:n})}function fme(t,e){for(var n=0;n<t[ze];n++)if(t[n].name===e){t.splice(n,1);return}}var Ud,TA,ame,cme,lme,RA,kA,r4,o4=ne(()=>{pr();Nd();Ne();G6();tI();fy();K6();PA();n4();bA();kh();TA="sendAttempt",ame="&"+O6+"=true",cme="?cors=true&"+Ih[BD]()+"="+LD,lme=(Ud={},Ud[1]=fA,Ud[100]=fA,Ud[200]="sent",Ud[8004]=ND,Ud[8003]=ND,Ud),RA={},kA={};$d(uy,uy,!1);$d(AD,AD);$d(mA,"Client-Id");$d(UD,UD);$d(FD,FD);$d(OD,OD);$d(hA,hA);r4=function(){function t(e,n,r,o){var i,s,a,c,l=!1,u,f,m,d,p,h,g,v,C,w,y,S,I,x,A,F,k,E,_,T,D,b,R,L,N,B,W,z;Je(t,this,function(V){Mt();var q=!0;V[Fd]=function(M,Q,ie){L||(p=Q,S=Q.getCookieMgr(),f=ie,m=f.diagLog(),xs(T,hr(M,function(ve){var be,qe=ve.cfg,ye=ve.cfg.extensionConfig[ie.identifier];N=Nh(ye[jD],ye[VD]),gr(qe.anonCookieName)?ume(g,"anoncknm",qe.anonCookieName):fme(g,"anoncknm"),D=ye[U6],b=ye.payloadListener;var P=ye.httpXHROverride,O=ye[vA]?ye[vA]:qe.endpointUrl;i=O+cme,x=Ve(ye[wA])?!0:!ye[wA],y=!ye[$6];var H=ye.valueSanitizer,G=ye.stringifyObjects,J=!!qe[YD];Ve(ye[YD])||(J=!!ye[YD]),A=ye.xhrTimeout,F=!!ye[yA],k=!!ye[CA],_=ye[M6]!==!1,B=!!ye.excludeCsMetaData,Q.getPlugin("LocalStorage")&&(k=!0),l=!mu(),w=new t4(p,H,G,J,Dh,B),ae(ye[EA])||(l=!!ye[EA]),ye[SA]&&(z=ye[SA]);var te=Be();W?W.SetConfig(te):(W=new Rd,W[Fd](te,m));var ue=P,Oe=ye[xA]?P:null,Xe=ye[xA]?P:null,Te=[3,2];if(!P){h=!1;var xo=[];mu()?(xo=[2,1],Te=[2,1,3]):xo=[1,2,3],xo=bc(xo,ye.transports),P=ce(xo,!1),P||ho(m,"No available transport to send events"),ue=ce(xo,!0)}Oe||(Te=bc(Te,ye.unloadTransports),Oe=ce(Te,!0)),E=!h&&(l&&Ji()||!k&&Rc(!0)),d=(be={},be[0]=P,be[1]=ue||ce([1,2,3],!0),be[2]=Oe||ue||ce([1],!0),be[3]=Xe||ce([2,3],!0)||ue||ce([1],!0),be)})),L=!0)},V.addResponseHandler=function(M){return R[Xn](M),{rm:function(){var Q=R.indexOf(M);Q>=0&&R.splice(Q,1)}}},V[qD]=function(M){try{if(w)return w.getEventBlob(M)}catch{}return Rs},V[GD]=function(){try{var M=w&&w[zD](0,!1,!1,!1,1,0);return le(M,x)}catch{}return null},V[py]=function(M,Q){try{var ie=[];ee(M,function(P){Q&&(P=qo(P));var O=Pu.create(P[Ci],[P]);ie[Xn](O)});for(var ve=null;ie[ze]>0&&w;){var be=ie.shift();be&&be[pn]()>0&&(ve=ve||w[zD](0,!1,!1,!1,1,0),w.appendPayload(ve,be,e))}var qe=le(ve,x),ye={data:ve[_A],urlString:qe.url,headers:qe[Ad],timeout:A,disableXhrSync:F,disableFetchKeepAlive:k};return x&&(oI(ye[ks],ly)||(ye[ks][ly]=dA),oI(ye[ks],Ih)||(ye[ks][Ih]=LD)),ye}catch{}return null};function ce(M,Q){try{return W&&W.getSenderInst(M,Q)}catch{}return null}V._getDbgPlgTargets=function(){return[d[0],s,w,d,Be(),i]};function Be(){try{var M={xdrOnComplete:mt,fetchOnComplete:So,xhrOnComplete:Pn,beaconOnRetry:Xt},Q={enableSendPromise:!1,isOneDs:!0,disableCredentials:!q,fetchCredentials:z,disableXhr:!1,disableBeacon:!l,disableBeaconSync:!l,disableFetchKeepAlive:k,timeWrapper:N,addNoResponse:_,senderOnCompleteCallBack:M};return Q}catch{}return null}function mt(M,Q,ie){var ve=bs(M);vn(Q,200,{},ve),_i(ve)}function Mt(){var M;i=null,s=new z6,a=!1,c=new q6,l=!1,u=0,f=null,m=null,d=null,p=null,h=!0,g=[],v={},C=[],w=null,y=!1,S=null,I=!1,x=!1,A=M,F=M,k=M,E=M,_=M,T=[],D=M,b=M,R=[],L=!1,N=Nh(),B=!1,W=null}function So(M,Q,ie,ve){var be=function(P,O,H){vn(Q,P,O,H),_i(H)},qe={},ye=M[ks];ye&&ye.forEach(function(P,O){qe[O]=P}),be(M.status,qe,ie||Rs)}function Pn(M,Q,ie){var ve=bs(M);vn(Q,M.status,Tc(M,!0),ve),_i(ve)}function vn(M,Q,ie,ve){try{M(Q,ie,ve)}catch(be){se(m,2,518,Ee(be))}}function Xt(M,Q,ie){var ve=M,be=200,qe=ve[bh],ye=M.urlString+(_?ame:Rs);try{var P=Kn();if(qe){var O=!!p.getPlugin("LocalStorage"),H=[],G=[];ee(qe[Xr],function(J){if(H&&J&&J[pn]()>0)for(var te=J[Da](),ue=0;ue<te[ze];ue++)if(P.sendBeacon(ye,w.getEventBlob(te[ue])))G[Xn](J[ue]);else{H[Xn](J[Ia](ue));break}else H[Xn](J[Ia](0))}),G[ze]>0&&(qe.sentEvts=G),O||tr(H,8003,qe[zo],!0)}else be=0}catch(J){ho(m,"Failed to send telemetry using sendBeacon API. Ex:"+Ee(J)),be=0}finally{vn(Q,be,{},Rs)}}function pt(M){return M===2||M===3}function nt(M){return I&&pt(M)&&(M=2),M}V.addHeader=function(M,Q){v[M]=Q},V.removeHeader=function(M){delete v[M]},V[hy]=function(){return Dt()&&c[dy]()},V[Th]=function(M,Q){Ve(M)&&(M=0),I&&(M=nt(M),Q=2),j(C,M,0)&&xe(yt(),0,!1,M,Q||0)},V.isCompletelyIdle=function(){return!a&&u===0&&C[ze]===0},V[gy]=function(M){I=M},V.addBatch=function(M){if(M&&M[pn]()>0){if(s.isTenantKilled(M[Ci]()))return!1;C[Xn](M)}return!0},V.teardown=function(){C[ze]>0&&xe(yt(),0,!0,2,2),ee(T,function(M){M&&M.rm&&M.rm()}),T=[]},V.pause=function(){a=!0},V.resume=function(){a=!1,V[Th](0,4)},V[KD]=function(M,Q,ie){M&&M[pn]()>0&&(ae(Q)&&(Q=1),I&&(Q=nt(Q),ie=2),xe([M],0,!1,Q,ie||0))};function Dt(){return!a&&u<n}function yt(){var M=C;return C=[],M}function j(M,Q,ie){var ve=!1;return M&&M[ze]>0&&!a&&d[Q]&&w&&(ve=Q!==0||Dt()&&(ie>0||c[dy]())),ve}function oe(M){var Q={};return M&&ee(M,function(ie,ve){Q[ve]={iKey:ie[Ci](),evts:ie[Da]()}}),Q}function xe(M,Q,ie,ve,be){if(!(!M||M[ze]===0)){if(a){tr(M,1,ve);return}ve=nt(ve);try{var qe=M,ye=ve!==0;mn(p,function(){return"HttpManager:_sendBatches"},function(P){P&&(M=M.slice(0));for(var O=[],H=null,G=Go(),J=d[ve]||(ye?d[1]:d[0]),te=J&&J[JD],ue=E&&(I||pt(ve)||te===3||J._isSync&&te===2);j(M,ve,Q);){var Oe=M.shift();Oe&&Oe[pn]()>0&&(s.isTenantKilled(Oe[Ci]())?O[Xn](Oe):(H=H||w[zD](Q,ie,ye,ue,be,ve),w.appendPayload(H,Oe,e)?H.overflow!==null&&(M=[H.overflow][_a](M),H.overflow=null,Qe(H,G,Go(),be),G=Go(),H=null):(Qe(H,G,Go(),be),G=Go(),M=[Oe][_a](M),H=null)))}H&&Qe(H,G,Go(),be),M[ze]>0&&(C=M[_a](C)),tr(O,8004,ve)},function(){return{batches:oe(qe),retryCount:Q,isTeardown:ie,isSynchronous:ye,sendReason:be,useSendBeacon:pt(ve),sendType:ve}},!ye)}catch(P){se(m,2,48,"Unexpected Exception sending batch: "+Ee(P))}}}function le(M,Q){var ie={url:i,hdrs:{},useHdrs:!1};Q?(ie[Ad]=kd(ie[Ad],v),ie.useHdrs=br(ie.hdrs)[ze]>0):Ie(v,function(P,O){kA[P]?Lh(ie,kA[P],O,!1):(ie[Ad][P]=O,ie[WD]=!0)}),Lh(ie,mA,"NO_AUTH",Q),Lh(ie,AD,_h,Q);var ve=Rs;ee(M.apiKeys,function(P){ve[ze]>0&&(ve+=","),ve+=P}),Lh(ie,UD,ve,Q),Lh(ie,OD,xn().toString(),Q);var be=Ur(M);if(gr(be)&&(ie.url+="&ext.intweb.msfpc="+be),c[MD]()&&Lh(ie,FD,c[HD](),Q),p[Rh]){var qe=p[Rh]();qe>=0&&(ie.url+="&w="+qe)}for(var ye=0;ye<g[ze];ye++)ie.url+="&"+g[ye].name+"="+g[ye].value;return ie}function De(M,Q,ie){M[Q]=M[Q]||{},M[Q][f.identifier]=ie}function Qe(M,Q,ie,ve){if(M&&M.payloadBlob&&M.payloadBlob[ze]>0){var be=!!D,qe=d[M.sendType];!pt(M[zo])&&M[DA]&&M.sendReason===2&&(qe=d[2]||d[3]||qe);var ye=x;(M.isBeacon||qe[JD]===3)&&(ye=!1);var P=le(M,ye);ye=ye||P[WD];var O=Go();mn(p,function(){return"HttpManager:_doPayloadSend"},function(){for(var H=0;H<M.batches[ze];H++)for(var G=M[Xr][H],J=G[Da](),te=0;te<J[ze];te++){var ue=J[te];if(y){var Oe=ue[vy]=ue[vy]||{};De(Oe,"sendEventStart",O),De(Oe,"serializationStart",Q),De(Oe,"serializationCompleted",ie)}ue[TA]>0?ue[TA]++:ue[TA]=1}tr(M[Xr],1e3+(ve||0),M[zo],!0);var Xe={data:M[_A],urlString:P.url,headers:P[Ad],_thePayload:M,_sendReason:ve,timeout:A,disableXhrSync:F,disableFetchKeepAlive:k};ye&&(oI(Xe[ks],ly)||(Xe[ks][ly]=dA),oI(Xe[ks],Ih)||(Xe[ks][Ih]=LD));var Te=null;qe&&(Te=function(xo){c.firstRequestSent();var ja=function($s,vC){ht($s,vC,M,ve)},_o=M[XD]||M.isSync;try{qe.sendPOST(xo,ja,_o),b&&b(Xe,xo,_o,M[DA])}catch($s){ho(m,"Unexpected exception sending payload. Ex:"+Ee($s)),vn(ja,0,{})}}),mn(p,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Te)if(M[zo]===0&&u++,be&&!M.isBeacon&&qe[JD]!==3){var xo={data:Xe.data,urlString:Xe.urlString,headers:kd({},Xe[ks]),timeout:Xe.timeout,disableXhrSync:Xe[yA],disableFetchKeepAlive:Xe[CA]},ja=!1;mn(p,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{D(xo,function(_o){ja=!0,!h&&!_o[bh]&&(_o[bh]=_o[bh]||Xe[bh],_o[ZD]=_o[ZD]||Xe[ZD]),Te(_o)},M.isSync||M[XD])}catch{ja||Te(Xe)}})}else Te(Xe)})},function(){return{thePayload:M,serializationStart:Q,serializationCompleted:ie,sendReason:ve}},M.isSync)}M.sizeExceed&&M.sizeExceed[ze]>0&&tr(M.sizeExceed,8003,M[zo]),M.failedEvts&&M.failedEvts[ze]>0&&tr(M.failedEvts,8002,M[zo])}function rt(M,Q){y&&ee(M,function(ie){var ve=ie[vy]=ie[vy]||{};De(ve,"sendEventCompleted",Q)})}function ht(M,Q,ie,ve){var be=9e3,qe=null,ye=!1,P=!1;try{var O=!0;if(typeof M!==ra){if(Q){c[my](Q[F6]);var H=Q[A6]||Q["kill-duration-seconds"];ee(s[QD](Q[L6],H),function(J){ee(ie[Xr],function(te){if(te[Ci]()===J){qe=qe||[];var ue=te[Ia](0);ie.numEvents-=ue[pn](),qe[Xn](ue)}})})}if(M==200||M==204){be=200;return}(!X6(M)||ie.numEvents<=0)&&(O=!1),be=9e3+M%1e3}if(O){be=100;var G=ie.retryCnt;ie[zo]===0&&(G<r?(ye=!0,Or(function(){ie[zo]===0&&u--,xe(ie[Xr],G+1,ie[XD],I?2:ie[zo],5)},I,nI(G))):(P=!0,I&&(be=8001)))}}finally{ye||(c[my](),wn(ie,be,ve,P)),tr(qe,8004,ie[zo])}}function wn(M,Q,ie,ve){try{ve&&f[eI]();var be=M[Xr];Q===200&&(be=M.sentEvts||M[Xr],!ve&&!M.isSync&&f._clearBackOff(),Wn(be)),tr(be,Q,M[zo],!0)}finally{M[zo]===0&&(u--,ie!==5&&V.sendQueuedRequests(M[zo],ie))}}function Wn(M){if(y){var Q=Go();ee(M,function(ie){ie&&ie[pn]()>0&&rt(ie[Da](),Q)})}}function Or(M,Q,ie){Q?M():N.set(M,ie)}function Ur(M){for(var Q=0;Q<M.batches[ze];Q++){var ie=M[Xr][Q].Msfpc();if(ie)return encodeURIComponent(ie)}return Rs}function _i(M){var Q=R;try{for(var ie=0;ie<Q[ze];ie++)try{Q[ie](M)}catch(be){se(m,1,519,"Response handler failed: "+be)}if(M){var ve=JSON.parse(M);gr(ve.webResult)&&gr(ve.webResult[Ph])&&S.set("MSFPC",ve.webResult[Ph],365*86400)}}catch{}}function tr(M,Q,ie,ve){if(M&&M[ze]>0&&o){var be=o[Wa(Q)];if(be){var qe=ie!==0;mn(p,function(){return"HttpManager:_sendBatchesNotification"},function(){Or(function(){try{be.call(o,M,Q,qe,ie)}catch(ye){se(m,1,74,"send request notification failed: "+ye)}},ve||qe,0)},function(){return{batches:oe(M),reason:Q,isSync:qe,sendSync:ve,sendType:ie}},!qe)}}}function Wa(M){var Q=lme[M];return gr(Q)||(Q=N6,M>=9e3&&M<=9999?Q=k6:M>=8e3&&M<=8999?Q=ND:M>=1e3&&M<=1999&&(Q=R6)),Q}})}return t.__ieDyn=1,t}()});function vme(t){return t&&t.sendPOST}var dme,i4,mme,c4,l4,pme,s4,hme,NA,Md,a4,$n,gme,u4,f4=ne(()=>{Bo();pr();Nd();hd();Ne();uA();tI();o4();fy();PA();bA();kh();dme=.25,i4=500,mme=20,c4=6,l4=2,pme=4,s4=2,hme=1,NA=1e4,Md="eventsDiscarded",a4="",$n=void 0,gme=Ss({eventsLimitInMem:{isVal:Du,v:NA},immediateEventLimit:{isVal:Du,v:500},autoFlushEventsLimit:{isVal:Du,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:vme,v:$n},overrideInstrumentationKey:$n,overrideEndpointUrl:$n,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:$n,clearTimeoutOverride:$n,payloadPreprocessor:$n,payloadListener:$n,disableEventTimings:$n,valueSanitizer:$n,stringifyObjects:$n,enableCompoundKey:$n,disableOptimizeObj:!1,fetchCredentials:$n,transports:$n,unloadTransports:$n,useSendBeacon:$n,disableFetchKeepAlive:$n,avoidOptions:!1,xhrTimeout:$n,disableXhrSync:$n,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:Ir,v:c4},maxUnloadEventRetryAttempts:{isVal:Ir,v:l4},addNoResponse:$n,excludeCsMetaData:$n});u4=function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.6";var r,o=!1,i=[],s,a=!1,c=0,l,u=0,f,m={},d=Ld,p,h,g,v,C,w,y,S,I,x,A,F,k,E,_,T,D,b,R,L,N,B;return Je(e,n,function(W,z){nt(),W._getDbgPlgTargets=function(){return[C,r]},W[Fd]=function(P,O,H){mn(O,function(){return"PostChannel:initialize"},function(){z[Fd](P,O,H),R=O.getNotifyMgr();try{_=yi(kr(W[wy]),O.evtNamespace&&O.evtNamespace()),W._addHook(hr(P,function(G){var J=G.cfg,te=go(null,J,O);r=te.getExtCfg(W[wy],gme),T=Nh(r[jD],r[VD]),A=!r.disableOptimizeObj&&bD(),D=r[B6],q(O),f=r.eventsLimitInMem,l=r.immediateEventLimit,y=r[IA],k=r.maxEventRetryAttempts,E=r.maxUnloadEventRetryAttempts,b=r[W6],uo(J.endpointUrl)?W.pause():a&&W.resume(),ye(),N=r[j6],B=!!r.disableTelemetry,L&&V();var ue=J.disablePageUnloadEvents||[];L=ny(mt,ue,_),L=Eh(mt,ue,_)||L,L=Sh(Mt,J.disablePageShowEvents,_)||L})),C[Fd](P,W.core,W)}catch(G){throw W.setInitialized(!1),G}},function(){return{theConfig:P,core:O,extensions:H}})},W.processTelemetry=function(P,O){cy(P,W[wy]),O=O||W._getTelCtx(O);var H=P;!B&&!o&&(N&&(H[Ci]=N),Pn(H,!0),F?j(2,2):pt()),W.processNext(H,O)},W.getOfflineSupport=function(){try{var P=C&&C[GD]();if(C)return{getUrl:function(){return P?P.url:null},serialize:Be,batch:ce,shouldProcess:function(O){return!B},createPayload:function(O){return null},createOneDSPayload:function(O){if(C[py])return C[py](O,A)}}}catch{}return null},W._doTeardown=function(P,O){j(2,2),o=!0,C.teardown(),V(),nt()};function V(){ry(null,_),oy(null,_),iy(null,_)}function q(P){var O=P[Rh];P[Rh]=function(){var H=0;return D&&(H=H|2),H|O.call(P)}}function ce(P){var O=a4;return P&&P[ze]&&ee(P,function(H){O&&(O+=`
`),O+=H}),O}function Be(P){var O=a4;try{So(P),O=C[qD](P)}catch{}return O}function mt(P){var O=P||On().event;O.type!=="beforeunload"&&(F=!0,C[gy](F)),j(2,2)}function Mt(P){F=!1,C[gy](F)}function So(P){P.ext&&P.ext[gA]&&delete P.ext[gA],P.ext&&P.ext[$D]&&P.ext[$D].id&&delete P.ext[$D].id,A&&(P.ext=qo(P.ext),P.baseData&&(P.baseData=qo(P.baseData)),P.data&&(P.data=qo(P.data)))}function Pn(P,O){if(P[yy]||(P[yy]=0),P[Iu]||(P[Iu]=1),So(P),P[Od]){if(g||a)P[Iu]=3,P[Od]=!1;else if(C){A&&(P=qo(P)),C[KD](Pu.create(P[Ci],[P]),P[Od]===!0?1:P[Od],3);return}}var H=P[Iu],G=u,J=f;H===4&&(G=c,J=l);var te=!1;if(G<J)te=!De(P,O);else{var ue=1,Oe=mme;H===4&&(ue=4,Oe=1),te=!0,Qe(P[Ci],P[Iu],ue,Oe)&&(te=!De(P,O))}te&&Wa(Md,[P],_s.QueueFull)}W.setEventQueueLimits=function(P,O){r.eventsLimitInMem=f=Du(P)?P:NA,r[IA]=y=Du(O)?O:0,ye();var H=u>P;if(!H&&S>0)for(var G=1;!H&&G<=3;G++){var J=w[G];J&&J[Xr]&&ee(J[Xr],function(te){te&&te[pn]()>=S&&(H=!0)})}le(!0,H)},W.pause=function(){yt(),a=!0,C&&C.pause()},W.resume=function(){a=!1,C&&C.resume(),pt()},W._loadTransmitProfiles=function(P){Or(),Ie(P,function(O,H){var G=H[ze];if(G>=2){var J=G>2?H[2]:0;if(H.splice(0,G-2),H[1]<0&&(H[0]=-1),H[1]>0&&H[0]>0){var te=H[0]/H[1];H[0]=yG(te)*H[1]}J>=0&&H[1]>=0&&J>H[1]&&(J=H[1]),H[Xn](J),m[O]=H}})},W.flush=function(P,O,H){P===void 0&&(P=!0);var G;if(!a)if(H=H||1,P)O||(G=zi(function(te){O=te})),s==null?(yt(),ht(1,0,H),s=Dt(function(){s=null,wn(O,H)},0)):i[Xn](O);else{var J=yt();vn(1,1,H),O&&O(),J&&pt()}return G},W.setMsaAuthTicket=function(P){C.addHeader(uy,P)},W.setAuthPluginHeader=function(P){C.addHeader(pA,P)},W.removeAuthPluginHeader=function(){C.removeHeader(pA)},W.hasEvents=Xt,W._setTransmitProfile=function(P){d!==P&&m[P]!==void 0&&(yt(),d=P,pt())},wi(W,function(){return C},["addResponseHandler"]);function vn(P,O,H){var G=ht(P,O,H);return C[Th](O,H),G}function Xt(){return u>0}function pt(){if(I>=0&&ht(I,0,x)&&C[Th](0,x),c>0&&!h&&!a){var P=m[d][2];P>=0&&(h=Dt(function(){h=null,vn(4,0,1),pt()},P))}var O=m[d][1];!p&&!s&&O>=0&&!a&&(Xt()?p=Dt(function(){p=null,vn(v===0?3:1,0,1),v++,v%=2,pt()},O):v=0)}W[eI]=function(){g<pme&&(g++,yt(),pt())},W._clearBackOff=function(){g&&(g=0,yt(),pt())};function nt(){r=null,o=!1,i=[],s=null,a=!1,c=0,l=500,u=0,f=NA,m={},d=Ld,p=null,h=null,g=0,v=0,w={},y=0,L=!1,S=0,I=-1,x=null,A=!0,F=!1,k=c4,E=l4,_=null,N=null,B=!1,T=Nh(),C=new r4(i4,s4,hme,{requeue:_i,send:Q,sent:ie,drop:ve,rspFail:be,oth:qe}),Ur(),oe(),ye()}function Dt(P,O){O===0&&g&&(O=1);var H=1e3;return g&&(H=nI(g-1)),T.set(P,O*H)}function yt(){return p!==null?(p.cancel(),p=null,v=0,!0):!1}function j(P,O){yt(),s&&(s.cancel(),s=null),a||vn(1,P,O)}function oe(){w[4]={batches:[],iKeyMap:{}},w[3]={batches:[],iKeyMap:{}},w[2]={batches:[],iKeyMap:{}},w[1]={batches:[],iKeyMap:{}}}function xe(P,O,H){var G=w[O];G||(O=1,G=w[O]);var J=G.iKeyMap[P];return!J&&H&&(J=Pu.create(P),G.batches[Xn](J),G.iKeyMap[P]=J),J}function le(P,O){C[hy]()&&!g&&(y>0&&u>y&&(O=!0),O&&s==null&&W.flush(P,function(){},20))}function De(P,O){A&&(P=qo(P));var H=P[Iu],G=xe(P[Ci],H,!0);return G.addEvent(P)?(H!==4?(u++,O&&P[yy]===0&&le(!P.sync,S>0&&G[pn]()>=S)):c++,!0):!1}function Qe(P,O,H,G){for(;H<=O;){var J=xe(P,O,!0);if(J&&J[pn]()>0){var te=J[Ia](0,G),ue=te[pn]();if(ue>0)return H===4?c-=ue:u-=ue,M(Md,[te],_s.QueueFull),!0}H++}return rt(),!1}function rt(){for(var P=0,O=0,H=function(J){var te=w[J];te&&te[Xr]&&ee(te[Xr],function(ue){J===4?P+=ue[pn]():O+=ue[pn]()})},G=1;G<=4;G++)H(G);u=O,c=P}function ht(P,O,H){var G=!1,J=O===0;return!J||C[hy]()?mn(W.core,function(){return"PostChannel._queueBatches"},function(){for(var te=[],ue=4;ue>=P;){var Oe=w[ue];Oe&&Oe.batches&&Oe.batches[ze]>0&&(ee(Oe[Xr],function(Xe){C.addBatch(Xe)?G=G||Xe&&Xe[pn]()>0:te=te[_a](Xe[Da]()),ue===4?c-=Xe[pn]():u-=Xe[pn]()}),Oe[Xr]=[],Oe.iKeyMap={}),ue--}te[ze]>0&&Wa(Md,te,_s.KillSwitch),G&&I>=P&&(I=-1,x=0)},function(){return{latency:P,sendType:O,sendReason:H}},!J):(I=I>=0?ru(I,P):P,x=sa(x,H)),G}function wn(P,O){vn(1,0,O),rt(),Wn(function(){P&&P(),i[ze]>0?s=Dt(function(){s=null,wn(i.shift(),O)},0):(s=null,pt())})}function Wn(P){C.isCompletelyIdle()?P():s=Dt(function(){s=null,Wn(P)},dme)}function Or(){yt(),Ur(),d=Ld,pt()}function Ur(){m={},m[Ld]=[2,1,0],m[RD]=[6,3,0],m[kD]=[18,9,0]}function _i(P,O){var H=[],G=k;F&&(G=E),ee(P,function(J){J&&J[pn]()>0&&ee(J[Da](),function(te){te&&(te[Od]&&(te[Iu]=4,te[Od]=!1),te[yy]<G?(cy(te,W[wy]),Pn(te,!1)):H[Xn](te))})}),H[ze]>0&&Wa(Md,H,_s.NonRetryableStatus),F&&j(2,2)}function tr(P,O){var H=R||{},G=H[P];if(G)try{G.apply(H,O)}catch(J){se(W.diagLog(),1,74,P+" notification failed: "+J)}}function Wa(P,O){for(var H=[],G=2;G<arguments.length;G++)H[G-2]=arguments[G];O&&O[ze]>0&&tr(P,[O][_a](H))}function M(P,O){for(var H=[],G=2;G<arguments.length;G++)H[G-2]=arguments[G];O&&O[ze]>0&&ee(O,function(J){J&&J[pn]()>0&&tr(P,[J.events()][_a](H))})}function Q(P,O,H){P&&P[ze]>0&&tr("eventsSendRequest",[O>=1e3&&O<=1999?O-1e3:0,H!==!0])}function ie(P,O){M("eventsSent",P,O),pt()}function ve(P,O){M(Md,P,O>=8e3&&O<=8999?O-8e3:_s.Unknown)}function be(P){M(Md,P,_s.NonRetryableStatus),pt()}function qe(P,O){M(Md,P,_s.Unknown),pt()}function ye(){b?S=0:S=sa(i4*(s4+1),f/6)}}),n}return e.__ieDyn=1,e}(Uc)});var d4={};EC(d4,{BE_PROFILE:()=>kD,NRT_PROFILE:()=>RD,PostChannel:()=>u4,RT_PROFILE:()=>Ld});var m4=ne(()=>{uA();f4()});var Cy,Ey,iI,Hd,Pa,Zr,Ns=ne(()=>{Cy="sampleRate",Ey="ProcessLegacy",iI="http.method",Hd="https://dc.services.visualstudio.com",Pa="/v2/track",Zr="not_specified"});var sI,h4=ne(()=>{Ot();sI=UN({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var Bd,Me,Wd,bu,Tu,LA,Ah,g4,Sy,xy,jd,Qr,Nr,eo,_y,Dy,Fh,Vd,aI,Yd,Iy,Py,ba,qd,Oh,Gd,vo=ne(()=>{Bd="split",Me="length",Wd="toLowerCase",bu="ingestionendpoint",Tu="toString",LA="removeItem",Ah="message",g4="count",Sy="stringify",xy="pathname",jd="match",Qr="name",Nr="properties",eo="measurements",_y="sizeInBytes",Dy="typeName",Fh="exceptions",Vd="severityLevel",aI="problemGroup",Yd="parsedStack",Iy="hasFullStack",Py="assembly",ba="fileName",qd="line",Oh="aiDataContract",Gd="duration"});function AA(t,e,n){var r=e[Me],o=v4(t,e);if(o[Me]!==r){for(var i=0,s=o;n[s]!==void 0;)i++,s=zn(o,0,147)+w4(i);o=s}return o}function v4(t,e){var n;return e&&(e=tt(Sn(e)),e[Me]>150&&(n=zn(e,0,150),se(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),n||e}function Nt(t,e,n){n===void 0&&(n=1024);var r;return e&&(n=n||1024,e=tt(Sn(e)),e[Me]>n&&(r=zn(e,0,n),se(t,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:e},!0))),r||e}function zd(t,e){return UA(t,e,2048,66)}function by(t,e){var n;return e&&e[Me]>32768&&(n=zn(e,0,32768),se(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),n||e}function FA(t,e){var n;if(e){var r=""+e;r[Me]>32768&&(n=zn(r,0,32768),se(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return n||e}function wo(t,e){if(e){var n={};Ie(e,function(r,o){if(tn(o)&&ga())try{o=Rr()[Sy](o)}catch(i){se(t,2,49,"custom property is not valid",{exception:i},!0)}o=Nt(t,o,8192),r=AA(t,r,n),n[r]=o}),e=n}return e}function yo(t,e){if(e){var n={};Ie(e,function(r,o){r=AA(t,r,n),n[r]=o}),e=n}return e}function OA(t,e){return e&&UA(t,e,128,69)[Tu]()}function UA(t,e,n,r){var o;return e&&(e=tt(Sn(e)),e[Me]>n&&(o=zn(e,0,n),se(t,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:e},!0))),o||e}function w4(t){var e="00"+t;return aa(e,e[Me]-3)}var Ls=ne(()=>{Ot();Ne();vo()});function E4(t){var e=C4,n=yme,r=n[e];return y4.createElement?n[e]||(r=n[e]=y4.createElement("a")):r={host:Cme(t,!0)},r.href=t,e++,e>=n[Me]&&(e=0),C4=e,r}function Cme(t,e){var n=S4(t,e)||"";if(n){var r=n[jd](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[Me]>3&&ke(r[2])&&r[2][Me]>0)return r[2]+(r[3]||"")}return n}function S4(t,e){var n=null;if(t){var r=t[jd](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[Me]>2&&ke(r[2])&&r[2][Me]>0&&(n=r[2]||"",e&&r[Me]>2)){var o=(r[1]||"")[Wd](),i=r[3]||"";(o==="http"&&i===":80"||o==="https"&&i===":443")&&(i=""),n+=i}}return n}var y4,C4,yme,x4=ne(()=>{Ot();vo();y4=Fn()||{},C4=0,yme=[null,null,null,null,null]});function cI(t){return wt(Eme,t[Wd]())!==-1}function _4(t,e,n,r){var o,i=r,s=r;if(e&&e[Me]>0){var a=E4(e);if(o=a.host,!i)if(a[xy]!=null){var c=a.pathname[Me]===0?"/":a[xy];c.charAt(0)!=="/"&&(c="/"+c),s=a[xy],i=Nt(t,n?n+" "+c:c)}else i=Nt(t,e)}else o=r,i=r;return{target:o,name:i,data:s}}var Eme,$A=ne(()=>{Ot();Ns();Ls();x4();vo();Eme=[Hd+Pa,"https://breeze.aimon.applicationinsights.io"+Pa,"https://dc-int.services.visualstudio.com"+Pa]});var lI,GAe,zAe,D4=ne(()=>{Ot();lI=fn({LocalStorage:0,SessionStorage:1}),GAe=fn({AI:0,AI_AND_W3C:1,W3C:2}),zAe=fn({Normal:1,Critical:2})});function P4(t){try{if(ae(mo()))return null;var e=new Date()[Tu](),n=vt(t===lI.LocalStorage?"localStorage":"sessionStorage"),r=I4+e;n.setItem(r,e);var o=n.getItem(r)!==e;if(n[LA](r),!o)return n}catch{}return null}function MA(){return uI()?P4(lI.SessionStorage):null}function HA(t){I4=t||""}function uI(t){return(t||Uh===void 0)&&(Uh=!!P4(lI.SessionStorage)),Uh}function BA(t,e){var n=MA();if(n!==null)try{return n.getItem(e)}catch(r){Uh=!1,se(t,2,2,"Browser failed read of session storage. "+nn(r),{exception:Ee(r)})}return null}function WA(t,e,n){var r=MA();if(r!==null)try{return r.setItem(e,n),!0}catch(o){Uh=!1,se(t,2,4,"Browser failed write to session storage. "+nn(o),{exception:Ee(o)})}return!1}function jA(t,e){var n=MA();if(n!==null)try{return n[LA](e),!0}catch(r){Uh=!1,se(t,2,6,"Browser failed removal of session storage item. "+nn(r),{exception:Ee(r)})}return!1}var Uh,I4,b4=ne(()=>{Ot();D4();vo();Uh=void 0,I4=""});function Ty(t){if(!t)return{};var e=t[Bd](Sme),n=vw(e,function(o,i){var s=i[Bd](xme);if(s[Me]===2){var a=s[0][Wd](),c=s[1];o[a]=c}return o},{});if(br(n)[Me]>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n[bu]=n[bu]||"https://"+r+"dc."+n.endpointsuffix}n[bu]=n[bu]||Hd,ad(n[bu],"/")&&(n[bu]=n[bu].slice(0,-1))}return n}var Sme,xme,T4=ne(()=>{Ot();Ns();vo();Sme=";",xme="="});var VA,R4=ne(()=>{Ot();Ns();vo();Ls();VA=function(){function t(e,n,r){var o=this,i=this;i.ver=1,i.sampleRate=100,i.tags={},i[Qr]=Nt(e,r)||Zr,i.data=n,i.time=Ps(new Date),i[Oh]={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1}}return t}()});var Wc,k4=ne(()=>{Ns();vo();Ls();Wc=function(){function t(e,n,r,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var i=this;i.ver=2,i[Qr]=Nt(e,n)||Zr,i[Nr]=wo(e,r),i[eo]=yo(e,o)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}()});function Nme(t){return t.replace(/(\(anonymous\))/,"<anonymous>")}function Lme(t){return Vi(t,"[native")<0}function zA(t,e){var n=t;return n&&!ke(n)&&(JSON&&JSON[Sy]?(n=JSON[Sy](t),e&&(!n||n==="{}")&&(Re(t[Tu])?n=t[Tu]():n=""+t)):n=""+t+" - (Missing JSON.stringify)"),n||""}function $4(t,e){var n=t;return t&&(n&&!ke(n)&&(n=t[GA]||t[U4]||n),n&&!ke(n)&&(n=zA(n,!0)),t.filename&&(n=n+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&Vi(n||"",e)===-1&&(n=e+": "+n),n||""}function Ame(t){try{if(tn(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function Fme(t){try{if(tn(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function F4(t){return t&&t.src&&ke(t.src)&&t.obj&&we(t.obj)}function Kd(t){var e=t||"";ke(e)||(ke(e[Zi])?e=e[Zi]:e=""+e);var n=e[Bd](`
`);return{src:e,obj:n}}function Ome(t){for(var e=[],n=t[Bd](`
`),r=0;r<n[Me];r++){var o=n[r];n[r+1]&&(o+="@"+n[r+1],r++),e.push(o)}return{src:t,obj:e}}function M4(t){var e=null;if(t)try{if(t[Zi])e=Kd(t[Zi]);else if(t[$h]&&t[$h][Zi])e=Kd(t[$h][Zi]);else if(t.exception&&t.exception[Zi])e=Kd(t.exception[Zi]);else if(F4(t))e=t;else if(F4(t[qA]))e=t[qA];else if(On()&&On().opera&&t[GA])e=Ome(t[Ah]);else if(t.reason&&t.reason[Zi])e=Kd(t.reason[Zi]);else if(ke(t))e=Kd(t);else{var n=t[GA]||t[U4]||"";ke(t[L4])&&(n&&(n+=`
`),n+=" from "+t[L4]),n&&(e=Kd(n))}}catch(r){e=Kd(r)}return e||{src:"",obj:null}}function Ume(t){var e="";return t&&(t.obj?e=t.obj.join(`
`):e=t.src||""),e}function $me(t){var e,n=t.obj;if(n&&n[Me]>0){e=[];var r=0,o=!1,i=0;ee(n,function(h){if(o||Wme(h)){var g=Sn(h);o=!0;var v=jme(g,r);v&&(i+=v[_y],e.push(v),r++)}});var s=32*1024;if(i>s)for(var a=0,c=e[Me]-1,l=0,u=a,f=c;a<c;){var m=e[a][_y],d=e[c][_y];if(l+=m+d,l>s){var p=f-u+1;e.splice(u,p);break}u=a,f=c,a++,c--}}return e}function fI(t){var e="";if(t&&(e=t.typeName||t[Qr]||"",!e))try{var n=/function (.{1,200})\(/,r=n.exec(t.constructor[Tu]());e=r&&r[Me]>1?r[1]:""}catch{}return e}function YA(t){if(t)try{if(!ke(t)){var e=fI(t),n=zA(t,!1);return(!n||n==="{}")&&(t[$h]&&(t=t[$h],e=fI(t)),n=zA(t,!0)),Vi(n,e)!==0&&e!=="String"?e+":"+n:n}}catch{}return""+(t||"")}function Hme(){var t=this,e=we(t[Yd])&&Cc(t[Yd],function(r){return Yme(r)}),n={id:t.id,outerId:t.outerId,typeName:t[Dy],message:t[Ah],hasFullStack:t[Iy],stack:t[Zi],parsedStack:e||void 0};return n}function H4(t,e,n){var r,o,i,s,a,c,l,u;if(Ame(e))s=e[Dy],a=e[Ah],l=e[Zi],u=e[Yd]||[],c=e[Iy];else{var f=e,m=f&&f.evt;rd(f)||(f=f[$h]||m||f),s=Nt(t,fI(f))||Zr,a=by(t,$4(e||f,s))||Zr;var d=e[qA]||M4(e);u=$me(d),we(u)&&Cc(u,function(p){p[Py]=Nt(t,p[Py]),p[ba]=Nt(t,p[ba])}),l=FA(t,Ume(d)),c=we(u)&&u[Me]>0,n&&(n[Dy]=n[Dy]||s)}return r={},r[Oh]=Mme,r.id=o,r.outerId=i,r.typeName=s,r.message=a,r[Iy]=c,r.stack=l,r.parsedStack=u,r.toInterface=Hme,r}function Bme(t,e){var n=we(e[Yd])&&Cc(e[Yd],function(o){return Vme(o)})||e[Yd],r=H4(t,Yi(Yi({},e),{parsedStack:n}));return r}function B4(t,e){var n=e[jd](Rme);if(n&&n[Me]>=4)t[ba]=n[1],t[qd]=parseInt(n[2]);else{var r=e[jd](kme);r&&r[Me]>=3?(t[ba]=r[1],t[qd]=parseInt(r[2])):t[ba]=e}}function O4(t,e,n){var r=t[ba];e.fn&&n&&n[Me]>e.fn&&(e.ln&&n[Me]>e.ln?(r=tt(n[e.fn]||""),t[qd]=parseInt(tt(n[e.ln]||""))||0):r=tt(n[e.fn]||"")),r&&B4(t,r)}function Wme(t){var e=!1;if(t&&ke(t)){var n=tt(t);n&&(e=Dme.test(n))}return e}function jme(t,e){var n,r;if(t&&ke(t)&&tt(t)){r=(n={},n[Oh]=W4,n.level=e,n.assembly=tt(t),n.method=N4,n.fileName="",n.line=0,n.sizeInBytes=0,n);for(var o=0;o<A4[Me];){var i=A4[o];if(i.chk&&!i.chk(t))break;i.pre&&(t=i.pre(t));var s=t[jd](i.re);if(s&&s[Me]>=i.len){i.m&&(r.method=tt(s[i.m]||N4)),i.hdl?i.hdl(r,i,s):i.fn&&(i.ln?(r[ba]=tt(s[i.fn]||""),r[qd]=parseInt(tt(s[i.ln]||""))||0):B4(r,s[i.fn]||""));break}o++}}return j4(r)}function Vme(t){var e,n=(e={},e[Oh]=W4,e.level=t.level,e.method=t.method,e.assembly=t[Py],e.fileName=t[ba],e.line=t[qd],e.sizeInBytes=0,e);return j4(n)}function j4(t){var e=_me;return t&&(e+=t.method[Me],e+=t.assembly[Me],e+=t.fileName[Me],e+=t.level.toString()[Me],e+=t.line.toString()[Me],t[_y]=e),t}function Yme(t){return{level:t.level,method:t.method,assembly:t[Py],fileName:t[ba],line:t[qd]}}var _me,Dme,Ime,Pme,bme,Tme,Rme,kme,N4,$h,Zi,qA,L4,GA,U4,A4,Jd,Mme,W4,V4=ne(()=>{Bo();Ot();Ne();Ns();vo();Ls();_me=58,Dme=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Ime=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Pme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,bme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Tme=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Rme=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,kme=/([^\(\s\n]+):([0-9]+)$/,N4="<no_method>",$h="error",Zi="stack",qA="stackDetails",L4="errorSrc",GA="message",U4="description",A4=[{re:Ime,len:5,m:1,fn:2,ln:3,col:4},{chk:Lme,pre:Nme,re:Pme,len:4,m:1,fn:2,ln:3},{re:bme,len:3,m:1,fn:2,hdl:O4},{re:Tme,len:2,fn:1,hdl:O4}];Jd=function(){function t(e,n,r,o,i,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,Fme(n)?(a[Fh]=n[Fh]||[],a[Nr]=n[Nr],a[eo]=n[eo],n[Vd]&&(a[Vd]=n[Vd]),n.id&&(a.id=n.id,n[Nr].id=n.id),n[aI]&&(a[aI]=n[aI]),ae(n.isManual)||(a.isManual=n.isManual)):(r||(r={}),s&&(r.id=s),a[Fh]=[H4(e,n,r)],a[Nr]=wo(e,r),a[eo]=yo(e,o),i&&(a[Vd]=i),s&&(a.id=s))}return t.CreateAutoException=function(e,n,r,o,i,s,a,c){var l=fI(i||s||e);return{message:$4(e,l),url:n,lineNumber:r,columnNumber:o,error:YA(i||s||e),evt:YA(s||e),typeName:l,stackDetails:M4(a||i||s),errorSrc:c}},t.CreateFromInterface=function(e,n,r,o){var i=n[Fh]&&Cc(n[Fh],function(a){return Bme(e,a)}),s=new t(e,Yi(Yi({},n),{exceptions:i}),r,o);return s},t.prototype.toInterface=function(){var e=this,n=e.exceptions,r=e.properties,o=e.measurements,i=e.severityLevel,s=e.problemGroup,a=e.id,c=e.isManual,l=n instanceof Array&&Cc(n,function(u){return u.toInterface()})||void 0;return{ver:"4.0",exceptions:l,severityLevel:i,properties:r,measurements:o,problemGroup:s,id:a,isManual:c}},t.CreateSimpleException=function(e,n,r,o,i,s){var a;return{exceptions:[(a={},a[Iy]=!0,a.message=e,a.stack=i,a.typeName=n,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=YA,t}(),Mme=fo({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});W4=fo({level:1,method:1,assembly:0,fileName:0,line:0})});var Y4,q4=ne(()=>{Y4=function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t}()});var jc,G4=ne(()=>{Ns();vo();q4();Ls();jc=function(){function t(e,n,r,o,i,s,a,c,l){this.aiDataContract={ver:1,metrics:1,properties:0};var u=this;u.ver=2;var f=new Y4;f[g4]=o>0?o:void 0,f.max=isNaN(s)||s===null?void 0:s,f.min=isNaN(i)||i===null?void 0:i,f[Qr]=Nt(e,n)||Zr,f.value=r,f.stdDev=isNaN(a)||a===null?void 0:a,u.metrics=[f],u[Nr]=wo(e,c),u[eo]=yo(e,l)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}()});function dI(t){(isNaN(t)||t<0)&&(t=0),t=SG(t);var e=Ry+t%1e3,n=Ry+ji(t/1e3)%60,r=Ry+ji(t/(1e3*60))%60,o=Ry+ji(t/(1e3*60*60))%24,i=ji(t/(1e3*60*60*24));return e=e[Me]===1?"00"+e:e[Me]===2?"0"+e:e,n=n[Me]<2?"0"+n:n,r=r[Me]<2?"0"+r:r,o=o[Me]<2?"0"+o:o,(i>0?i+".":Ry)+o+":"+r+":"+n+"."+e}var Ry,KA=ne(()=>{Ne();vo();Ry=""});var Xd,z4=ne(()=>{Ns();KA();vo();Ls();Xd=function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var c=this;c.ver=2,c.id=OA(e,a),c.url=zd(e,r),c[Qr]=Nt(e,n)||Zr,isNaN(o)||(c[Gd]=dI(o)),c[Nr]=wo(e,i),c[eo]=yo(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}()});var Zd,K4=ne(()=>{KA();$A();vo();Ls();Zd=function(){function t(e,n,r,o,i,s,a,c,l,u,f,m){l===void 0&&(l="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var d=this;d.ver=2,d.id=n,d[Gd]=dI(i),d.success=s,d.resultCode=a+"",d.type=Nt(e,l);var p=_4(e,r,c,o);d.data=zd(e,o)||p.data,d.target=Nt(e,p.target),u&&(d.target="".concat(d.target," | ").concat(u)),d[Qr]=Nt(e,p[Qr]),d[Nr]=wo(e,f),d[eo]=yo(e,m)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}()});var Qd,J4=ne(()=>{Ns();vo();Ls();Qd=function(){function t(e,n,r,o,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,n=n||Zr,s[Ah]=by(e,n),s[Nr]=wo(e,o),s[eo]=yo(e,i),r&&(s[Vd]=r)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}()});var em,X4=ne(()=>{Ns();vo();Ls();em=function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var c=this;c.ver=2,c.url=zd(e,r),c[Qr]=Nt(e,n)||Zr,c[Nr]=wo(e,i),c[eo]=yo(e,s),a&&(c.domProcessing=a.domProcessing,c[Gd]=a[Gd],c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c.receivedResponse=a.receivedResponse,c.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}()});var Vc,Z4=ne(()=>{Vc=function(){function t(e,n){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=n}return t}()});var JA,Q4=ne(()=>{Ot();JA=fn({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});function ku(t){var e="ai."+t+".";return function(n){return e+n}}var ky,Zn,mI,Mh,XA,Ru,tm,Ny,Ly,ZA=ne(()=>{Bo();Ot();ky=ku("application"),Zn=ku("device"),mI=ku("location"),Mh=ku("operation"),XA=ku("session"),Ru=ku("user"),tm=ku("cloud"),Ny=ku("internal"),Ly=function(t){Ho(e,t);function e(){return t.call(this)||this}return e}(ZN({applicationVersion:ky("ver"),applicationBuild:ky("build"),applicationTypeId:ky("typeId"),applicationId:ky("applicationId"),applicationLayer:ky("layer"),deviceId:Zn("id"),deviceIp:Zn("ip"),deviceLanguage:Zn("language"),deviceLocale:Zn("locale"),deviceModel:Zn("model"),deviceFriendlyName:Zn("friendlyName"),deviceNetwork:Zn("network"),deviceNetworkName:Zn("networkName"),deviceOEMName:Zn("oemName"),deviceOS:Zn("os"),deviceOSVersion:Zn("osVersion"),deviceRoleInstance:Zn("roleInstance"),deviceRoleName:Zn("roleName"),deviceScreenResolution:Zn("screenResolution"),deviceType:Zn("type"),deviceMachineName:Zn("machineName"),deviceVMName:Zn("vmName"),deviceBrowser:Zn("browser"),deviceBrowserVersion:Zn("browserVersion"),locationIp:mI("ip"),locationCountry:mI("country"),locationProvince:mI("province"),locationCity:mI("city"),operationId:Mh("id"),operationName:Mh("name"),operationParentId:Mh("parentId"),operationRootId:Mh("rootId"),operationSyntheticSource:Mh("syntheticSource"),operationCorrelationVector:Mh("correlationVector"),sessionId:XA("id"),sessionIsFirst:XA("isFirst"),sessionIsNew:XA("isNew"),userAccountAcquisitionDate:Ru("accountAcquisitionDate"),userAccountId:Ru("accountId"),userAgent:Ru("userAgent"),userId:Ru("id"),userStoreRegion:Ru("storeRegion"),userAuthUserId:Ru("authUserId"),userAnonymousUserAcquisitionDate:Ru("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Ru("authUserAcquisitionDate"),cloudName:tm("name"),cloudRole:tm("role"),cloudRoleVer:tm("roleVer"),cloudRoleInstance:tm("roleInstance"),cloudEnvironment:tm("environment"),cloudLocation:tm("location"),cloudDeploymentUnit:tm("deploymentUnit"),internalNodeName:Ny("nodeName"),internalSdkVersion:Ny("sdkVersion"),internalAgentVersion:Ny("agentVersion"),internalSnippet:Ny("snippet"),internalSdkSrc:Ny("sdkSrc")}))});var Mn,eK=ne(()=>{ZA();Mn=new Ly});function tK(t,e){Mc(t,null,null,e)}function QA(t){var e=Fn(),n=Kn(),r=!1,o=[],i=1;n&&!ae(n.onLine)&&!n.onLine&&(i=2);var s=0,a=m(),c=yi(kr("OfflineListener"),t);try{if(u(On())&&(r=!0),e){var l=e.body||e;l.ononline&&u(l)&&(r=!0)}}catch{r=!1}function u(w){var y=!1;return w&&(y=Ca(w,"online",h,c),y&&Ca(w,"offline",g,c)),y}function f(){return a}function m(){return!(s===2||i===2)}function d(){var w=m();a!==w&&(a=w,ee(o,function(y){var S={isOnline:a,rState:i,uState:s};try{y(S)}catch{}}))}function p(w){s=w,d()}function h(){i=1,d()}function g(){i=2,d()}function v(){var w=On();if(w&&r){if(tK(w,c),e){var y=e.body||e;Ve(y.ononline)||tK(y,c)}r=!1}}function C(w){return o.push(w),{rm:function(){var y=o.indexOf(w);if(y>-1)return o.splice(y,1)}}}return{isOnline:f,isListening:function(){return r},unload:v,addListener:C,setOnlineState:p}}var nK=ne(()=>{Ot()});var pI,Yc=ne(()=>{$A();T4();h4();Ns();R4();k4();V4();G4();z4();K4();J4();X4();Z4();Q4();ZA();Ls();eK();b4();nK();pI="AppInsightsChannelPlugin"});var Nu,rK=ne(()=>{Nu="duration"});var Hn,hI,Ko,Ta,rm,Ye,Lu,Au,Qi,Fu,qc,Gc,zc,es,Ay,Ou,Hh,om,Fy,Bh,Kc,Uu,Wh,jh,Lr,gI,Vh,Yh,qh,vI,eF,wI,yI,tF,nF,As,rF,oF,Oy,$u,CI,Uy,EI,SI,xI,Gh,oK,Mu=ne(()=>{Hn="tags",hI="deviceType",Ko="data",Ta="name",rm="traceID",Ye="length",Lu="stringify",Au="measurements",Qi="dataType",Fu="envelopeType",qc="toString",Gc="enqueue",zc="count",es="push",Ay="emitLineDelimitedJson",Ou="clear",Hh="markAsSent",om="clearSent",Fy="bufferOverride",Bh="BUFFER_KEY",Kc="SENT_BUFFER_KEY",Uu="concat",Wh="MAX_BUFFER_SIZE",jh="triggerSend",Lr="diagLog",gI="initialize",Vh="_sender",Yh="endpointUrl",qh="instrumentationKey",vI="customHeaders",eF="maxBatchSizeInBytes",wI="onunloadDisableBeacon",yI="isBeaconApiDisabled",tF="alwaysUseXhrOverride",nF="enableSessionStorageBuffer",As="_buffer",rF="onunloadDisableFetch",oF="disableSendBeaconSplit",Oy="getSenderInst",$u="_onError",CI="_onPartialSuccess",Uy="_onSuccess",EI="itemsReceived",SI="itemsAccepted",xI="baseType",Gh="sampleRate",oK="getHashCodeScore"});function Dn(t,e,n){return Ki(t,e,n,Cs)}function qme(t,e,n){var r=n[Hn]=n[Hn]||{},o=e.ext=e.ext||{},i=e[Hn]=e[Hn]||[],s=o.user;s&&(Dn(r,Mn.userAuthUserId,s.authId),Dn(r,Mn.userId,s.id||s.localId));var a=o.app;a&&Dn(r,Mn.sessionId,a.sesId);var c=o.device;c&&(Dn(r,Mn.deviceId,c.id||c.localId),Dn(r,Mn[hI],c.deviceClass),Dn(r,Mn.deviceIp,c.ip),Dn(r,Mn.deviceModel,c.model),Dn(r,Mn[hI],c[hI]));var l=e.ext.web;if(l){Dn(r,Mn.deviceLanguage,l.browserLang),Dn(r,Mn.deviceBrowserVersion,l.browserVer),Dn(r,Mn.deviceBrowser,l.browser);var u=n[Ko]=n[Ko]||{},f=u[Yt]=u[Yt]||{},m=f[vr]=f[vr]||{};Dn(m,"domain",l.domain),Dn(m,"isManual",l.isManual?iK:null),Dn(m,"screenRes",l.screenRes),Dn(m,"userConsent",l.userConsent?iK:null)}var d=o.os;d&&(Dn(r,Mn.deviceOS,d[Ta]),Dn(r,Mn.deviceOSVersion,d.osVer));var p=o.trace;p&&(Dn(r,Mn.operationParentId,p.parentID),Dn(r,Mn.operationName,Nt(t,p[Ta])),Dn(r,Mn.operationId,p[rm]));for(var h={},g=i[Ye]-1;g>=0;g--){var v=i[g];Ie(v,function(w,y){h[w]=y}),i.splice(g,1)}Ie(i,function(w,y){h[w]=y});var C=Yi(Yi({},r),h);C[Mn.internalSdkVersion]||(C[Mn.internalSdkVersion]=Nt(t,"javascript:".concat(Gme.Version),64)),n[Hn]=qo(C)}function Hu(t,e,n){ae(t)||Ie(t,function(r,o){Ir(o)?n[r]=o:ke(o)?e[r]=o:ga()&&(e[r]=Rr()[Lu](o))})}function im(t,e){ae(t)||Ie(t,function(n,r){t[n]=r||e})}function sm(t,e,n,r){var o=new VA(t,r,e);Dn(o,"sampleRate",n[Cy]),(n[Yt]||{}).startTime&&(o.time=Ps(n[Yt].startTime)),o.iKey=n.iKey;var i=n.iKey.replace(/-/g,"");return o[Ta]=o[Ta].replace("{0}",i),qme(t,n,o),n[Hn]=n[Hn]||[],qo(o)}function am(t,e){ae(e[Yt])&&se(t,1,46,"telemetryItem.baseData cannot be null.")}function sK(t,e,n){am(t,e);var r=e[Yt][Au]||{},o=e[Yt][vr]||{};Hu(e[Ko],o,r),ae(n)||im(o,n);var i=e[Yt];if(ae(i))return ho(t,"Invalid input for dependency data"),null;var s=i[vr]&&i[vr][iI]?i[vr][iI]:"GET",a=new Zd(t,i.id,i.target,i[Ta],i[Nu],i.success,i.responseCode,s,i.type,i.correlationContext,o,r),c=new Vc(Zd[Qi],a);return sm(t,Zd[Fu],e,c)}function sF(t,e,n){am(t,e);var r={},o={};e[iF]!==Wc[Qi]&&(r.baseTypeSource=e[iF]),e[iF]===Wc[Qi]?(r=e[Yt][vr]||{},o=e[Yt][Au]||{}):e[Yt]&&Hu(e[Yt],r,o),Hu(e[Ko],r,o),ae(n)||im(r,n);var i=e[Yt][Ta],s=new Wc(t,i,r,o),a=new Vc(Wc[Qi],s);return sm(t,Wc[Fu],e,a)}function aK(t,e,n){am(t,e);var r=e[Yt][Au]||{},o=e[Yt][vr]||{};Hu(e[Ko],o,r),ae(n)||im(o,n);var i=e[Yt],s=Jd.CreateFromInterface(t,i,o,r),a=new Vc(Jd[Qi],s);return sm(t,Jd[Fu],e,a)}function cK(t,e,n){am(t,e);var r=e[Yt],o=r[vr]||{},i=r[Au]||{};Hu(e[Ko],o,i),ae(n)||im(o,n);var s=new jc(t,r[Ta],r.average,r.sampleCount,r.min,r.max,r.stdDev,o,i),a=new Vc(jc[Qi],s);return sm(t,jc[Fu],e,a)}function lK(t,e,n){am(t,e);var r,o=e[Yt];!ae(o)&&!ae(o[vr])&&!ae(o[vr][Nu])?(r=o[vr][Nu],delete o[vr][Nu]):!ae(e[Ko])&&!ae(e[Ko][Nu])&&(r=e[Ko][Nu],delete e[Ko][Nu]);var i=e[Yt],s;((e.ext||{}).trace||{})[rm]&&(s=e.ext.trace[rm]);var a=i.id||s,c=i[Ta],l=i.uri,u=i[vr]||{},f=i[Au]||{};if(ae(i.refUri)||(u.refUri=i.refUri),ae(i.pageType)||(u.pageType=i.pageType),ae(i.isLoggedIn)||(u.isLoggedIn=i.isLoggedIn[qc]()),!ae(i[vr])){var m=i[vr];Ie(m,function(h,g){u[h]=g})}Hu(e[Ko],u,f),ae(n)||im(u,n);var d=new Xd(t,c,l,r,u,f,a),p=new Vc(Xd[Qi],d);return sm(t,Xd[Fu],e,p)}function uK(t,e,n){am(t,e);var r=e[Yt],o=r[Ta],i=r.uri||r.url,s=r[vr]||{},a=r[Au]||{};Hu(e[Ko],s,a),ae(n)||im(s,n);var c=new em(t,o,i,void 0,s,a,r),l=new Vc(em[Qi],c);return sm(t,em[Fu],e,l)}function fK(t,e,n){am(t,e);var r=e[Yt].message,o=e[Yt].severityLevel,i=e[Yt][vr]||{},s=e[Yt][Au]||{};Hu(e[Ko],i,s),ae(n)||im(i,n);var a=new Qd(t,r,o,i,s),c=new Vc(Qd[Qi],a);return sm(t,Qd[Fu],e,c)}var iF,Yt,vr,iK,Gme,dK=ne(()=>{Bo();Yc();Ot();rK();Mu();iF="baseType",Yt="baseData",vr="properties",iK="true";Gme={Version:"3.3.6"}});var mK,_I,zme,aF,pK=ne(()=>{Bo();pr();Yc();Ot();Mu();mK=function(){function t(e,n){var r=[],o=!1,i=n.maxRetryCnt;this._get=function(){return r},this._set=function(s){return r=s,r},Je(t,this,function(s){s[Gc]=function(a){if(s[zc]()>=n.eventsLimitInMem){o||(se(e,2,105,"Maximum in-memory buffer size reached: "+s[zc](),!0),o=!0);return}a.cnt=a.cnt||0,!(!ae(i)&&a.cnt>i)&&r[es](a)},s[zc]=function(){return r[Ye]},s.size=function(){for(var a=r[Ye],c=0;c<r[Ye];c++)a+=r[c].item[Ye];return n[Ay]||(a+=2),a},s[Ou]=function(){r=[],o=!1},s.getItems=function(){return r.slice(0)},s.batchPayloads=function(a){if(a&&a[Ye]>0){var c=[];ee(a,function(u){c[es](u.item)});var l=n[Ay]?c.join(`
`):"["+c.join(",")+"]";return l}return null},s.createNew=function(a,c,l){var u=r.slice(0);a=a||e,c=c||{};var f=l?new aF(a,c):new _I(a,c);return ee(u,function(m){f[Gc](m)}),f}})}return t.__ieDyn=1,t}(),_I=function(t){Ho(e,t);function e(n,r){var o=t.call(this,n,r)||this;return Je(e,o,function(i,s){i[Hh]=function(a){s[Ou]()},i[om]=function(a){}}),o}return e.__ieDyn=1,e}(mK),zme=["AI_buffer","AI_sentBuffer"],aF=function(t){Ho(e,t);function e(r,o){var i=t.call(this,r,o)||this,s=!1,a=o==null?void 0:o.namePrefix,c=o[Fy]||{getItem:BA,setItem:WA},l=c.getItem,u=c.setItem,f=o.maxRetryCnt;return Je(e,i,function(m,d){var p=y(e[Bh]),h=y(e[Kc]),g=x(),v=h[Uu](g),C=m._set(p[Uu](v));C[Ye]>e[Wh]&&(C[Ye]=e[Wh]),I(e[Kc],[]),I(e[Bh],C),m[Gc]=function(F){if(m[zc]()>=e[Wh]){s||(se(r,2,67,"Maximum buffer size reached: "+m[zc](),!0),s=!0);return}F.cnt=F.cnt||0,!(!ae(f)&&F.cnt>f)&&(d[Gc](F),I(e[Bh],m._get()))},m[Ou]=function(){d[Ou](),I(e[Bh],m._get()),I(e[Kc],[]),s=!1},m[Hh]=function(F){I(e[Bh],m._set(w(F,m._get())));var k=y(e[Kc]);k instanceof Array&&F instanceof Array&&(k=k[Uu](F),k[Ye]>e[Wh]&&(se(r,1,67,"Sent buffer reached its maximum size: "+k[Ye],!0),k[Ye]=e[Wh]),I(e[Kc],k))},m[om]=function(F){var k=y(e[Kc]);k=w(F,k),I(e[Kc],k)},m.createNew=function(F,k,E){E=!!E;var _=m._get().slice(0),T=y(e[Kc]).slice(0);F=F||r,k=k||{},m[Ou]();var D=E?new e(F,k):new _I(F,k);return ee(_,function(b){D[Gc](b)}),E&&D[Hh](T),D};function w(F,k){var E=[],_=[];return ee(F,function(T){_[es](T.item)}),ee(k,function(T){!Re(T)&&wt(_,T.item)===-1&&E[es](T)}),E}function y(F){var k=F;return k=a?a+"_"+k:k,S(k)}function S(F){try{var k=l(r,F);if(k){var E=Rr().parse(k);if(ke(E)&&(E=Rr().parse(E)),E&&we(E))return E}}catch(_){se(r,1,42," storage key: "+F+", "+nn(_),{exception:Ee(_)})}return[]}function I(F,k){var E=F;try{E=a?a+"_"+E:E;var _=JSON[Lu](k);u(r,E,_)}catch(T){u(r,E,JSON[Lu]([])),se(r,2,41," storage key: "+E+", "+nn(T)+". Buffer cleared",{exception:Ee(T)})}}function x(){var F=[];try{return ee(zme,function(k){var E=A(k);if(F=F[Uu](E),a){var _=a+"_"+k,T=A(_);F=F[Uu](T)}}),F}catch(k){se(r,2,41,"Transfer events from previous buffers: "+nn(k)+". previous Buffer items can not be removed",{exception:Ee(k)})}return[]}function A(F){try{var k=S(F),E=[];return ee(k,function(_){var T={item:_,cnt:0};E[es](T)}),jA(r,F),E}catch{}return[]}}),i}var n;return n=e,e.VERSION="_1",e.BUFFER_KEY="AI_buffer"+n.VERSION,e.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,e.MAX_BUFFER_SIZE=2e3,e}(mK)});var hK,gK=ne(()=>{pr();Ot();Mu();hK=function(){function t(e){Je(t,this,function(n){n.serialize=function(s){var a=r(s,"root");try{return Rr()[Lu](a)}catch(c){se(e,1,48,c&&Re(c[qc])?c[qc]():"Error serializing object",null,!0)}};function r(s,a){var c="__aiCircularRefCheck",l={};if(!s)return se(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),l;if(s[c])return se(e,2,50,"Circular reference detected while serializing object",{name:a},!0),l;if(!s.aiDataContract){if(a==="measurements")l=i(s,"number",a);else if(a==="properties")l=i(s,"string",a);else if(a==="tags")l=i(s,"string",a);else if(we(s))l=o(s,a);else{se(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{Rr()[Lu](s),l=s}catch(u){se(e,1,48,u&&Re(u[qc])?u[qc]():"Error serializing object",null,!0)}}return l}return s[c]=!0,Ie(s.aiDataContract,function(u,f){var m=Re(f)?f()&1:f&1,d=Re(f)?f()&4:f&4,p=f&2,h=s[u]!==void 0,g=tn(s[u])&&s[u]!==null;if(m&&!h&&!p)se(e,1,24,"Missing required field specification. The field is required but not present on source",{field:u,name:a});else if(!d){var v=void 0;g?p?v=o(s[u],u):v=r(s[u],u):v=s[u],v!==void 0&&(l[u]=v)}}),delete s[c],l}function o(s,a){var c;if(s)if(!we(s))se(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{c=[];for(var l=0;l<s[Ye];l++){var u=s[l],f=r(u,a+"["+l+"]");c[es](f)}}return c}function i(s,a,c){var l;return s&&(l={},Ie(s,function(u,f){if(a==="string")f===void 0?l[u]="undefined":f===null?l[u]="null":f[qc]?l[u]=f[qc]():l[u]="invalid field: toString() is not defined.";else if(a==="number")if(f===void 0)l[u]="undefined";else if(f===null)l[u]="null";else{var m=parseFloat(f);l[u]=m}else l[u]="invalid field: "+c+" is of unknown type.",se(e,1,l[u],null,!0)})),l}})}return t.__ieDyn=1,t}()});var Kme,vK,wK=ne(()=>{Mu();Kme=8,vK=function(){function t(){}return t.prototype.getHashCodeScore=function(e){var n=this.getHashCode(e)/t.INT_MAX_VALUE;return n*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[Ye]<Kme;)e=e[Uu](e);for(var n=5381,r=0;r<e[Ye];++r)n=(n<<5)+n+e.charCodeAt(r),n=n&n;return Math.abs(n)},t.INT_MAX_VALUE=2147483647,t}()});var yK,CK=ne(()=>{Yc();Mu();wK();yK=function(){function t(){var e=this,n=new vK,r=new Ly;e.getSamplingScore=function(o){var i=0;return o[Hn]&&o[Hn][r.userId]?i=n.getHashCodeScore(o[Hn][r.userId]):o.ext&&o.ext.user&&o.ext.user.id?i=n[oK](o.ext.user.id):o[Hn]&&o[Hn][r.operationId]?i=n.getHashCodeScore(o[Hn][r.operationId]):o.ext&&o.ext.telemetryTrace&&o.ext.telemetryTrace[rm]?i=n.getHashCodeScore(o.ext.telemetryTrace[rm]):i=Math.random()*100,i}}return t}()});var EK,SK=ne(()=>{Yc();Ot();Mu();CK();EK=function(){function t(e,n){this.INT_MAX_VALUE=2147483647;var r=n||Lc(null);(e>100||e<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Gh]=e,this.samplingScoreGenerator=new yK}return t.prototype.isSampledIn=function(e){var n=this[Gh],r=!1;return n==null||n>=100||e.baseType===jc[Qi]?!0:(r=this.samplingScoreGenerator.getSamplingScore(e)<n,r)},t}()});function _K(t){try{return t.responseText}catch{}return null}function Xme(t){return t&&t.sendPOST}function Zme(t){return!isNaN(t)&&t>0&&t<=100}var Ut,Jc,Ra,xK,Jme,DK,Qme,$y,IK=ne(()=>{Bo();pr();Yc();Ot();Ne();dK();pK();gK();SK();Mu();Ra=void 0,xK="",Jme=65e3;DK=Ss((Ut={endpointUrl:hh(Cs,Hd+Pa)},Ut[Ay]=Xi(),Ut.maxBatchInterval=15e3,Ut[eF]=102400,Ut.disableTelemetry=Xi(),Ut[nF]=Xi(!0),Ut.isRetryDisabled=Xi(),Ut[yI]=Xi(!0),Ut[oF]=Xi(!0),Ut.disableXhr=Xi(),Ut[rF]=Xi(),Ut[wI]=Xi(),Ut[qh]=Ra,Ut.namePrefix=Ra,Ut.samplingPercentage=hh(Zme,100),Ut[vI]=Ra,Ut.convertUndefined=Ra,Ut.eventsLimitInMem=1e4,Ut[Fy]=!1,Ut.httpXHROverride={isVal:Xme,v:Ra},Ut[tF]=Xi(),Ut.transports=Ra,Ut.retryCodes=Ra,Ut.maxRetryCnt={isVal:Ir,v:10},Ut));Qme=(Jc={},Jc[Wc.dataType]=sF,Jc[Qd.dataType]=fK,Jc[Xd.dataType]=lK,Jc[em.dataType]=uK,Jc[Jd.dataType]=aK,Jc[jc.dataType]=cK,Jc[Zd.dataType]=sK,Jc),$y=function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.priority=1001,n.identifier=pI;var r,o,i,s,a,c,l,u,f=0,m,d,p,h,g,v,C,w,y,S,I,x,A,F,k,E,_,T,D,b,R,L,N,B,W,z,V;return Je(e,n,function(q,ce){ye(),q.pause=function(){Q(),s=!0},q.resume=function(){s&&(s=!1,o=null,rt(),M())},q.flush=function(P,O,H){if(P===void 0&&(P=!0),!s){Q();try{return q[jh](P,null,H||1)}catch(G){se(q[Lr](),1,22,"flush failed, telemetry will not be collected: "+nn(G),{exception:Ee(G)})}}},q.onunloadFlush=function(){if(!s)if(C||b)try{return q[jh](!0,Wn,2)}catch(P){se(q[Lr](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+nn(P),{exception:Ee(P)})}else q.flush(!1)},q.addHeader=function(P,O){u[P]=O},q[gI]=function(P,O,H,G){q.isInitialized()&&se(q[Lr](),1,28,"Sender is already initialized"),ce[gI](P,O,H,G);var J=q.identifier;c=new hK(O.logger),r=0,o=null,i=0,q[Vh]=null,l=0;var te=q[Lr]();p=yi(kr("Sender"),O.evtNamespace&&O.evtNamespace()),d=QA(p),q._addHook(hr(P,function(ue){var Oe=ue.cfg;Oe.storagePrefix&&HA(Oe.storagePrefix);var Xe=go(null,Oe,O),Te=Xe.getExtCfg(J,DK),xo=Te[Yh];if(h&&xo===h){var ja=Oe[Yh];ja&&ja!==xo&&(Te[Yh]=ja)}uo(Te[qh])&&(Te[qh]=Oe[qh]),gt(q,"_senderConfig",{g:function(){return Te}}),g!==Te[Yh]&&(h=g=Te[Yh]),O.activeStatus()===di.PENDING?q.pause():O.activeStatus()===di.ACTIVE&&q.resume(),S&&S!==Te[vI]&&ee(S,function(yr){delete u[yr.header]}),v=Te[eF],C=(Te[wI]===!1||Te[yI]===!1)&&Ji(),w=Te[wI]===!1&&Ji(),y=Te[yI]===!1&&Ji(),b=Te[tF],R=!!Te.disableXhr,V=Te.retryCodes;var _o=Te[Fy],$s=!!Te[nF]&&(!!_o||uI()),vC=Te.namePrefix,k9=$s!==E||$s&&T!==vC||$s&&_!==_o;if(q[As]){if(k9)try{q[As]=q[As].createNew(te,Te,$s)}catch(yr){se(q[Lr](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+nn(yr),{exception:Ee(yr)})}rt()}else q[As]=$s?new aF(te,Te):new _I(te,Te);T=vC,E=$s,_=_o,L=!Te[rF]&&Rc(!0),W=!!Te[oF],q._sample=new EK(Te.samplingPercentage,te),x=Te[qh],!uo(x)&&!qe(x,Oe)&&se(te,1,100,"Invalid Instrumentation key "+x),S=Te[vI],ke(h)&&!cI(h)&&S&&S[Ye]>0?ee(S,function(yr){n.addHeader(yr.header,yr.value)}):S=null,D=Te.enableSendPromise;var FO=mt();z?z.SetConfig(FO):(z=new Rd,z[gI](FO,te));var wC=Te.httpXHROverride,yC=null,Sg=null,N9=bc([3,1,2],Te.transports);yC=z&&z[Oy](N9,!1);var N0=z&&z.getFallbackInst();N=function(yr,tf){return le(N0,yr,tf)},B=function(yr,tf){return le(N0,yr,tf,!1)},yC=b?wC:yC||wC||N0,q[Vh]=function(yr,tf){return le(yC,yr,tf)},L&&(m=_i);var L0=bc([3,1],Te.unloadTransports);L||(L0=L0.filter(function(yr){return yr!==2})),Sg=z&&z[Oy](L0,!0),Sg=b?wC:Sg||wC,(b||Te.unloadTransports||!m)&&Sg&&(m=function(yr,tf){return le(Sg,yr,tf)}),m||(m=N),I=Te.disableTelemetry,A=Te.convertUndefined||Ra,F=Te.isRetryDisabled,k=Te.maxBatchInterval}))},q.processTelemetry=function(P,O){O=q._getTelCtx(O);var H=O[Lr]();try{var G=pt(P,H);if(!G)return;var J=nt(P,H);if(!J)return;var te=c.serialize(J),ue=q[As];rt(te);var Oe={item:te,cnt:0};ue[Gc](Oe),M()}catch(Xe){se(H,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+nn(Xe),{exception:Ee(Xe)})}q.processNext(P,O)},q.isCompletelyIdle=function(){return!s&&f===0&&q._buffer[zc]()===0},q.getOfflineListener=function(){return d},q._xhrReadyStateChange=function(P,O,H){if(!Ur(O))return Mt(P,O,H)},q[jh]=function(P,O,H){P===void 0&&(P=!0);var G;if(!s)try{var J=q[As];if(I)J[Ou]();else{if(J[zc]()>0){var te=J.getItems();be(H||0,P),O?G=O.call(q,te,P):G=q[Vh](te,P)}i=+new Date}Q()}catch(Oe){var ue=Lw();(!ue||ue>9)&&se(q[Lr](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+nn(Oe),{exception:Ee(Oe)})}return G},q.getOfflineSupport=function(){return{getUrl:function(){return h},createPayload:j,serialize:Dt,batch:yt,shouldProcess:function(P){return!!pt(P)}}},q._doTeardown=function(P,O){q.onunloadFlush(),Nc(d,!1),ye()},q[$u]=function(P,O,H){if(!Ur(P))return So(P,O,H)},q[CI]=function(P,O){if(!Ur(P))return Pn(P,O)},q[Uy]=function(P,O){if(!Ur(P))return vn(P,O)},q._xdrOnLoad=function(P,O){if(!Ur(O))return Be(P,O)};function Be(P,O){var H=_K(P);if(P&&(H+""=="200"||H===""))r=0,q[Uy](O,0);else{var G=Td(H);G&&G[EI]&&G[EI]>G[SI]&&!F?q[CI](O,G):q[$u](O,Cd(P))}}function mt(){try{var P={xdrOnComplete:function(H,G,J){var te=Xt(J);if(te)return Be(H,te)},fetchOnComplete:function(H,G,J,te){var ue=Xt(te);if(ue)return ht(H.status,ue,H.url,ue[Ye],H.statusText,J||"")},xhrOnComplete:function(H,G,J){var te=Xt(J);if(te)return Mt(H,te,te[Ye])},beaconOnRetry:function(H,G,J){return Or(H,G,J)}},O={enableSendPromise:D,isOneDs:!1,disableCredentials:!1,disableXhr:R,disableBeacon:!y,disableBeaconSync:!w,senderOnCompleteCallBack:P};return O}catch{}return null}function Mt(P,O,H){P.readyState===4&&ht(P.status,O,P.responseURL,H,Pc(P),_K(P)||P.response)}function So(P,O,H){se(q[Lr](),2,26,"Failed to send telemetry.",{message:O}),q._buffer&&q._buffer[om](P)}function Pn(P,O){for(var H=[],G=[],J=O.errors.reverse(),te=0,ue=J;te<ue.length;te++){var Oe=ue[te],Xe=P.splice(Oe.index,1)[0];ie(Oe.statusCode)?G[es](Xe):H[es](Xe)}P[Ye]>0&&q[Uy](P,O[SI]),H[Ye]>0&&q[$u](H,Pc(null,["partial success",O[SI],"of",O.itemsReceived].join(" "))),G[Ye]>0&&(tr(G),se(q[Lr](),2,40,"Partial success. Delivered: "+P[Ye]+", Failed: "+H[Ye]+". Will retry to send "+G[Ye]+" our of "+O[EI]+" items"))}function vn(P,O){q._buffer&&q._buffer[om](P)}function Xt(P){try{if(P){var O=P,H=O.oriPayload;return H&&H[Ye]?H:null}}catch{}return null}function pt(P,O){if(I)return!1;if(!P)return O&&se(O,1,7,"Cannot send empty telemetry"),!1;if(P.baseData&&!P[xI])return O&&se(O,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(P[xI]||(P[xI]="EventData"),!q[Vh])return O&&se(O,1,28,"Sender was not initialized"),!1;if(oe(P))P[Cy]=q._sample[Gh];else return O&&se(O,2,33,"Telemetry item was sampled out and not sent",{SampleRate:q._sample[Gh]}),!1;return!0}function nt(P,O){var H=P.iKey||x,G=e.constructEnvelope(P,H,O,A);if(!G){se(O,1,47,"Unable to create an AppInsights envelope");return}var J=!1;if(P[Hn]&&P[Hn][Ey]&&(ee(P[Hn][Ey],function(te){try{te&&te(G)===!1&&(J=!0,ho(O,"Telemetry processor check returns false"))}catch(ue){se(O,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+nn(ue),{exception:Ee(ue)},!0)}}),delete P[Hn][Ey]),!J)return G}function Dt(P){var O=xK,H=q[Lr]();try{var G=pt(P,H),J=null;G&&(J=nt(P,H)),J&&(O=c.serialize(J))}catch{}return O}function yt(P){var O=xK;return P&&P[Ye]&&(O="["+P.join(",")+"]"),O}function j(P){var O=Qe();return{urlString:h,data:P,headers:O}}function oe(P){return q._sample.isSampledIn(P)}function xe(P,O,H,G){O===200&&P?q._onSuccess(P,P[Ye]):G&&q[$u](P,G)}function le(P,O,H,G){G===void 0&&(G=!0);var J=function(Oe,Xe,Te){return xe(O,Oe,Xe,Te)},te=De(O),ue=P&&P.sendPOST;return ue&&te?(G&&q._buffer[Hh](O),ue(te,J,!H)):null}function De(P){if(we(P)&&P[Ye]>0){var O=q[As].batchPayloads(P),H=Qe(),G={data:O,urlString:h,headers:H,disableXhrSync:R,disableFetchKeepAlive:!L,oriPayload:P};return G}return null}function Qe(){try{var P=u||{};return cI(h)&&(P[sI[6]]=sI[7]),P}catch{}return null}function rt(P){var O=P?P[Ye]:0;return q[As].size()+O>v?((!d||d.isOnline())&&q[jh](!0,null,10),!0):!1}function ht(P,O,H,G,J,te){var ue=null;if(q._appId||(ue=Td(te),ue&&ue.appId&&(q._appId=ue.appId)),(P<200||P>=300)&&P!==0){if((P===301||P===307||P===308)&&!wn(H)){q[$u](O,J);return}if(d&&!d.isOnline()){if(!F){var Oe=10;tr(O,Oe),se(q[Lr](),2,40,". Offline - Response Code: ".concat(P,". Offline status: ").concat(!d.isOnline(),". Will retry to send ").concat(O.length," items."))}return}!F&&ie(P)?(tr(O),se(q[Lr](),2,40,". Response code "+P+". Will retry to send "+O[Ye]+" items.")):q[$u](O,J)}else wn(H),P===206?(ue||(ue=Td(te)),ue&&!F?q[CI](O,ue):q[$u](O,J)):(r=0,q[Uy](O,G))}function wn(P){return l>=10?!1:!ae(P)&&P!==""&&P!==h?(h=P,++l,!0):!1}function Wn(P,O){if(m)m(P,!1);else{var H=z&&z[Oy]([3],!0);return le(H,P,O)}}function Or(P,O,H){var G=P,J=G&&G.oriPayload;if(W)B&&B(J,!0),se(q[Lr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var te=[],ue=0;ue<J[Ye];ue++){var Oe=J[ue],Xe=[Oe],Te=De(Xe);H(Te,O)?q._onSuccess(Xe,Xe[Ye]):te[es](Oe)}te[Ye]>0&&(B&&B(te,!0),se(q[Lr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Ur(P){try{if(P&&P[Ye])return ke(P[0])}catch{}return null}function _i(P,O){var H=null;if(we(P)){for(var G=P[Ye],J=0;J<P[Ye];J++)G+=P[J].item[Ye];var te=z.getSyncFetchPayload();te+G<=Jme?H=2:Ji()?H=3:(H=1,se(q[Lr](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var ue=z&&z[Oy]([H],!0);return le(ue,P,O)}return null}function tr(P,O){if(O===void 0&&(O=1),!(!P||P[Ye]===0)){var H=q[As];H[om](P),r++;for(var G=0,J=P;G<J.length;G++){var te=J[G];te.cnt=te.cnt||0,te.cnt++,H[Gc](te)}Wa(O),M()}}function Wa(P){var O=10,H;if(r<=1)H=O;else{var G=(Math.pow(2,r)-1)/2,J=ji(Math.random()*G*O)+1;J=P*J,H=sa(ru(J,3600),O)}var te=xn()+H*1e3;o=te}function M(){if(!a&&!s){var P=o?sa(0,o-xn()):0,O=sa(k,P);a=fi(function(){a=null,q[jh](!0,null,1)},O)}}function Q(){a&&a.cancel(),a=null,o=null}function ie(P){return ae(V)?P===401||P===408||P===429||P===500||P===502||P===503||P===504:V[Ye]&&V.indexOf(P)>-1}function ve(){var P="getNotifyMgr";return q.core[P]?q.core[P]():q.core._notificationManager}function be(P,O){var H=ve();if(H&&H.eventsSendRequest)try{H.eventsSendRequest(P,O)}catch(G){se(q[Lr](),1,74,"send request notification failed: "+nn(G),{exception:Ee(G)})}}function qe(P,O){var H=O.disableInstrumentationKeyValidation,G=ae(H)?!1:H;if(G)return!0;var J="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",te=new RegExp(J);return te.test(P)}function ye(){q[Vh]=null,q[As]=null,q._appId=null,q._sample=null,u={},d=null,r=0,o=null,i=null,s=!1,a=null,c=null,l=0,f=0,m=null,p=null,h=null,g=null,v=0,C=!1,S=null,I=!1,x=null,A=Ra,F=!1,E=null,T=Ra,R=!1,L=!1,W=!1,N=null,B=null,z=null,gt(q,"_senderConfig",{g:function(){return B_({},DK)}})}}),n}return e.constructEnvelope=function(n,r,o,i){var s;r!==n.iKey&&!ae(r)?s=Yi(Yi({},n),{iKey:r}):s=n;var a=Qme[s.baseType]||sF;return a(o,s,i)},e}(Uc)});var cF=ne(()=>{IK()});var cm,My,zh,Kh,PK=ne(()=>{cm="instrumentationKey",My="connectionString",zh="endpointUrl",Kh="userOverrideEndpointUrl"});var bK={};EC(bK,{AppInsightsCore:()=>$c,ApplicationInsights:()=>npe,Sender:()=>$y,SeverityLevel:()=>JA,arrForEach:()=>ee,isNullOrUndefined:()=>ae,proxyFunctions:()=>wi,throwError:()=>An});function tpe(t){return t&&t>0}var Jh,lF,epe,npe,TK=ne(()=>{pr();cF();Yc();Ot();hd();Ne();PK();Ot();Yc();cF();lF=void 0,epe=(Jh={diagnosticLogInterval:hh(tpe,1e4)},Jh[My]=lF,Jh.endpointUrl=lF,Jh[cm]=lF,Jh.extensionConfig={},Jh);npe=function(){function t(e){var n=new $c,r;(ae(e)||ae(e[cm])&&ae(e[My]))&&An("Invalid input configuration"),Je(t,this,function(i){gt(i,"config",{g:function(){return r}}),s(),i.initialize=s,i.track=o,wi(i,n,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function s(){var a=jt(e||{},epe);r=a.cfg,n.addUnloadHook(hr(a,function(){var c=r[My];if(uo(c)){var l=Pw(function(d,p){gi(c,function(h){var g=h.value,v=r[cm];if(!h.rejected&&g){r[My]=g;var C=Ty(g);v=C.instrumentationkey||v}d(v)})}),u=Pw(function(d,p){gi(c,function(h){var g=h.value,v=r[zh];if(!h.rejected&&g){var C=Ty(g),w=C.ingestionendpoint;v=w?w+Pa:v}d(v)})});r[cm]=l,r[zh]=r[Kh]||u}if(ke(c)){var f=Ty(c),m=f.ingestionendpoint;r[zh]=r[Kh]?r[Kh]:m+Pa,r[cm]=f.instrumentationkey||r[cm]}r[zh]=r[Kh]?r[Kh]:r[zh]})),n.initialize(r,[new $y])}});function o(i){i&&(i.baseData=i.baseData||{},i.baseType=i.baseType||"EventData"),n.track(i)}}return t.__ieDyn=1,t}()});var fF=$(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.TargetPopulation=Bu.Filters=Bu.VSCodeFilterProvider=void 0;var PI=require("vscode"),uF=class t{constructor(e,n,r){this.extensionName=e,this.extensionVersion=n,this.targetPopulation=r}static trimVersionSuffix(e){let n=/\-[a-zA-Z0-9]+$/;return e.split(n)[0]}getFilterValue(e){switch(e){case ka.ApplicationVersion:return t.trimVersionSuffix(PI.version);case ka.Build:return PI.env.appName;case ka.ClientId:return PI.env.machineId;case ka.ExtensionName:return this.extensionName;case ka.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case ka.Language:return PI.env.language;case ka.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,n=Object.values(ka);for(let r of n)e.set(r,this.getFilterValue(r));return e}};Bu.VSCodeFilterProvider=uF;var ka;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(ka||(Bu.Filters=ka={}));var LK;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(LK||(Bu.TargetPopulation=LK={}))});var AK=$(bI=>{"use strict";Object.defineProperty(bI,"__esModule",{value:!0});bI.BaseFeatureProvider=void 0;var dF=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};bI.BaseFeatureProvider=dF});var FK=$(TI=>{"use strict";Object.defineProperty(TI,"__esModule",{value:!0});TI.FilteredFeatureProvider=void 0;var rpe=AK(),mF=class extends rpe.BaseFeatureProvider{constructor(e,n){super(e),this.telemetry=e,this.filterProviders=n,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let n of this.filterProviders){let r=n.getFilters();for(let o of r.keys()){let i=r.get(o);e.set(o,i)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let n=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",n]])),this.cachedTelemetryEvents.push(e)}};TI.FilteredFeatureProvider=mF});var OK=$(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.TasApiFeatureProvider=Wu.TASAPI_FETCHERROR_EVENTNAME=void 0;var ope=FK();Wu.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var pF="ErrorType",hF=class extends ope.FilteredFeatureProvider{constructor(e,n,r){super(n,r),this.httpClient=e,this.telemetry=n,this.filterProviders=r}async fetch(){let e=this.getFilters(),n={};for(let a of e.keys()){let c=e.get(a);n[a]=c}let r;try{r=await this.httpClient.get({headers:n})}catch(a){let c=a,l=new Map;c.responseReceived&&!c.responseOk?l.set(pF,"ServerError"):c.responseReceived===!1?l.set(pF,"NoResponse"):l.set(pF,"GenericError"),this.telemetry.postEvent(Wu.TASAPI_FETCHERROR_EVENTNAME,l)}if(!r)throw Error(Wu.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(n);let o=r.data,i=o.Configs,s=[];for(let a of i)if(a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:o.AssignmentContext,configs:i}}};Wu.TasApiFeatureProvider=hF});var UK=$(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});Qh.HttpClient=Qh.FetchError=void 0;var Zh=class extends Error{constructor(e,n,r){super(e),this.responseReceived=n,this.responseOk=r}};Qh.FetchError=Zh;var gF=class{constructor(e){this.endpoint=e}async get(e){let n=await fetch(this.endpoint,{method:"GET",headers:e==null?void 0:e.headers});if(!n)throw new Zh("No response received",!1);if(!n.ok)throw new Zh("Response not ok",!0,!1);let r=await n.json();if(!r)throw new Zh("No data received",!1);return{data:r}}};Qh.HttpClient=gF});var $K=$(RI=>{"use strict";Object.defineProperty(RI,"__esModule",{value:!0});RI.MemoryKeyValueStorage=void 0;var vF=class{constructor(){this.storage=new Map}async getValue(e,n){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(n||void 0)}setValue(e,n){this.storage.set(e,n)}};RI.MemoryKeyValueStorage=vF});var MK=$(kI=>{"use strict";Object.defineProperty(kI,"__esModule",{value:!0});kI.ExperimentationServiceBase=void 0;var ipe=$K(),wF=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,n,r,o,i){this.telemetry=e,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=r,this.storageKey=o,this.storage=i,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(i=new ipe.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));let n=await this.fetchPromise;this.updateFeatures(n,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,n=!1){let r={features:[],assignmentContext:"",configs:[]};for(let o of e){for(let i of o.features)r.features.includes(i)||r.features.push(i);for(let i of o.configs){let s=r.configs.find(a=>a.Id===i.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),i.Parameters):r.configs.push(i)}r.assignmentContext+=o.assignmentContext}(n||!this.featuresConsumed)&&(this.features=r),this.storage&&this.storage.setValue(this.storageKey,r)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let n=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),n.features.includes(e)}getTreatmentVariable(e,n){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${n}`);let r=this.features.configs.find(o=>o.Id===e);return r==null?void 0:r.Parameters[n]}async getTreatmentVariableAsync(e,n,r){if(r){let o=this.featuresConsumed,i=this.getTreatmentVariable(e,n);if(i===void 0)this.featuresConsumed=o;else return i}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,n)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let n of e)this.featureProviders.push(n)}};kI.ExperimentationServiceBase=wF});var HK=$(NI=>{"use strict";Object.defineProperty(NI,"__esModule",{value:!0});NI.PollingService=void 0;var yF=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};NI.PollingService=yF});var BK=$(LI=>{"use strict";Object.defineProperty(LI,"__esModule",{value:!0});LI.ExperimentationServiceAutoPolling=void 0;var spe=MK(),ape=HK(),CF=class extends spe.ExperimentationServiceBase{constructor(e,n,r,o,i,s,a){if(super(e,o,i,s,a),this.telemetry=e,this.filterProviders=n,this.refreshRateMs=r,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=i,this.storageKey=s,this.storage=a,r<1e3&&r!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");r>0&&(this.pollingService=new ape.PollingService(r),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let n=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),n}else return await super.getFeaturesAsync(e)}};LI.ExperimentationServiceAutoPolling=CF});var WK=$(FI=>{"use strict";Object.defineProperty(FI,"__esModule",{value:!0});FI.ExperimentationService=void 0;var cpe=OK(),lpe=UK(),upe=BK(),AI=class extends upe.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new cpe.TasApiFeatureProvider(new lpe.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};FI.ExperimentationService=AI;AI.REFRESH_RATE_IN_MINUTES=30});var jK=$(OI=>{"use strict";Object.defineProperty(OI,"__esModule",{value:!0});OI.ExperimentationService=void 0;var fpe=WK();Object.defineProperty(OI,"ExperimentationService",{enumerable:!0,get:function(){return fpe.ExperimentationService}})});var VK=$(UI=>{"use strict";Object.defineProperty(UI,"__esModule",{value:!0});UI.MementoKeyValueStorage=void 0;var EF=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,n){return await this.mementoGlobalStorage.get(e)||n}setValue(e,n){this.mementoGlobalStorage.update(e,n)}};UI.MementoKeyValueStorage=EF});var YK=$(xF=>{"use strict";Object.defineProperty(xF,"__esModule",{value:!0});var SF=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,n){}getTreatmentVariableAsync(e,n){return Promise.resolve(void 0)}};xF.default=SF});var GK=$(eg=>{"use strict";Object.defineProperty(eg,"__esModule",{value:!0});eg.getExperimentationServiceAsync=eg.getExperimentationService=void 0;var dpe=fF(),mpe=jK(),_F=require("vscode"),ppe=VK(),hpe=YK(),gpe="https://default.exp-tas.com/vscode/ab",vpe="query-expfeature",wpe="abexp.assignmentcontext",ype="VSCode.ABExp.FeatureData",Cpe=1e3*60*30;function qK(t,e,n,r,o,...i){if(!o)throw new Error("Memento storage was not provided.");let s=_F.workspace.getConfiguration("telemetry");if(!(_F.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):_F.env.isTelemetryEnabled))return new hpe.default;let l=[new dpe.VSCodeFilterProvider(t,e,n),...i],u=new ppe.MementoKeyValueStorage(o);return new mpe.ExperimentationService({filterProviders:l,telemetry:r,storageKey:ype,keyValueStorage:u,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:wpe,telemetryEventName:vpe,endpoint:gpe,refetchInterval:Cpe})}eg.getExperimentationService=qK;async function Epe(t,e,n,r,o,...i){let s=qK(t,e,n,r,o,...i);return await s.initializePromise,s}eg.getExperimentationServiceAsync=Epe});var KK=$(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.TargetPopulation=ju.getExperimentationServiceAsync=ju.getExperimentationService=void 0;var zK=GK();Object.defineProperty(ju,"getExperimentationService",{enumerable:!0,get:function(){return zK.getExperimentationService}});Object.defineProperty(ju,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return zK.getExperimentationServiceAsync}});var Spe=fF();Object.defineProperty(ju,"TargetPopulation",{enumerable:!0,get:function(){return Spe.TargetPopulation}})});var v9=$((oVe,Rge)=>{Rge.exports={name:"remote-containers",displayName:"%displayName%",description:"%description%",version:"0.427.0",publisher:"ms-vscode-remote",icon:"resources/dev-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.99.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"%capabilities.untrustedWorkspaces.description%"},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","devcontainer","development container","continueOn"],aiKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",activationEvents:["onStartupFinished","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onResolveRemoteAuthority:apple-container","onDebugResolve:extensionHost"],main:"./dist/extension/extension",l10n:"./l10n",enabledApiProposals:["resolvers","tunnels","workspaceTrust","terminalDimensions","contribEditSessions","contribViewsRemote","contribRemoteHelp"],contributes:{continueEditSession:[{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"},{command:"remote-containers.openRepositoryFromGitWithEditSession",group:"0_local@2",when:"git.state == initialized && gitOpenRepositoryCount != 0 && remoteName =~ /(codespaces*.*|tunnel)/ && false",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"}],languages:[{id:"jsonc",filenames:["devcontainer-feature.json",".devcontainer-internal.json"]}],jsonValidation:[{fileMatch:"devcontainer-feature.json",url:"https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"}],configuration:{title:"%configuration.title%",properties:{"remote.containers.defaultExtensions":{scope:"application",deprecationMessage:"%configuration.defaultExtensions.deprecationMessage%",markdownDeprecationMessage:"%configuration.defaultExtensions.markdownDeprecationMessage%"},"dev.containers.defaultExtensions":{scope:"application",type:"array",description:"%configuration.defaultExtensions.description%",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"%configuration.defaultExtensions.errorMessage%"}},"dev.containers.defaultFeatures":{scope:"application",type:"object",description:"%configuration.defaultFeatures%",default:{}},"remote.containers.workspaceMountConsistency":{scope:"application",deprecationMessage:"%configuration.workspaceMountConsistency.deprecationMessage%",markdownDeprecationMessage:"%configuration.workspaceMountConsistency.markdownDeprecationMessage%"},"dev.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["%configuration.workspaceMountConsistency.consistent%","%configuration.workspaceMountConsistency.cached%","%configuration.workspaceMountConsistency.delegated%"],description:"%configuration.workspaceMountConsistency.description%",default:"cached"},"dev.containers.gpuAvailability":{scope:"machine",type:"string",enum:["all","detect","none"],enumDescriptions:["%configuration.gpuAvailability.all%","%configuration.gpuAvailability.detect%","%configuration.gpuAvailability.none%"],description:"%configuration.gpuAvailability.description%",default:"detect"},"remote.containers.cacheVolume":{scope:"application",deprecationMessage:"%configuration.cacheVolume.deprecationMessage%",markdownDeprecationMessage:"%configuration.cacheVolume.markdownDeprecationMessage%"},"dev.containers.cacheVolume":{scope:"application",type:"boolean",description:"%configuration.cacheVolume.description%",default:!0},"remote.containers.copyGitConfig":{scope:"machine",deprecationMessage:"%configuration.copyGitConfig.deprecationMessage%",markdownDeprecationMessage:"%configuration.copyGitConfig.markdownDeprecationMessage%"},"dev.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"%configuration.copyGitConfig.markdownDescription%",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",deprecationMessage:"%configuration.gitCredentialHelperConfigLocation.deprecationMessage%",markdownDeprecationMessage:"%configuration.gitCredentialHelperConfigLocation.markdownDeprecationMessage%"},"dev.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["%configuration.gitCredentialHelperConfigLocation.system%","%configuration.gitCredentialHelperConfigLocation.global%","%configuration.gitCredentialHelperConfigLocation.none%"],description:"%configuration.gitCredentialHelperConfigLocation.description%",default:"global"},"dev.containers.dockerCredentialHelper":{scope:"machine",type:"boolean",markdownDescription:"%configuration.dockerCredentialHelper.markdownDescription%",default:!0},"dev.containers.githubCLILoginWithToken":{scope:"machine",type:"boolean",markdownDescription:"%configuration.githubCLILoginWithToken.markdownDescription%",default:!1},"dev.containers.mountWaylandSocket":{scope:"application",ignoreSync:!0,type:"boolean",markdownDescription:"%configuration.mountWaylandSocket.markdownDescription%",default:!0},"remote.containers.logLevel":{scope:"application",deprecationMessage:"%configuration.logLevel.deprecationMessage%",markdownDeprecationMessage:"%configuration.logLevel.markdownDeprecationMessage%"},"dev.containers.logLevel":{scope:"application",type:"string",description:"%configuration.logLevel.description%",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",deprecationMessage:"%configuration.dockerPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerPath.markdownDeprecationMessage%"},"dev.containers.dockerPath":{scope:"application",type:"string",description:"%configuration.dockerPath.description%",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",deprecationMessage:"%configuration.dockerComposePath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerComposePath.markdownDeprecationMessage%"},"dev.containers.dockerComposePath":{scope:"application",type:"string",description:"%configuration.dockerComposePath.description%",default:"docker-compose"},"dev.containers.dockerSocketPath":{scope:"application",type:"string",description:"%configuration.dockerSocketPath.description%",default:"/var/run/docker.sock"},"remote.containers.executeInWSL":{scope:"application",deprecationMessage:"%configuration.executeInWSL.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSL.markdownDeprecationMessage%"},"dev.containers.executeInWSL":{scope:"application",type:"boolean",description:"%configuration.executeInWSL.description%",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",deprecationMessage:"%configuration.executeInWSLDistro.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSLDistro.markdownDeprecationMessage%"},"dev.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"%configuration.executeInWSLDistro.markdownDescription%"},"dev.containers.forwardWSLServices":{scope:"application",type:"boolean",description:"%configuration.forwardWSLServices.description%",default:!0},"dotfiles.repository":{scope:"machine",type:"string",description:"%configuration.dotfiles.repository.description%"},"dotfiles.installCommand":{scope:"machine",type:"string",description:"%configuration.dotfiles.installCommand.description%"},"dotfiles.targetPath":{scope:"machine",type:"string",description:"%configuration.dotfiles.targetPath.description%",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",deprecationMessage:"%configuration.dotfiles.repository.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.repository.markdownDeprecationMessage%"},"remote.containers.dotfiles.installCommand":{scope:"machine",deprecationMessage:"%configuration.dotfiles.installCommand.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.installCommand.markdownDeprecationMessage%"},"remote.containers.dotfiles.targetPath":{scope:"machine",deprecationMessage:"%configuration.dotfiles.targetPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.targetPath.markdownDeprecationMessage%"},"remote.containers.repositoryConfigurationPaths":{scope:"application",deprecationMessage:"%configuration.repositoryConfigurationPaths.deprecationMessage%",markdownDeprecationMessage:"%configuration.repositoryConfigurationPaths.markdownDeprecationMessage%"},"dev.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"%configuration.repositoryConfigurationPaths.markdownDescription%",default:[],items:{type:"string"}},"dev.containers.experimentalLockfile":{scope:"application",type:"boolean",description:"%configuration.experimentalLockfile.description%",default:!1},"dev.containers.optimisticallyLaunchDocker":{scope:"application",type:"boolean",description:"%configuration.optimisticallyLaunchDocker.description%",default:!0},"dev.containers.experimentalAppleContainerSupport":{scope:"application",type:"boolean",markdownDescription:"%configuration.experimentalAppleContainerSupport.markdownDescription%",default:!1,tags:["experimental"]}}},commands:[{command:"remote-containers.reopenInContainer",title:"%command.reopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildAndReopenInContainer",title:"%command.rebuildAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"%command.rebuildNoCacheAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.reopenLocally",title:"%command.reopenLocally%",category:"%command.category%"},{command:"remote-containers.reopenInWSL",title:"%command.reopenInWSL%",category:"%command.category%"},{command:"remote-containers.reopenInSSH",title:"%command.reopenInSSH%",category:"%command.category%"},{command:"remote-containers.reopenInTunnel",title:"%command.reopenInTunnel%",category:"%command.category%"},{command:"remote-containers.openFolder",title:"%command.openFolder%",category:"%command.category%",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openFolderInContainerInCurrentWindow",title:"%command.openFolderInContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.openFolderInContainerInNewWindow",title:"%command.openFolderInContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.openInformationAboutMountPerformance",title:"%command.openInformationAboutMountPerformance%",category:"%command.category%",icon:"$(info)"},{command:"remote-containers.openRepositoryInVolume",title:"%command.openRepositoryInVolume%",category:"%command.category%"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"%command.openRepositoryInUniqueVolume%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",title:"%command.openRepositoryFromRemoteHubWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromGitWithEditSession",title:"%command.openRepositoryFromGitWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openPullRequestInVolume",title:"%command.openPullRequestInVolume%",category:"%command.category%"},{command:"remote-containers.inspectVolume",title:"%command.inspectVolume%",category:"%command.category%"},{command:"remote-containers.openWorkspace",title:"%command.openWorkspace%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainer",title:"%command.attachToRunningContainer%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"%command.attachToRunningContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.inspectVolumeFromViewlet",title:"%command.inspectVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"%command.cloneInVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cleanUpDevContainers",title:"%command.cleanUpDevContainers%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.pruneVolumes",title:"%command.pruneVolumes%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"%command.explorerVolumesRefresh%",category:"%command.category%",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainer",title:"%command.attachToK8sContainer%",category:"%command.category%"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"%command.attachToK8sContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.attachToAppleContainer",title:"%command.attachToAppleContainer%",category:"%command.category%"},{command:"remote-containers.switchContainer",title:"%command.switchContainer%",category:"%command.category%"},{command:"remote-containers.rebuildContainer",title:"%command.rebuildContainer%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"%command.rebuildContainerNoCache%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"%command.createDevContainerFile%",category:"%command.category%"},{command:"remote-containers.createDevContainerFileWithCopilot",title:"%command.createDevContainerFileWithCopilot%",category:"%command.category%"},{command:"remote-containers.createDevContainer",title:"%command.createDevContainer%",category:"%command.category%"},{command:"remote-containers.settings",title:"%command.settings%",category:"%command.category%"},{command:"remote-containers.getHelp",title:"%command.getHelp%",category:"%command.category%"},{command:"remote-containers.getStarted",title:"%command.getStarted%",category:"%command.category%"},{command:"remote-containers.trySample",title:"%command.trySample%",category:"%command.category%"},{command:"remote-containers.reportIssue",title:"%command.reportIssue%",category:"%command.category%"},{command:"remote-containers.provideFeedback",title:"%command.provideFeedback%",category:"%command.category%"},{command:"remote-containers.openDevContainerFile",title:"%command.openDevContainerFile%",category:"%command.category%",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"%command.openAttachConfigByNameFile%",category:"%command.category%"},{command:"remote-containers.openAttachDevContainerFile",title:"%command.openAttachDevContainerFile%",category:"%command.category%"},{command:"remote-containers.revealLogTerminal",title:"%command.revealLogTerminal%",category:"%command.category%"},{command:"remote-containers.openLogFile",title:"%command.openLogFile%",category:"%command.developerCategory%"},{command:"remote-containers.openLastLogFile",title:"%command.openLastLogFile%",category:"%command.category%"},{command:"remote-containers.testConnection",title:"%command.testConnection%",category:"%command.developerCategory%"},{command:"remote-containers.attachToContainerInCurrentWindow",title:"%command.attachToContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.attachToContainerInNewWindow",title:"%command.attachToContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.stopContainer",title:"%command.stopContainer%",category:"%command.category%"},{command:"remote-containers.startContainer",title:"%command.startContainer%",category:"%command.category%",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"%command.removeContainer%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"%command.removeRecentFolder%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"%command.showDetails%",category:"%command.category%"},{command:"remote-containers.explorerTargetsRefresh",title:"%command.explorerTargetsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"%command.explorerDetailsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"%command.inspectDockerResource%",category:"%command.category%"},{command:"remote-containers.inspectInBasicDevContainer",title:"%command.inspectInBasicDevContainer%",category:"%command.category%"},{command:"remote-containers.cloneInVolume",title:"%command.cloneInVolume%",category:"%command.category%"},{command:"remote-containers.removeVolume",title:"%command.removeVolume%",category:"%command.category%"},{command:"remote-containers.newContainer",title:"%command.newContainer%",category:"%command.category%",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"%command.showContainerLog%",category:"%command.category%"},{command:"remote-containers.addExtensionToConfig",title:"%command.addExtensionToConfig%",category:"%command.category%"},{command:"remote-containers.checkoutPRInVolume",title:"%command.checkoutPRInVolume%",category:"%command.category%"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"%command.showReopenInContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"%command.showRecoveryContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.labelPortAndUpdateConfig",title:"%command.labelPortAndUpdateConfig%",category:"%command.category%",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"%command.installDocker%",category:"%command.category%"},{command:"remote-containers.installDockerInWSL",title:"%command.installDockerInWSL%",category:"%command.category%"},{command:"remote-containers.installUserCLI",title:"%command.installUserCLI%",category:"%command.category%"},{command:"remote-containers.configureContainerFeatures",title:"%command.configureContainerFeatures%",category:"%command.category%"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.openFolder",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.createDevContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openWorkspace",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",when:"false"},{command:"remote-containers.openRepositoryFromGitWithEditSession",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToAppleContainer",when:"!hideConnectCommands && config.dev.containers.experimentalAppleContainerSupport && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.switchContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.testConnection",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.getStarted",when:"!remoteName && !virtualWorkspace || remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.trySample",when:"!hideConnectCommands && !remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"!hideConnectCommands && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container)$/"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"false"},{command:"remote-containers.attachToContainerInNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"false"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"false"},{command:"remote-containers.openInformationAboutMountPerformance",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.installDockerInWSL",when:"!hideConnectCommands && isWindows && !remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_2_actions@0",when:"true"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@1",when:"!hideConnectCommands"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@2",when:"!hideConnectCommands"},{command:"remote-containers.configureContainerFeatures",group:"remote_30_dev-container_2_actions@3",when:"remoteName =~ /^(dev-container)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && remoteName =~ /tunnel*.*/ && gitOpenRepositoryCount == 0"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_2_actions@6",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@3"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@1"},{command:"remote-containers.cleanUpDevContainers",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@2"},{command:"remote-containers.newContainer",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers)",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers) && viewItem =~ /^runningContainer$/i",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"!hideConnectCommands && (view == dockerVolumes || view == vscode-containers.views.volumes) && viewItem == volume",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"!hideConnectCommands && view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/",group:"1_pullrequest@3"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"!hideConnectCommands && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@2"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@2"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@3"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@1"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@2"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^running(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@3"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.openInformationAboutMountPerformance",when:"view == detailsContainers && viewItem == mountPerformanceInfo",group:"inline@1"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && !isWorkspaceScopedExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote|tunnel)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.dev-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.attached-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.exec.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.k8s-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"apple-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.apple-container.workspaceSuffix%"}}],views:{remote:[{id:"targetsContainers",name:"%views.remote.targetsContainers%",when:"!hideConnectCommands",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container","apple-container"]},{id:"detailsContainers",name:"%views.remote.detailsContainers%",when:"!hideConnectCommands && remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"%views.remote.devVolumes%",when:"!hideConnectCommands",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"%viewsWelcome.targetsContainers.needsDockerStartOrInstall%"},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"%viewsWelcome.targetsContainers.needsSSHCredentials%"},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithFolder%"},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithoutFolder%"},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:"%viewsWelcome.devVolumes.noDevVolumes%"}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container","apple-container"]}},scripts:{"vscode:prepublish":"npx npm-run-all --npm-path npm clean compile-prod dev-containers-user-cli-prepare",compile:"npx npm-run-all --npm-path npm clean-dist compile-dev",watch:"npx npm-run-all --npm-path npm clean-dist compile-watch",postinstall:"yarn --cwd node_modules/@devcontainers/cli",precommit:"node build/hygiene.js",package:"vsce package --yarn",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --max-warnings 0 --ext .ts ./src ./test","compile-prod":"npx npm-run-all --npm-path npm compile-cli-prod copy-cli esbuild-prod","compile-dev":"npx npm-run-all --npm-path npm compile-cli-dev copy-cli esbuild-dev","compile-watch":"npx npm-run-all --npm-path npm --parallel compile-cli-watch watch-cli esbuild-watch","esbuild-prod":"node esbuild.js --production","esbuild-dev":"node esbuild.js","esbuild-watch":"node esbuild.js --watch","compile-cli-prod":"yarn --cwd node_modules/@devcontainers/cli compile-prod","compile-cli-dev":"yarn --cwd node_modules/@devcontainers/cli compile-dev","compile-cli-watch":"yarn --cwd node_modules/@devcontainers/cli compile-watch","copy-cli":'copyfiles --up 4 --all "node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js" dist',"watch-cli":"npm-watch","type-check":"npx npm-run-all --npm-path npm clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npx npm-run-all --npm-path npm clean-built tsc-b-w","tsc-b-w":"tsc -b -w","dev-containers-cli-publish":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npx npm-run-all --npm-path npm clean dev-containers-cli-compile dev-containers-cli-copy-module","dev-containers-cli-compile":"npx npm-run-all --npm-path npm compile-prod","dev-containers-cli-copy-module":"copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dev-containers-cli","dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npx npm-run-all --npm-path npm dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npx npm-run-all --npm-path npm dev-containers-user-cli-copy-module","dev-containers-user-cli-clean-prepare":"npx npm-run-all --npm-path npm clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npx npm-run-all --npm-path npm clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-matrix":"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},watch:{"copy-cli":"node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js"},devDependencies:{"@stylistic/eslint-plugin":"^3.0.1","@types/adm-zip":"^0.5.7","@types/chai":"^4.3.20","@types/follow-redirects":"^1.14.4","@types/js-yaml":"^4.0.9","@types/markdown-it":"^14.1.2","@types/minimist":"^1.2.5","@types/mocha":"^10.0.10","@types/ncp":"^2.0.8","@types/node":"^20.19.1","@types/pull-stream":"^3.6.7","@types/recursive-readdir":"^2.2.4","@types/semver":"^7.7.0","@types/stats-lite":"^2.2.2","@types/tar":"^6.1.13","@types/tar-stream":"^3.1.4","@types/vscode":"~1.86.0","@types/yargs":"^17.0.33","@typescript-eslint/eslint-plugin":"^8.35.0","@typescript-eslint/experimental-utils":"^5.62.0","@typescript-eslint/parser":"^8.35.0","@vscode/l10n-dev":"^0.0.35","@vscode/vsce":"^3.5.0",ajv:"^8.17.1",chai:"^4.5.0",copyfiles:"^2.4.1",esbuild:"^0.25.5",eslint:"^8.57.0","eslint-plugin-local":"^6.0.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^9.0.1",husky:"^9.1.7",jsonc:"^2.0.0",minimist:"^1.2.8",mocha:"^11.7.0","npm-run-all":"^4.1.5","npm-watch":"^0.13.0","p-all":"^5.0.0",rimraf:"^6.0.1","stats-lite":"^2.2.0","ts-node":"^10.9.2",typescript:"^5.8.3","typescript-formatter":"^7.2.2",vinyl:"^3.0.1","vinyl-fs":"^4.0.2"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git#721c21b8fba699679cc03c01baa782e816be6f54","@vscode/extension-telemetry":"^0.9.9","@vscode/l10n":"^0.0.18","adm-zip":"^0.5.16",applicationinsights:"^2.9.7","find-process":"^1.4.10","follow-redirects":"^1.15.9","js-yaml":"^4.1.0","jsonc-parser":"^3.3.1",muxrpc:"^6.7.3","node-pty":"^1.0.0","pull-pushable":"^2.2.0","pull-stream":"^3.7.0","pull-stream-to-stream":"^2.0.0",semver:"^7.7.2","stream-to-pull-stream":"^1.7.3",tar:"^6.2.1","tar-stream":"^3.1.7","vscode-tas-client":"^0.1.84","vscode-uri":"^3.1.0",yargs:"~17.7.2"}}});var cve={};EC(cve,{activate:()=>kge,attachToContainer:()=>fC,deactivate:()=>Fge});module.exports=$9(cve);var U=Y(require("vscode")),E9=Y($r()),re=require("vscode"),S9=Y(require("os")),k0=Y(require("fs")),ut=Y(require("path")),x9=Y(require("querystring"));function _g(t,e=!1){let n=t.length,r=0,o="",i=0,s=16,a=0,c=0,l=0,u=0,f=0;function m(w,y){let S=0,I=0;for(;S<w||!y;){let x=t.charCodeAt(r);if(x>=48&&x<=57)I=I*16+x-48;else if(x>=65&&x<=70)I=I*16+x-65+10;else if(x>=97&&x<=102)I=I*16+x-97+10;else break;r++,S++}return S<w&&(I=-1),I}function d(w){r=w,o="",i=0,s=16,f=0}function p(){let w=r;if(t.charCodeAt(r)===48)r++;else for(r++;r<t.length&&Cm(t.charCodeAt(r));)r++;if(r<t.length&&t.charCodeAt(r)===46)if(r++,r<t.length&&Cm(t.charCodeAt(r)))for(r++;r<t.length&&Cm(t.charCodeAt(r));)r++;else return f=3,t.substring(w,r);let y=r;if(r<t.length&&(t.charCodeAt(r)===69||t.charCodeAt(r)===101))if(r++,(r<t.length&&t.charCodeAt(r)===43||t.charCodeAt(r)===45)&&r++,r<t.length&&Cm(t.charCodeAt(r))){for(r++;r<t.length&&Cm(t.charCodeAt(r));)r++;y=r}else f=3;return t.substring(w,y)}function h(){let w="",y=r;for(;;){if(r>=n){w+=t.substring(y,r),f=2;break}let S=t.charCodeAt(r);if(S===34){w+=t.substring(y,r),r++;break}if(S===92){if(w+=t.substring(y,r),r++,r>=n){f=2;break}switch(t.charCodeAt(r++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:let x=m(4,!0);x>=0?w+=String.fromCharCode(x):f=4;break;default:f=5}y=r;continue}if(S>=0&&S<=31)if(xg(S)){w+=t.substring(y,r),f=2;break}else f=6;r++}return w}function g(){if(o="",f=0,i=r,c=a,u=l,r>=n)return i=n,s=17;let w=t.charCodeAt(r);if(F0(w)){do r++,o+=String.fromCharCode(w),w=t.charCodeAt(r);while(F0(w));return s=15}if(xg(w))return r++,o+=String.fromCharCode(w),w===13&&t.charCodeAt(r)===10&&(r++,o+=`
`),a++,l=r,s=14;switch(w){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,o=h(),s=10;case 47:let y=r-1;if(t.charCodeAt(r+1)===47){for(r+=2;r<n&&!xg(t.charCodeAt(r));)r++;return o=t.substring(y,r),s=12}if(t.charCodeAt(r+1)===42){r+=2;let S=n-1,I=!1;for(;r<S;){let x=t.charCodeAt(r);if(x===42&&t.charCodeAt(r+1)===47){r+=2,I=!0;break}r++,xg(x)&&(x===13&&t.charCodeAt(r)===10&&r++,a++,l=r)}return I||(r++,f=1),o=t.substring(y,r),s=13}return o+=String.fromCharCode(w),r++,s=16;case 45:if(o+=String.fromCharCode(w),r++,r===n||!Cm(t.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=p(),s=11;default:for(;r<n&&v(w);)r++,w=t.charCodeAt(r);if(i!==r){switch(o=t.substring(i,r),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(w),r++,s=16}}function v(w){if(F0(w)||xg(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function C(){let w;do w=g();while(w>=12&&w<=15);return w}return{setPosition:d,getPosition:()=>r,scan:e?C:g,getToken:()=>s,getTokenValue:()=>o,getTokenOffset:()=>i,getTokenLength:()=>r-i,getTokenStartLine:()=>c,getTokenStartCharacter:()=>i-u,getTokenError:()=>f}}function F0(t){return t===32||t===9}function xg(t){return t===10||t===13}function Cm(t){return t>=48&&t<=57}var BO;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(BO||(BO={}));var Xo=new Array(20).fill(0).map((t,e)=>" ".repeat(e)),Em=200,O0={" ":{"\n":new Array(Em).fill(0).map((t,e)=>`
`+" ".repeat(e)),"\r":new Array(Em).fill(0).map((t,e)=>"\r"+" ".repeat(e)),"\r\n":new Array(Em).fill(0).map((t,e)=>`\r
`+" ".repeat(e))},"	":{"\n":new Array(Em).fill(0).map((t,e)=>`
`+"	".repeat(e)),"\r":new Array(Em).fill(0).map((t,e)=>"\r"+"	".repeat(e)),"\r\n":new Array(Em).fill(0).map((t,e)=>`\r
`+"	".repeat(e))}},WO=[`
`,"\r",`\r
`];function U0(t,e,n){let r,o,i,s,a;if(e){for(s=e.offset,a=s+e.length,i=s;i>0&&!Dg(t,i-1);)i--;let S=a;for(;S<t.length&&!Dg(t,S);)S++;o=t.substring(i,S),r=Z9(o,n)}else o=t,r=0,i=0,s=0,a=t.length;let c=Q9(n,t),l=WO.includes(c),u=0,f=0,m;n.insertSpaces?m=Xo[n.tabSize||4]??Sm(Xo[1],n.tabSize||4):m="	";let d=m==="	"?"	":" ",p=_g(o,!1),h=!1;function g(){if(u>1)return Sm(c,u)+Sm(m,r+f);let S=m.length*(r+f);return!l||S>O0[d][c].length?c+Sm(m,r+f):S<=0?c:O0[d][c][S]}function v(){let S=p.scan();for(u=0;S===15||S===14;)S===14&&n.keepLines?u+=1:S===14&&(u=1),S=p.scan();return h=S===16||p.getTokenError()!==0,S}let C=[];function w(S,I,x){!h&&(!e||I<a&&x>s)&&t.substring(I,x)!==S&&C.push({offset:I,length:x-I,content:S})}let y=v();if(n.keepLines&&u>0&&w(Sm(c,u),0,0),y!==17){let S=p.getTokenOffset()+i,I=m.length*r<20&&n.insertSpaces?Xo[m.length*r]:Sm(m,r);w(I,i,S)}for(;y!==17;){let S=p.getTokenOffset()+p.getTokenLength()+i,I=v(),x="",A=!1;for(;u===0&&(I===12||I===13);){let k=p.getTokenOffset()+i;w(Xo[1],S,k),S=p.getTokenOffset()+p.getTokenLength()+i,A=I===12,x=A?g():"",I=v()}if(I===2)y!==1&&f--,n.keepLines&&u>0||!n.keepLines&&y!==1?x=g():n.keepLines&&(x=Xo[1]);else if(I===4)y!==3&&f--,n.keepLines&&u>0||!n.keepLines&&y!==3?x=g():n.keepLines&&(x=Xo[1]);else{switch(y){case 3:case 1:f++,n.keepLines&&u>0||!n.keepLines?x=g():x=Xo[1];break;case 5:n.keepLines&&u>0||!n.keepLines?x=g():x=Xo[1];break;case 12:x=g();break;case 13:u>0?x=g():A||(x=Xo[1]);break;case 6:n.keepLines&&u>0?x=g():A||(x=Xo[1]);break;case 10:n.keepLines&&u>0?x=g():I===6&&!A&&(x="");break;case 7:case 8:case 9:case 11:case 2:case 4:n.keepLines&&u>0?x=g():(I===12||I===13)&&!A?x=Xo[1]:I!==5&&I!==17&&(h=!0);break;case 16:h=!0;break}u>0&&(I===12||I===13)&&(x=g())}I===17&&(n.keepLines&&u>0?x=g():x=n.insertFinalNewline?c:"");let F=p.getTokenOffset()+i;w(x,S,F),y=I}return C}function Sm(t,e){let n="";for(let r=0;r<e;r++)n+=t;return n}function Z9(t,e){let n=0,r=0,o=e.tabSize||4;for(;n<t.length;){let i=t.charAt(n);if(i===Xo[1])r++;else if(i==="	")r+=o;else break;n++}return Math.floor(r/o)}function Q9(t,e){for(let n=0;n<e.length;n++){let r=e.charAt(n);if(r==="\r")return n+1<e.length&&e.charAt(n+1)===`
`?`\r
`:"\r";if(r===`
`)return`
`}return t&&t.eol||`
`}function Dg(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}var Ig;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Ig||(Ig={}));function jO(t,e){let n=[],r=new Object,o,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,f){i.value=c,i.offset=l,i.length=u,i.type=f,i.colonOffset=void 0,o=i}try{DC(t,{onObjectBegin:(c,l)=>{if(e<=c)throw r;o=void 0,s=e>c,n.push("")},onObjectProperty:(c,l,u)=>{if(e<l||(a(c,l,u,"property"),n[n.length-1]=c,e<=l+u))throw r},onObjectEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onArrayBegin:(c,l)=>{if(e<=c)throw r;o=void 0,n.push(0)},onArrayEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onLiteralValue:(c,l,u)=>{if(e<l||(a(c,l,u,YO(c)),e<=l+u))throw r},onSeparator:(c,l,u)=>{if(e<=l)throw r;if(c===":"&&o&&o.type==="property")o.colonOffset=l,s=!1,o=void 0;else if(c===","){let f=n[n.length-1];typeof f=="number"?n[n.length-1]=f+1:(s=!0,n[n.length-1]=""),o=void 0}}})}catch(c){if(c!==r)throw c}return{path:n,previousNode:o,isAtPropertyKey:s,matches:c=>{let l=0;for(let u=0;l<c.length&&u<n.length;u++)if(c[l]===n[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function VO(t,e=[],n=Ig.DEFAULT){let r=null,o=[],i=[];function s(c){Array.isArray(o)?o.push(c):r!==null&&(o[r]=c)}return DC(t,{onObjectBegin:()=>{let c={};s(c),i.push(o),o=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{o=i.pop()},onArrayBegin:()=>{let c=[];s(c),i.push(o),o=c,r=null},onArrayEnd:()=>{o=i.pop()},onLiteralValue:s,onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n),o[0]}function _C(t,e=[],n=Ig.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(c){r.type==="property"&&(r.length=c-r.offset,r=r.parent)}function i(c){return r.children.push(c),c}DC(t,{onObjectBegin:c=>{r=i({type:"object",offset:c,length:-1,parent:r,children:[]})},onObjectProperty:(c,l,u)=>{r=i({type:"property",offset:l,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:c,offset:l,length:u,parent:r})},onObjectEnd:(c,l)=>{o(c+l),r.length=c+l-r.offset,r=r.parent,o(c+l)},onArrayBegin:(c,l)=>{r=i({type:"array",offset:c,length:-1,parent:r,children:[]})},onArrayEnd:(c,l)=>{r.length=c+l-r.offset,r=r.parent,o(c+l)},onLiteralValue:(c,l,u)=>{i({type:YO(c),offset:l,length:u,parent:r,value:c}),o(l+u)},onSeparator:(c,l,u)=>{r.type==="property"&&(c===":"?r.colonOffset=l:c===","&&o(l))},onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n);let a=r.children[0];return a&&delete a.parent,a}function Pg(t,e){if(!t)return;let n=t;for(let r of e)if(typeof r=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let o=!1;for(let i of n.children)if(Array.isArray(i.children)&&i.children[0].value===r&&i.children.length===2){n=i.children[1],o=!0;break}if(!o)return}else{let o=r;if(n.type!=="array"||o<0||!Array.isArray(n.children)||o>=n.children.length)return;n=n.children[o]}return n}function xC(t){switch(t.type){case"array":return t.children.map(xC);case"object":let e=Object.create(null);for(let n of t.children){let r=n.children[1];r&&(e[n.children[0].value]=xC(r))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function DC(t,e,n=Ig.DEFAULT){let r=_g(t,!1),o=[],i=0;function s(D){return D?()=>i===0&&D(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function a(D){return D?b=>i===0&&D(b,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function c(D){return D?b=>i===0&&D(b,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice()):()=>!0}function l(D){return D?()=>{i>0?i++:D(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice())===!1&&(i=1)}:()=>!0}function u(D){return D?()=>{i>0&&i--,i===0&&D(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:()=>!0}let f=l(e.onObjectBegin),m=c(e.onObjectProperty),d=u(e.onObjectEnd),p=l(e.onArrayBegin),h=u(e.onArrayEnd),g=c(e.onLiteralValue),v=a(e.onSeparator),C=s(e.onComment),w=a(e.onError),y=n&&n.disallowComments,S=n&&n.allowTrailingComma;function I(){for(;;){let D=r.scan();switch(r.getTokenError()){case 4:x(14);break;case 5:x(15);break;case 3:x(13);break;case 1:y||x(11);break;case 2:x(12);break;case 6:x(16);break}switch(D){case 12:case 13:y?x(10):C();break;case 16:x(1);break;case 15:case 14:break;default:return D}}}function x(D,b=[],R=[]){if(w(D),b.length+R.length>0){let L=r.getToken();for(;L!==17;){if(b.indexOf(L)!==-1){I();break}else if(R.indexOf(L)!==-1)break;L=I()}}}function A(D){let b=r.getTokenValue();return D?g(b):(m(b),o.push(b)),I(),!0}function F(){switch(r.getToken()){case 11:let D=r.getTokenValue(),b=Number(D);isNaN(b)&&(x(2),b=0),g(b);break;case 7:g(null);break;case 8:g(!0);break;case 9:g(!1);break;default:return!1}return I(),!0}function k(){return r.getToken()!==10?(x(3,[],[2,5]),!1):(A(!1),r.getToken()===6?(v(":"),I(),T()||x(4,[],[2,5])):x(5,[],[2,5]),o.pop(),!0)}function E(){f(),I();let D=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(D||x(4,[],[]),v(","),I(),r.getToken()===2&&S)break}else D&&x(6,[],[]);k()||x(4,[],[2,5]),D=!0}return d(),r.getToken()!==2?x(7,[2],[]):I(),!0}function _(){p(),I();let D=!0,b=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(b||x(4,[],[]),v(","),I(),r.getToken()===4&&S)break}else b&&x(6,[],[]);D?(o.push(0),D=!1):o[o.length-1]++,T()||x(4,[],[4,5]),b=!0}return h(),D||o.pop(),r.getToken()!==4?x(8,[4],[]):I(),!0}function T(){switch(r.getToken()){case 3:return _();case 1:return E();case 10:return A(!0);default:return F()}}return I(),r.getToken()===17?n.allowEmptyContent?!0:(x(4,[],[]),!1):T()?(r.getToken()!==17&&x(9,[],[]),!0):(x(4,[],[]),!1)}function YO(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}function qO(t,e,n,r){let o=e.slice(),s=_C(t,[]),a,c;for(;o.length>0&&(c=o.pop(),a=Pg(s,o),a===void 0&&n!==void 0);)typeof c=="string"?n={[c]:n}:n=[n];if(a)if(a.type==="object"&&typeof c=="string"&&Array.isArray(a.children)){let l=Pg(a,[c]);if(l!==void 0)if(n===void 0){if(!l.parent)throw new Error("Malformed AST");let u=a.children.indexOf(l.parent),f,m=l.parent.offset+l.parent.length;if(u>0){let d=a.children[u-1];f=d.offset+d.length}else f=a.offset+1,a.children.length>1&&(m=a.children[1].offset);return rf(t,{offset:f,length:m-f,content:""},r)}else return rf(t,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r);else{if(n===void 0)return[];let u=`${JSON.stringify(c)}: ${JSON.stringify(n)}`,f=r.getInsertionIndex?r.getInsertionIndex(a.children.map(d=>d.children[0].value)):a.children.length,m;if(f>0){let d=a.children[f-1];m={offset:d.offset+d.length,length:0,content:","+u}}else a.children.length===0?m={offset:a.offset+1,length:0,content:u}:m={offset:a.offset+1,length:0,content:u+","};return rf(t,m,r)}}else if(a.type==="array"&&typeof c=="number"&&Array.isArray(a.children)){let l=c;if(l===-1){let u=`${JSON.stringify(n)}`,f;if(a.children.length===0)f={offset:a.offset+1,length:0,content:u};else{let m=a.children[a.children.length-1];f={offset:m.offset+m.length,length:0,content:","+u}}return rf(t,f,r)}else if(n===void 0&&a.children.length>=0){let u=c,f=a.children[u],m;if(a.children.length===1)m={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===u){let d=a.children[u-1],p=d.offset+d.length,h=a.offset+a.length;m={offset:p,length:h-2-p,content:""}}else m={offset:f.offset,length:a.children[u+1].offset-f.offset,content:""};return rf(t,m,r)}else if(n!==void 0){let u,f=`${JSON.stringify(n)}`;if(!r.isArrayInsertion&&a.children.length>c){let m=a.children[c];u={offset:m.offset,length:m.length,content:f}}else if(a.children.length===0||c===0)u={offset:a.offset+1,length:0,content:a.children.length===0?f:f+","};else{let m=c>a.children.length?a.children.length:c,d=a.children[m-1];u={offset:d.offset+d.length,length:0,content:","+f}}return rf(t,u,r)}else throw new Error(`Can not ${n===void 0?"remove":r.isArrayInsertion?"insert":"modify"} Array index ${l} as length is not sufficient`)}else throw new Error(`Can not add ${typeof c!="number"?"index":"property"} to parent of type ${a.type}`);else{if(n===void 0)throw new Error("Can not delete in empty document");return rf(t,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(n)},r)}}function rf(t,e,n){if(!n.formattingOptions)return[e];let r=IC(t,e),o=e.offset,i=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;o>0&&!Dg(r,o-1);)o--;for(;i<r.length&&!Dg(r,i);)i++}let s=U0(r,{offset:o,length:i-o},{...n.formattingOptions,keepLines:!1});for(let c=s.length-1;c>=0;c--){let l=s[c];r=IC(r,l),o=Math.min(o,l.offset),i=Math.max(i,l.offset+l.length),i+=l.content.length-l.length}let a=t.length-(r.length-i)-o;return[{offset:o,length:a,content:r.substring(o,i)}]}function IC(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}var GO;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(GO||(GO={}));var zO;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(zO||(zO={}));var JO=jO,$e=VO,of=_C,rs=Pg;var PC=xC;var KO;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(KO||(KO={}));function bn(t,e,n,r){return qO(t,e,n,r)}function Do(t,e){let n=e.slice(0).sort((o,i)=>{let s=o.offset-i.offset;return s===0?o.length-i.length:s}),r=t.length;for(let o=n.length-1;o>=0;o--){let i=n[o];if(i.offset+i.length<=r)t=IC(t,i);else throw new Error("Overlapping edit");r=i.offset}return t}var Ht=Y(require("fs")),Ms=require("util"),r7="\\\\.\\pipe\\";function Cr(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(n?process.platform==="win32"&&n.code==="EBUSY"&&t.startsWith(r7):r.isFile())))}function XO(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(!n&&r.isDirectory())))}function ZO(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(!n&&r.isSocket())))}var at=(0,Ms.promisify)(Ht.readFile),bg=(0,Ms.promisify)(Ht.writeFile),Cve=(0,Ms.promisify)(Ht.appendFile),rl=(0,Ms.promisify)(Ht.rename),ol=(0,Ms.promisify)(Ht.readdir),QO=(0,Ms.promisify)(Ht.unlink),os=t=>new Promise((e,n)=>Ht.mkdir(t,{recursive:!0},r=>r?n(r):e())),e1=(0,Ms.promisify)(Ht.rmdir),il=(0,Ms.promisify)(Ht.rm),Eve=(0,Ms.promisify)(Ht.copyFile);function sf(t,e,n,r=!1){let o=t.relative(e,n);return(r||!!o)&&!o.startsWith("..")&&!t.isAbsolute(o)}var Ue=Y(require("vscode")),Ar=require("vscode"),oC=Y(require("path"));var Ql=Y(require("path")),Mp=Y($r());var o1=Y(require("os")),Rg=Y(require("fs")),i1=Y(require("path"));var $0=require("events"),Hs=class{nodeEmitter=new $0.EventEmitter;disposables;constructor(...e){this.disposables=e}event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}});fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners(),this.disposables.forEach(e=>e.dispose())}},bC=class{nodeEmitter=new $0.EventEmitter;event=e=>{let n=r=>r.results.push(e(r.data));return this.nodeEmitter.on("event",n),{dispose:()=>{this.nodeEmitter.off("event",n)}}};fire(e){let n=[];return this.nodeEmitter.emit("event",{data:e,results:n}),n}dispose(){this.nodeEmitter.removeAllListeners()}};function t1(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:e,package:t,getTelemetryLevel:()=>"off"}}function af(t){return t.replaceAll(/ghcr.io\/devcontainers\/([^/,]+)\/([^/,]+)/g,"devcontainers-$1:$2")}var nr=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(nr||{}),H0={info:3,debug:2,trace:1},o7=Object.keys(H0).reduce((t,e)=>(t[H0[e]]=e,t),[]);function RC(t){return H0[t]||3}function no(t){return o7[t]||3}var Fe={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Bs=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function B0(t,e){let n=!!e;return{event:r=>{n&&(n=!1,t.forEach(o=>o.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(o=>o.event(r))}}}function W0(t,e){let n=a7(t);return{event(r){let o=s7(r,e());o&&n.write(o)},join:n.join}}function j0(t,e,n){return{event(r){let o=i7(r,e(),n.getTime());o&&t(o)}}}function sn(t,e=2){return{event:t.event,write(n,r=e){t.event({type:"text",level:r,timestamp:Date.now(),text:n})},raw(n,r=e){t.event({type:"raw",level:r,timestamp:Date.now(),text:n})},start(n,r=e){let o=Date.now();return t.event({type:"start",level:r,timestamp:o,text:n}),o},stop(n,r,o=e){t.event({type:"stop",level:o,timestamp:Date.now(),text:n,startTimestamp:r})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function i7(t,e,n){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Tg(n1,`${t.timestamp-n} ms`)}] ${TC(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Tg(f7,`[${t.timestamp-n} ms] Start`)}: ${TC(t.text)}`:`[${Tg(n1,`${t.timestamp-n} ms`)}] Start: ${TC(t.text)}`;case"stop":return 1>=e?`${Tg(u7,`[${t.timestamp-n} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${TC(t.text)}`:void 0;default:throw s1(t)}}function TC(t){return m7(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function s7(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${M0(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${M0(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${M0(t.text)}`:void 0;default:throw s1(t)}}function M0(t){return t.replace(Bs,"").replace(/(\r?\n)?$/,o1.EOL)}function s1(t){return new Error(`Unknown log event type: ${t.type}`)}function a7(t){let e=[],n=!1,r,o;function i(){n=!1,o&&!e.length&&(r=void 0,o(),o=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!n&&e.length){n=!0;let l=e.join("");e.length=0,Rg.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?Rg.mkdir(i1.dirname(t),{recursive:!0},f=>{f?(i(),console.error(f)):Rg.appendFile(t,l,m=>{i(),m&&console.error(m),s()})}):(i(),console.error(u))),i(),s()})}}return{write:s,join:()=>r||(n?r=new Promise(a=>o=a):Promise.resolve())}}var c7="38;2;143;99;79",a1="38;2;99;143;79",l7="38;2;86;156;214",u7=c7,f7=a1,n1=a1,d7=l7;function Tg(t,e){return e.split(`
`).map(n=>`\x1B[1m\x1B[${t}m${n}\x1B[39m\x1B[22m`).join(`
`)}function m7(t){let e,n=0,r=[];for(Bs.lastIndex=0;e=Bs.exec(t);)r.push(r1(t.substring(n,e.index))),r.push(e[0]),n=Bs.lastIndex;return r.push(r1(t.substr(n))),r.join("")}function r1(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,n,r=0,o=[];for(;n=e.exec(t);)o.push(t.substring(r,n.index)),o.push(Tg(d7,n[0])),r=e.lastIndex;return o.push(t.substr(r)),o.join("")}function ot(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[31m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}function V0(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[33m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var pe=class extends Error{description;detail;step;originalError;manageContainer=!1;params;containerId;dockerParams;volumeName;repositoryPath;folderPath;containerProperties;config;actions=[];data={};constructor(e){var n;super(e.originalError&&e.originalError.message||e.description),Object.assign(this,e),this.actions||(this.actions=[]),this.data||(this.data={}),(n=this.originalError)!=null&&n.stack&&(this.stack=this.originalError.stack)}};var Se=Y(require("path")),wx=Y(require("fs")),$Y=Y(OC()),JR=require("string_decoder"),Ml=Y(zE());var Ip=Y(require("crypto")),MY=Y(vT()),$l=Y($r()),HY=Y(tB()),BY=Y(XB());var dse=Y(require("path")),HR=require("string_decoder");var rx=Y(require("path")),zV=Y(require("stream")),KV=Y(require("os")),_p=Y(require("child_process")),$v=require("string_decoder");var OV=Y(require("path")),UV=Y(require("assert"));var ZB;(()=>{"use strict";var t={975:E=>{function _(b){if(typeof b!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(b))}function T(b,R){for(var L,N="",B=0,W=-1,z=0,V=0;V<=b.length;++V){if(V<b.length)L=b.charCodeAt(V);else{if(L===47)break;L=47}if(L===47){if(!(W===V-1||z===1))if(W!==V-1&&z===2){if(N.length<2||B!==2||N.charCodeAt(N.length-1)!==46||N.charCodeAt(N.length-2)!==46){if(N.length>2){var q=N.lastIndexOf("/");if(q!==N.length-1){q===-1?(N="",B=0):B=(N=N.slice(0,q)).length-1-N.lastIndexOf("/"),W=V,z=0;continue}}else if(N.length===2||N.length===1){N="",B=0,W=V,z=0;continue}}R&&(N.length>0?N+="/..":N="..",B=2)}else N.length>0?N+="/"+b.slice(W+1,V):N=b.slice(W+1,V),B=V-W-1;W=V,z=0}else L===46&&z!==-1?++z:z=-1}return N}var D={resolve:function(){for(var b,R="",L=!1,N=arguments.length-1;N>=-1&&!L;N--){var B;N>=0?B=arguments[N]:(b===void 0&&(b=process.cwd()),B=b),_(B),B.length!==0&&(R=B+"/"+R,L=B.charCodeAt(0)===47)}return R=T(R,!L),L?R.length>0?"/"+R:"/":R.length>0?R:"."},normalize:function(b){if(_(b),b.length===0)return".";var R=b.charCodeAt(0)===47,L=b.charCodeAt(b.length-1)===47;return(b=T(b,!R)).length!==0||R||(b="."),b.length>0&&L&&(b+="/"),R?"/"+b:b},isAbsolute:function(b){return _(b),b.length>0&&b.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var b,R=0;R<arguments.length;++R){var L=arguments[R];_(L),L.length>0&&(b===void 0?b=L:b+="/"+L)}return b===void 0?".":D.normalize(b)},relative:function(b,R){if(_(b),_(R),b===R||(b=D.resolve(b))===(R=D.resolve(R)))return"";for(var L=1;L<b.length&&b.charCodeAt(L)===47;++L);for(var N=b.length,B=N-L,W=1;W<R.length&&R.charCodeAt(W)===47;++W);for(var z=R.length-W,V=B<z?B:z,q=-1,ce=0;ce<=V;++ce){if(ce===V){if(z>V){if(R.charCodeAt(W+ce)===47)return R.slice(W+ce+1);if(ce===0)return R.slice(W+ce)}else B>V&&(b.charCodeAt(L+ce)===47?q=ce:ce===0&&(q=0));break}var Be=b.charCodeAt(L+ce);if(Be!==R.charCodeAt(W+ce))break;Be===47&&(q=ce)}var mt="";for(ce=L+q+1;ce<=N;++ce)ce!==N&&b.charCodeAt(ce)!==47||(mt.length===0?mt+="..":mt+="/..");return mt.length>0?mt+R.slice(W+q):(W+=q,R.charCodeAt(W)===47&&++W,R.slice(W))},_makeLong:function(b){return b},dirname:function(b){if(_(b),b.length===0)return".";for(var R=b.charCodeAt(0),L=R===47,N=-1,B=!0,W=b.length-1;W>=1;--W)if((R=b.charCodeAt(W))===47){if(!B){N=W;break}}else B=!1;return N===-1?L?"/":".":L&&N===1?"//":b.slice(0,N)},basename:function(b,R){if(R!==void 0&&typeof R!="string")throw new TypeError('"ext" argument must be a string');_(b);var L,N=0,B=-1,W=!0;if(R!==void 0&&R.length>0&&R.length<=b.length){if(R.length===b.length&&R===b)return"";var z=R.length-1,V=-1;for(L=b.length-1;L>=0;--L){var q=b.charCodeAt(L);if(q===47){if(!W){N=L+1;break}}else V===-1&&(W=!1,V=L+1),z>=0&&(q===R.charCodeAt(z)?--z==-1&&(B=L):(z=-1,B=V))}return N===B?B=V:B===-1&&(B=b.length),b.slice(N,B)}for(L=b.length-1;L>=0;--L)if(b.charCodeAt(L)===47){if(!W){N=L+1;break}}else B===-1&&(W=!1,B=L+1);return B===-1?"":b.slice(N,B)},extname:function(b){_(b);for(var R=-1,L=0,N=-1,B=!0,W=0,z=b.length-1;z>=0;--z){var V=b.charCodeAt(z);if(V!==47)N===-1&&(B=!1,N=z+1),V===46?R===-1?R=z:W!==1&&(W=1):R!==-1&&(W=-1);else if(!B){L=z+1;break}}return R===-1||N===-1||W===0||W===1&&R===N-1&&R===L+1?"":b.slice(R,N)},format:function(b){if(b===null||typeof b!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof b);return function(R,L){var N=L.dir||L.root,B=L.base||(L.name||"")+(L.ext||"");return N?N===L.root?N+B:N+"/"+B:B}(0,b)},parse:function(b){_(b);var R={root:"",dir:"",base:"",ext:"",name:""};if(b.length===0)return R;var L,N=b.charCodeAt(0),B=N===47;B?(R.root="/",L=1):L=0;for(var W=-1,z=0,V=-1,q=!0,ce=b.length-1,Be=0;ce>=L;--ce)if((N=b.charCodeAt(ce))!==47)V===-1&&(q=!1,V=ce+1),N===46?W===-1?W=ce:Be!==1&&(Be=1):W!==-1&&(Be=-1);else if(!q){z=ce+1;break}return W===-1||V===-1||Be===0||Be===1&&W===V-1&&W===z+1?V!==-1&&(R.base=R.name=z===0&&B?b.slice(1,V):b.slice(z,V)):(z===0&&B?(R.name=b.slice(1,W),R.base=b.slice(1,V)):(R.name=b.slice(z,W),R.base=b.slice(z,V)),R.ext=b.slice(W,V)),z>0?R.dir=b.slice(0,z-1):B&&(R.dir="/"),R},sep:"/",delimiter:":",win32:null,posix:null};D.posix=D,E.exports=D}},e={};function n(E){var _=e[E];if(_!==void 0)return _.exports;var T=e[E]={exports:{}};return t[E](T,T.exports,n),T.exports}n.d=(E,_)=>{for(var T in _)n.o(_,T)&&!n.o(E,T)&&Object.defineProperty(E,T,{enumerable:!0,get:_[T]})},n.o=(E,_)=>Object.prototype.hasOwnProperty.call(E,_),n.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var r={};let o;n.r(r),n.d(r,{URI:()=>m,Utils:()=>k}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let i=/^\w[\w\d+.-]*$/,s=/^\//,a=/^\/\//;function c(E,_){if(!E.scheme&&_)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${E.authority}", path: "${E.path}", query: "${E.query}", fragment: "${E.fragment}"}`);if(E.scheme&&!i.test(E.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(E.path){if(E.authority){if(!s.test(E.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(E.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let l="",u="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static isUri(_){return _ instanceof m||!!_&&typeof _.authority=="string"&&typeof _.fragment=="string"&&typeof _.path=="string"&&typeof _.query=="string"&&typeof _.scheme=="string"&&typeof _.fsPath=="string"&&typeof _.with=="function"&&typeof _.toString=="function"}scheme;authority;path;query;fragment;constructor(_,T,D,b,R,L=!1){typeof _=="object"?(this.scheme=_.scheme||l,this.authority=_.authority||l,this.path=_.path||l,this.query=_.query||l,this.fragment=_.fragment||l):(this.scheme=function(N,B){return N||B?N:"file"}(_,L),this.authority=T||l,this.path=function(N,B){switch(N){case"https":case"http":case"file":B?B[0]!==u&&(B=u+B):B=u}return B}(this.scheme,D||l),this.query=b||l,this.fragment=R||l,c(this,L))}get fsPath(){return C(this,!1)}with(_){if(!_)return this;let{scheme:T,authority:D,path:b,query:R,fragment:L}=_;return T===void 0?T=this.scheme:T===null&&(T=l),D===void 0?D=this.authority:D===null&&(D=l),b===void 0?b=this.path:b===null&&(b=l),R===void 0?R=this.query:R===null&&(R=l),L===void 0?L=this.fragment:L===null&&(L=l),T===this.scheme&&D===this.authority&&b===this.path&&R===this.query&&L===this.fragment?this:new p(T,D,b,R,L)}static parse(_,T=!1){let D=f.exec(_);return D?new p(D[2]||l,I(D[4]||l),I(D[5]||l),I(D[7]||l),I(D[9]||l),T):new p(l,l,l,l,l)}static file(_){let T=l;if(o&&(_=_.replace(/\\/g,u)),_[0]===u&&_[1]===u){let D=_.indexOf(u,2);D===-1?(T=_.substring(2),_=u):(T=_.substring(2,D),_=_.substring(D)||u)}return new p("file",T,_,l,l)}static from(_){let T=new p(_.scheme,_.authority,_.path,_.query,_.fragment);return c(T,!0),T}toString(_=!1){return w(this,_)}toJSON(){return this}static revive(_){if(_){if(_ instanceof m)return _;{let T=new p(_);return T._formatted=_.external,T._fsPath=_._sep===d?_.fsPath:null,T}}return _}}let d=o?1:void 0;class p extends m{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath}toString(_=!1){return _?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)}toJSON(){let _={$mid:1};return this._fsPath&&(_.fsPath=this._fsPath,_._sep=d),this._formatted&&(_.external=this._formatted),this.path&&(_.path=this.path),this.scheme&&(_.scheme=this.scheme),this.authority&&(_.authority=this.authority),this.query&&(_.query=this.query),this.fragment&&(_.fragment=this.fragment),_}}let h={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function g(E,_,T){let D,b=-1;for(let R=0;R<E.length;R++){let L=E.charCodeAt(R);if(L>=97&&L<=122||L>=65&&L<=90||L>=48&&L<=57||L===45||L===46||L===95||L===126||_&&L===47||T&&L===91||T&&L===93||T&&L===58)b!==-1&&(D+=encodeURIComponent(E.substring(b,R)),b=-1),D!==void 0&&(D+=E.charAt(R));else{D===void 0&&(D=E.substr(0,R));let N=h[L];N!==void 0?(b!==-1&&(D+=encodeURIComponent(E.substring(b,R)),b=-1),D+=N):b===-1&&(b=R)}}return b!==-1&&(D+=encodeURIComponent(E.substring(b))),D!==void 0?D:E}function v(E){let _;for(let T=0;T<E.length;T++){let D=E.charCodeAt(T);D===35||D===63?(_===void 0&&(_=E.substr(0,T)),_+=h[D]):_!==void 0&&(_+=E[T])}return _!==void 0?_:E}function C(E,_){let T;return T=E.authority&&E.path.length>1&&E.scheme==="file"?`//${E.authority}${E.path}`:E.path.charCodeAt(0)===47&&(E.path.charCodeAt(1)>=65&&E.path.charCodeAt(1)<=90||E.path.charCodeAt(1)>=97&&E.path.charCodeAt(1)<=122)&&E.path.charCodeAt(2)===58?_?E.path.substr(1):E.path[1].toLowerCase()+E.path.substr(2):E.path,o&&(T=T.replace(/\//g,"\\")),T}function w(E,_){let T=_?v:g,D="",{scheme:b,authority:R,path:L,query:N,fragment:B}=E;if(b&&(D+=b,D+=":"),(R||b==="file")&&(D+=u,D+=u),R){let W=R.indexOf("@");if(W!==-1){let z=R.substr(0,W);R=R.substr(W+1),W=z.lastIndexOf(":"),W===-1?D+=T(z,!1,!1):(D+=T(z.substr(0,W),!1,!1),D+=":",D+=T(z.substr(W+1),!1,!0)),D+="@"}R=R.toLowerCase(),W=R.lastIndexOf(":"),W===-1?D+=T(R,!1,!0):(D+=T(R.substr(0,W),!1,!0),D+=R.substr(W))}if(L){if(L.length>=3&&L.charCodeAt(0)===47&&L.charCodeAt(2)===58){let W=L.charCodeAt(1);W>=65&&W<=90&&(L=`/${String.fromCharCode(W+32)}:${L.substr(3)}`)}else if(L.length>=2&&L.charCodeAt(1)===58){let W=L.charCodeAt(0);W>=65&&W<=90&&(L=`${String.fromCharCode(W+32)}:${L.substr(2)}`)}D+=T(L,!0,!1)}return N&&(D+="?",D+=T(N,!1,!1)),B&&(D+="#",D+=_?B:g(B,!1,!1)),D}function y(E){try{return decodeURIComponent(E)}catch{return E.length>3?E.substr(0,3)+y(E.substr(3)):E}}let S=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function I(E){return E.match(S)?E.replace(S,_=>y(_)):E}var x=n(975);let A=x.posix||x,F="/";var k;(function(E){E.joinPath=function(_,...T){return _.with({path:A.join(_.path,...T)})},E.resolvePath=function(_,...T){let D=_.path,b=!1;D[0]!==F&&(D=F+D,b=!0);let R=A.resolve(D,...T);return b&&R[0]===F&&!_.authority&&(R=R.substring(1)),_.with({path:R})},E.dirname=function(_){if(_.path.length===0||_.path===F)return _;let T=A.dirname(_.path);return T.length===1&&T.charCodeAt(0)===46&&(T=""),_.with({path:T})},E.basename=function(_){return A.basename(_.path)},E.extname=function(_){return A.extname(_.path)}})(k||(k={})),ZB=r})();var{URI:Ce,Utils:Lo}=ZB;var QB=Y(require("path"));var Pl=Y($r());function It(t,e){if(Sv(e)){let n=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:n,configFolderPath:n}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Sv(t){return QB.extname(t)===".code-workspace"}async function SS(t,e){if(e.isWorkspaceFile)try{let n=e.rootFolderPath,r=(await t.readFile(e.workspaceOrFolderPath)).toString(),i=$e(r).folders;if(i&&i.length>0){for(let s of i){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return Pl.t("Workspace contains an absolute folder path '{0}'.",a);c=t.path.resolve(n,a)}else{let l=s.uri;return l?Ce.parse(l).scheme!=="file"?Pl.t("Workspace contains folder '{0}' not on the local file system.",l):Pl.t("Workspace contains an absolute folder path '{0}'.",l):Pl.t("Workspace contains a folder that defines neither a path nor a URI.")}if(!soe(t,c,n))return Pl.t("Folder '{0}' is not a subfolder of shared root folder '{1}'.",c,n)}return}return Pl.t("Workspace does not define any folders")}catch(n){return Pl.t("Problems loading workspace file {0}: {1}",e.workspaceOrFolderPath,n&&(n.message||n.toString()))}}function soe(t,e,n){return e===n?!0:!e||!n||n.length>e.length||e.length>n.length&&e.charAt(n.length)!==t.path.sep?!1:aoe(t.platform,n,e.substr(0,n.length))}function aoe(t,e,n){return t==="linux"?e===n:e.toLowerCase()===n.toLowerCase()}var lr=Y(require("path")),WS=Y(zE()),PR=Y(require("crypto")),HS=Y(xv()),TV=require("string_decoder");var bR=Y($r());var mp=Y(require("path"));async function rj(t,e){let n=await Aoe(t),r=n["agent-socket"];if(!r){e.write("gpg-agent: No agent-socket found in container.");return}let o=n.homedir;try{let{stdout:a}=await t.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim()){e.write("gpg-agent: Private keys found in container, not forwarding.");return}}catch{}let i=!1,s=n["keyboxd-socket"];if(s)try{await t.exec(`grep -e '^s*use-keyboxds*$' '${o}/common.conf' 2>/dev/null`),i=!0}catch{}return{homedir:o,gpgSocket:r,keyboxdSocket:s,useKeyboxd:i}}async function oj(t,e,n,r){let o=await Loe(t,r),i=o["agent-extra-socket"];if(!i){r.write(`gpg-agent: No agent-extra-socket found on ${t.type} host.`);return}let s=o.homedir,a=!1,c=o["keyboxd-socket"];if(c)try{let w=(await t.readFile(t.path.join(s,"common.conf"))).toString();a=/^\s*use-keyboxd\s*$/m.test(w)}catch{}let l=mp.posix.join(n.homedir,"pubring.kbx"),u=await Li(e,l);u&&r.write(`GPG forwarding: ${l} exists in container.`);let f=mp.posix.join(n.homedir,"pubring.gpg"),m=await Li(e,f);m&&r.write(`GPG forwarding: ${f} exists in container.`);let d=mp.posix.join(n.homedir,"trustdb.gpg"),p=await Li(e,d);p&&r.write(`GPG forwarding: ${d} exists in container.`);let h=a&&n.keyboxdSocket&&!n.useKeyboxd&&!u&&!m,g=a&&(n.useKeyboxd||h),v=[],C=(async()=>{if(await e.exec(`mkdir -p -m 700 '${mp.posix.dirname(n.gpgSocket)}'`),g)h&&await e.exec(`mkdir -p -m 700 '${n.homedir}' && echo '
use-keyboxd' >> '${mp.posix.join(n.homedir,"common.conf")}'`);else if(a||n.useKeyboxd){if(!n.useKeyboxd&&!u&&!m||n.useKeyboxd&&(await e.exec("gpg --export --export-options backup")).stdout.trim().length===0){try{let w=await X({exec:t.exec,cmd:"gpg",args:["--export","--export-options","backup"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Nf(w.stdout.byteLength)} | gpg --import --import-options restore`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import public keys: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export public keys: ${w==null?void 0:w.message}`)}try{let w=await X({exec:t.exec,cmd:"gpgsm",args:["--export","--armor"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Nf(w.stdout.byteLength)} | gpgsm --import`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import certificates: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export certificates: ${w==null?void 0:w.message}`)}}}else u||await bl(t,e,t.path.join(s,"pubring.kbx"),l,"gpg"),m||await bl(t,e,t.path.join(s,"pubring.gpg"),f,"gpg"),p||await bl(t,e,t.path.join(s,"trustdb.gpg"),d,"gpg");if((a||n.useKeyboxd)&&!p)try{let w=await X({exec:t.exec,cmd:"gpg",args:["--export-ownertrust"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Nf(w.stdout.byteLength)} | gpg --import-ownertrust`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import ownertrust: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export ownertrust: ${w==null?void 0:w.message}`)}await Foe(t,r)})();return{cliHost:t,remoteGpgSocket:n.gpgSocket,localGpgSocket:i,remoteKeyboxdSocket:g?n.keyboxdSocket:void 0,localKeyboxdSocket:g?c:void 0,importTasks:async()=>{await C;for(let w of v)await w()}}}async function Loe(t,e){try{let{stdout:n}=await X({exec:t.exec,cmd:"gpgconf",args:["--list-dirs"],output:e,print:!0});return n.toString().trim().split(/\r?\n/).reduce((r,o)=>{let i=o.indexOf(":");if(i!==-1){let s=decodeURIComponent(o.substring(i+1));t.platform==="win32"&&/^\/.\//.test(s)&&(s=`${s.charAt(1)}:${s.substring(2).replace(/\//g,"\\")}`),r[o.substring(0,i)]=s}return r},{})}catch{return{}}}async function Aoe(t){try{let{stdout:e}=await t.exec("gpgconf --list-dirs");return e.trim().split(`
`).reduce((n,r)=>{let o=r.indexOf(":");return o!==-1&&(n[r.substring(0,o)]=decodeURIComponent(r.substring(o+1))),n},{})}catch{return{}}}async function Foe(t,e){try{await X({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}var rR=Y(require("path"));async function _v(t,e,n){if(!("exec"in t)){for(let r=e,o="";r!==o;o=r,r=t.path.dirname(r))if(await t.isFile(t.path.join(r,".git","config")))return r;return}try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:n}),o=r.toString().trim();return t.path.resolve(e,o)}catch{return}}async function oR(t,e,n,r){try{return await X({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",env:n,output:r,print:"onerror"}),!0}catch(o){return(o==null?void 0:o.code)==="ENOENT"?void 0:!1}}async function aj(t,e,n,r,o){let i=r[1],s={get:"fill",store:"approve",erase:"reject"}[i];if(s===void 0)throw new Error(`Expected get, store or erase, got: ${i}`);let a=await ij(n?t:e,s,o).catch(c=>{if(n)throw c});if(!n&&(a==="ENOENT"||(a==null?void 0:a.code)!==0)){let c=await ij(t,s,o);c!=="ENOENT"&&(a=c,c.code===0&&(n=!0))}return a==="ENOENT"?{result:{stdout:"",stderr:"",code:127},preferLocalCLIHost:n}:{result:a,preferLocalCLIHost:n}}async function ij({exec:t},e,n){try{let{stdout:r,stderr:o}=await X({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(n),output:Fe});return{stdout:r.toString(),stderr:o.toString(),code:0}}catch(r){if((r==null?void 0:r.code)==="ENOENT"||(r==null?void 0:r.code)==="EPIPE")return"ENOENT";if(!(r&&r.stdout&&r.stderr))throw r;let{stdout:o,stderr:i,code:s}=r;return{stdout:o.toString(),stderr:i.toString(),code:s||0}}}async function cj(t,e,n){let r=await iR(t,e,n);if(!r)return;r.startsWith("refs/")&&(r=r.substr(5)),r.startsWith("remotes/")&&(r=r.substr(8));let o=r.indexOf("/");if(o===-1)return;let i=r.substr(0,o),s=r.substr(o+1);try{let{stdout:a}=await X({exec:t.exec,cmd:"git",args:["remote","get-url",i],cwd:e.rootFolderPath,output:n}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let l=await Moe(t,e,i,n);if(l&&s!==l)return`${c}/tree/${s}`}return c}catch{return}}async function IS(t,e,n){if(!("exec"in t)){let o=await _v(t,e.rootFolderPath,n);if(!o)return;try{return(await t.readFile(t.path.join(o,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(i){if((i==null?void 0:i.code)!=="ENOENT")throw i;return[]}}let r;try{let{stdout:o}=await X({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:n});r=o.toString()}catch{return}return Array.from(new Set(Ooe(/^[^\s]+\s+([^\s]+)/gm,r,1)))}function Ooe(t,e,n){return{[Symbol.iterator]:function*(){let r;for(;r=t.exec(e);)yield r[n],t.lastIndex===r.index&&t.lastIndex++}}}async function lj(t,e,n){return await Uoe(t,e,n)||$oe(t,e,n)}async function Uoe(t,e,n){try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:n});return!!r.toString().trim()}catch{return}}async function $oe(t,e,n){let r=await iR(t,e,n);if(r)try{let{stdout:o}=await X({exec:t.exec,cmd:"git",args:["log",`${r}..HEAD`],cwd:e.rootFolderPath,output:n});return!!o.toString().trim()}catch{return}}async function uj(t,e,n,r){let o=await iR(t,e,r);if(!o)return!1;try{let i=t.platform==="win32"?n.replace(/\\/g,"/"):n;return await X({exec:t.exec,cmd:"git",args:["cat-file","-e",`${o}:${i}`],cwd:e.rootFolderPath,output:r}),!0}catch{return!1}}async function iR(t,e,n){try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:n});return r.toString().trim()}catch{return}}async function Moe(t,e,n,r){try{let{stdout:o}=await X({exec:t.exec,cmd:"git",args:["remote","show",n],cwd:e.rootFolderPath,output:r});return(o.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function fj(t,e,n,r,o,i,s){let{extensionPath:a,onDidInput:c}=t;if(await e.isFolder(e.path.join(n,".git"))){if(s&&(e.type==="container"&&await Ai({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",n],cwd:n,output:sn(o,3)}),await Hoe(e,n,o))){let d=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env;return{gitClone:Ai({ptyExec:e.ptyExec,cmd:"git",args:["pull","--ff-only"],cwd:n,env:d,onDidInput:c,output:sn(o,3)}).catch(h=>h),gitUnshallow:void 0}}return{gitClone:void 0,gitUnshallow:void 0}}await e.mkdirp(n);let l=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env,u=[];if(r.fullClone||u.push("--depth","1"),r.branch&&u.push("--branch",r.branch),r.recurseSubmodules&&u.push("--recurse-submodules"),e.type==="container"&&r.url.startsWith("file:")){let d=e.path.join(Ce.parse(r.url).path,".git");await Ai({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",d],cwd:n,env:l,output:sn(o,3)})}let f=Ai({ptyExec:e.ptyExec,cmd:"git",args:["clone",...u,r.url,"."],cwd:n,env:l,onDidInput:c,output:sn(o,3)}),m=r.fullClone?f:(async()=>(await f,await Ai({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:n,env:l,output:i}),Ai({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:n,env:l,onDidInput:c,output:i})))();return{gitClone:f,gitUnshallow:m}}async function Hoe(t,e,n){return(await X({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e,output:n}).catch(o=>o)).stdout.toString().trim()===""}async function PS(t,e,n){let r=await Dv(t,e,[".gitconfig"],"git"," && grep -e '^\\[' ~/.gitconfig | grep -v -E '^\\[(filter|safe)([[:blank:]]+|\\])'"),o=await Boe(t,e,n);(r||o)&&(await Woe(t,e.shellServer),joe(t,e).catch(i=>{t.output.write(`Error copying allowed signers: ${(i==null?void 0:i.stack)||(i==null?void 0:i.message)||i}`,5)}))}var dj=["git","config"];async function Boe(t,e,n){let{cliHost:r}=t,o=await sj(r);if(!await r.isFile(o)&&(r.type==="local"||(r=await qr(process.cwd(),t.loadNativeModule,t.output),o=await sj(r),!await r.isFile(o))))return!1;let i=(async()=>{let s=await n,a=s.XDG_CONFIG_HOME?[s.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return rR.posix.join(...a,...dj)})();return bl(r,e.shellServer,o,i,"git")}async function sj(t){let{env:e}=t,n=e.XDG_CONFIG_HOME?[e.XDG_CONFIG_HOME]:[await t.homedir(),".config"];return t.path.join(...n,...dj)}async function Woe(t,e){await e.exec(`# Cleaning up git config
for key in core.editor core.sshCommand gpg.program gpg.openpgp.program gpg.x509.program gpg.ssh.program
do
	value="$(git config --global --get $key)"
	executable="\${value%% *}"
	([ -z "$executable" ] || [ "$executable" = "${t.product.applicationName}" ]) && continue
	command -v "$executable" >/dev/null 2>&1 || (echo "Removing Git config key: $key = $value" && git config --global --unset $key)
done
git config --global --unset http.sslBackend || true`)}async function joe(t,e){let{cliHost:n,output:r}=t,{homeFolder:o,shellServer:i}=e,s=await Voe(n,"gpg.ssh.allowedSignersFile",r);if(!s)return;let a=await n.homedir(),c=/^~[/\\]/.test(s)?n.path.join(a,s.substring(2)):s,l=n.path.resolve(a,c);r.write(`Copying allowed signers file: ${l}`);let u=n.path.relative(a,l),f=n.platform==="win32"?u.replace(/\\/g,"/"):u,m=rR.posix.resolve(o,f);await bl(n,i,l,m,"ssh")&&await i.exec(`git config --global gpg.ssh.allowedSignersFile '${m}'`)}async function Voe(t,e,n){try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["config","--global","--get",e],output:n}),o=r.toString();return t.platform==="win32"&&o.endsWith(`\r
`)?o.substring(0,o.length-2):o.endsWith(`
`)?o.substring(0,o.length-1):o}catch{return}}var Rl=require("stream");async function mj(t,e){let{stdout:n}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return n.split("\0").map(r=>{let o=r.indexOf("=");return o!==-1?[r.slice(0,o),r.slice(o+1)]:[]}).reduce((r,[o,i])=>(o&&(r[o]=i),r),{})}async function sR(t){let e=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd || echo ; readlink /proc/$pid/ns/mnt || echo ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:n}=await t.exec(e,{logOutput:!1}),r=6,o=n.split(`
---
`),i=o.pop().trim();return{processes:o.map(a=>a.split(`
`)).filter(a=>a.length>=r).map(([a,c,l,u,f,m])=>{let d=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:d[1],pgrp:d[2],cwd:c,mntNS:l,cmd:m.replace(/\0/g," "),env:f.split("\0").reduce((p,h)=>{let g=h.indexOf("=");return g!==-1&&(p[h.substr(0,g)]=h.substr(g+1)),p},{})}}),mntNS:i}}function pj(t){let e={};return t.forEach(n=>e[n.pid]={process:n,childProcesses:[]}),t.filter(n=>n.ppid).forEach(n=>{var r;return(r=e[n.ppid])==null?void 0:r.childProcesses.push(e[n.pid])}),e}function aR(t,e="  ",n="  "){return`${n}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(r=>aR(r,e,n+e))}`}var Fi=Y(require("path")),wj=Y(require("fs"));async function ni(t,e=process.cwd(),n=process.env){if(process.platform!=="win32")return t;if(Fi.isAbsolute(t))return await cR(t)||t;if(/[/\\]/.test(t)){let s=Fi.join(e,t);return await cR(s)||s}let r,o;if(n){for(let s of Object.keys(n))if(s.toLowerCase()==="path"){let a=n[s];typeof a=="string"&&(r=a,o=a.split(Fi.delimiter).filter(Boolean),o.push(Fi.join(n.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){let s=new Error(`No PATH to look up executable '${t}'.`);throw s.code="ENOENT",s}for(let s of o){let a;Fi.isAbsolute(s)?a=Fi.join(s,t):a=Fi.join(e,s,t);let c=await cR(a);if(c)return c}let i=new Error(`Exectuable '${t}' not found on PATH '${r}'.`);throw i.code="ENOENT",i}var hj=process.env.PATHEXT,gj=hj?hj.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function cR(t){if(gj.indexOf(Fi.extname(t))!==-1)return await vj(t)?t:void 0;for(let e of gj){let n=t+e;if(await vj(n))return n}}function vj(t){return new Promise(e=>wj.stat(t,(n,r)=>e(!n&&r.isFile())))}var lR="dev-containers-",yj="credentials not found in native keychain";async function Sj(t,e,n,r,o,i){let s=await Cj(n?t:e,r,o,i).catch(a=>{if(n)throw a});return!n&&(s==null?void 0:s.code)!==0&&(s=await Cj(t,r,o,i),s.code===0&&(n=!0)),{result:s,preferLocalCLIHost:n}}async function Cj(t,e,n,r){let o,i=e[1];try{let s=i==="store"?JSON.parse(n).ServerURL:n.trim(),a=await Yoe(t,s,r);if(!a)return{stdout:i==="get"?yj:"Docker credential helper not found.",stderr:"",code:1};if("identitytoken"in a)return i!=="get"?{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1}:{stdout:JSON.stringify({ServerURL:s,Username:"<token>",Secret:a.identitytoken}),stderr:"",code:0};if("auth"in a){if(i!=="get")return{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1};let[u,f]=Buffer.from(a.auth,"base64").toString().split(":");return{stdout:JSON.stringify({ServerURL:s,Username:u,Secret:f}),stderr:"",code:0}}o=`docker-credential-${a.helper}`;let{stdout:c,stderr:l}=await X({exec:t.exec,cmd:o,args:e.slice(1),stdin:Buffer.from(n),output:Fe});return{stdout:c.toString(),stderr:l.toString(),code:0}}catch(s){if(o&&((s==null?void 0:s.code)==="ENOENT"||(s==null?void 0:s.code)==="EPIPE"))return{stdout:i==="get"?yj:`Docker credential helper '${o}' not found: ${(s==null?void 0:s.message)||String(s)}.`,stderr:"",code:1};if(!(s&&s.stdout&&s.stderr))throw s;let{stdout:a,stderr:c,code:l}=s;return{stdout:a.toString(),stderr:c.toString(),code:l||0}}}async function Yoe(t,e,n){var o,i,s,a,c;n.write(`Looking up Docker credential helper for '${e}'.`);try{let l=$e((await t.readFile(t.path.join(await t.homedir(),".docker","config.json"))).toString()),u=Ce.parse(e).authority||e,f=(o=l==null?void 0:l.credHelpers)==null?void 0:o[u];if(f)return{helper:f};let m=(s=(i=l==null?void 0:l.auths)==null?void 0:i[e])==null?void 0:s.identitytoken;if(m)return{identitytoken:m};let d=(c=(a=l==null?void 0:l.auths)==null?void 0:a[e])==null?void 0:c.auth;if(d)return{auth:d};if(l!=null&&l.credsStore)return{helper:l.credsStore}}catch(l){(l==null?void 0:l.code)!=="ENOENT"&&n.write(`Error reading Docker config: ${(l==null?void 0:l.message)||String(l)}.`)}let r=await xj(t);return r?{helper:r}:void 0}async function uR(t,e){let n=t.path.join(await t.homedir(),".docker","config.json");try{let r=await t.readFile(n),o=$e(r.toString());return!!(o!=null&&o.credsStore)||Object.keys((o==null?void 0:o.credHelpers)||{}).some(i=>{var s;return(s=o==null?void 0:o.credHelpers)==null?void 0:s[i]})||Object.keys((o==null?void 0:o.auths)||{}).some(i=>{var s,a;return(a=(s=o==null?void 0:o.auths)==null?void 0:s[i])==null?void 0:a.auth})||Ej(t)}catch(r){return(r==null?void 0:r.code)!=="ENOENT"?(e.write(`Error reading Docker config (${n}): ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)}.`),!1):Ej(t)}}async function Ej(t){let e=await xj(t);return!!e&&await qoe(t,`docker-credential-${e}`)}async function xj(t){if(t.platform==="darwin")return"osxkeychain";if(t.platform==="win32")return"wincred";if(t.platform==="linux")try{return await X({exec:t.exec,cmd:"/bin/sh",args:["-c","command -v docker-credential-pass >/dev/null 2>&1"],output:Fe}),"pass"}catch{return"secretservice"}}async function qoe(t,e){try{return t.platform==="win32"?!!await ni(e,t.cwd,t.env):(await X({exec:t.exec,cmd:"/bin/sh",args:["-c",`command -v '${e}' >/dev/null 2>&1`],output:Fe}),!0)}catch{return!1}}function Tl(t){return`remote.containers.${t}`}function us(t){return`dev.containers.${t}`}var dR=Y(require("path"));var Goe=Y(require("http")),zoe=Y(require("https"));function fR(t,e={}){return new Promise((n,r)=>{let o=t.startsWith("https:")?zoe:Goe,i;if(Object.keys(e).length>0){let a=new URL(t);i={headers:e,host:a.host,path:a.pathname}}o.get(i??t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&n(fR(l,e))}r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",r);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>n(Buffer.concat(l)))}}).on("error",r)})}async function cr(t){let e=await at(dR.join(t,"package.json"),"utf8");return JSON.parse(e)}async function Iv(t){let e=await at(dR.join(t,"product.json"),"utf8"),n=JSON.parse(e);return n.commit||(n.commit=await pp(n.quality)),n.serverDataFolderName||(n.serverDataFolderName=".vscode-server-oss"),n}async function pp(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,n=await fR(e);return JSON.parse(n.toString()).version}function bS(t){return["bin",t.serverApplicationName]}async function Bt(t){return new Promise(e=>setTimeout(e,t))}var Fie=CV(),bV=US(),DR=DV(),Oie=PV(),Uie=["docker","oras","skopeo"];async function jS(t,e,n){var R,L,N,B,W,z;let{cliHost:r,wslCLIHost:o,output:i}=t,{shellServer:s,launchRootShellServer:a}=e,c="Launching Dev Containers helper.",l=i.start(c);if(kl)return i.stop(c,l),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let u=[r];r.type!=="local"&&u.push(await qr(process.cwd(),t.loadNativeModule,i)),r.type!=="wsl"&&o&&u.push(o);let f=PR.randomUUID(),m={},d=await IR(u,V=>Yie(V,i)),p=d?lr.posix.join(((R=e.env)==null?void 0:R.TMPDIR)||"/tmp",`vscode-ssh-auth-${f}.sock`):void 0;d&&(m[p]=d,i.write(`ssh-agent: SSH_AUTH_SOCK in container (${p}) forwarded to ${d.cliHost.type} host (${d.unparsed}).`));let h=(L=e.env)!=null&&L.DISPLAY?void 0:$ie(u,V=>qie(V,i)),g=-1,v;if(h)do v=lr.posix.join(((N=e.env)==null?void 0:N.TMPDIR)||"/tmp",".X11-unix",`X${++g}`);while(await Mie(s,v));let C=h?`:${g}`:void 0;h&&(await s.exec(`mkdir -p '${lr.posix.dirname(v)}'`),m[v]=h,i.write(`X11 forwarding: DISPLAY in container (${C}) forwarded to ${h.cliHost.type} host (${h.unparsed}).`));let w=await rj(e.shellServer,i),y=w?await IR(u,V=>oj(V,e.shellServer,w,i)):void 0;y&&(m[y.remoteGpgSocket]={name:"gpg-agent",unparsed:y.localGpgSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localGpgSocket}},i.write(`gpg-agent: Socket in container (${y.remoteGpgSocket}) forwarded to ${y.cliHost.type} host (${y.localGpgSocket}).`),y.localKeyboxdSocket&&y.remoteKeyboxdSocket&&(m[y.remoteKeyboxdSocket]={name:"keyboxd",unparsed:y.localKeyboxdSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localKeyboxdSocket}},i.write(`GPG keyboxd: Socket in container (${y.remoteKeyboxdSocket}) forwarded to ${y.cliHost.type} host (${y.localKeyboxdSocket}).`))),((n==null?void 0:n.getNewConfiguration("githubCLILoginWithToken"))??t.isGitHubCLILoginWithTokenEnabled)&&await Gie(e,u,i);let I=lr.posix.join(((B=e.env)==null?void 0:B.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${f}.sock`),x=lr.posix.join(((W=e.env)==null?void 0:W.TMPDIR)||"/tmp",`vscode-remote-containers-server-${f}.js`),A=lr.posix.join(((z=e.env)==null?void 0:z.TMPDIR)||"/tmp",`vscode-remote-containers-${f}.js`),k=((n==null?void 0:n.getNewConfiguration("dockerCredentialHelper"))??t.isDockerCredentialHelperEnabled)&&a&&await RV(s,Uie)?lr.posix.join("/usr/local/bin",`docker-credential-${lR}${f}`):void 0,E=u.find(V=>V.type==="local"),_=kV(t,e,"Container",void 0,!1,!1,x,A,k,m,I,E),T=_.then(async V=>{await V.ready,await(y==null?void 0:y.importTasks())}),D=_.then(V=>V.mrpcExec),b=_.then(V=>V.mrpcPtyExec);return T.catch(console.error),t.onAdoptProcess(V=>Xie(e.shellServer,I,p,v,V).catch(console.error)),i.stop(c,l),{remoteContainersCLI:A,remoteEnv:{REMOTE_CONTAINERS_IPC:I,...p?{SSH_AUTH_SOCK:p}:void 0,...C?{DISPLAY:C}:void 0,...v?{REMOTE_CONTAINERS_DISPLAY_SOCK:v}:void 0},mrpcExec:D,mrpcPtyExec:b,ready:T,reconnect:()=>_.then(V=>V.reconnect())}}function $ie(t,e){for(let n of t){let r=e(n);if(r)return r}}async function IR(t,e){for(let n of t){let r=await e(n);if(r)return r}}async function RV(t,e){try{return await t.exec(`(${e.map(n=>`command -v '${n}'`).join(" || ")}) >/dev/null 2>&1`),!0}catch{return!1}}async function Mie(t,e){try{return await t.exec(`test -e ${e}`),!0}catch{return!1}}async function Cp(t,e,n,r,o){let{passwdUser:i,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}=await kV(t,{remoteExec:e,platform:o},"Host",n,!0,r,void 0);return{passwdUser:i,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}}async function kV(t,e,n,r,o,i,s,a,c,l,u,f){let{cliHost:m,product:d,output:p}=t,{remoteExec:h,platform:g,nodeExecutable:v,launchRootShellServer:C}=e,w=a&&at(lr.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),y=at(lr.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),S=await Wt(h,p,void 0,g,n),I=o?await Af(S,await Nl(S)):void 0,x=(await S.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],A=!0;if(!v||!s){let D=S.path.join(x,".vscode-remote-containers");v||(v=await Zie(t,S,D,x,d,i)),s||(s=S.path.join(D,"dist",`vscode-remote-containers-server-${t.package.version}.js`),await Li(S,s)?A=!1:await S.exec(`mkdir -p '${S.path.dirname(s)}'`))}if(a){let D=`EOF-${a}`;await S.exec(`cat <<'${D}' >${a}
${await w}
${D}
`)}if(c&&C&&((m==null?void 0:m.type)!=="local"&&f&&await uR(f,p)||m&&await uR(m,p))){let D=(await S.exec(`cat ~/.docker/config.json || echo "{
}"`)).stdout,b=$e(D);if(!(b!=null&&b.credsStore)||b.credsStore.startsWith(lR)){let R=await C(),L=`EOF-${c}`;await R.exec(`mkdir -p ${lr.posix.dirname(c)} && cat <<'${L}' >${c}
#!/bin/sh
${v} ${a} docker-credential-helper $@
${L}
`),await R.exec(`chmod +x ${c}`);let N=bn(D,["credsStore"],lr.posix.basename(c).substring(18),{formattingOptions:{}}),B=Do(D,N);await S.exec(`mkdir -p ~/.docker && cat <<'${L}' >~/.docker/config.json
${B}
${L}
`)}}if(A){let D=`EOF-${s}`,b=`${s}_${Date.now()}`;await S.exec(`cat <<'${D}' >${b}
${await y}
${D}
mv ${b} ${s}`)}let F=()=>Hie(t,n,S,v,s,l,u,f),k=await F(),E;async function _(){let D=`${n}: Reconnecting Dev Container server`,b=p.start(D);await k.terminate().catch(()=>{}),S=await Wt(h,p,void 0,void 0,n),k=await F(),E&&await new Promise((R,L)=>{k.mrpc.setBaseEnv(E,N=>N?L(N):R())}),T(k),p.stop(D,b)}async function T(D){if(await D.reconnect,D===k)try{await _()}catch(b){p.write(`Reconnecting Dev Container server failed: ${(b==null?void 0:b.message)||String(b)}`)}}return T(k),{ready:k.ready,passwdUser:I,nodeExecutable:v,homeFolder:x,mrpcExec:Wie(()=>k.mrpc,n,r||x),mrpcPtyExec:jie(()=>k.mrpc,n,r||x),mrpcExecToEnd:Vie(()=>k.mrpc,n,r||x),setBaseEnv:D=>new Promise((b,R)=>{E=D,k.mrpc.setBaseEnv(D,L=>L?R(L):b())}),connect:k.mrpc.connect,reconnect:_,terminate:()=>k.terminate()}}async function Hie(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=Object.keys(i||{}),f={...u.reduce((E,_)=>(E[_]="duplex",E),{}),rpc:"async",connected:"async",ready:"async"},m={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},d=n.process,p=`set -e ; echo -n ${ri} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${r}' '${o}' ; exit
`;d.stdin.write(p);let h,g=new Promise(E=>h=E),v=new TV.StringDecoder;d.stderr.on("data",E=>{let _=v.write(E).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(h){let T=_.indexOf(ri);T!==-1&&(h(),h=void 0,_=_.substr(0,T)+_.substr(T+1))}_&&l.write(ot(`${e} server: ${_}`))});let C=!1,w,y=new Promise(E=>w=E);d.exit.then(async({code:E,signal:_})=>{l.write(`${e} server terminated (code: ${E}, signal: ${_}).`),C?(l.write(`${e} server terminated. Reconnecting in 5 seconds...`),await Bt(5*1e3),w()):l.write(`${e} server terminated early. Not reconnecting.`)},E=>{l.write(`${e} server did not launch or terminated: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)});let S=(c==null?void 0:c.type)==="local",I={git:S,docker:S},x,A=new Promise(E=>x=E),F=Fie(m,f)({...u.reduce((E,_)=>{let T=i[_];return E[_]=Bie(t,T),E},{}),rpc:async(E,_)=>{try{let{args:T,stdin:D}=JSON.parse(E);if(T[0]==="git-credential-helper"){let b=await aj(a,c,I.git,T,D);I.git=b.preferLocalCLIHost,_(void 0,JSON.stringify(b.result))}else if(T[0]==="docker-credential-helper"){let b=await Sj(a,c,I.docker,T,D,l);I.docker=b.preferLocalCLIHost,_(void 0,JSON.stringify(b.result))}}catch(T){console.error(T),_(T)}},connected:E=>{E()},ready:E=>{C=!0,x(),E()}});(0,HS.default)(bV.source(d.stdout),F.createStream(),bV.sink(d.stdin)),await Promise.race([g,d.exit.then(({code:E,signal:_})=>{throw new Error(`${e} server terminated (code: ${E}, signal: ${_}).`)})]);function k(){return C=!1,d.terminate()}return{ready:A,mrpc:F,terminate:k,reconnect:y}}function Bie(t,e){let{sendTelemetryEvent:n,output:r}=t,o=!1;function i(s){if(!o&&s instanceof Error&&s.code==="ENOENT"&&(o=!0,r.event({type:"notification",message:bR.t("Could not connect to {0} on {1} host ({2}). Make sure the service is running.",e.name,e.cliHost.type,e.unparsed)}),n)){let a={serviceName:e.name,hostType:e.cliHost.type,hostPlatform:e.cliHost.platform},c=e.cliHost.authority;if(c){let l=c.indexOf("+");l!==-1&&(a.hostAuthority=c.substring(0,l))}n("serviceConnectionFailure",a)}}return()=>{let s=e.cliHost.connect(e.connectTo);return{sink:a=>{s.sink((c,l)=>{i(c),a(c,l)})},source:(a,c)=>{s.source(a,(l,u)=>{i(l),c(l,u)})}}}}function Wie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((d,p)=>{f.exec({cmd:o,args:i,cwd:s||n,env:a},(h,g)=>{h?p(h):d(g)})});return{stdin:DR.sink(f.stdin(m,d=>{d&&d.message!=="unexpected end of parent stream"&&console.error(d)})),stdout:DR.source(f.stdout(m)),stderr:DR.source(f.stderr(m)),exit:new Promise((d,p)=>{f.exit(m,(h,g)=>{var v;c.stop(l,u),h?((v=h.message)!=null&&v.endsWith("ENOENT")&&!h.code&&(h.code="ENOENT"),p(h)):d(g)})}),terminate:async()=>new Promise((d,p)=>{f.terminate(m,h=>{h?p(h):d()})})}}}function jie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((g,v)=>{var C,w;f.ptyExec({cmd:o,args:i,cwd:s||n,env:a,rows:(C=c.dimensions)==null?void 0:C.rows,cols:(w=c.dimensions)==null?void 0:w.columns},(y,S)=>{y?v(y):g(S)})}),d=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>f.ptyResize(m,g.columns,g.rows))],p=Oie();(0,HS.default)(p,f.ptyIn(m,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let h=new Hs;return(0,HS.default)(f.ptyOut(m),g=>{g(null,function v(C,w){if(C!==!0){if(C)throw C;h.fire(w),g(null,v)}})}),{write:g=>p.push(g),onData:h.event,resize:(g,v)=>f.ptyResize(m,g,v),exit:new Promise((g,v)=>{f.ptyExit(m,(C,w)=>{d.forEach(y=>y==null?void 0:y.dispose()),c.stop(l,u),C?v(C):g(w)})}),terminate:async()=>new Promise((g,v)=>{f.ptyTerminate(m,C=>{C?v(C):g()})})}}}function Vie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t();return new Promise((m,d)=>{f.execToEnd({cmd:o,args:i,cwd:s||n,env:a},(p,h)=>{if(c.stop(l,u),p||!h)d({stdin:new Rl.Writable,stdout:Rl.Readable.from([]),stderr:Rl.Readable.from([]),exit:Promise.reject(p),terminate:async()=>{}});else{let g=Rl.Readable.from([Buffer.from(h.stdout.data)]),v=new Promise(y=>g.on("end",y)),C=Rl.Readable.from([Buffer.from(h.stderr.data)]),w=new Promise(y=>C.on("end",y));m({stdin:new Rl.Writable,stdout:g,stderr:C,exit:Promise.all([v,w]).then(()=>({code:h.code,signal:h.signal})),terminate:async()=>{}})}})})}}var Tv="\\\\.\\pipe\\openssh-ssh-agent";async function TR(t){return t.platform==="win32"&&t.isFile(Tv)}async function Yie(t,e){let n=t.env.SSH_AUTH_SOCK;if(n)return{name:"ssh-agent",unparsed:n,cliHost:t,connectTo:{socketPath:n}};if(e.write(`ssh-agent: SSH_AUTH_SOCK not set on ${t.type} host.`),await TR(t))return{name:"ssh-agent",unparsed:Tv,cliHost:t,connectTo:{socketPath:Tv}}}function qie(t,e){let n=t.env.DISPLAY,r=n==null?void 0:n.match(/^(?<hostOrPath>[^:]+)?:(?<display>\d+)(?:\.(?<screen>\d+))?$/);if(r!=null&&r.groups){let{hostOrPath:o,display:i}=r.groups,s=bR.t("X11 display");return!o||o==="localhost/unix"?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`/tmp/.X11-unix/X${i}`}}:o.startsWith("/")?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`${o}:${i}`}}:{name:s,unparsed:n,cliHost:t,connectTo:{host:o,port:6e3+parseInt(i,10)}}}n?e.write(`X11 forwarding: DISPLAY value on ${t.type} host not supported (${n}).`):e.write(`X11 forwarding: DISPLAY not set on ${t.type} host.`)}async function RR(t){let e=t.env.WAYLAND_DISPLAY,n=t.env.XDG_RUNTIME_DIR,r=e&&t.path.isAbsolute(e)?e:e&&n&&t.path.join(n,e),o=n&&t.path.join(n,"wayland-0"),i=r||o;if(i&&await t.isSocket(i))return i}async function NV(t){let e=PR.randomUUID();return lr.posix.join((t==null?void 0:t.TMPDIR)||"/tmp",`vscode-wayland-${e}.sock`)}async function LV(t,e){let{shellServer:n,remoteWaylandSocket:r}=t;if(!r||e.WAYLAND_DISPLAY)return{};let o=e.XDG_RUNTIME_DIR;o||(o=(await n.exec('umask 077 && XRD="/tmp/user/$(id -u)" && mkdir -p $XRD && echo $XRD')).stdout.trim());let i=lr.posix.basename(r);return await n.exec(`test -e ${o}/${i} || ln -sf ${r} ${o}/${i}`),o===e.XDG_RUNTIME_DIR?{WAYLAND_DISPLAY:i}:{XDG_RUNTIME_DIR:o,WAYLAND_DISPLAY:i}}async function Gie(t,e,n){let r="Checking for GitHub CLI",o=n.start(r);await RV(t.shellServer,["gh"])&&(async()=>{let s="Setting up GitHub CLI",a=n.start(s);try{if(!await Kie(t.remoteExec,n)){let l=await IR(e,u=>zie(u.exec,n))||void 0;l&&await Jie(t.remoteExec,l,n)}}catch(c){n.write(`Error setting up GitHub CLI: ${(c==null?void 0:c.stack)||(c==null?void 0:c.message)||String(c)}`)}finally{n.stop(s,a)}})(),n.stop(r,o)}async function zie(t,e){try{let{stdout:n}=await X({exec:t,cmd:"gh",args:["auth","token"],output:e});return n.toString().trim()}catch{return}}async function Kie(t,e){try{return await X({exec:t,cmd:"gh",args:["auth","status"],output:e}),!0}catch{return!1}}async function Jie(t,e,n){try{await X({exec:t,cmd:"gh",args:["auth","login","--with-token"],stdin:Buffer.from(e),output:n})}catch{}}var gp=new Set;async function Xie(t,e,n,r,o){let i=await o.processId;if(i&&i>0){let s=await mj(t,i),a=s.REMOTE_CONTAINERS_IPC;a&&a!==e&&!gp.has(a)&&a.indexOf("vscode-remote-containers-ipc")!==-1&&(gp.add(a),await t.exec(`rm '${a}' && ln -s '${e}' '${a}'`));let c=s.SSH_AUTH_SOCK;c&&n&&c!==n&&!gp.has(c)&&c.indexOf("vscode-ssh-auth")!==-1&&(gp.add(c),await t.exec(`rm '${c}' && ln -s '${n}' '${c}'`));let l=s.REMOTE_CONTAINERS_DISPLAY_SOCK;l&&r&&l!==r&&!gp.has(l)&&(gp.add(l),await t.exec(`rm '${l}' && ln -s '${r}' '${l}'`))}}async function Zie(t,e,n,r,o,i){let s=o.commit||await pp(o.quality),a=o.commit?o.quality||"insider":"stable",c=lr.posix,l=`${a.substring(0,1).toUpperCase()}${a.substring(1)}${a==="insider"?"s":""}-${s}`,u=I=>Li(e,I),f=c.join(wp(c,r,o),"cli","servers",l,"server");if(await MS(f,u))return vp(f);let m=c.join(kR(c,r,o),"cli","servers",l,"server");if(await MS(m,u))return vp(m);let d=c.join(wp(c,r,o),"bin",s);if(await MS(d,u))return vp(d);let p=c.join(n,"bin",s);if(await MS(p,u))return vp(p);let{localCacheFolder:h,output:g,alternateDownload:v}=t,C;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")C=(await e.exec("uname -m")).stdout.trim()==="arm64"?BS.arm64:BS.x64;else{let I=await NR(e);C=VS(I,!1)}let y={localCacheFolder:h,build:C,commit:s,quality:a,web:!1,output:g,alternateDownload:v,legacy:!1},S=Ep(y);if(await Cr(S)||await kv(y),C.id==="darwin")await Rv({output:g},e,S,p,i);else{let I=[];await WS.t({file:S,filter:A=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(A),onentry:A=>{new WS.WriteEntry.Tar(A).on("data",k=>I.push(k))}});let x=Buffer.concat(I);await Rv({output:g},e,x,p,i,!1)}return vp(p)}async function MS(t,e){let n=vp(t),r=lr.posix.join(t,"node_modules","node-pty","package.json");return await e(n)&&await e(r)}function vp(t){return lr.posix.join(t,"node")}var Nv=Y(require("net"));var Lv=US(),LR=t=>{if("port"in t)return Lv.duplex(Nv.connect(t.port,t.host));let e=t.socketPath;if(process.platform!=="win32"||e.startsWith("\\\\.\\pipe\\"))return Lv.duplex(Nv.connect(e));let n=new Nv.Socket;return tse(n,e)};function Qie(t){let e=[];return t.split("-").map(n=>{let r=n.match(/.{2}/g);r!==null&&r.reverse().map(o=>{e.push(parseInt(o,16))})}),Buffer.from(e)}function ese(t,e,n){return e||n===void 0?{headerSize:t,err:e}:t===0?{headerSize:t,data:n}:n.length>t?(n=n.slice(t,n.length),t=0,{headerSize:t,data:n}):(t=t-n.length,{headerSize:t})}function tse(t,e){let n=0,r=[],o=[],i,s=u=>{u instanceof Error&&console.error(u),t.destroy();for(let f of r)f.cb(u,void 0);r=[];for(let f of o)f(u,(m,d)=>{});o=[]};function a(u,f){i.source(u,function(m,d){let p=ese(n,m,d);n=p.headerSize,p.err||p.data?f(p.err||null,p.data):a(u,f)})}return(async()=>{let u=await at(e),m=u.toString().match(/!<socket >(\d+)( s)? ((([A-Fa-f0-9]{2}){4}-?){4})/),d,p;if(m!==null){let h=m[1],g=m[3];d=parseInt(h,10);let v=Qie(g),C=Buffer.alloc(12);C.writeUInt32LE(process.pid,0),p=Buffer.concat([v,C]),n=16+3*4}else{let h=u.indexOf(10);d=parseInt(u.slice(0,h).toString(),10),p=u.slice(h+1),n=0}t.on("error",h=>{s(h)}),t.connect(d,"127.0.0.1",()=>{t.write(p,h=>{if(!h){i=Lv.duplex(t);for(let g of r)a(g.abort,g.cb);r=[];for(let g of o)i.sink(g);o=[]}})})})().catch(u=>{s(u)}),{source:function(u,f){i!==void 0?a(u,f):r.push({abort:u,cb:f})},sink:function(u){i!==void 0?i.sink(u):o.push(u)}}}function AV(t,e,n){return r=>{let o=(async()=>{let i="port"in r?`{ host: '${r.host}', port: ${r.port} }`:`{ path: '${r.socketPath}' }`,s=await e({cmd:t,args:["-e",`// Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host.
const net = require('net');
const fs = require('fs');
process.stdin.pause();
const client = net.createConnection(${i}, () => {
	console.error('Connection established');
	client.pipe(process.stdout);
	process.stdin.pipe(client);
});
client.on('close', function (hadError) {
	console.error(hadError ? 'Remote close with error' : 'Remote close');
	process.exit(hadError ? 1 : 0);
});
client.on('error', function (err) {
	process.stderr.write(err && (err.stack || err.message) || String(err));
});
process.stdin.on('close', function (hadError) {
	console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
	process.exit(hadError ? 1 : 0);
});
process.on('uncaughtException', function (err) {
	fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
});
`],output:sn(n,1)});return s.exit.then(({code:a,signal:c})=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with code ${a} and signal ${c}.`,1)},a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with error: ${a&&a.message||String(a)}`)}),s.stderr.on("data",a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host stderr: ${a.toString("utf8")}`,1)}),{sink:Lv.sink(s.stdin),source:Lv.source(s.stdout)}})();return{sink:i=>{o.then(s=>s.sink(i),s=>i(s,()=>{})).catch(s=>n.write(`Connection forwarding to sink error: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||String(s)}`))},source:(i,s)=>{o.then(a=>a.source(i,s),a=>s(a)).catch(a=>n.write(`Connection forwarding to source error: ${(a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a)}`))}}}}var YS=!1;function Ff(t,e,n){return YS?function(o){return nse(t(o),`${e} ${JSON.stringify(o)}`,n)}:t}function nse(t,e,n){return YS?{source:FV(t.source,`${e} Source`,n),sink:rse(t.sink,`${e} Sink`,n)}:t}function FV(t,e,n){return YS?function(o,i){n.write(`${e} end in (${typeof o}${o&&typeof o=="object"?`: ${Object.keys(o)}`:""}): ${o&&typeof o=="object"&&o.stack||o}`),t(o,function(a,c){n.write(`${e} end out (${typeof a}${a&&typeof a=="object"?`: ${Object.keys(a)}`:""}): ${a&&typeof a=="object"&&a.stack||a}`),n.write(`${e} data: ${c==null?void 0:c.toString("hex")}`),i(a,c)})}:t}function rse(t,e,n){return YS?function(o){t(FV(o,e,n))}:t}var AR=Y($r()),$V=/^\\\\wsl(\.localhost|\$)?\\/;function xr(t){return $V.test(t.toLowerCase())}function Of(t){let e=t.toLowerCase(),n=$V.exec(e);if(!n)return"";let r=e.indexOf("\\",n[0].length);return t.substring(n[0].length,r)}async function Av(t){let{stdout:e}=await X({exec:ds(void 0),cmd:"wsl",args:["-l","-v"],output:t}),n=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(n)||[])[1]}async function Ll(t,e,n){let{stdout:r}=await X({exec:ds(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:n}),o=r.toString().trim();if(o.startsWith("/mnt/wsl/")&&e.match(/^[a-zA-Z]:/)){let i=`/mnt/${e[0].toLowerCase()}${e.substring(2).replace(/\\/g,"/")}`;try{return await X({exec:ds(void 0),cmd:"wsl",args:["-d",t,"-e","test","-e",i],output:n}),i}catch(s){(s==null?void 0:s.code)!==1&&n.write(`Error checking WSL path: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||s}`)}}return o}async function ose(t,e){let{stdout:n}=await X({exec:ds(void 0),cmd:"wsl",args:["-d",t,"-e","/bin/sh","-c","echo ~"],output:e});return n.toString().trim()}async function MV(t,e,n){let{stdout:r}=await X({exec:t.exec,cmd:"wslpath",args:["-w",e],output:n});return r.toString().trim()}async function Sp(t,e){let n=Of(t),r=await Ll(n,t,e);return Ce.parse(`vscode-remote://wsl+${n}${r}`)}function xp(t){if(t.scheme==="vscode-remote"){let e=qS(t.authority);if(e){let n=t.path;return Sv(n)&&(n=OV.posix.dirname(n)),{wslDistro:e,wslPath:n}}}}function qS(t){return(/wsl\+(.*)/.exec(t)||[])[1]}async function GS(t,e,n,r,o,i,s,a){var p;let{distro:c,cwd:l}=await FR(t,e,s);UV.ok(!c.startsWith("-"),AR.t("Distro must not start with a dash: {0}",c));let u=Uf("wsl",["-d",c,"-e"],l),f=await Cp({extensionPath:n,localCacheFolder:r,package:await cr(n),product:o,loadNativeModule:i,output:s,alternateDownload:a},u,l,!1),m=await $f({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((p=f.passwdUser)==null?void 0:p.shell)||"/bin/sh",remoteExec:f.exec});delete m.WSL_INTEROP,await f.setBaseEnv(m);let d=io("wsl",l,m,f.exec,f.ptyExec,Ff(f.connect,"WSL",s),f.nodeExecutable,s);return d.toCommonURI=async h=>{try{return Ce.file((await X({exec:f.exec,cmd:"wslpath",args:["-w",h],output:s})).stdout.toString().trim())}catch{return}},d.reconnect=()=>f.reconnect(),d.terminate=()=>f.terminate(),d}async function FR(t,{defaultDistro:e},n){let r,o;return typeof t=="object"?(r=t.wslDistro,o=t.wslPath):t&&xr(t)?(r=Of(t),o=await Ll(r,t,n)):(r=e||await Av(n)||(()=>{throw new pe({description:AR.t("No default WSL distro found.")})})(),o=t?await Ll(r,t,n):await ose(r,n)),{distro:r,cwd:o}}function Mf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function HV(t,e,n,r,o){try{return(await Yn(e,{posix:X({exec:t,cmd:"cat",args:[r],output:o}),win32:X({exec:t,cmd:n,args:["-e",`require('fs').createReadStream('${r.replace(/\\/g,"\\\\")}').pipe(process.stdout)`],output:o})})).stdout}catch(i){let s=new Error(`Could not read file: ${r}`);throw s.originalError=i,s.code="ENOENT",s}}async function BV(t,e,n,r,o,i){await Yn(e,{posix:X({exec:t,cmd:"dd",args:[`of=${r}`],stdin:o,output:i}),win32:X({exec:t,cmd:n,args:["-e",`process.stdin.pipe(require('fs').createWriteStream('${r.replace(/\\/g,"\\\\")}'))`],stdin:o,output:i})})}async function zS(t,e,n,r,o){await Yn(e,{posix:()=>X({exec:t,cmd:"mv",args:["-n",n,r],output:o}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Move-Item -Path '${n}' -Destination '${r}'`],env:so(),output:o})})()}async function KS(t,e,n,r,o){let{recursive:i,force:s}=r;await Yn(e,{posix:()=>X({exec:t,cmd:"rm",args:[i&&"-r",s&&"-f",n].filter(Boolean),output:o}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Remove-Item${i?" -Recurse":""}${s?" -Force":""} '${n}'`],env:so(),output:o})})()}async function JS(t,e,n,r){await Yn(e,{posix:()=>X({exec:t,cmd:"mkdir",args:["-p",n],output:r}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`New-Item -ItemType Directory '${n}'`],env:so(),output:r})})()}async function WV(t,e,n,r){return(await Yn(e,{posix:()=>X({exec:t,cmd:"ls",args:["-a",n],output:r}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`(Get-ChildItem '${n}').Name`],env:so(),output:r})})()).stdout.toString().trim().split(/\r?\n/).filter(i=>i!=="."&&i!=="..")}var UR=Y(require("path")),QS=Y(require("os")),ex=Y(require("crypto"));var jV=Y(require("os")),XS=Y(require("assert")),ZS=Y($r());async function VV(t,e,n,r,o,i,s,a,c,l){var v;let u=t.substr(6),f=u.indexOf(":"),m=[(l==null?void 0:l.settings.executablePath)||"ssh"];if(l!=null&&l.settings.executableArgs&&m.push(...l.settings.executableArgs),l!=null&&l.settings.configFilePath&&m.push("-F",ise(l==null?void 0:l.settings.configFilePath)),f!==-1){let C=u.substr(f+1);XS.ok(!C.startsWith("-"),ZS.t("Port number must not start with a dash: {0}",C));let w=u.substr(0,f);XS.ok(!w.startsWith("-"),ZS.t("Hostname must not start with a dash: {0}",w)),m.push("-p",C,w)}else XS.ok(!u.startsWith("-"),ZS.t("Hostname must not start with a dash: {0}",u)),m.push(u);let d=Uf(m[0],m.slice(1),void 0,await(l==null?void 0:l.sshAskpassEnv)||{}),p=await Cp({extensionPath:r,localCacheFolder:o,package:await cr(r),product:i,loadNativeModule:s,output:a,alternateDownload:c},d,e,!1),h=await $f({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=p.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:p.exec});await p.setBaseEnv(h);let g=io("remote",e||p.homeFolder,h,p.exec,p.ptyExec,p.connect,p.nodeExecutable,a);return g.toCommonURI=()=>Promise.resolve(void 0),g.reconnect=()=>p.reconnect(),g.terminate=()=>p.terminate(),g}function ise(t){return t.replace(/^~($|\/|\\)/,`${jV.homedir()}$1`)}function Fv(t,e){let n=sse(t);if(n)return Ce.parse(`vscode-remote://${OR(n)}${e}`)}function OR(t){let e=t.hostName;if(t.user||t.hostName.toLowerCase()!==t.hostName||t.port||t.hostName.match(/[\/\\\+]/)){let n=JSON.stringify(t);e=Buffer.from(n,"utf8").toString("hex")}return`ssh-remote+${e}`}function sse(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6);return YV(e)}function YV(t){let e=t.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(e){let[,n,r,o]=e;return{hostName:r,user:n,port:o?parseInt(o,10):void 0}}return{hostName:t}}function Al(t){var e;return!!(t&&"host"in t&&((e=t.host)!=null&&e.startsWith("ssh://")))}function Fl(t){return!!(t!=null&&t.startsWith("ssh-remote+"))}function Ov(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let n=e[1];try{let r=JSON.parse(Buffer.from(n,"hex").toString("utf8"));if(r&&r.hostName)return r}catch{}return YV(n)}var ase=!1;async function $R(t,e,n,r,o,i,s,a,c,l){return t!=null&&t.startsWith("ssh://")&&!(l!=null&&l.localDocker)?VV(t,e,r,o,i,s,n,a,c,l):typeof e=="object"||r.executeInWSL==="forWSLPath"&&e&&xr(e)||r.executeInWSL==="always"?GS(e,r,o,i,s,n,a,c):ase?cse(e||process.cwd(),o,i,s,n,a,c):qr(e||process.cwd(),n,a)}async function qr(t,e,n=Fe){let r=ds(t),o=await GV(t,e);return qV(t,r,o,n?Ff(LR,"Local",n):LR,e,n)}async function cse(t,e,n,r,o,i,s){let a=ds(t),c=await Cp({extensionPath:e,localCacheFolder:n,package:await cr(e),product:r,loadNativeModule:o,output:i,alternateDownload:s},a,t,!0,process.platform);return qV(t,c.exec,c.ptyExec,Ff(c.connect,"Local Test",i),o,i)}function io(t,e,n,r,o,i,s,a){let c,l,u;return{type:t,platform:"linux",exec:r,ptyExec:o,cwd:e,env:n,path:UR.posix,async homedir(){if(typeof l>"u"){let m=(await X({exec:r,cmd:"id",args:["-u"],output:Fe})).stdout.toString().trim(),d=await Wt(r,Fe,void 0,"linux","Host"),p=await Af(d,m);l=this.env.HOME||(p==null?void 0:p.home)||"/"}return l},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async f=>{try{return await X({exec:r,cmd:"test",args:["-f",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isFolder:async f=>{try{return await X({exec:r,cmd:"test",args:["-d",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isSocket:async f=>{try{return await X({exec:r,cmd:"test",args:["-S",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},readFile:async f=>{try{return(await X({exec:r,cmd:"cat",args:[f],output:Fe})).stdout}catch(m){let d=new Error(`Could not read file: ${f}`);throw d.originalError=m,d.code="ENOENT",d}},writeFile:async(f,m)=>{await X({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${f}'`],stdin:m,output:Fe})},rename:async(f,m)=>{await X({exec:r,cmd:"mv",args:[f,m],output:Fe})},rm:async(f,{recursive:m,force:d}={})=>{await X({exec:r,cmd:"rm",args:[...m?["-r"]:[],...d?["-f"]:[],f],output:Fe})},mkdirp:async f=>{await X({exec:r,cmd:"mkdir",args:["-p",f],output:Fe})},readDir:async f=>(await X({exec:r,cmd:"ls",args:["-a",f],output:Fe})).stdout.toString().trim().split(`
`).filter(m=>m!=="."&&m!==".."),readDirWithTypes:async f=>{let m={f:1,"*":1,"/":2,"@":64};return(await X({exec:r,cmd:"ls",args:["-aF",f],output:Fe})).stdout.toString().trim().split(`
`).map(d=>"/*@=%|>".indexOf(d[d.length-1])!==-1?[d.substr(0,d.length-1),d[d.length-1]]:[d,"f"]).filter(([d])=>d!=="."&&d!=="..").map(([d,p])=>[d,m[p]||0])},getUsername:async()=>(c===void 0&&(c=(await X({exec:r,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()),c),toCommonURI:()=>Promise.resolve(void 0),connect:i,locateCertificatesFile:function(){return u||(u=tx(this,void 0,a))},nodeExecutable:s}}function qV(t,e,n,r,o,i){let s;return{type:"local",platform:process.platform,exec:e,ptyExec:n,cwd:t,env:process.env,path:UR,homedir:async()=>QS.homedir(),tmpdir:async()=>QS.tmpdir(),isFile:Cr,isFolder:XO,isSocket:ZO,readFile:at,writeFile:bg,rename:rl,rm:il,mkdirp:async a=>{await os(a)},readDir:ol,getUsername:nx,toCommonURI:async a=>Ce.file(a),connect:r,locateCertificatesFile:function(){return s||(s=tx(this,o,i))}}}var lse=["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt","/etc/ssl/ca-bundle.pem"];async function tx(t,e,n){if(t.env.NODE_EXTRA_CA_CERTS&&await t.isFile(t.env.NODE_EXTRA_CA_CERTS))return t.env.NODE_EXTRA_CA_CERTS;if(t.platform==="linux"){for(let c of lse)if(await t.isFile(c))return c;return}if(t.type!=="local")return;let r=await(e==null?void 0:e("@vscode/proxy-agent"));if(!(r!=null&&r.loadSystemCertificates))return;let o=await r.loadSystemCertificates({log:{trace(c,...l){n.write(c,1)},debug(c,...l){n.write(c,2)},info(c,...l){n.write(c,3)},warn(c,...l){n.write(c,4)},error(c,...l){n.write(typeof c=="string"?c:String(c),5)}}});if(!o.length)return;let i=Buffer.from(o.join(t.platform==="win32"?`\r
`:`
`)),s=ex.createHash("sha256").update(i).digest("hex"),a=t.path.join(await Uv(t),`certificates-${s}.pem`);if(!await t.isFile(a)){await t.mkdirp(t.path.dirname(a));let c=`${a}-${ex.randomUUID()}`;await t.writeFile(c,i),await t.rename(c,a)}return a}var use=rx.join(__dirname,"..","..","node_modules",".bin","ts-node"),kl=rx.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function X(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,print:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((u,f)=>{let m=[],d=[],p=c==="continuous"?new $v.StringDecoder:void 0;l.stdout.on("data",v=>{m.push(v),c==="continuous"&&a.write(p.write(v))}),l.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let h=c==="continuous"?new $v.StringDecoder:void 0;l.stderr.on("data",v=>{d.push(v),c==="continuous"&&a.write(ot(h.write(v)))}),l.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=[];l.exit.then(({code:v})=>{try{g.forEach(y=>y.dispose());let C=Buffer.concat(m),w=Buffer.concat(d);(c===!0||v&&c==="onerror")&&(a.write(C.toString().replace(/\r?\n/g,`\r
`)),a.write(ot(w.toString()))),c&&v&&a.write(`Exit code ${v}`),v?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,stdout:C,stderr:w,code:v}):u({stdout:C,stderr:w})}catch(C){f(C)}},v=>{c&&(v!=null&&v.message)&&a.write(ot(v==null?void 0:v.message)),f(v)}),s instanceof Buffer?(l.stdin.write(s,v=>{v&&f(v)}),l.stdin.end()):s instanceof zV.Readable?s.pipe(l.stdin):typeof s=="function"&&g.push(s(v=>l.stdin.write(v)))})}async function Ai(t){let{ptyExec:e,cmd:n,args:r,cwd:o,env:i,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:s});return new Promise((u,f)=>{let m="",d=[c&&c(p=>l.write(p))];l.onData(p=>{m+=p,s.raw(p),a&&a.exec(m)&&u({cmdOutput:m})}),l.exit.then(({code:p,signal:h})=>{try{d.forEach(g=>g==null?void 0:g.dispose()),p||h?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,cmdOutput:m,code:p,signal:h}):u({cmdOutput:m})}catch(g){f(g)}},p=>{p!=null&&p.message&&s.write(ot(p==null?void 0:p.message)),d.forEach(h=>h==null?void 0:h.dispose()),f(p)})})}var fse={SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGEMT:void 0,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGSTKFLT:16,SIGCHLD:17,SIGCLD:void 0,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGINFO:void 0,SIGLOST:void 0,SIGSYS:31,SIGUNUSED:31};function ds(t){return async function(e){let{cmd:n,args:r,output:o}=e,i=`Run: ${n} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,s=o.start(i),a=e.cwd||t,c=e.env?{...process.env,...e.env}:process.env,l=await ni(n,a,c),u=_p.spawn(l,r,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,m)=>{u.once("error",d=>{o.stop(i,s),m(d)}),u.once("close",(d,p)=>{o.stop(i,s),f({code:d,signal:p})})}),async terminate(){u.kill("SIGKILL")}}}}async function GV(t,e){let n=await e("node-pty");if(!n)throw new Error("Missing node-pty");return async function(r){var h,g;let{cmd:o,args:i,output:s}=r,a=`Run: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=r.cwd||t,f=r.env?{...process.env,...r.env}:process.env,m=await ni(o,u,f),d=n.spawn(m,i||[],{cwd:u,env:f,cols:(h=s.dimensions)==null?void 0:h.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:l}),p=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>d.resize(v.columns,v.rows))];return{onData:d.onData.bind(d),write:d.write.bind(d),resize:d.resize.bind(d),exit:new Promise(v=>{d.onExit(({exitCode:C,signal:w})=>{if(p.forEach(y=>y==null?void 0:y.dispose()),s.stop(a,c),v({code:C,signal:w}),process.platform==="win32")try{d.kill()}catch{}})}),async terminate(){d.kill("SIGKILL")}}}}function JV(t){let e=async function(n){let r=await t(n),o=new Hs;if(r.stdout){let i=new $v.StringDecoder;r.stdout.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stdout.on("close",()=>{let s=i.end();s&&o.fire(s)})}if(r.stderr){let i=new $v.StringDecoder;r.stderr.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stderr.on("close",()=>{let s=i.end();s&&o.fire(s)})}return{onData:o.event,write:r.stdin.write.bind(r.stdin),resize:()=>{},exit:r.exit.then(({code:i,signal:s})=>({code:typeof i=="number"?i:void 0,signal:typeof s=="string"?fse[s]:void 0})),terminate:r.terminate.bind(r)}};return e.isTTY=!1,e}function Uf(t,e,n,r){return async function(o){let{env:i,cmd:s,args:a,output:c}=o,l=o.cwd||n,u=l?`cd '${l}' && `:"",f=Object.keys(i||{}).map(y=>i[y]===void 0?"":`${y}='${i[y]}' `).join(""),m=(a||[]).map(y=>` '${y.replace(/'/g,`'"'"'`)}'`).join(""),d=`${u}${f}${s}${m}`,p=d!==s?["/bin/sh","-c",d]:[d],h=[...e,...p],g=`Run: ${t} ${h.join(" ").replace(/\n.*/g,"")}`,v=c.start(g),C=await ni(t,process.cwd(),process.env),w=_p.spawn(C,h,{windowsHide:!0,env:r?{...process.env,...r}:void 0});return{stdin:w.stdin,stdout:w.stdout,stderr:w.stderr,exit:new Promise((y,S)=>{w.once("error",I=>{c.stop(g,v),S(I)}),w.once("close",(I,x)=>{c.stop(g,v),y({code:I,signal:x})})}),async terminate(){w.kill("SIGKILL")}}}}function ox(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(e)return e[1].split(".").map(n=>parseInt(n,10))}function ix(t,e){for(let n=0,r=Math.max(t.length,e.length);n<r;n++){let o=t[n]||0,i=e[n]||0;if(o!==i)return o<i}return!1}var XV=kl?(t,e,n)=>_p.spawn(use,[t,...e||[]],{...n,windowsHide:!0}):_p.fork;async function Hf(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules.asar/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules/${t}`)}catch{}}function ZV(t){let{output:e}=t,n=[];return{output:sn({...e,get dimensions(){return e.dimensions},event:o=>n?n.push(o):e.event(o)}),flush:()=>{n&&(n.forEach(o=>e.event(o)),n=void 0)}}}function QV(t,e,n){return sn({...t,get dimensions(){return t.dimensions},event:o=>{o.channel===e&&t.event(o),n.event(o)}})}function Yn(t,e){return e&&typeof e=="object"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function Li(t,e){return Yn(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var MR;async function nx(){return MR===void 0&&(MR=(async()=>{try{return KV.userInfo().username}catch(t){if(process.platform!=="linux")throw t;return(await X({exec:ds(void 0),cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()}})()),MR}function eY(t){let e=t.replace(/['\\]/g,"\\$&"),n=Mf(t).replaceAll("'","\\'");return` (command -v getent >/dev/null 2>&1 && getent passwd '${e}' || grep -E '^${n}|^[^:]*:[^:]*:${n}:' /etc/passwd || true)`}async function tY(t,e,n,r,o,i){let s="Extracting tarball",a=i.start(s),c=`${r}_${Date.now()}`;try{await JS(t,e,c,i);let l=n instanceof Buffer?n:await(async()=>{let u=[];for await(let f of n)u.push(f);return Buffer.concat(u)})();await X({exec:t,cmd:"tar",args:["--no-same-owner",`-x${o?"z":""}`,"--strip-components","1","-C",c],stdin:l,output:i,print:"continuous"}),await zS(t,e,c,r,i)}catch(l){try{await KS(t,e,c,{recursive:!0,force:!0},i)}catch{}throw l}finally{i.stop(s,a)}}async function Uv(t){return t.path.join(await t.tmpdir(),t.platform==="linux"?`vsch-${await t.getUsername()}`:"vsch")}async function sx(t,e){let{output:n}=t,r=await Wt(e.remoteExec,n);try{for(let i=0;i<3;i++){let s=Date.now();await r.exec("echo ping!"),n.write(`Roundtrip ${i+1} to container took ${Date.now()-s} ms`)}}finally{r.process.terminate()}let o=await Wt(t.cliHost.exec,n);try{for(let i=0;i<3;i++){let s=Date.now();await o.exec("echo ping!"),n.write(`Roundtrip ${i+1} to host took ${Date.now()-s} ms`)}}finally{o.process.terminate()}}function so(t){return t?{...t,PSModulePath:void 0}:{PSModulePath:void 0}}var ri="\u2404";async function Wt(t,e,n,r="linux",o="Container"){let i=typeof t=="function",s=r==="win32",a=n?{VSCODE_REMOTE_CONTAINERS_SESSION:n}:{},c=i?await t({env:s?so(a):a,cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:e}):t;if(!i){let d=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${ri}; /bin/sh'
`;c.stdin.write(d),await new Promise(h=>{let g="",v=new HR.StringDecoder;c.stdout.on("data",function C(w){g+=v.write(w),g.includes(d)&&(c.stdout.off("data",C),h())})})}let l=mse(c),u;async function f(d,p){let h=u=(async()=>{try{await u}catch{}return m(Yn(r,d),p)})();try{return await Promise.race([h,l.unexpectedExit])}finally{l.disposeStdioListeners(),u===h&&(u=void 0)}}async function m(d,p){let h=`Run in ${o.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,g;if((p==null?void 0:p.logOutput)!=="silent"&&(g=e.start(h,p==null?void 0:p.logLevel)),c.stdin.destroyed){e.write("Stdin closed!");let{code:A,signal:F}=await c.exit;return Promise.reject({message:`Shell server terminated (code: ${A}, signal: ${F})`,code:A,signal:F})}r==="win32"?c.stdin.write(`[Console]::Write('${ri}'); ( ${d} ); [Console]::Write("${ri}$LastExitCode ${ri}"); [Console]::Error.Write('${ri}')
`):c.stdin.write(`echo -n ${ri}; ( ${d} ); echo -n ${ri}$?${ri}; echo -n ${ri} >&2
`);let[v,C]=nY(c.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(A,F,k)=>{F===1&&k===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{}),w=nY(c.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(A,F,k)=>{F===0&&k===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{})[0];p!=null&&p.stdin&&(await v,c.stdin.write(p==null?void 0:p.stdin));let[y,S]=await C,[I]=await w,x=parseInt(S,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(e.write(y,p==null?void 0:p.logLevel),e.write(I,p==null?void 0:p.logLevel),x&&e.write(`Exit code ${x}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&x&&e.write(`Exit code ${x}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&e.stop(h,g,p==null?void 0:p.logLevel),x?Promise.reject({message:`Command in ${o.toLowerCase()} failed: ${d}`,code:x,stdout:y,stderr:I}):{stdout:y,stderr:I}}return{exec:f,process:c,platform:r,path:Yn(r,dse)}}function nY(t,e,n){let r=e.map(()=>{let u;return{promise:new Promise((m,d)=>u={resolve:m,reject:d}),...u}}),o=new HR.StringDecoder("utf8"),i=[],s=0,a=[];function c(u){let f=o.write(u);l(f)}function l(u){let f=u.indexOf(ri);if(f!==-1){let m=u.substr(0,f);i.push(m),n(m,s,a.length),a.push(i.join("")),i.length=0,a.length===e[s]&&(r[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else i.push(u),n(u,s,a.length)}return t.on("data",c),r.map(u=>u.promise)}function mse(t){let e,n=new Promise((c,l)=>e=l),r=[],o=[],i=c=>r.push(c),s=c=>o.push(c);return t.stdout.on("data",i),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(r).toString()}
${Buffer.concat(o).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:n,disposeStdioListeners:()=>{t.stdout.off("data",i),t.stderr.off("data",s),r.length=0,o.length=0}}}var CY=Y(require("net")),EY=Y(yY());async function SY({forwardedPorts:t,output:e,getLogLevel:n},r,o,i){e.write(`Port forwarding for container port ${o} starts listening on local port.`,2);let s=i?{VSCODE_REMOTE_CONTAINERS_SESSION:i}:void 0;return new Promise((a,c)=>{let l=!0,u=new Set,f=CY.createServer({pauseOnConnect:!0},m=>{let d=m.remotePort,p=f.address().port;e.write(`Port forwarding connection from ${d} > ${p} > ${o} in the container.`),n()===1&&(async()=>{let h=await(0,EY.default)("port",d);e.write(`Port forwarding process for ${d} > ${p} > ${o} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),_se(e,r,[r.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ host: '127.0.0.1', port: ${o} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(h=>{let g;h.exit.then(({code:v,signal:C})=>{g||(u.delete(m),m.end()),e.write(`Port forwarding ${d} > ${p} > ${o} terminated${g?` by extension (${g})`:""} with code ${v} and signal ${C}.`)},v=>{u.delete(m),m.end(),e.write(`Port forwarding ${d} > ${p} > ${o} terminated with error: ${v&&v.message||String(v)}`)}),h.stderr.on("data",v=>{e.write(`Port forwarding ${d} > ${p} > ${o} stderr: ${v.toString("utf8")}`,2)}),m.on("close",v=>{e.write(`Port forwarding ${d} > ${p} > ${o}: Local close${v?" with error":""}`,2),u.delete(m),g="closed",h.stdin.end(),setTimeout(()=>{g="killed",h.terminate().catch(console.error)},5e3)}),h.stdout.pipe(m),m.pipe(h.stdin),u.add(m)}).catch(console.error)});f.on("listening",()=>{var d,p;let m={targetPort:o,server:f,connections:u};f.on("close",()=>{t.delete(m)}),t.add(m),e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o}`),l?(l=!1,a(f)):e.write(`Port forwarding local port ${(p=f.address())==null?void 0:p.port} to container port ${o} failed before listening`)}),f.on("error",m=>{var d;if(m&&(m.code==="EADDRINUSE"||m.code==="EACCES")){f.listen(0,"127.0.0.1");return}l?(l=!1,c(m)):e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o} error: ${(m==null?void 0:m.message)||String(m)}`)}),f.on("close",()=>{var m;l?(l=!1,c(new Error("Closed"))):e.write(`Port forwarding local port ${(m=f.address())==null?void 0:m.port} to container port ${o} closed`)}),f.listen(o,"127.0.0.1")})}async function _se(t,e,n,r){return e.remoteExec({env:r,cmd:n[0],args:n.slice(1),output:t})}function xY(t,e){return[...t].find(n=>{let r=n.server.address();return(r==null?void 0:r.port)===e})}var Dp=Y(require("path"));var GR=Y($r());function fx(t,e){let n,r=t.platform==="win32",o={...t,get env(){return n||(n=DY(r,t.env))}},i=Pse.bind(void 0,r,o);return t.containerWorkspaceFolder&&(o.containerWorkspaceFolder=IY(i,t.containerWorkspaceFolder)),ux(i,e)}function _Y(t,e,n,r){let o=t==="win32";return ux(bse.bind(void 0,o,e,DY(o,n)),r)}function ux(t,e){if(typeof e=="string")return IY(t,e);if(Array.isArray(e))return e.map(n=>ux(t,n));if(e&&typeof e=="object"){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r]=ux(t,e[r])}),n}return e}var Dse=/\$\{(.*?)\}/g;function DY(t,e){if(t){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r.toLowerCase()]=e[r]}),n}return e}function IY(t,e){return e.replace(Dse,Ise.bind(void 0,t))}function Ise(t,e,n){let r,o=n.split(":");return o.length>1&&(n=o[0],r=o[1]),t(e,n,r)}function Pse(t,e,n,r,o){switch(r){case"env":case"localEnv":return PY(t,e.env,o,n,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:n;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?Dp.win32:Dp.posix).basename(e.localWorkspaceFolder):n;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:n;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?Dp.posix.basename(e.containerWorkspaceFolder):n;default:return n}}function bse(t,e,n,r,o,i){switch(o){case"containerEnv":return PY(t,n,i,r,e);default:return r}}function PY(t,e,n,r,o){if(n){t&&(n=n.toLowerCase());let i=e[n];return typeof i=="string"?i:""}throw new pe({description:o?GR.t("'{0}' in {1} can not be resolved because no environment variable name is given.",r,Dp.posix.basename(o.path)):GR.t("'{0}' can not be resolved because no environment variable name is given.",r)})}var dx=Y(require("path"));var Tse=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function bY(t,e,n,r,o){let{repository:i,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(i=o.getDotfileConfiguration("dotfiles.repository")||i,s=o.getDotfileConfiguration("dotfiles.installCommand")||s,a=o.getDotfileConfiguration("dotfiles.targetPath")||a,!i)return;await r;let c=await n;i.indexOf(":")===-1&&!/^\.{0,2}\//.test(i)&&(i=`https://github.com/${i}.git`);let l=e.shellServer,u=TY(e),f=Object.keys(c).filter(m=>!(m.startsWith("BASH_FUNC_")&&m.endsWith("%%"))).reduce((m,d)=>`${m}${d}=${Rse(c[d])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${mx(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${f}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:3}):await l.exec(`# Clone & install dotfiles
${mx(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
cd ${a}
for f in ${Tse.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${f}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:3}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function Rse(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function TY(t){return dx.posix.join($i(t),".dotfilesMarker")}async function RY(t){let e=TY(t),n=dx.posix.resolve(t.homeFolder,".devcontainer",".dotfilesMarker");try{await t.shellServer.exec(`test -f '${e}' && test ! -e '${n}' && mkdir -p '${dx.posix.dirname(n)}' && cp '${e}' '${n}'`)}catch{}}var KR=Y(require("path"));async function kY(t,e){var i;let n=$i(t),r=KR.posix.join(n,".writeMachineMCPConfigMarker"),o=NY(t);if(await px(t.shellServer,r)&&!await Li(t.shellServer,o)){let s=(i=e.customizations)==null?void 0:i.vscode,a=(Array.isArray(s)?s:s?[s]:[]).map(l=>l.mcp).filter(Boolean),c=kse(a);Object.keys(c).length&&await t.shellServer.exec(`mkdir -p '${KR.posix.dirname(o)}' && cat >'${o}' <<'mcpJSON'
${JSON.stringify(c,null,"	")}
mcpJSON
`)}}function kse(t){let e={},n=Object.assign({},...t.map(s=>s.servers));Object.keys(n).length&&(e.servers=n);let r=t.filter(s=>s.inputs).map(s=>s.inputs).flat(),o=new Set,i=[];for(let s=r.length-1;s>=0;s--){let a=r[s];o.has(a.id)||(o.add(a.id),i.push(a))}return i.length&&(e.inputs=i.reverse()),e}var Hl=0,LY=/Extension host agent listening on (\d+)/;var Nse="updateContentCommand";async function yx(t){let{params:e,createdAt:n,startedAt:r,sharedDataFolder:o,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:l,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,rootShellServer:d,remoteWaylandSocket:p}=t,h;if(d&&a==="root"?h=d:h=await Wt(u,e.output,e.sessionId),!l){let D=(await h.exec("echo $PATH")).stdout.trim();l=D?{PATH:D}:{}}a||(a=await Nl(h)),!m&&a==="root"&&(m=u);let g=await NR(h),v=await Af(h,a);v||e.output.write(V0(`User ${a} not found with 'getent passwd'.`));let C=await Ase(l,v),w=await Lse(h,l,v),y=wp(Se.posix,w,e.product),{commit:S,quality:I}=e.product,x=!1,A=S&&await Ose(y,S,I||"insider",e.web,x),F=VS(g,I==="stable"),k=S&&o&&await WY(Se.posix,o,F,S,I||"insider",e.web,x),E=A&&Ul("linux",A),_;d?_=Promise.resolve(d):a==="root"&&(_=Promise.resolve(h));let T={createdAt:n,startedAt:r,osRelease:g,build:F,user:a,gid:c||(v==null?void 0:v.gid),env:l,shell:C,homeFolder:w,userDataFolder:y,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:o,legacy:x,installFolder:A,sharedInstallFolder:k,remoteWorkspaceFolder:s,nodeExecutable:E,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,shellServer:h,remoteWaylandSocket:p};return(_||m)&&(T.launchRootShellServer=()=>_||(_=Wt(m,e.output))),T}async function Nl(t){return(await t.exec("id -un")).stdout.trim()}async function Lse(t,e,n){if(e.HOME){if(e.HOME===(n==null?void 0:n.home)||(n==null?void 0:n.uid)==="0")return e.HOME;try{return await t.exec(`[ ! -e '${e.HOME}' ] || [ -w '${e.HOME}' ]`),e.HOME}catch{}}return(n==null?void 0:n.home)||"/root"}async function Ase(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function Af(t,e){let{stdout:n}=await t.exec(eY(e),{logOutput:!1});if(n.trim())return Fse(n)}function Fse(t){let e=t.replace(/\n$/,"").split(":");return{name:e[0],uid:e[2],gid:e[3],home:e[5],shell:e[6]}}async function Ose(t,e,n,r,o){return Se.posix.join(t,"bin",`${e}${n==="stable"?"":`-${n}`}${r?"-web":""}${o?"-legacy":""}`)}async function WY(t,e,n,r,o,i,s){return t.join(e,"bin",n.id,`${r}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}`)}function jY(t){return Se.posix.join(t.userDataFolder,"extensions")}function $i(t){return Se.posix.join(typeof t=="string"?t:t.userDataFolder,"data/Machine")}function Cx(t){return Se.posix.join(t.userDataFolder,"data/Machine/settings.json")}function NY(t){return Se.posix.join(t.userDataFolder,"data/User/mcp.json")}function Use(t){return Se.posix.join(t,".vscode-remote")}function wp(t,e,n){return t.join(e,n.serverDataFolderName)}function kR(t,e,n){return t.join(e,n.dataFolderName)}function Ex(t){return Se.posix.join("/var",/^\.*(.*)$/.exec(t)[1])}function Ul(t,e){return Yn(t,{posix:()=>Se.posix.join(e,"node"),win32:()=>Se.win32.join(e,"node.exe")})()}var Mv=class{constructor(e){this.settings=e}getConfiguration(e){return this.settings[us(e)]||this.settings[Tl(e)]}getNewConfiguration(e){return this.settings[us(e)]}getDotfileConfiguration(e){return this.settings[Tl(e)]||this.settings[e]}};async function Bl(t,e,n,r,o=Hl,i,s){await $se(t,e);let a=await Mse(t,e,r);await kY(e,r);let{serverDownloaded:c,didCheckRequirements:l}=await qse(t,e),u,f,m=Promise.resolve(),d;if(e.nodeExecutable){let y=await jS(t,e,a);u=y.remoteContainersCLI,f=y.remoteEnv,m=y.ready;let S=i;i=S&&(async(...x)=>(await y.ready,S(...x))),d=y.mrpcExec;let I=t.cliHost.reconnect;I&&(t.cliHost.reconnect=async x=>{await I(x),y.reconnect().catch(A=>t.output.write(ot(A&&(A.stack||A.message)||String(A))))})}let h=t.computeExtensionHostEnv||t.postCreate.enabled?$f(t,e,r,d).then(async y=>({...y,...f,...await LV(e,y),REMOTE_CONTAINERS:"true",..._Y(t.cliHost.platform,n.configFilePath,e.env,r.remoteEnv||{})})):Promise.resolve({}),g=a.getConfiguration("gitCredentialHelperConfigLocation")??t.credentialHelperConfigLocation;e.nodeExecutable&&(await Dv(t,e,[".ssh","known_hosts"],"ssh"),g!=="none"&&await gx(e,u,t.output,"system"));let v,C,w;if(e.installFolder){let S=await cae(t,e,o,d,async()=>Kse(t,e,r,!1),void 0,!0,!1,l),I=S.serverPort;w=S.connectionToken,v=I,t.forwardServerPort&&e.nodeExecutable&&(C=await SY(t,e,I,t.sessionId),v=C.address().port,t.backgroundTasks.push(async()=>dae(t,e,r)))}if(t.postCreate.enabled){let y,S=new Promise(x=>y=()=>{x()}),I=(async()=>{let x={...f,REMOTE_CONTAINERS:"true"},A=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"],F=A.reduce((k,E)=>(k[E]=(r[`${E}s`]||[]).length>0,k),{});if(t.prebuild){let k=A.indexOf("updateContentCommand");if((!A.slice(0,k+1).some(T=>F[T])||!i?"prebuild":await i(!1,!1,!0,a,x))!=="prebuild")throw new Error('"prebuild" expected')}else{let k=!0,E=!0,_=r.waitFor||Nse,T=A.indexOf(_),D=A.indexOf("postCreateCommand"),b=T<=D&&!A.slice(0,T+1).some(B=>F[B]),R=a.getDotfileConfiguration("dotfiles.repository")||t.dotfilesConfiguration.repository,L=!A.slice(0,D+1).some(B=>F[B])&&!R,N=b?"skipNonBlocking":L||!i?"stopForPersonalization":await i(k,E,!1,a,x);if(N==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;k=!1,N=!A.slice(T+1,D+1).some(W=>F[W])&&!R||!i?"stopForPersonalization":await i(k,E,!1,a,x)}if(N==="stopForPersonalization"){i||await bY(t,e,h,m,a),e.nodeExecutable&&((a.getConfiguration("copyGitConfig")??t.isCopyGitConfigEnabled)&&await PS(t,e,h.then(z=>({...e.env,...z}))),await gx(e,u,t.output,g)),await(s==null?void 0:s()),E=!1;let B=T>D&&!A.slice(D+1,T+1).some(z=>F[z]),W=!A.slice(D+1).some(z=>F[z]);N=B?"skipNonBlocking":W||!i?"done":await i(k,E,!1,a,x)}if(N==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;k=!1,N=!A.slice(T+1).some(W=>F[W])||!i?"done":await i(k,E,!1,a,x)}if(N!=="done")throw new Error('"done" expected')}})();I.then(()=>{t.postCreate.done()},x=>{t.postCreate.done(x)}),t.backgroundTasks.push(I),await Promise.race([S,I])}return{hostOrContainerPort:v,hostPortServer:C,connectionToken:w,remoteEnv:t.computeExtensionHostEnv?await h:{},serverDownloaded:c}}async function $se(t,e){let n=Use(e.homeFolder);!await vx(e.shellServer,e.userDataFolder)&&await vx(e.shellServer,n)&&await lc(t,e,["/bin/sh","-c",`cp -r '${n}' '${e.userDataFolder}'`])}async function Mse(t,e,n){var s;let r=$i(e),o=Se.posix.join(r,".writeMachineSettingsMarker"),i=Cx(e);if(await px(e.shellServer,o)&&!await Li(e.shellServer,i)){let a=(s=n.customizations)==null?void 0:s.vscode,c=(Array.isArray(a)?a:a?[a]:[]).map(d=>d.settings).filter(Boolean),l=await Hse(e.shellServer,t.getLogLevel()),u=l.length?`

Some of the command line tools available on the \`PATH\`: ${l.map(d=>`\`${d}\``).join(", ")}`:"",f=e.osRelease.prettyName||"Linux";c.push({"github.copilot.chat.codeGeneration.instructions":[{text:`This workspace is in a dev container running on ${f}.

Use \`"$BROWSER" <url>\` to open a webpage in the host's default browser.${u}`}]});let m=Wse(c);if(jse(m,n.portsAttributes),Vse(m,n.otherPortsAttributes),Object.keys(m).length)return await e.shellServer.exec(`mkdir -p '${Se.posix.dirname(i)}' && cat >'${i}' <<'settingsJSON'
${JSON.stringify(m,null,"	")}
settingsJSON
`),new Mv(m)}try{let{stdout:a}=await e.shellServer.exec(`cat ${i}`);return new Mv($e(a)||{})}catch{return new Mv({})}}async function Hse(t,e){let n=["apt","dpkg","snap","dnf","yum","rpm","apk","docker","git","gh","kubectl","podman","curl","wget","ssh","scp","rsync","gpg","ps","lsof","netstat","top","tree","find","grep","zip","unzip","tar","gzip","bzip2","xz"],{stdout:r}=await t.exec(`which ${n.join(" ")} || true`,{logOutput:e===1});return r.split(`
`).filter(Boolean).map(i=>Se.posix.basename(i)).filter(i=>n.includes(i))}var Bse=["github.copilot.chat.reviewSelection.instructions","github.copilot.chat.codeGeneration.instructions","github.copilot.chat.commitMessageGeneration.instructions","github.copilot.chat.pullRequestDescriptionGeneration.instructions","github.copilot.chat.testGeneration.instructions"];function Wse(t){let e=t.reduce((n,r)=>Bse.reduce((o,i)=>{let s=r[i];return Array.isArray(s)&&(o[i]=o[i]?o[i].concat(s):s),o},n),{});return Object.assign({},...t,e)}function jse(t,e){if(!t||!e||!Object.keys(e).length)return;let n="remote.portsAttributes";if(!t[n]){t[n]=e;return}for(let r in e)t[n][r]||(t[n][r]=e[r])}function Vse(t,e){if(!t||!e)return;let n="remote.otherPortsAttributes";t[n]||(t[n]=e)}async function Sx(t,e,n,r){let o=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,i=await e();if((await i.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let c=Se.posix.dirname(n);c!=="/"&&await i.exec(`chown ${o} ${c}`),n!=="/"&&await i.exec(`chown -R ${o} ${n}`)}else if(r&&(await i.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let u=Se.posix.dirname(r);u!=="/"&&await i.exec(`chown -R ${o} ${u}`)}}async function gx(t,e,n,r){if(e||kl)if(r==="none")n.write("Git credential helper not enabled.");else{let o=r==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;o?await o.exec(`command -v git >/dev/null 2>&1 && git config --${r} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} git-credential-helper $*; }; f' || true`):n.write("Cannot configure system wide Git credential helper without root access.")}}async function Dv(t,e,n,r,o){let{cliHost:i}=t,s=i.path.join(await i.homedir(),...n);if(!await i.isFile(s)&&(i.type==="local"||(i=await qr(process.cwd(),t.loadNativeModule,t.output),s=i.path.join(await i.homedir(),...n),!await i.isFile(s))))return!1;let a=Se.posix.join(e.homeFolder,...n);return bl(i,e.shellServer,s,a,r,o)}async function bl(t,e,n,r,o,i=""){let s=await Yse(t,n);if(s)try{let a=await r,c=Se.posix.dirname(a);return await e.exec(`# Test for ${a} and ${o}
[ -e '${a}' ] ${i}&& echo '${a}' exists && exit 1
command -v ${o} >/dev/null 2>&1 || (echo ${o} not found && exit 1) || exit 1
mkdir -p '${c}'
[ -w '${c}' ] || (echo '${c}' not writable && exit 1) || exit 1`),await e.exec(`# Copy ${n} to ${a}
${Nf(s.byteLength)} >>'${a}'`,{stdin:s}),!0}catch(a){if(a&&a.code!==1)throw a}return!1}async function Yse(t,e){try{return await t.readFile(e)}catch(n){if(n&&(n.code==="ENOENT"||n.code==="EISDIR"))return;throw n}}async function qse(t,e){let n=await AY(t,e,e.legacy);if(n!=="retryWithLegacyServer")return n;let r=await AY(t,e,!0);return e.legacy=!0,e.installFolder=r.installFolder,e.sharedInstallFolder=r.sharedInstallFolder,e.nodeExecutable=r.installFolder&&Ul("linux",r.installFolder),r}async function AY(t,e,n){let r=await Gse(t,e,n),o=!1;if(r.installFolder){let i=Se.posix.join(r.installFolder,"bin","helpers","check-requirements.sh");if(o=await aae(e.shellServer,i),o)try{await e.shellServer.exec(`'${i}'`)}catch(s){if((s==null?void 0:s.code)===100){if(!n)return"retryWithLegacyServer"}else throw(s==null?void 0:s.code)===99?new pe({description:$l.t("The container does not meet all the requirements of the VS Code Server."),detail:s==null?void 0:s.stdout.toString().trim(),step:"checkRequirements",data:{reload:!1,learnMoreUrl:"https://aka.ms/vscode-remote/faq/old-linux"},originalError:s}):s}}return{...r,didCheckRequirements:o}}async function Gse(t,e,n){let{commit:r}=t.product,{shellServer:o,launchRootShellServer:i,build:s}=e;if(!(r&&e.installFolder))return{serverDownloaded:void 0,installFolder:void 0,sharedInstallFolder:void 0};let a=n?`${e.installFolder}-legacy`:e.installFolder,c=n&&e.sharedInstallFolder?`${e.sharedInstallFolder}-legacy`:e.sharedInstallFolder;zse(e.osRelease,s),s.preview&&t.output.write(`\r
\x1B[1mSupport for ${s.label} is in preview.\x1B[22m\r
\r
`);let l=await vx(o,a),u;if(l||s===GY[s.arch]&&(i?u=(await i()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):u=o.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`)),c&&await vx(o,c))return l||await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),i&&(async()=>{await(await i()).exec(`touch '${c}'`)})().catch(console.error),await u,{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};if(l)return{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let f=!!(c&&i),m=f?c:a,d=f?await i():o,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output,alternateDownload:t.alternateDownload,legacy:n},h=Ep(p),g=await Cr(h);g||await kv(p);try{if(e.sharedDataFolderIsLocalCacheFolder)await OY(p);else{let v=Rv(t,d,h,m);t.cliHost.type!=="local"&&await Promise.race([v,Bt(2e4).then(()=>!0)])&&sx(t,e).catch(C=>t.output.write(`Error testing connection: ${(C==null?void 0:C.stack)||(C==null?void 0:C.message)||C}`)),await v}}catch(v){if(v&&v.stderr&&/unexpected end of file|not in gzip format/i.test(v.stderr.toString()))await kv(p),e.sharedDataFolderIsLocalCacheFolder?await OY(p):await Rv(t,d,h,m);else throw v}return f&&(await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),(async()=>{await d.exec(`touch '${c}' && cd '${Se.posix.dirname(c)}' && ls -td *[^_]????????????? | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await u,{serverDownloaded:!g,installFolder:a,sharedInstallFolder:c}}function zse(t,e){let n=t.version;if(e.minVersion&&n){let r=ox(n.trim());if(r&&ix(r,e.minVersion)){let o=$l.t("{0} {1} or later required.",e.label,e.minVersion.join("."));throw new pe({description:o,data:{reload:!1}})}}}async function kv(t){let{build:e,commit:n,quality:r,web:o,legacy:i,output:s}=t,a="Downloading VS Code Server",c=s.start(a);s.write(`${n} ${e.id} ${r}${o?" web":""}${i?" legacy":""}`);let l=Ep(t);await os(Se.dirname(l));let u=`https://update.code.visualstudio.com/commit:${n}/server-${i?e.id.replace("linux-","linux-legacy-"):e.id}${o?"-web":""}/${r}`;s.write(`URL: ${u}`),s.write(`Path: ${l}`);let f,m;try{m=`${l}_${Date.now()}`,await new Promise((d,p)=>{let h=wx.createWriteStream(m);s.write("Starting download.",1),$Y.https.get(u,{trackRedirects:!0},v=>{var y;if(v.statusCode<200||v.statusCode>299){s.write(`Download failed: ${v.statusCode} ${v.statusMessage}.`,1),p(new pe({description:$l.t("Downloading the VS Code Server failed. Please try again later."),originalError:`Failed to download VS Code Server (${u}): HTTP ${v.statusCode} - ${v.statusMessage}`}));return}let w=(y=[...v.redirects,v].find(S=>S.headers["x-sha256"]))==null?void 0:y.headers["x-sha256"];f=Array.isArray(w)?w[0]:w,s.write("Downloading data.",1),v.on("error",p),v.pipe(h),v.on("end",d)}).on("error",p)}),f&&await FY(u,m,f,s)}catch(d){if(s.write("Downloading failed.",1),s.write((d==null?void 0:d.stack)||(d==null?void 0:d.message)||String(d),1),t.alternateDownload)s.write(d&&(d.originalError||d.message)),s.write("Retrying to download VS Code Server."),m=`${l}_${Date.now()}`,await t.alternateDownload(u,m),f&&await FY(u,m,f,s);else throw d||new pe({description:$l.t("Downloading the VS Code Server failed. Please try again later.")})}finally{s.stop(a,c)}await rl(m,l)}async function FY(t,e,n,r){let o=Ip.createHash("sha256"),i=await at(e);o.update(i);let s=o.digest("hex");if(s!==n)throw r.write(`Failed to download VS Code Server (${t}): SHA mismatch, actual ${s} != expected ${n} (${e}, ${i.byteLength} bytes)`),new pe({description:$l.t("Downloading the VS Code Server failed. Please try again later.")})}async function Rv(t,e,n,r,o,i=!0){let s="Installing VS Code Server",a=t.output.start(s),c=`${r}_${Date.now()}`;try{if(await e.exec(`mkdir -p ${c}`),o)typeof n=="string"&&n.endsWith(".zip")?await e.exec(`unzip ${n} -d ${c}`):await e.exec(`cat ${n} | tar --no-same-owner -x${i?"z":""} -C ${c}`);else{let l=typeof n=="string"?await at(n):n;await e.exec(`${Nf(l.byteLength,!0)} | tar --no-same-owner -x${i?"z":""} -C ${c}`,{stdin:l,logOutput:"continuous"})}await e.exec(`mv -n ${Se.posix.join(c,"*",".")} ${r} && rmdir ${c}`)}catch(l){try{await e.exec(`rm -rf ${c}`)}catch{}throw l}finally{t.output.stop(s,a)}}async function OY(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s,output:a}=t,c="Unpacking VS Code Server",l=a.start(c);a.write(`${r} ${n.id} ${o} ${i?"web":""} ${s?"legacy":""}`);let u=await WY(Se,e,n,r,o,i,s),f=`${u}_${Date.now()}`;try{await os(f);let m=Ep(t);await(await ds(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",m,"--strip-components","1","-C",f],cwd:process.cwd(),output:a})).exit,await il(u,{recursive:!0,force:!0}),await rl(f,u)}catch(m){try{await il(f,{recursive:!0,force:!0})}catch{}throw m}finally{a.stop(c,l)}}function Ep(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s}=t,a=Se.join(e,"serverCache",r),c=`vscode-server-${n.id}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}${n.archiveExt||".tar.gz"}`;return Se.join(a,c)}async function VY(t,e){let n=await zY(e),r={},{stdout:o}=await lc(t,e,[Se.posix.join(e.installFolder,...bS(n)),...KY(e.userDataFolder),...JY(t.getTelemetryLevel()),"--list-extensions"],e.installFolder,{remoteEnv:r});return o.toString().split(`
`).filter(i=>!!i)}async function Kse(t,e,n,r){let o="Preparing Extensions",i=t.output.start(o),{sharedDataFolder:s}=e,a=s?nae(s):void 0,c=YY(e),l=$i(e),u=Se.posix.join(l,".installExtensionsMarker"),f=!await px(e.shellServer,u),m=Xse(t,f,n);if(e.sharedDataFolderIsLocalCacheFolder)e.launchRootShellServer&&await(await e.launchRootShellServer()).exec(`mkdir -p '${a}' && chown -R ${e.user} ${a}`),await e.shellServer.exec(`mkdir -p '${a}' && ln -s -T '${a}' '${c}' || true`);else{let p=tae(t.localCacheFolder),h=await Zse(t,e,p,a,c,[...m.builtinExtensions,...m.extensions]);Qse(t,e,p,a,c,h).catch(console.error)}m.extensions=m.extensions.filter(p=>!m.builtinExtensions.includes(p)),t.product.version&&MY.lte("1.77.0",t.product.version.split("-")[0])&&(t.output.write(`Optimizing extensions for quality: ${t.product.quality}`),m.builtinExtensions=await Jse(t,e,c,m.builtinExtensions));let d=[].concat(...m.builtinExtensions.map(p=>["--install-builtin-extension",p]),...m.extensions.map(p=>["--install-extension",p]));return r&&d.length&&d.push("--do-not-sync"),t.output.stop(o,i),{...m,args:d}}async function Jse(t,e,n,r){if(r.length===0)return r;let{shellServer:o}=e,i=(await o.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(a=>!!a&&a.endsWith("vsix"));t.output.write(`Available vsix: ${i.join(", ")||"None"}`);let s=r.map(a=>{let c=i.find(l=>l.startsWith(a.toLocaleLowerCase()));return c?`${n}/${c}`:a});return t.output.write(`Optimized extensions to install: ${s.join(", ")||"None"}`),s}function Xse(t,e,n){var a,c;let r=e?[]:t.installBuiltinExtensions||[],o=t.getAdditionalExtensionsToInstall(e),i=[...e?[]:(((a=n.customizations)==null?void 0:a.vscode)||[]).map(l=>l.extensions||[]),o],s=[];for(let l of i.flat()){let u=(c=/^(?<removal>-)?(?<idAndVersion>(?<id>[^@ ]*)[^ ]*)$/.exec(l))==null?void 0:c.groups;if(u){let f=s.findIndex(m=>m.id===u.id);f!==-1&&s.splice(f,1),u.removal||s.push(u)}}return{builtinExtensions:r,extensions:s.map(l=>l.idAndVersion)}}async function Zse(t,e,n,r,o,i){t.output.write(`Extensions cache, install extensions: ${i.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${o} && ls ${o} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(r){let c=(await s.exec(`test -d ${r} && ls ${r} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${o}' && ln -s '${r}'/* '${o}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${r} && touch ${l.map(m=>`'${m}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await os(n);let c=await ol(n),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=Se.basename(n),f=Ml.c({cwd:Se.dirname(n)},l.map(p=>Se.join(u,p))),m=Se.posix.join(o,`tmp-${Date.now()}`),d=await new Promise(p=>{let h=[];f.on("data",g=>h.push(g)),f.on("end",()=>p(Buffer.concat(h)))});await s.exec(`# Copy extensions to remote
mkdir -p ${m}
${Nf(d.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${m}
mv ${m}/* ${o} && rmdir ${m}`,{stdin:d})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function Qse(t,e,n,r,o,i){if(r&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await Bt(s);;)i=await eae(t,e,n,r,o,i),await Bt(a)}async function eae(t,e,n,r,o,{remoteExtensions:i,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${o} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(m=>!!m);if(!r){let m=i.filter(d=>u.indexOf(d)===-1);t.output.write(`Extensions cache, remote removals: ${m.join(", ")||"None"}`);for(let d of m)try{await QO(Se.join(n,d))}catch(p){if(!(p&&p.code==="ENOENT"))throw p}}let f=u.filter(m=>i.indexOf(m)===-1&&s.indexOf(m)===-1);if(t.output.write(`Extensions cache, copy to ${r?"shared cache":"local"}: ${f.join(", ")||"None"}`,1),f.length)if(r){let m=await c();await m.exec(`mkdir -p '${r}' && cd '${o}' && cp ${f.map(d=>`'${d}'`).join(" ")} '${r}'`),await m.exec(`cd '${r}' && ls -t | tail -n +500 | xargs rm -f`)}else{let m=Se.posix.basename(o),d=await l({cmd:"tar",cwd:Se.posix.dirname(o),args:["c",...f.map(v=>Se.posix.join(m,v))],output:t.output}),p=Se.join(Se.dirname(n),`${Se.basename(n)}-${Date.now()}`);await os(p);let h=Ml.x({cwd:p,strip:1}),g=new Promise((v,C)=>{h.on("error",C),h.on("finish",v)});d.stdout.pipe(h),await g;for(let v of await ol(p))await rl(Se.join(p,v),Se.join(n,v));await e1(p)}return{remoteExtensions:u,cachedExtensions:s}}var XR="extensionsCache";function tae(t){return Se.join(t,XR)}function nae(t){return Se.posix.join(t,XR)}function YY(t){return Se.posix.join(t.userDataFolder,XR)}var qY={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},GY={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},BS={x64:{label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Mac ARM",id:"darwin-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},rae={x64:{label:"Windows",id:"win32-x64",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Windows ARM",id:"win32-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},oae={linux:qY,alpine:GY,darwin:BS,win32:rae},iae={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function VS(t,e){var o;let n=iae[t.hardware],r=n&&(((o=oae[t.id])==null?void 0:o[n])||qY[n]);if(!r||e&&!r.stable)throw new pe({description:t.id==="alpine"?$l.t("Alpine Linux is not supported on the hardware architecture '{0}' of the container.",t.hardware):$l.t("The hardware architecture '{0}' of the container is not supported.",t.hardware),data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return r}async function NR(t){let e="unknown",n="unknown",r="unknown",o;try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");n=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",r=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",o=(i.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(i){console.error(i)}return{hardware:e,id:n,version:r,prettyName:o}}async function sae(t,e,n,r){let o=await Yn(n,{async win32(){var c;return{amd64:"x86_64",arm64:"arm64"}[((c=e.PROCESSOR_ARCHITECTURE)==null?void 0:c.toLowerCase())||""]||"unknown"},async posix(){return(await X({exec:t,cmd:"uname",args:["-m"],output:r})).stdout.toString().trim()}})(),i=n,s="unknown",a;if(n==="linux")try{let c=(await X({exec:t,cmd:"/bin/sh",args:["(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null"],output:r})).stdout.toString();i=(c.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",s=(c.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",a=(c.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(c){console.error(c)}return{hardware:o,id:i,version:s,prettyName:a}}async function px(t,e){try{return await t.exec(mx(e)),!0}catch{return!1}}function mx(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${Se.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function vx(t,e){try{return await t.exec(`test -d '${e}'`),!0}catch{return!1}}async function aae(t,e){try{return await t.exec(`test -x '${e}'`),!0}catch{return!1}}async function cae(t,e,n,r,o,i,s,a,c){let{installFolder:l,sharedInstallFolder:u,shellServer:f}=e,{processes:m,mntNS:d}=await sR(f),p=await zY(e),h=`(${Se.posix.join(...bS(p))})`.replace(".","\\."),g=new RegExp(`${Se.posix.join(Se.posix.dirname(l).replace(".","\\."),"[^/]*",h)}`),v=m.filter(z=>z.mntNS===d&&g.test(z.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(v,void 0,"  ")}`,1);let C=v.length?(await f.exec(`readlink -f '${l}'`)).stdout.toString().trim():void 0,{current:w,others:y}=v.reduce((z,V)=>(z[(V.cwd===C||V.cwd===l||V.cwd===u)&&g.test(V.cmd)?"current":"others"].push(V),z),{current:[],others:[]});if(s&&y.length){t.output.write(`Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${y.map(z=>z.pgrp?`-${z.pgrp}`:z.pid).join(" ")}`)}catch{}}let{commit:S,quality:I}=t.product,x=Se.posix.join($i(e),`.connection-token-${S}${I==="stable"?"":`-${I}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`),A=Se.posix.join($i(e),`.devport-${S}${I==="stable"?"":`-${I}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`);if(w.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:z}=await f.exec(`cat '${A}' 2>/dev/null`),V=z.toString().trim(),q=parseInt(V,10),ce=new RegExp(" '?--connection-token-file'? ").test(w[0].cmd)?(await f.exec(`cat '${x}'`)).stdout.toString().trim():void 0;return{serverPort:q,connectionToken:ce}}catch(z){console.error(z),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${w.map(V=>V.pgrp?`-${V.pgrp}`:V.pid).join(" ")}`)}catch{}}}let F="isLocalContainer"in t&&t.isLocalContainer,k=`${x}-${Ip.randomUUID()}`,{stdout:E}=await f.exec(`cat '${x}' 2>/dev/null || (umask 377 && echo '${Ip.randomUUID()}' >'${k}' && mv -n '${k}' '${x}' && rm -f '${k}' && cat '${x}')`),_=E.toString().trim();t.progress(5);let T="Starting VS Code Server",D=t.output.start(T),b=[Se.posix.join(l,...bS(p)),"--log",no(t.getLogLevel()),"--force-disable-user-env",...KY(e.userDataFolder),...lae(F),...JY(t.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(n),"--connection-token-file",x,"--extensions-download-dir",YY(e),...(await o()).args,"--start-server",...F?["--disable-websocket-compression"]:[""],...a?["--enable-remote-auto-shutdown"]:[],...c?["--skip-requirements-check"]:[]],R={SHELL:e.shell,...await i};delete R.NODE_OPTIONS;let N=(await lc(t,{remoteExec:e.remoteExec},b,l,{remoteEnv:R,resolveOn:LY,print:"continuous"})).cmdOutput;t.output.stop(T,D);let B=(LY.exec(N)||[])[1];if(!B)throw new Error("Port not found");return await f.exec(`echo ${B} >'${A}'`),{serverPort:parseInt(B,10),connectionToken:_}}async function zY({shellServer:t,installFolder:e}){return JSON.parse((await t.exec(`cat '${Se.posix.join(e,"product.json")}'`,{logOutput:!1})).stdout.toString().trim())}function KY(t){return["--server-data-dir",t]}function lae(t){return t?["--use-host-proxy"]:[]}function JY(t){return t?["--telemetry-level",t]:[]}var uae=/^([a-z0-9\-]+):(\d{1,5})$/;function fae(t){let e=t.match(uae);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function dae(t,e,n){let r=(n.forwardPorts||[]).map(i=>typeof i=="number"?`localhost:${i}`:i).map(fae).filter(Boolean),o=await t.getTunnels();await Promise.all(r.filter(i=>!o.find(s=>s.remoteAddress.host===i.host&&s.remoteAddress.port===i.port)).map(async({host:i,port:s})=>t.openTunnel(e,s,i)))}async function lc(t,{remoteExec:e},n,r,o={}){let i=o.print||(o.silent?"off":"end"),s=await e({env:o.remoteEnv,cwd:r,cmd:n[0],args:n.slice(1),output:o.silent?Fe:t.output}),a=[],c=[],l=new JR.StringDecoder,u=new JR.StringDecoder,f="",m="",d,p,h=new Promise((y,S)=>{d=y,p=S});s.stdout.on("data",y=>{a.push(y);let S=l.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),f+=S,o.resolveOn&&o.resolveOn.exec(f)&&d()}),s.stderr.on("data",y=>{c.push(y);let S=u.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),m+=S}),o.stdin instanceof Buffer?(s.stdin.write(o.stdin,y=>{y&&p(y)}),s.stdin.end()):o.stdin instanceof wx.ReadStream&&o.stdin.pipe(s.stdin),i!=="off"&&s.exit.catch(y=>{y!=null&&y.message&&t.output.write(ot(y==null?void 0:y.message))});let g=await Promise.race([s.exit,h]),v=Buffer.concat(a),C=Buffer.concat(c);i==="end"&&(t.output.write(f.replace(/\r?\n/g,`\r
`)),t.output.write(ot(m)));let w=`${f}
${m}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${n.join(" ")}`,cmdOutput:w,stdout:v,stderr:C,code:g.code,signal:g.signal}):{cmdOutput:w,stdout:v,stderr:C}}function Nf(t,e=!1){let r=t%8192;return`(dd iflag=fullblock bs=8192 count=${(t-r)/8192}${e?"":" 2>/dev/null"}; dd iflag=fullblock bs=${r} count=1${e?"":" 2>/dev/null"})`}async function $f(t,e,n,r){let o=hae(n,t);if(!o||o==="none")return{};let i=await mae(o,t,e.shellServer);return i||(t.output.write("userEnvProbe: not found in cache"),i=await UY(o,t,e,r,"cat /proc/self/environ","\0"),i||(t.output.write("userEnvProbe: falling back to printenv"),i=await UY(o,t,e,r,"printenv",`
`)),i&&await pae(i,o,t,e.shellServer),i||{})}async function mae(t,e,n){if(!n||!e.containerSessionDataFolder)return;let r=XY(t,e.containerSessionDataFolder);try{if(await Li(n,r)){let{stdout:o}=await n.exec(`cat '${r}'`);return JSON.parse(o)}}catch(o){e.output.write(`Failed to read/parse user env cache: ${o}`,5)}}async function pae(t,e,n,r){if(!r||!n.containerSessionDataFolder)return;let o=XY(e,n.containerSessionDataFolder);try{await r.exec(`mkdir -p '${Se.posix.dirname(o)}' && cat > '${o}' << 'envJSON'
${JSON.stringify(t,null,"	")}
envJSON
`)}catch(i){n.output.write(`Failed to cache user env: ${i}`,5)}}function XY(t,e){return Se.posix.join(e,`env-${t}.json`)}async function UY(t,e,n,r,o,i){var s;if(t==="none")return{};try{let a=Ip.randomUUID(),c=new RegExp(a+"([^]*)"+a),l=n.shell;e.output.write(`userEnvProbe shell: ${l}`);let u=Se.posix.basename(l),f=`echo -n ${a}; ${o}; echo -n ${a}`,m;/^pwsh(-preview)?$/.test(u)?m=t==="loginInteractiveShell"||t==="loginShell"?["-Login","-Command"]:["-Command"]:m=[t==="loginInteractiveShell"?"-lic":t==="loginShell"?"-lc":t==="interactiveShell"?"-ic":"-c"];let d=sn(e.output,1),p=lc({output:d},{remoteExec:await r||n.remoteExec},[l,...m,f],n.installFolder);Promise.race([p,Bt(2e3)]).then(async x=>{if(!x){let A,F=n.shellServer||await Wt(n.remoteExec,e.output);try{({processes:A}=await sR(F))}finally{n.shellServer||await F.process.terminate()}let k=A.find(E=>E.cmd.startsWith(l)&&E.cmd.indexOf(a)!==-1);if(k){let _=pj(A)[k.pid];e.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${aR(_)}`)}else e.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(x=>e.output.write(ot(x&&(x.stack||x.message)||"Error reading process tree.")));let h=await Promise.race([p,Bt(1e4)]);if(!h)return e.output.write(ot("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let g=h.stdout.toString(),v=c.exec(g),C=v?v[1]:"";if(!C||C.trim()==="-n")return;let w=C.split(i).reduce((x,A)=>{let F=A.indexOf("=");return F!==-1&&(x[A.substring(0,F)]=A.substring(F+1)),x},{});e.output.write(`userEnvProbe parsed: ${JSON.stringify(w,void 0,"  ")}`,1),delete w.PWD;let y=w.PATH,S=(s=n.env)==null?void 0:s.PATH,I=!(e.allowSystemConfigChange&&n.launchRootShellServer)&&y&&S;if(I){let x=n.user;w.PATH=gae(y,S,x==="root"||x==="0")}return e.output.write(`userEnvProbe PATHs:
Probe:     ${typeof y=="string"?`'${y}'`:"None"}
Container: ${typeof S=="string"?`'${S}'`:"None"}${I?`
Merged:    ${typeof w.PATH=="string"?`'${w.PATH}'`:"None"}`:""}`),w}catch(a){return e.output.write(ot("Error reading shell environment.")),e.output.write(ot((a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a))),{}}}function hae(t,e){let n=t==null?void 0:t.userEnvProbe;return e.output.write(`userEnvProbe: ${n||e.defaultUserEnvProbe}${n?"":" (default)"}`),n||(n=e.defaultUserEnvProbe),n}function gae(t,e,n){let r=t.split(":"),o=0;for(let i of e.split(":")){let s=r.indexOf(i);s===-1?(n||!/\/sbin(\/|$)/.test(i))&&r.splice(o++,0,i):o=s+1}return r.join(":")}async function ZR(t){for(let e of t)await(typeof e=="function"?e():e)}async function ZY(t){let{localCacheFolder:e,output:n,alternateDownload:r,exec:o,env:i,isFile:s,userDataFolder:a,homeFolder:c,product:l,platform:u}=t,f=l.commit||await pp(l.quality),m=l.commit?l.quality||"insider":"stable",d=u==="win32"?Se.win32:Se.posix,p=`${m.substring(0,1).toUpperCase()}${m.substring(1)}${m==="insider"?"s":""}-${f}`,h=d.join(wp(d,c,l),"cli","servers",p,"server");if(await hx(u,h,s))return Ul(u,h);let g=d.join(kR(d,c,l),"cli","servers",p,"server");if(await hx(u,g,s))return Ul(u,g);let v=d.join(wp(d,c,l),"bin",f);if(await hx(u,v,s))return Ul(u,v);let C=d.join(a,"bin",f);if(await hx(u,C,s))return Ul(u,C);let w=await sae(o,i,u,n),y=VS(w,!1),S={localCacheFolder:e,build:y,commit:f,quality:m,web:!1,output:n,alternateDownload:r,legacy:!1},I=Ep(S);await Cr(I)||await kv(S);let x=I.endsWith(".zip")?await wae(I):await vae(I);return await tY(o,u,x,C,!1,n),Ul(u,C)}async function hx(t,e,n){let r=Ul(t,e),i=(t==="win32"?Se.win32:Se.posix).join(e,"node_modules","node-pty","package.json");return await n(r)&&await n(i)}async function vae(t){let e=[];return await Ml.t({file:t,filter:n=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(n),onentry:n=>{new Ml.WriteEntry.Tar(n).on("data",o=>e.push(o))}}),Buffer.concat(e)}async function wae(t){let n=new HY.default(t).getEntries().filter(o=>/^[^/]*\/(LICENSE$|node(\.exe)?$|node_modules\/node-pty\/.*[^/]$)/.test(o.entryName)),r=BY.pack();for(let o of n){let i=await new Promise((s,a)=>{o.getDataAsync((c,l)=>{l?a(l):s(c)})});r.entry({name:o.entryName,mode:o.attr>>>16&4095},i)}return r.finalize(),r}var Gq=Y(require("crypto")),Zv=Y(require("path"));function pq(t){return typeof t>"u"||t===null}function yae(t){return typeof t=="object"&&t!==null}function Cae(t){return Array.isArray(t)?t:pq(t)?[]:[t]}function Eae(t,e){var n,r,o,i;if(e)for(i=Object.keys(e),n=0,r=i.length;n<r;n+=1)o=i[n],t[o]=e[o];return t}function Sae(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function xae(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var _ae=pq,Dae=yae,Iae=Cae,Pae=Sae,bae=xae,Tae=Eae,qn={isNothing:_ae,isObject:Dae,toArray:Iae,repeat:Pae,isNegativeZero:bae,extend:Tae};function hq(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function Bv(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=hq(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Bv.prototype=Object.create(Error.prototype);Bv.prototype.constructor=Bv;Bv.prototype.toString=function(e){return this.name+": "+hq(this,e)};var Ao=Bv;function QR(t,e,n,r,o){var i="",s="",a=Math.floor(o/2)-1;return r-e>a&&(i=" ... ",e=r-a+i.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:i+t.slice(e,n).replace(/\t/g,"\u2192")+s,pos:r-e+i.length}}function ek(t,e){return qn.repeat(" ",e-t.length)+t}function Rae(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],o=[],i,s=-1;i=n.exec(t.buffer);)o.push(i.index),r.push(i.index+i[0].length),t.position<=i.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,o.length).toString().length,f=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=QR(t.buffer,r[s-c],o[s-c],t.position-(r[s]-r[s-c]),f),a=qn.repeat(" ",e.indent)+ek((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=QR(t.buffer,r[s],o[s],t.position,f),a+=qn.repeat(" ",e.indent)+ek((t.line+1).toString(),u)+" | "+l.str+`
`,a+=qn.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=o.length);c++)l=QR(t.buffer,r[s+c],o[s+c],t.position-(r[s]-r[s+c]),f),a+=qn.repeat(" ",e.indent)+ek((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var kae=Rae,Nae=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Lae=["scalar","sequence","mapping"];function Aae(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function Fae(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(Nae.indexOf(n)===-1)throw new Ao('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Aae(e.styleAliases||null),Lae.indexOf(this.kind)===-1)throw new Ao('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Gr=Fae;function QY(t,e){var n=[];return t[e].forEach(function(r){var o=n.length;n.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(o=s)}),n[o]=r}),n}function Oae(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function nk(t){return this.extend(t)}nk.prototype.extend=function(e){var n=[],r=[];if(e instanceof Gr)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Ao("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(i){if(!(i instanceof Gr))throw new Ao("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new Ao("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new Ao("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof Gr))throw new Ao("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(nk.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=QY(o,"implicit"),o.compiledExplicit=QY(o,"explicit"),o.compiledTypeMap=Oae(o.compiledImplicit,o.compiledExplicit),o};var Uae=nk,$ae=new Gr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Mae=new Gr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Hae=new Gr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Bae=new Uae({explicit:[$ae,Mae,Hae]});function Wae(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function jae(){return null}function Vae(t){return t===null}var Yae=new Gr("tag:yaml.org,2002:null",{kind:"scalar",resolve:Wae,construct:jae,predicate:Vae,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function qae(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Gae(t){return t==="true"||t==="True"||t==="TRUE"}function zae(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Kae=new Gr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:qae,construct:Gae,predicate:zae,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Jae(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Xae(t){return 48<=t&&t<=55}function Zae(t){return 48<=t&&t<=57}function Qae(t){if(t===null)return!1;var e=t.length,n=0,r=!1,o;if(!e)return!1;if(o=t[n],(o==="-"||o==="+")&&(o=t[++n]),o==="0"){if(n+1===e)return!0;if(o=t[++n],o==="b"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;r=!0}return r&&o!=="_"}if(o==="x"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!Jae(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}if(o==="o"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!Xae(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}}if(o==="_")return!1;for(;n<e;n++)if(o=t[n],o!=="_"){if(!Zae(t.charCodeAt(n)))return!1;r=!0}return!(!r||o==="_")}function ece(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function tce(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!qn.isNegativeZero(t)}var nce=new Gr("tag:yaml.org,2002:int",{kind:"scalar",resolve:Qae,construct:ece,predicate:tce,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),rce=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function oce(t){return!(t===null||!rce.test(t)||t[t.length-1]==="_")}function ice(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var sce=/^[-+]?[0-9]+e/;function ace(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qn.isNegativeZero(t))return"-0.0";return n=t.toString(10),sce.test(n)?n.replace("e",".e"):n}function cce(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||qn.isNegativeZero(t))}var lce=new Gr("tag:yaml.org,2002:float",{kind:"scalar",resolve:oce,construct:ice,predicate:cce,represent:ace,defaultStyle:"lowercase"}),uce=Bae.extend({implicit:[Yae,Kae,nce,lce]}),fce=uce,gq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),vq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function dce(t){return t===null?!1:gq.exec(t)!==null||vq.exec(t)!==null}function mce(t){var e,n,r,o,i,s,a,c=0,l=null,u,f,m;if(e=gq.exec(t),e===null&&(e=vq.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(n,r,o));if(i=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],f=+(e[11]||0),l=(u*60+f)*6e4,e[9]==="-"&&(l=-l)),m=new Date(Date.UTC(n,r,o,i,s,a,c)),l&&m.setTime(m.getTime()-l),m}function pce(t){return t.toISOString()}var hce=new Gr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:dce,construct:mce,instanceOf:Date,represent:pce});function gce(t){return t==="<<"||t===null}var vce=new Gr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:gce}),ak=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function wce(t){if(t===null)return!1;var e,n,r=0,o=t.length,i=ak;for(n=0;n<o;n++)if(e=i.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function yce(t){var e,n,r=t.replace(/[\r\n=]/g,""),o=r.length,i=ak,s=0,a=[];for(e=0;e<o;e++)e%4===0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(r.charAt(e));return n=o%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function Cce(t){var e="",n=0,r,o,i=t.length,s=ak;for(r=0;r<i;r++)r%3===0&&r&&(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]),n=(n<<8)+t[r];return o=i%3,o===0?(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]):o===2?(e+=s[n>>10&63],e+=s[n>>4&63],e+=s[n<<2&63],e+=s[64]):o===1&&(e+=s[n>>2&63],e+=s[n<<4&63],e+=s[64],e+=s[64]),e}function Ece(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Sce=new Gr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:wce,construct:yce,predicate:Ece,represent:Cce}),xce=Object.prototype.hasOwnProperty,_ce=Object.prototype.toString;function Dce(t){if(t===null)return!0;var e=[],n,r,o,i,s,a=t;for(n=0,r=a.length;n<r;n+=1){if(o=a[n],s=!1,_ce.call(o)!=="[object Object]")return!1;for(i in o)if(xce.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(i)===-1)e.push(i);else return!1}return!0}function Ice(t){return t!==null?t:[]}var Pce=new Gr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Dce,construct:Ice}),bce=Object.prototype.toString;function Tce(t){if(t===null)return!0;var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1){if(r=s[e],bce.call(r)!=="[object Object]"||(o=Object.keys(r),o.length!==1))return!1;i[e]=[o[0],r[o[0]]]}return!0}function Rce(t){if(t===null)return[];var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1)r=s[e],o=Object.keys(r),i[e]=[o[0],r[o[0]]];return i}var kce=new Gr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Tce,construct:Rce}),Nce=Object.prototype.hasOwnProperty;function Lce(t){if(t===null)return!0;var e,n=t;for(e in n)if(Nce.call(n,e)&&n[e]!==null)return!1;return!0}function Ace(t){return t!==null?t:{}}var Fce=new Gr("tag:yaml.org,2002:set",{kind:"mapping",resolve:Lce,construct:Ace}),wq=fce.extend({implicit:[hce,vce],explicit:[Sce,Pce,kce,Fce]}),jl=Object.prototype.hasOwnProperty,xx=1,yq=2,Cq=3,_x=4,tk=1,Oce=2,eq=3,Uce=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,$ce=/[\x85\u2028\u2029]/,Mce=/[,\[\]\{\}]/,Eq=/^(?:!|!!|![a-z\-]+!)$/i,Sq=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function tq(t){return Object.prototype.toString.call(t)}function Zs(t){return t===10||t===13}function Wf(t){return t===9||t===32}function Fo(t){return t===9||t===32||t===10||t===13}function bp(t){return t===44||t===91||t===93||t===123||t===125}function Hce(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Bce(t){return t===120?2:t===117?4:t===85?8:0}function Wce(t){return 48<=t&&t<=57?t-48:-1}function nq(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function jce(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var xq=new Array(256),_q=new Array(256);for(Bf=0;Bf<256;Bf++)xq[Bf]=nq(Bf)?1:0,_q[Bf]=nq(Bf);var Bf;function Vce(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||wq,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Dq(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=kae(n),new Ao(e,n)}function Pe(t,e){throw Dq(t,e)}function Dx(t,e){t.onWarning&&t.onWarning.call(null,Dq(t,e))}var rq={YAML:function(e,n,r){var o,i,s;e.version!==null&&Pe(e,"duplication of %YAML directive"),r.length!==1&&Pe(e,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),o===null&&Pe(e,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Pe(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Dx(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var o,i;r.length!==2&&Pe(e,"TAG directive accepts exactly two arguments"),o=r[0],i=r[1],Eq.test(o)||Pe(e,"ill-formed tag handle (first argument) of the TAG directive"),jl.call(e.tagMap,o)&&Pe(e,'there is a previously declared suffix for "'+o+'" tag handle'),Sq.test(i)||Pe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Pe(e,"tag prefix is malformed: "+i)}e.tagMap[o]=i}};function Wl(t,e,n,r){var o,i,s,a;if(e<n){if(a=t.input.slice(e,n),r)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Pe(t,"expected valid JSON character");else Uce.test(a)&&Pe(t,"the stream contains non-printable characters");t.result+=a}}function oq(t,e,n,r){var o,i,s,a;for(qn.isObject(n)||Pe(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),s=0,a=o.length;s<a;s+=1)i=o[s],jl.call(e,i)||(e[i]=n[i],r[i]=!0)}function Tp(t,e,n,r,o,i,s,a,c){var l,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),l=0,u=o.length;l<u;l+=1)Array.isArray(o[l])&&Pe(t,"nested arrays are not supported inside keys"),typeof o=="object"&&tq(o[l])==="[object Object]"&&(o[l]="[object Object]");if(typeof o=="object"&&tq(o)==="[object Object]"&&(o="[object Object]"),o=String(o),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)oq(t,e,i[l],n);else oq(t,e,i,n);else!t.json&&!jl.call(n,o)&&jl.call(e,o)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,Pe(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(e,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):e[o]=i,delete n[o];return e}function ck(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Pe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Tn(t,e,n){for(var r=0,o=t.input.charCodeAt(t.position);o!==0;){for(;Wf(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(e&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(Zs(o))for(ck(t),o=t.input.charCodeAt(t.position),r++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&Dx(t,"deficient indentation"),r}function bx(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Fo(n)))}function lk(t,e){e===1?t.result+=" ":e>1&&(t.result+=qn.repeat(`
`,e-1))}function Yce(t,e,n){var r,o,i,s,a,c,l,u,f=t.kind,m=t.result,d;if(d=t.input.charCodeAt(t.position),Fo(d)||bp(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(o=t.input.charCodeAt(t.position+1),Fo(o)||n&&bp(o)))return!1;for(t.kind="scalar",t.result="",i=s=t.position,a=!1;d!==0;){if(d===58){if(o=t.input.charCodeAt(t.position+1),Fo(o)||n&&bp(o))break}else if(d===35){if(r=t.input.charCodeAt(t.position-1),Fo(r))break}else{if(t.position===t.lineStart&&bx(t)||n&&bp(d))break;if(Zs(d))if(c=t.line,l=t.lineStart,u=t.lineIndent,Tn(t,!1,-1),t.lineIndent>=e){a=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Wl(t,i,s,!1),lk(t,t.line-c),i=s=t.position,a=!1),Wf(d)||(s=t.position+1),d=t.input.charCodeAt(++t.position)}return Wl(t,i,s,!1),t.result?!0:(t.kind=f,t.result=m,!1)}function qce(t,e){var n,r,o;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=o=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Wl(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,o=t.position;else return!0;else Zs(n)?(Wl(t,r,o,!0),lk(t,Tn(t,!1,e)),r=o=t.position):t.position===t.lineStart&&bx(t)?Pe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);Pe(t,"unexpected end of the stream within a single quoted scalar")}function Gce(t,e){var n,r,o,i,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Wl(t,n,t.position,!0),t.position++,!0;if(a===92){if(Wl(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),Zs(a))Tn(t,!1,e);else if(a<256&&xq[a])t.result+=_q[a],t.position++;else if((s=Bce(a))>0){for(o=s,i=0;o>0;o--)a=t.input.charCodeAt(++t.position),(s=Hce(a))>=0?i=(i<<4)+s:Pe(t,"expected hexadecimal character");t.result+=jce(i),t.position++}else Pe(t,"unknown escape sequence");n=r=t.position}else Zs(a)?(Wl(t,n,r,!0),lk(t,Tn(t,!1,e)),n=r=t.position):t.position===t.lineStart&&bx(t)?Pe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Pe(t,"unexpected end of the stream within a double quoted scalar")}function zce(t,e){var n=!0,r,o,i,s=t.tag,a,c=t.anchor,l,u,f,m,d,p=Object.create(null),h,g,v,C;if(C=t.input.charCodeAt(t.position),C===91)u=93,d=!1,a=[];else if(C===123)u=125,d=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),C=t.input.charCodeAt(++t.position);C!==0;){if(Tn(t,!0,e),C=t.input.charCodeAt(t.position),C===u)return t.position++,t.tag=s,t.anchor=c,t.kind=d?"mapping":"sequence",t.result=a,!0;n?C===44&&Pe(t,"expected the node content, but found ','"):Pe(t,"missed comma between flow collection entries"),g=h=v=null,f=m=!1,C===63&&(l=t.input.charCodeAt(t.position+1),Fo(l)&&(f=m=!0,t.position++,Tn(t,!0,e))),r=t.line,o=t.lineStart,i=t.position,Rp(t,e,xx,!1,!0),g=t.tag,h=t.result,Tn(t,!0,e),C=t.input.charCodeAt(t.position),(m||t.line===r)&&C===58&&(f=!0,C=t.input.charCodeAt(++t.position),Tn(t,!0,e),Rp(t,e,xx,!1,!0),v=t.result),d?Tp(t,a,p,g,h,v,r,o,i):f?a.push(Tp(t,null,p,g,h,v,r,o,i)):a.push(h),Tn(t,!0,e),C=t.input.charCodeAt(t.position),C===44?(n=!0,C=t.input.charCodeAt(++t.position)):n=!1}Pe(t,"unexpected end of the stream within a flow collection")}function Kce(t,e){var n,r,o=tk,i=!1,s=!1,a=e,c=0,l=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)tk===o?o=f===43?eq:Oce:Pe(t,"repeat of a chomping mode identifier");else if((u=Wce(f))>=0)u===0?Pe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Pe(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Wf(f)){do f=t.input.charCodeAt(++t.position);while(Wf(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Zs(f)&&f!==0)}for(;f!==0;){for(ck(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Zs(f)){c++;continue}if(t.lineIndent<a){o===eq?t.result+=qn.repeat(`
`,i?1+c:c):o===tk&&i&&(t.result+=`
`);break}for(r?Wf(f)?(l=!0,t.result+=qn.repeat(`
`,i?1+c:c)):l?(l=!1,t.result+=qn.repeat(`
`,c+1)):c===0?i&&(t.result+=" "):t.result+=qn.repeat(`
`,c):t.result+=qn.repeat(`
`,i?1+c:c),i=!0,s=!0,c=0,n=t.position;!Zs(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Wl(t,n,t.position,!1)}return!0}function iq(t,e){var n,r=t.tag,o=t.anchor,i=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=i),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Fo(s))));){if(a=!0,t.position++,Tn(t,!0,-1)&&t.lineIndent<=e){i.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,Rp(t,e,Cq,!1,!0),i.push(t.result),Tn(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)Pe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=o,t.kind="sequence",t.result=i,!0):!1}function Jce(t,e,n){var r,o,i,s,a,c,l=t.tag,u=t.anchor,f={},m=Object.create(null),d=null,p=null,h=null,g=!1,v=!1,C;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),C=t.input.charCodeAt(t.position);C!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),i=t.line,(C===63||C===58)&&Fo(r))C===63?(g&&(Tp(t,f,m,d,p,null,s,a,c),d=p=h=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):Pe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,C=r;else{if(s=t.line,a=t.lineStart,c=t.position,!Rp(t,n,yq,!1,!0))break;if(t.line===i){for(C=t.input.charCodeAt(t.position);Wf(C);)C=t.input.charCodeAt(++t.position);if(C===58)C=t.input.charCodeAt(++t.position),Fo(C)||Pe(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(Tp(t,f,m,d,p,null,s,a,c),d=p=h=null),v=!0,g=!1,o=!1,d=t.tag,p=t.result;else if(v)Pe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)Pe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===i||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,c=t.position),Rp(t,e,_x,!0,o)&&(g?p=t.result:h=t.result),g||(Tp(t,f,m,d,p,h,s,a,c),d=p=h=null),Tn(t,!0,-1),C=t.input.charCodeAt(t.position)),(t.line===i||t.lineIndent>e)&&C!==0)Pe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&Tp(t,f,m,d,p,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=f),v}function Xce(t){var e,n=!1,r=!1,o,i,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Pe(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(n=!0,s=t.input.charCodeAt(++t.position)):s===33?(r=!0,o="!!",s=t.input.charCodeAt(++t.position)):o="!",e=t.position,n){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(i=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Pe(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Fo(s);)s===33&&(r?Pe(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(e-1,t.position+1),Eq.test(o)||Pe(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(e,t.position),Mce.test(i)&&Pe(t,"tag suffix cannot contain flow indicator characters")}i&&!Sq.test(i)&&Pe(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Pe(t,"tag name is malformed: "+i)}return n?t.tag=i:jl.call(t.tagMap,o)?t.tag=t.tagMap[o]+i:o==="!"?t.tag="!"+i:o==="!!"?t.tag="tag:yaml.org,2002:"+i:Pe(t,'undeclared tag handle "'+o+'"'),!0}function Zce(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&Pe(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Fo(n)&&!bp(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Qce(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Fo(r)&&!bp(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),jl.call(t.anchorMap,n)||Pe(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Tn(t,!0,-1),!0}function Rp(t,e,n,r,o){var i,s,a,c=1,l=!1,u=!1,f,m,d,p,h,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,i=s=a=_x===n||Cq===n,r&&Tn(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;Xce(t)||Zce(t);)Tn(t,!0,-1)?(l=!0,a=i,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||o),(c===1||_x===n)&&(xx===n||yq===n?h=e:h=e+1,g=t.position-t.lineStart,c===1?a&&(iq(t,g)||Jce(t,g,h))||zce(t,h)?u=!0:(s&&Kce(t,h)||qce(t,h)||Gce(t,h)?u=!0:Qce(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Pe(t,"alias node should not have any properties")):Yce(t,h,xx===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&iq(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Pe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,m=t.implicitTypes.length;f<m;f+=1)if(p=t.implicitTypes[f],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(jl.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,d=t.typeMap.multi[t.kind||"fallback"],f=0,m=d.length;f<m;f+=1)if(t.tag.slice(0,d[f].tag.length)===d[f].tag){p=d[f];break}p||Pe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Pe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Pe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function ele(t){var e=t.position,n,r,o,i=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Tn(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(i=!0,s=t.input.charCodeAt(++t.position),n=t.position;s!==0&&!Fo(s);)s=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),o=[],r.length<1&&Pe(t,"directive name must not be less than one character in length");s!==0;){for(;Wf(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Zs(s));break}if(Zs(s))break;for(n=t.position;s!==0&&!Fo(s);)s=t.input.charCodeAt(++t.position);o.push(t.input.slice(n,t.position))}s!==0&&ck(t),jl.call(rq,r)?rq[r](t,r,o):Dx(t,'unknown document directive "'+r+'"')}if(Tn(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Tn(t,!0,-1)):i&&Pe(t,"directives end mark is expected"),Rp(t,t.lineIndent-1,_x,!1,!0),Tn(t,!0,-1),t.checkLineBreaks&&$ce.test(t.input.slice(e,t.position))&&Dx(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&bx(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Tn(t,!0,-1));return}if(t.position<t.length-1)Pe(t,"end of the stream or a document separator is expected");else return}function Iq(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new Vce(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,Pe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)ele(n);return n.documents}function tle(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=Iq(t,n);if(typeof e!="function")return r;for(var o=0,i=r.length;o<i;o+=1)e(r[o])}function nle(t,e){var n=Iq(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new Ao("expected a single document in the stream, but found more")}}var rle=tle,ole=nle,Pq={loadAll:rle,load:ole},bq=Object.prototype.toString,Tq=Object.prototype.hasOwnProperty,uk=65279,ile=9,Wv=10,sle=13,ale=32,cle=33,lle=34,rk=35,ule=37,fle=38,dle=39,mle=42,Rq=44,ple=45,Ix=58,hle=61,gle=62,vle=63,wle=64,kq=91,Nq=93,yle=96,Lq=123,Cle=124,Aq=125,zr={};zr[0]="\\0";zr[7]="\\a";zr[8]="\\b";zr[9]="\\t";zr[10]="\\n";zr[11]="\\v";zr[12]="\\f";zr[13]="\\r";zr[27]="\\e";zr[34]='\\"';zr[92]="\\\\";zr[133]="\\N";zr[160]="\\_";zr[8232]="\\L";zr[8233]="\\P";var Ele=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Sle=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function xle(t,e){var n,r,o,i,s,a,c;if(e===null)return{};for(n={},r=Object.keys(e),o=0,i=r.length;o<i;o+=1)s=r[o],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&Tq.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[s]=a;return n}function _le(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new Ao("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+qn.repeat("0",r-e.length)+e}var Dle=1,jv=2;function Ile(t){this.schema=t.schema||wq,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=qn.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=xle(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?jv:Dle,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function sq(t,e){for(var n=qn.repeat(" ",e),r=0,o=-1,i="",s,a=t.length;r<a;)o=t.indexOf(`
`,r),o===-1?(s=t.slice(r),r=a):(s=t.slice(r,o+1),r=o+1),s.length&&s!==`
`&&(i+=n),i+=s;return i}function ok(t,e){return`
`+qn.repeat(" ",t.indent*e)}function Ple(t,e){var n,r,o;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(o=t.implicitTypes[n],o.resolve(e))return!0;return!1}function Px(t){return t===ale||t===ile}function Vv(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==uk||65536<=t&&t<=1114111}function aq(t){return Vv(t)&&t!==uk&&t!==sle&&t!==Wv}function cq(t,e,n){var r=aq(t),o=r&&!Px(t);return(n?r:r&&t!==Rq&&t!==kq&&t!==Nq&&t!==Lq&&t!==Aq)&&t!==rk&&!(e===Ix&&!o)||aq(e)&&!Px(e)&&t===rk||e===Ix&&o}function ble(t){return Vv(t)&&t!==uk&&!Px(t)&&t!==ple&&t!==vle&&t!==Ix&&t!==Rq&&t!==kq&&t!==Nq&&t!==Lq&&t!==Aq&&t!==rk&&t!==fle&&t!==mle&&t!==cle&&t!==Cle&&t!==hle&&t!==gle&&t!==dle&&t!==lle&&t!==ule&&t!==wle&&t!==yle}function Tle(t){return!Px(t)&&t!==Ix}function Hv(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function Fq(t){var e=/^\n* /;return e.test(t)}var Oq=1,ik=2,Uq=3,$q=4,Pp=5;function Rle(t,e,n,r,o,i,s,a){var c,l=0,u=null,f=!1,m=!1,d=r!==-1,p=-1,h=ble(Hv(t,0))&&Tle(Hv(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=Hv(t,c),!Vv(l))return Pp;h=h&&cq(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=Hv(t,c),l===Wv)f=!0,d&&(m=m||c-p-1>r&&t[p+1]!==" ",p=c);else if(!Vv(l))return Pp;h=h&&cq(l,u,a),u=l}m=m||d&&c-p-1>r&&t[p+1]!==" "}return!f&&!m?h&&!s&&!o(t)?Oq:i===jv?Pp:ik:n>9&&Fq(t)?Pp:s?i===jv?Pp:ik:m?$q:Uq}function kle(t,e,n,r,o){t.dump=function(){if(e.length===0)return t.quotingType===jv?'""':"''";if(!t.noCompatMode&&(Ele.indexOf(e)!==-1||Sle.test(e)))return t.quotingType===jv?'"'+e+'"':"'"+e+"'";var i=t.indent*Math.max(1,n),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=r||t.flowLevel>-1&&n>=t.flowLevel;function c(l){return Ple(t,l)}switch(Rle(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!r,o)){case Oq:return e;case ik:return"'"+e.replace(/'/g,"''")+"'";case Uq:return"|"+lq(e,t.indent)+uq(sq(e,i));case $q:return">"+lq(e,t.indent)+uq(sq(Nle(e,s),i));case Pp:return'"'+Lle(e)+'"';default:throw new Ao("impossible error: invalid scalar style")}}()}function lq(t,e){var n=Fq(t)?String(e):"",r=t[t.length-1]===`
`,o=r&&(t[t.length-2]===`
`||t===`
`),i=o?"+":r?"":"-";return n+i+`
`}function uq(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function Nle(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,n.lastIndex=l,fq(t.slice(0,l),e)}(),o=t[0]===`
`||t[0]===" ",i,s;s=n.exec(t);){var a=s[1],c=s[2];i=c[0]===" ",r+=a+(!o&&!i&&c!==""?`
`:"")+fq(c,e),o=i}return r}function fq(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,o=0,i,s=0,a=0,c="";r=n.exec(t);)a=r.index,a-o>e&&(i=s>o?s:a,c+=`
`+t.slice(o,i),o=i+1),s=a;return c+=`
`,t.length-o>e&&s>o?c+=t.slice(o,s)+`
`+t.slice(s+1):c+=t.slice(o),c.slice(1)}function Lle(t){for(var e="",n=0,r,o=0;o<t.length;n>=65536?o+=2:o++)n=Hv(t,o),r=zr[n],!r&&Vv(n)?(e+=t[o],n>=65536&&(e+=t[o+1])):e+=r||_le(n);return e}function Ale(t,e,n){var r="",o=t.tag,i,s,a;for(i=0,s=n.length;i<s;i+=1)a=n[i],t.replacer&&(a=t.replacer.call(n,String(i),a)),(uc(t,e,a,!1,!1)||typeof a>"u"&&uc(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=o,t.dump="["+r+"]"}function dq(t,e,n,r){var o="",i=t.tag,s,a,c;for(s=0,a=n.length;s<a;s+=1)c=n[s],t.replacer&&(c=t.replacer.call(n,String(s),c)),(uc(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&uc(t,e+1,null,!0,!0,!1,!0))&&((!r||o!=="")&&(o+=ok(t,e)),t.dump&&Wv===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=i,t.dump=o||"[]"}function Fle(t,e,n){var r="",o=t.tag,i=Object.keys(n),s,a,c,l,u;for(s=0,a=i.length;s<a;s+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=i[s],l=n[c],t.replacer&&(l=t.replacer.call(n,c,l)),uc(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),uc(t,e,l,!1,!1)&&(u+=t.dump,r+=u));t.tag=o,t.dump="{"+r+"}"}function Ole(t,e,n,r){var o="",i=t.tag,s=Object.keys(n),a,c,l,u,f,m;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Ao("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)m="",(!r||o!=="")&&(m+=ok(t,e)),l=s[a],u=n[l],t.replacer&&(u=t.replacer.call(n,l,u)),uc(t,e+1,l,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&Wv===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,f&&(m+=ok(t,e)),uc(t,e+1,u,!0,f)&&(t.dump&&Wv===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,o+=m));t.tag=i,t.dump=o||"{}"}function mq(t,e,n){var r,o,i,s,a,c;for(o=n?t.explicitTypes:t.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,bq.call(a.represent)==="[object Function]")r=a.represent(e,c);else if(Tq.call(a.represent,c))r=a.represent[c](e,c);else throw new Ao("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}function uc(t,e,n,r,o,i,s){t.tag=null,t.dump=n,mq(t,n,!1)||mq(t,n,!0);var a=bq.call(t.dump),c=r,l;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,m;if(u&&(f=t.duplicates.indexOf(n),m=f!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(o=!1),m&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&m&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(Ole(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(Fle(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?dq(t,e-1,t.dump,o):dq(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(Ale(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&kle(t,t.dump,e,i,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Ao("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function Ule(t,e){var n=[],r=[],o,i;for(sk(t,n,r),o=0,i=r.length;o<i;o+=1)e.duplicates.push(n[r[o]]);e.usedDuplicates=new Array(i)}function sk(t,e,n){var r,o,i;if(t!==null&&typeof t=="object")if(o=e.indexOf(t),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(e.push(t),Array.isArray(t))for(o=0,i=t.length;o<i;o+=1)sk(t[o],e,n);else for(r=Object.keys(t),o=0,i=r.length;o<i;o+=1)sk(t[r[o]],e,n)}function $le(t,e){e=e||{};var n=new Ile(e);n.noRefs||Ule(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),uc(n,0,r,!0,!0)?n.dump+`
`:""}var Mle=$le,Hle={dump:Mle};function fk(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Yv=Pq.load,T_e=Pq.loadAll,R_e=Hle.dump;var k_e=fk("safeLoad","load"),N_e=fk("safeLoadAll","loadAll"),L_e=fk("safeDump","dump");var ps=Y(require("path")),Vq=Y(require("os")),Yq=Y(require("crypto")),qq=Y(zE());var qv=Y(require("path")),Bq=Y(require("os"));var Hq=Y(require("crypto"));var ms={async readDocument(t){switch(t.scheme){case"file":try{return(await at(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,n){switch(t.scheme){case"file":let r=Do(n,e);await bg(t.fsPath,r);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Ke=class t{constructor(e,n=t.scheme){this.fileHost=e;this.scheme=n}static scheme="vscode-fileHost";async readDocument(e){switch(e.scheme){case this.scheme:try{return(await this.fileHost.readFile(_e(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case this.scheme:let o=Do(r,n);await this.fileHost.writeFile(_e(e,this.fileHost.platform),Buffer.from(o));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},ao=class t{constructor(e){this.shellServer=e}static scheme="vscode-remote";static nonce;async readDocument(e){switch(e.scheme){case t.scheme:try{let{stdout:n}=await this.shellServer.exec(`cat ${e.path}`);return n}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case t.scheme:try{t.nonce||(t.nonce=Hq.randomUUID());let o=Do(r,n),i=`EOF-${t.nonce}`;await this.shellServer.exec(`cat <<'${i}' >${e.path}
${o}
${i}
`)}catch(o){console.log(o)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},mk=class{constructor(e){this.documents=e}async readDocument(e){let n=this.documents[e.scheme];if(!n)throw new Error(`Unsupported scheme: ${e.toString()}`);return n.readDocument(e)}async applyEdits(e,n,r){let o=this.documents[e.scheme];if(!o)throw new Error(`Unsupported scheme: ${e.toString()}`);return o.applyEdits(e,n,r)}};function ur(t,e){let n={file:ms,[Ke.scheme]:new Ke(t)};return e&&(n[ao.scheme]="readFile"in e?new Ke(e,ao.scheme):new ao(e)),new mk(n)}var dk=new Map;async function pk(t,e){let n=t.toString(),r=dk.get(n);if(r||dk.set(n,r=[]),r.push(e),r.length===1){for(;r.length;)await r[0](),r.shift();dk.delete(n)}}function _e(t,e){let n;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===Ke.scheme)?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,e==="win32"&&(n=n.replace(/\//g,"\\"),n[0]==="\\"&&n[1]!=="\\"&&(n=`C:${n}`)),n}function Rn(t,e,n){let r=t==="win32"?"/"+n.replace(/\\/g,"/"):n;return e.with({path:r})}function Vl(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function Gv(t,e){let n=t.normalize(e);return Vl(t,"").includes(n)}async function jf(t,e){let n=Vl(t.path,e);for(let r of n)if(await t.isFile(r))return Ce.file(r).with({scheme:Ke.scheme})}async function Wq(t){let e=Vl(qv,t);for(let n of e)if(await Cr(n))return n}var fc=`{${Bq.EOL}}`;async function Mi(t,e,n,r){e.scheme==="file"&&await os(qv.dirname(e.fsPath)),await t.applyEdits(e,n,r)}function Vf(t){let e=qv.posix.dirname(t.path);return t.with({path:e})}var zv=require("string_decoder");function Kv(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e={...t},n=e.customizations||(e.customizations={}),r=n.vscode||(n.vscode={});return e.extensions&&(r.extensions=(r.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(r.settings={...e.settings,...r.settings||{}},delete e.settings),e.devPort!==void 0&&r.devPort===void 0&&(r.devPort=e.devPort,delete e.devPort),e}function hk(t,e,n){return Tx(t,e.configFilePath,n)}function Tx(t,e,n){let r=Vf(e);return e.with({path:ps.posix.resolve(r.path,t.platform==="win32"&&e.scheme!==ao.scheme?(ps.win32.isAbsolute(n)?"/":"")+n.replace(/\\/g,"/"):n)})}function Oo(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function Rx(t){return t&&(Oo(t)||"image"in t||"dockerComposeFile"in t)}function Yf(t,e){return hk(t,e,Wle(e))}function Wle(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function Yl(t,e,n,r){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(o=>_e(hk(t,e,o),t.platform))}else if(typeof e.dockerComposeFile=="string")return[_e(hk(t,e,e.dockerComposeFile),t.platform)];if(r){let o=n==null?void 0:n.COMPOSE_FILE;if(o)return o.split(t.path.delimiter).map(a=>t.path.resolve(r,a));try{let a=t.path.join(r,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(f=>t.path.resolve(r,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let i=[t.path.resolve(r,"docker-compose.yml")],s=t.path.resolve(r,"docker-compose.override.yml");return await t.isFile(s)&&i.push(s),i}return[]}async function oi(t,e){let{cliHost:n,postCreate:r,output:o}=t;o.write(`Running Dev Containers CLI:   ${e.join(" ")}
`);let i=await jle(t),s=Jv(n),a;try{await Vle({exec:n.exec,cwd:t.cwd||i.cwd,cmd:s.cmd,args:[...s.args,i.script,...e],env:await gk(t,s.cmd),stdin:r==null?void 0:r.onDidInput,output:o,stdoutData:c=>a=c,stderrData:c=>o.event(c)}),o.write(a?JSON.stringify(a,void 0,4):"(No dev container CLI standard out)",1),o.write("Dev Containers CLI completed",1)}catch(c){throw c.data=a,c}return a}async function jle(t){let{cliHost:e,extensionPath:n,output:r}=t,o=ps.join(n,"dist","spec-node","devContainersSpecCLI.js"),i=e.type==="local"?n:e.path.join(await e.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${t.package.version}`),s=e.type==="local"?o:e.path.join(i,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","remote"].indexOf(e.type)!==-1){let a="Checking for Dev Containers CLI",c=r.start(a),l=await e.isFile(s);if(r.stop(a,c),!l){let u="Copying Dev Containers CLI",f=r.start(u),m=`${i}-${Yq.randomUUID()}`,d=e.path.join(m,"dist","spec-node","devContainersSpecCLI.js");await e.mkdirp(e.path.dirname(d)),await Promise.all([jq(ps.join(n,"package.json"),e,e.path.join(m,"package.json")),jq(o,e,d),Xv(ps.join(n,"scripts"),e,e.path.join(m,"scripts"),r)]),await e.rename(m,i),r.stop(u,f)}}return{cwd:i,script:s}}function Jv(t){if(t.type==="local")return kl?{cmd:process.argv[0],args:[]}:{cmd:process.argv[0],args:[]};if(t.nodeExecutable)return{cmd:t.nodeExecutable,args:[]};throw new Error("Node executable required")}async function Vle(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,stdoutData:c,stderrData:l}=t,u=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((f,m)=>{let d=new zv.StringDecoder,p="";u.stdout.on("data",C=>{p+=d.write(C);let w=p.split(`
`);p=w.pop();for(let y of w)if(y.trim())try{c(JSON.parse(y))}catch{a.write(y)}}),u.stdout.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let h=new zv.StringDecoder,g="";u.stderr.on("data",C=>{g+=h.write(C);let w=g.split(`
`);g=w.pop();for(let y of w)if(y.trim())try{l(JSON.parse(y))}catch{a.write(y)}}),u.stderr.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let v=[];u.exit.then(({code:C})=>{try{v.forEach(w=>w.dispose()),C?(a.write(`Exit code ${C}`),m({message:`Command failed: ${n} ${(r||[]).join(" ")}`,code:C})):f()}catch(w){m(w)}},m),typeof s=="function"&&v.push(s(C=>u.stdin.write(C)))})}async function gk(t,e){let{cliHost:n,env:r,appRoot:o}=t,i=await n.locateCertificatesFile();return{...r,...n.type==="local"?o?{NODE_PATH:`${n.path.join(o,"node_modules.asar")}${ps.delimiter}${n.path.join(o,"node_modules")}`}:void 0:n.type==="container"?void 0:{NODE_PATH:n.path.join(n.path.dirname(e),"node_modules")},...i?{NODE_EXTRA_CA_CERTS:i}:{},...kl?{TS_NODE_PROJECT:void 0}:{}}}async function jq(t,e,n){await e.writeFile(n,await at(t))}async function Xv(t,e,n,r){await e.mkdirp(n);let o=qq.c({cwd:t,filter:l=>(console.log(l),!0)},["."]),i=new Promise((l,u)=>{o.on("error",u),o.on("finish",l)}),s=await e.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:n,output:r}),a=new zv.StringDecoder;s.stdout.on("data",l=>{r.write(a.write(l))});let c=new zv.StringDecoder;s.stderr.on("data",l=>{r.write(ot(c.write(l)))}),o.pipe(s.stdin),await Promise.all([s.exit,i])}async function _r(){return ps.join(Vq.tmpdir(),process.platform==="linux"?`vsch-${await nx()}`:"vsch")}function Yle(){return{contentHashes:{}}}async function Nx(t,e,n,r){let o=t.getConfigurationState();if(o){let i=o.contentHashes,s=Object.keys(i),c=(await vk(e,n,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(d=>u.delete(d));let f=new Set(s);l.forEach(d=>f.delete(d));let m=[];for(let d of s)d in c&&c[d]!==i[d]&&m.push(d);if(u.size||f.size||m.length){let d=await vk(e,n,r);(async()=>{await t.containerOutdated([...u,...f,...m].sort())==="ignore"&&await t.updateConfigurationState(d)})().catch(console.error)}}else await zq(t,e,n,r)}async function Lx(t,e,n,r,o){let i="Updating configuration state",s=o.start(i);await zq(t,e,n,r),o.stop(i,s)}async function zq(t,e,n,r){let o=await vk(e,n,r);await t.updateConfigurationState(o)}async function vk(t,e,n){let r=Yle();kx(r,Zv.posix.basename(n.configFilePath.path),JSON.stringify({...n,forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0}));let o=Vf(n.configFilePath).path;if(Oo(n)){let i=Yf(t,n),s=await e.readDocument(i);s!==void 0&&kx(r,Zv.posix.relative(o,i.path),s)}if("dockerComposeFile"in n){let i=await Yl(t,n,t.env,t.cwd),s=await Promise.all(i.map(async a=>{let c=Ce.file(a).with({scheme:Ke.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&kx(r,Zv.posix.relative(o,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=qle(l),f=u&&u.services,m=f&&f[n.service],d=m&&m.build,p=d&&(typeof d=="string"?d:d.context);if(p){let h=Tx(t,c,p),g=Kq(h,d.dockerfile||"Dockerfile"),v=await e.readDocument(g);v!==void 0&&kx(r,Zv.posix.relative(o,g.path),v)}if(m&&(m.image||m.build))break}}}return r}function qle(t){try{return Yv(t)}catch{return{}}}function kx(t,e,n){let r=Gq.createHash("sha256").update(n).digest("hex");t.contentHashes[e]=r}var ws=Y(require("path")),na=Y(require("crypto"));var Xl=Y($r());var Kr=Y(require("path")),Ik=Y(require("crypto"));var Gf=Y($r());var e3=Y(require("net")),Sk=Y(require("path"));var wk=Y(require("path")),Ck=Y(require("http")),Jq=Y(require("os")),Xq=Y(require("crypto"));async function Zq(t,e){let n=await Ek(t),r=new yk(n,e);return r.listen(),r}var yk=class{constructor(e,n){this.ipcHandlePath=e;this.server=Ck.createServer((r,o)=>{Promise.resolve(n(r,o)).catch(i=>console.error(i&&i.message||i))}),this.server.on("error",r=>console.error(r))}server;listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function Qq(t){return new Promise((e,n)=>{let r=[];t.setEncoding("utf8"),t.on("data",o=>r.push(o)),t.on("error",o=>n(o)),t.on("end",()=>{let o=JSON.parse(r.join(""));e(o)})})}async function Ek(t){let e=Xq.randomUUID(),n=`${t}-${e}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?wk.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):wk.join(Jq.tmpdir(),`${n}.sock`)}var Ax=class{messages=[];dequeueRequest;push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let n=this.messages;return this.messages=[],n}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((n,r)=>{this.dequeueRequest={resolve:n,reject:r},typeof e=="number"&&setTimeout(r,e)})}};async function ql(t,e,n){if(process.env.SSH_ASKPASS)return{};let r=await Ek("ssh-askpass");return await new Promise((o,i)=>{e3.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{n.write(`SSH askpass request: ${a}`,1);let l=await e(JSON.parse(a));s.write(l,u=>{u&&console.error(u)}),s.end()}catch(l){console.error(l)}}),s.on("error",c=>console.error(c))}).on("error",s=>{i(s)}).listen(r,()=>{o()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:Sk.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),SSH_ASKPASS_REQUIRE:"force",VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_MAIN:Sk.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var Gle=0;function fr(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++Gle)}:{}}async function ii(t,e){return(await hs(t,[e]))[0]}async function hs(t,e){let n=await Ox(t,"container",e);for(let r of n){r.Ports=[];let o=r.NetworkSettings.Ports;for(let i in o){let[s,a]=i.split("/");for(let c of o[i]||[]){let{HostIp:l,HostPort:u}=c;r.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return n}async function t3(t,e){return(await Ox(t,"image",[e]))[0]}async function Fx(t,e){return(await Ox(t,"volume",[e]))[0]}async function qf(t,e){return Ox(t,"volume",e)}async function Ox(t,e,n){if(!n.length)return[];let r=Bi(t),o=await X({...r,args:(r.args||[]).concat(["inspect","--type",e,...n])});try{return JSON.parse(o.stdout.toString())}catch(i){throw console.error({stdout:o.stdout.toString(),stderr:o.stderr.toString()}),i}}async function Gl(t,e=!1,n=[]){let r=[];e&&r.push("-a");for(let i of n)r.push("--filter",`label=${i}`);return(await et(t,"ps","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Uo(t,e=[]){let n=[];for(let o of e)n.push("--filter",`label=${o}`);return(await et(t,"volume","ls","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function zl(t,e=[]){return(await et(t,"volume","ls","-q","-f","dangling=true",...e.map(r=>["-f",`label=${r}`]).flat())).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function kp(t,e,n){let r=[];for(let o of n||[])r.push("--label",o);await et(t,"volume","create",...r,e)}async function Hi(t,e){var o;let n,r;try{for(let i=0,s=7;i<s;i++)try{return await et(t,"rm","-f",e)}catch(a){let c=((o=a==null?void 0:a.stderr)==null?void 0:o.toString().toLowerCase())||"";if(i===s-1||!c.includes("already in progress"))throw a;r||(n=await Ux(t,{container:[e],event:["destroy"]}),r=new Promise(l=>{n.stdout.on("data",()=>{l(),n.terminate(),r=new Promise(()=>{})})})),await Promise.race([r,Bt(1e3)])}}finally{n&&n.terminate()}throw new Error("Unreachable")}async function Ux(t,e){let{exec:n,cmd:r,args:o,env:i,output:s}=Bi(t),a=[];for(let m in e)for(let d of e[m])a.push("--filter",`${m}=${d}`);let c="isPodman"in t&&t.isPodman?"json":"{{json .}}",l=(o||[]).concat(["events","--format",c,...a]),u=await n({cmd:r,args:l,env:i,output:s}),f=[];return u.stderr.on("data",m=>f.push(m)),u.exit.then(({code:m,signal:d})=>{f.length&&s.write(ot(Buffer.concat(f).toString())),(m||d&&d!=="SIGKILL")&&s.write(ot(`Docker events terminated (code: ${m}, signal: ${d}).`))},m=>{s.write(ot(m&&(m.stack||m.message)))}),u}async function et(t,...e){let n=Bi(t);return X({...n,args:(n.args||[]).concat(e)})}async function xk(t){var e;try{let{stdout:n}=await et(t,"context","ls","--format","{{json .}}"),r=`[${n.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(r).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function n3(t){try{let{stdout:e}=await et(t,"-v");return e.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function r3(t,...e){let n=s3(t);return Ai({...n,args:(n.args||[]).concat(e)})}async function Qv(t,...e){let n=Bi(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return X({...n,args:(n.args||[]).concat(e)})}function gs(t,e,n){return async function(r){let{exec:o,cmd:i,args:s,env:a}=Bi(t),{argsPrefix:c,args:l}=i3(e,n,r,!1);return o({cmd:i,args:(s||[]).concat(l),env:a,output:o3(r.output,i,c)})}}async function Qs(t,e,n,r){if(!await r("node-pty"))throw new Error("Missing node-pty");return async function(i){let{ptyExec:s,cmd:a,args:c,env:l}=s3(t),{argsPrefix:u,args:f}=i3(e,n,i,s.isTTY!==!1);return s({cmd:a,args:(c||[]).concat(f),env:l,output:o3(i.output,a,u)})}}function o3(t,e,n){return zle(t,`Run: ${e} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function zle(t,e,n){let r=new RegExp(Mf(e),"g");return sn({...t,get dimensions(){return t.dimensions},event:i=>t.event("text"in i?{...i,text:i.text.replace(r,n)}:i)})}function i3(t,e,n,r){let{env:o,cwd:i,cmd:s,args:a}=n,c=["exec","-i"];r&&c.push("-t"),e&&c.push("-u",e),o&&Object.keys(o).forEach(u=>c.push("-e",`${u}=${o[u]}`)),i&&c.push("-w",i),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function Bi(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...fr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...fr(t.env)},output:t.output}:{...t,env:{...t.env,...fr(t.env)}}}function s3(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...fr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...fr(t.env)},output:t.output}:{...t,env:{...t.env,...fr(t.env)}}}var a3=Y($r()),Kle="com.docker.compose.project";async function c3(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var v,C;let{common:p}=t,{cliHost:h}=e,g;try{let w=await Yl(h,n,h.env,h.cwd),y=h.path.join(h.cwd,".env"),S=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await h.isFile(y)?y:void 0,I=!c,x=r.remoteUser,A=Jle(n);g=await Lp(t,s.Id,A,x),u&&c&&g.user!=="root"&&(g.launchRootShellServer?await Sx(g,g.launchRootShellServer,A,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let F=await Mx(p,c,s,A,g),k=ur(h,g.shellServer);I||await Lx(t.configurationTracking,h,k,n,p.output);let E=r.shutdownAction;E==="stopContainer"&&(E="stopCompose");let _={cwd:o,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:p.env,containerId:s.Id,user:g.user,sessionId:p.sessionId,shutdownAction:E,projectName:ew(s),composeFiles:w,envFile:S,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:T,doneWithDocuments:D}=await $x(t,h,k,"dockerCompose",_,I?n:void 0);p.backgroundTasks.push(D);let b=((C=(((v=r.customizations)==null?void 0:v.vscode)||[]).slice().reverse().find(z=>typeof z.devPort=="number"))==null?void 0:C.devPort)||Hl,{hostOrContainerPort:R,hostPortServer:L,connectionToken:N,remoteEnv:B,serverDownloaded:W}=await Bl(p,g,n,r,b,Ap(t,e,g,i,f,s.Id,a,m,d),F);return T.hostPortServer=L,{params:p,properties:g,config:n,resolvedAuthority:{host:dc,port:R,connectionToken:N,extensionHostEnv:B},tunnelInformation:p.isLocalContainer?Np(s):{},dockerParams:t,dockerContainerId:s.Id,serverDownloaded:W}}catch(w){let y=w instanceof pe?w:new pe({description:a3.t("An error occurred setting up the container."),originalError:w});throw s&&(y.manageContainer=!0,y.params=t.common,y.containerId=s.Id,y.dockerParams=t),g&&(y.containerProperties=g),y.config=n,y}}function Jle(t){return t.workspaceFolder||"/"}function ew(t){let e=(t.Config.Labels||{})[Kle];return e||void 0}function vs(t,e,n){let r;return()=>r||(r=(async()=>{let o=!0,i;try{i=(await Qv({...t,cmd:e},"compose","version","--short")).stdout}catch{i=(await Qv({...t,cmd:n},"version","--short")).stdout,o=!1}let s=i.toString().trim();return t.output.write(`Docker Compose version: ${s}`),{version:s,cmd:o?e:n,args:o?["compose"]:[]}})())}var tw=Y($r());var Hx=Y(OC()),l3=Y(require("url"));function Bx(t,e){return new Promise((n,r)=>{let o=new l3.URL(t.url),i={hostname:o.hostname,port:o.port,path:o.pathname+o.search,method:t.type,headers:t.headers},s=(o.protocol==="https:"?Hx.https:Hx.http).request(i,a=>{if(a.statusCode<200||a.statusCode>299)r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,5);else{a.on("error",r);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>n(Buffer.concat(c)))}});s.on("error",r),t.data&&s.write(t.data),s.end()})}async function Fp(t,e,n,r){var c;let o=await Qle(e,t.output),i=Object.keys(n.features||{}).map(l=>{let u=Xle(o,l);return u?{configFeatureId:l,disallowedFeatureEntry:u}:void 0}).filter(Boolean);if(!i.length)return;let s=!1;if(r){let l=await Kl(t,r);((c=l==null?void 0:l.State)==null?void 0:c.Status)==="running"&&(await et(t,"stop","-t","0",l.Id),s=!0)}let a=i[0];throw _k(a.configFeatureId,a.disallowedFeatureEntry.documentationURL,s)}function _k(t,e,n){return new pe({description:n?tw.t("Cannot use the '{0}' feature since it was reported to be problematic. The existing dev container was stopped.",t):tw.t("Cannot use the '{0}' feature since it was reported to be problematic.",t),detail:tw.t("Please remove this feature from your devcontainer.json and rebuild the dev container before continuing."),data:{learnMoreUrl:e,reload:!1}})}function Xle(t,e){return t.disallowedFeatures.find(n=>e.startsWith(n.featureIdPrefix)&&(e.length===n.featureIdPrefix.length||"/:@".indexOf(e[n.featureIdPrefix.length])!==-1))}var u3="devcontainers.controlManifest",Zle=5*60*1e3;async function Qle(t,e){let n=t.get(u3);return n&&Date.parse(n.timestamp)+Zle>Date.now()?n.manifest:eue(t,n==null?void 0:n.manifest,e)}async function eue(t,e,n){let r;try{r=await tue()}catch(o){n.write(tw.t("Failed to fetch control manifest: {0}",o.message)),r=e||{disallowedFeatures:[]}}return t.update(u3,{timestamp:new Date().toISOString(),manifest:r}),r}async function tue(){let t=await Bx({type:"GET",url:"https://containers.dev/static/devcontainer-control-manifest.json",headers:{"user-agent":"devcontainers-vscode",accept:"application/json"}}),e=$e(t.toString())||{};return Array.isArray(e.disallowedFeatures)?e.disallowedFeatures=e.disallowedFeatures.filter(n=>typeof n.featureIdPrefix=="string"):e.disallowedFeatures=[],e}async function Pk(t,e,n,r){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${_e(e,t.common.cliHost.platform)}).`);let o=t.parsedAuthority;if(!o||un(o))return nue(t,o,e,n,r);if(co(o))return o.inspectVolume?Dk(t,o):rue(t,o,e);if(Jf(o))return o.inspectVolume?Dk(t,o):oue(t,o,e);if(iw(o))return Dk(t,o);throw new Error(`Unexpected authority: ${JSON.stringify(o)}`)}async function nue(t,e,n,r,o){let{common:i,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=t,{cliHost:l,env:u,output:f}=i,m=l.cwd,d=t.originalCwd||m,p=e&&It(l.path,Sv(e.hostPath)?l.path.join(m,Kr.basename(e.hostPath)):m);e!=null&&e.configFile&&!n&&(n=e.configFile,l.type==="wsl"&&n.scheme==="file"&&(n=Ce.from({scheme:Ke.scheme,path:await E3(n,l)})));let h={cliHost:l,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:u,output:f},g=o?void 0:bk(d),v=o||[`${ow}=${d}`,`${qx}=${i.product.quality}`];return Tk(t,h,g,v,d,m,n,r,void 0,p,e==null?void 0:e.settings,[],"on")}function bk(t,e){let n=[`${rw}=${t}`];if(e){let{buildCLIHost:r,configFile:o}=e,i;o.scheme===Ke.scheme||o.scheme==="file"&&r.type==="local"?i=_e(o,r.platform):i=o.toString(),n.push(`${zf}=${i}`)}return n}async function rue(t,e,n){let{repositoryPath:r,volumeName:o,folder:i}=e,s=ai(r);o=await v3(t,s,o);let{labels:a,remoteWorkspaceFolder:c}=w3(s,r,i,o),l=[...a],u=[...a,`${qx}=${t.common.product.quality}`];e.configFile&&!n&&(n=e.configFile);let{containerId:f,shellServer:m,remoteContainersEnv:d,config:p,preInstalledExtensions:h}=await s.cloneAndInitializeRepository(t,e,s,o,n),g=i?s.workspaceFolder(i):s.fullRepositoryName,v=Nk(s,o,i,t.dockerSocketPath);return f3(t,e,n,p,h,f,m,d,o,g,c,l,u,v)}async function oue(t,e,n){let{common:r}=t,{extensionPath:o,appRoot:i,loadNativeModule:s,output:a}=r,{volumeName:c,folder:l}=e,u=[`${Vx}=${c}`,`${h3}=${l}`],f=u;await Ak(t);let m=Lk(c,Kf(),t.dockerSocketPath),{stdout:d}=await et(t,...m),p=d.toString().trim(),h=gs(t,p,"root"),g=await Wt(h,a),v=[],C=nw(l),w=C,y=await Qs(t,p,"root",s),S=io("container",C,{},h,y,()=>{throw new Error("not implemented")},"node",a),{configuration:I}=await Wx({cliHost:S,dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:o,appRoot:i,package:r.package,output:a},C,n,t.common.getLogLevel(),u);return f3(t,e,n,I,v,p,g,{},c,C,w,u,f,m)}async function f3(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var A,F,k;let p=It(Kr.posix,l),h=[`type=volume,source=${c},target=${Kr.posix.dirname(p.rootFolderPath)},external=true`],g=await y3(t,i,a,u),v={},{HOME:C,USERPROFILE:w}=t.common.env;C!=null&&C.startsWith("/")&&(v.HOME=C,await s.exec(`test -e "${C}" || (mkdir -p "$(dirname "${C}")" && ln -s ~ "${C}")`)),w!==void 0&&(v.USERPROFILE=w);let y=g.cliHost,S,I,x=Oo(r)||"image"in r;if(x||"dockerComposeFile"in r&&r.workspaceFolder||o.length){let E=o.length?{...r.customizations,vscode:{...(A=r.customizations)==null?void 0:A.vscode,extensions:[...((k=(F=r.customizations)==null?void 0:F.vscode)==null?void 0:k.extensions)||[],...o]}}:r.customizations;I=x?b=>({...b,workspaceFolder:void 0,workspaceMount:"",customizations:E}):b=>({...b,workspaceFolder:p.rootFolderPath,customizations:E});let _=y.path.join(await y.tmpdir(),`devcontainer-${Ik.randomUUID()}.json`),T=`EOF-${_}`,D=`${_}_${Date.now()}`;await s.exec(`cat <<'${T}' >${D}
${JSON.stringify({...I(r),configFilePath:void 0})}
${T}
mv ${D} ${_}`),S=Ce.from({scheme:Ke.scheme,path:_})}try{return await Tk(t,g,f,m,t.common.cliHost.cwd,y.cwd,n,S,I,p,e.settings,h,"off",d,!0,void 0,v)}finally{Promise.all(t.common.backgroundTasks.filter(E=>typeof E!="function").map(E=>E.catch(()=>{}))).then(()=>Hi(t,i))}}async function Dk(t,e){let{common:n,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i}=t,{cliHost:s,env:a,output:c}=n,{volumeName:l}=e,u,f,m=iw(e);m?(u=Yx,f="Inspect Volume"):(u=ai(e.repositoryPath).volumeDestination,f="Recovery Container");let d=[`${Op}=${l}`],p=[`${Op}=${l}`,`${qx}=${n.product.quality}`],h=await g3(t),g=[`type=volume,source=${l},target=${u},external=true`],v={cliHost:s,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i,env:a,output:c},C=It(s.path,h);return Tk(t,v,d,p,h,h,void 0,void 0,void 0,C,e.settings,g,"never",void 0,!m,f)}async function Tk(t,e,n,r,o,i,s,a,c,l,u,f,m,d,p,h,g){var pt,nt,Dt,yt;let{common:v,userRepositoryConfigurationPaths:C}=t,{output:w,extensionPath:y,appRoot:S,postCreate:I,localWaylandSocket:x}=v,{cliHost:A}=e,F=[...f];if(t.cacheMount==="bind"&&(await os(v.localCacheFolder),F.push(`type=bind,source=${v.localCacheFolder},target=/vscode`)),t.cacheMount==="volume"){let j="vscode";(await Uo(e)).indexOf(j)===-1&&await kp(e,j),F.push("type=volume,source=vscode,target=/vscode,external=true")}if(x){let j=await NV(void 0);F.push(`type=bind,source=${x},target=${j}`)}let k=s?{uri:s,type:iue(A,l,s),fileHost:A}:l?await m3(A,l,C,t.common.loadNativeModule,!a,w):void 0,E=k==null?void 0:k.uri;if((E==null?void 0:E.scheme)==="file"&&A.type!=="local"){let j=Kr.dirname(E.fsPath),oe=Kr.basename(E.fsPath),xe=oe===".devcontainer.json"?j:Kr.dirname(j),le=A.path.join(await A.tmpdir(),`devcontainer-config-${Ik.randomUUID()}`);await Xv(xe,A,le,w),E=Ce.from({scheme:Ke.scheme,path:A.path.join(le,...oe===".devcontainer.json"?[oe]:[Kr.basename(j),oe])})}typeof t.removeOnStartup=="string"&&await si(t,t.removeOnStartup)&&await Hi(t,t.removeOnStartup);let _=await Kl(e,r);_&&t.removeOnStartup===!0&&n&&(await Hi(t,_.Id),_=void 0);let T=!!_||!n,D=T?r:await sue(t,e,k,n),b=!1,R=t.removeOnStartup!==!0?_||n&&await Kl(e,n):void 0;((pt=R==null?void 0:R.State)==null?void 0:pt.Status)==="running"&&(b=!0,et({...Bi(t),print:"continuous"},"exec","-i","-u","root",R.Id,"/bin/sh","-c",`echo "Container already running. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{b=!1,w.write("Keep-alive process ended.")}));let L="",N=v.postCreate.output,B=sn({...N,get dimensions(){return N.dimensions},event:j=>{(j.type==="text"||j.type==="raw")&&(L+=j.text),N.event(j)}}),W={...g,...e.env,...fr(e.env)},z={cliHost:A,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:W,extensionPath:y,appRoot:S,package:v.package,postCreate:I,output:B},V=v.postCreate.output.dimensions||v.output.dimensions,q=v.additionalFeaturesToInstall,ce;try{ce=await oi(z,["up",...e.cliHost.type==="local"&&v.persistedFolder?["--user-data-folder",v.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...v.containerSessionDataFolder?["--container-session-data-folder",v.containerSessionDataFolder]:[],...T?["--container-data-folder",$i(t.common.product.serverDataFolderName)]:[],...T?["--container-system-data-folder",Ex(t.common.product.serverDataFolderName)]:[],"--workspace-folder",i,...t.workspaceMountConsistencyDefault?["--workspace-mount-consistency",t.workspaceMountConsistencyDefault]:[],"--gpu-availability",t.gpuAvailability,...[].concat(...D.map(j=>["--id-label",j])),"--log-level",no(v.getLogLevel()),"--log-format","json",...E?["--config",_e(E,A.platform)]:[],...a?["--override-config",_e(a,A.platform)]:[],"--default-user-env-probe",v.defaultUserEnvProbe,...t.buildNoCache?["--build-no-cache"]:[],...t.removeOnStartup===!0?["--remove-existing-container"]:[],...t.expectExistingContainer||!t.common.hostConfig.canRebuildContainer?["--expect-existing-container"]:[],...t.useExperimentalLockfile?["--experimental-lockfile"]:[],...[].concat(...F.map(j=>["--mount",j])),"--skip-post-create","--update-remote-user-uid-default",m,"--mount-workspace-git-root",...V?["--terminal-columns",String(V.columns),"--terminal-rows",String(V.rows)]:[],...Object.keys(q).length>0?["--additional-features",JSON.stringify(q)]:[],"--include-configuration","--include-merged-configuration"])}catch(j){let oe;if((nt=j==null?void 0:j.data)!=null&&nt.disallowedFeatureId){let{disallowedFeatureId:xe,didStopContainer:le,learnMoreUrl:De}=j.data;oe=_k(xe,De,le),oe.originalError=j}else oe=j instanceof pe?j:new pe({description:Gf.t("An error occurred setting up the container."),originalError:j});throw j&&!(j instanceof pe)&&(j.cmdOutput=L),(Dt=j==null?void 0:j.data)!=null&&Dt.containerId&&(oe.manageContainer=!0,oe.params=t.common,oe.containerId=(yt=j==null?void 0:j.data)==null?void 0:yt.containerId,oe.dockerParams=t),oe.step="devContainersCLIUP",oe}if((ce==null?void 0:ce.outcome)!=="success")throw new pe({description:Gf.t("devcontainer command failed: {0}",JSON.stringify(ce)),step:"devContainersCLIUP"});ce.configuration.configFilePath=ce.mergedConfiguration.configFilePath=ce.configuration.configFilePath&&Ce.revive(ce.configuration.configFilePath).with({scheme:A.type==="local"?"file":Ke.scheme});let Be=await si(t,ce.containerId);if(!Be)return Fk(v.output,"Dev container not found.");b||(b=!0,et({...Bi(t),print:"continuous"},"exec","-i","-u","root",Be.Id,"/bin/sh","-c",`echo "New container started. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{b=!1,w.write("Keep-alive process ended.")}));let{configuration:mt,mergedConfiguration:Mt,remoteWorkspaceFolder:So}=ce,Pn=Up(v.cliHost.authority,u),vn=h||(mt.name?Gf.t("Dev Container: {0}{1}",mt.name,Pn):Gf.t("Dev Container{0}",Pn));v.setWorkspaceName(vn);let Xt;try{if(Oo(mt)||"image"in mt)Xt=await C3(t,e,mt,Mt,So,o,i,Be,T,!R,p,D,E,a);else if("dockerComposeFile"in mt)Xt=await c3(t,e,mt,Mt,o,i,Be,T,!R,d,p,D,E,a);else throw new pe({description:Gf.t('Dev container config ({0}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.',mt.configFilePath.toString())})}catch(j){let oe=j instanceof pe?j:new pe({description:Gf.t("An error occurred setting up the container."),originalError:j});throw oe.step||(oe.step="setupDevContainer"),oe}if(aue(t,z,mt,a,c,Be,d,i,E,D,Xt.properties),Xt.configLocationType=k==null?void 0:k.type,(k==null?void 0:k.type)==="workspace")if(A.type==="container")Xt.configWorkspaceURI=k.uri.with({scheme:ao.scheme,authority:v.authority});else{let j=_e(k.uri,A.platform),oe=Be.Mounts.find(xe=>sf(A.path,xe.Source,j));if(oe){let xe=A.path.relative(oe.Source,j),le=A.platform==="win32"?xe.replace(/\\/g,"/"):xe;Xt.configWorkspaceURI=Ce.from({scheme:ao.scheme,authority:v.authority,path:Kr.posix.join(oe.Destination,le)})}}return Xt}function iue(t,e,n){return e&&(n.scheme===Ke.scheme||n.scheme==="file"&&t.type==="local")&&sf(Kr,e.rootFolderPath,_e(n,t.platform))?"workspace":n.scheme==="file"?"repositoryConfig":"unknown"}async function sue(t,e,n,r){var s;let{cliHost:o}=e,i;if(n){let{uri:a}=n,c;a.scheme===Ke.scheme||a.scheme==="file"&&o.type==="local"?c=_e(a,o.platform):c=a.toString();let l=[...r,`${zf}=${c}`];if(await Kl(e,l))i=l;else{let u=await Kl(e,r);u&&!((s=u.Config.Labels)!=null&&s[zf])?t.removeOnStartup===!0?(await Hi(e,u.Id),i=l):i=r:i=l}}else i=r;return i}function aue(t,e,n,r,o,i,s,a,c,l,u){let{common:f}=t,{output:m,extensionPath:d,appRoot:p}=f,{cliHost:h}=e;if(f.hostConfig.canRebuildContainer&&t.watch){let g,v=n.configFilePath;if(v.scheme===Ke.scheme)if(h.type==="local")g=v.with({scheme:"file"});else if(h.type==="container")g=v.with({scheme:ao.scheme,authority:f.authority});else{let C=_e(v,h.platform),w=i.Mounts.find(y=>sf(h.path,y.Source,C));if(w){let y=h.path.relative(w.Source,C),S=h.platform==="win32"?y.replace(/\\/g,"/"):y;g=Ce.from({scheme:ao.scheme,authority:f.authority,path:Kr.posix.join(w.Destination,S)})}}else(v.scheme==="file"||v.scheme===ao.scheme)&&(g=v);if(g){let I=function(){C||(y=w().finally(async()=>{await Bt(h.type==="container"?5e3:1e3),y=void 0,S&&(S=!1,I())}))},C=!1;async function w(){let A=e,F;try{if(h.type==="container"){let{stdout:_}=await et(t,...s);F=_.toString().trim();let T=gs(t,F,"root");if(r&&o){let R=r.path,L=`EOF-${R}`,N=`${R}_${Date.now()}`,B=await Wt(T,m),W=$e((await B.exec(`cat '${v.path}'`)).stdout);await B.exec(`cat <<'${L}' >${N}
${JSON.stringify({...o(W),configFilePath:void 0})}
${L}
mv ${N} ${R}`)}let D=await Qs(t,F,"root",f.loadNativeModule);A={cliHost:io("container",a,{},T,D,()=>{throw new Error("not implemented")},"node",m),dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:d,appRoot:p,package:f.package,output:m}}let k=await Wx(A,a,c,f.getLogLevel(),l,i.Id,r),E=ur(A.cliHost,u.shellServer);await Nx({...t.configurationTracking,containerOutdated:async _=>{C=!0;let T=await t.configurationTracking.containerOutdated(_);return T==="ignore"&&(C=!1),T}},A.cliHost,E,k.configuration)}finally{F&&await Hi(t,F)}}let y,S=!1,x=t.watch(g,()=>{y?S=!0:I()});t.common.shutdowns.push(async()=>(await x).dispose())}}}async function Kl(t,e){let n=await Gl(t,!0,e);return(await hs(t,n)).filter(o=>o.State.Status!=="removing")[0]}async function Wx(t,e,n,r,o,i,s){let{cliHost:a,output:c}=t,l=await oi(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],"--workspace-folder",e,...(o||[]).map(u=>["--id-label",u]).flat(),...i?["--container-id",i]:[],"--log-level",no(r),"--log-format","json",...n?["--config",_e(n,a.platform)]:[],...s?["--override-config",_e(s,a.platform)]:[],"--mount-workspace-git-root",...c.dimensions?["--terminal-columns",String(c.dimensions.columns),"--terminal-rows",String(c.dimensions.rows)]:[]]);return l.configuration.configFilePath=Ce.revive(l.configuration.configFilePath).with({scheme:a.type==="local"?"file":Ke.scheme}),l}async function d3(t,e,n,r,o,i){let s=await m3(t,e,n,r,o,i);return s==null?void 0:s.uri}async function m3(t,e,n,r,o,i){let s=await IS(t,e,Fe),a=s&&await Rk(s,n);if(a)return{uri:a,type:"repositoryConfig",fileHost:await qr(process.cwd(),r,i)};let c=await jf(t,e.configFolderPath);if(c)return{uri:c,type:"workspace",fileHost:t};o&&i&&(s!=null&&s.length?i.write(`No dev container config found. Additional locations checked:
${jx(s,n).map(l=>`- ${Kr.join(l,".devcontainer","devcontainer.json")}`).join(`
`)}`):i.write("No dev container config found. No repository connection string found."))}async function Rk(t,e){let n=jx(t,e);for(let r of n){let o=await Wq(r);if(o)return Ce.file(o)}}function jx(t,e){let n=[],r=new Set(t.map(cue).filter(o=>!!o));for(let o of r)for(let i of e){let s=Kr.join(i,o);n.push(s)}return n}function p3(t,e,n){let r=t.path.relative(e.rootFolderPath,_e(n,t.platform));return r&&!r.startsWith("..")&&!t.path.isAbsolute(r)}function cue(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let n=/[^@:]+@([^:]+):(.+)/.exec(t);if(n)e=`${n[1]}/${n[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}var Vx="vsc.devcontainer.volume.name",h3="vsc.devcontainer.volume.folder";function kk(t){return t?`${t.volumeName}:${t.folder}`:void 0}function Jl(t){let e=(t.Config.Labels||{})[Vx],n=(t.Config.Labels||{})[h3];return e&&n?{volumeName:e,folder:n}:void 0}var ea=Y(require("url")),S3=Y(require("https"));var x3=Y($r());function ta(t){return t.toLowerCase().indexOf("github.com")>=0?mue(t):t.toLowerCase().indexOf("visualstudio.com")>=0?fue(t):t.toLowerCase().indexOf("dev.azure.com")>=0?uue(t):t.toLowerCase().indexOf("gitlab.com")>=0?due(t):lue(t)}function mc(t){let e="owner",n="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function lue(t){var s;let e="unknown-owner",n,r=t,o;o=(s=ea.parse(t))==null?void 0:s.path;let i=o==null?void 0:o.split("/");return!i||i.length<1?mc(t):(n=i[i.length-1],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),{repository:"unknown",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`})}function uue(t){var i,s;let e,n,r=t,o;if(zx(t)){let a=`http://${t}`;o=(i=ea.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return mc(t);e=c[3],n=c[4]}else{o=(s=ea.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return mc(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function fue(t){var i,s;let e,n,r=t,o;if(zx(t)){let a=`http://${t}`;o=(i=ea.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return mc(t);e=c[3],n=c[4]}else{o=(s=ea.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return mc(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function due(t){var s,a;let e,n,r,o=t,i;if(zx(t)){let c=`http://${t}`;i=(s=ea.parse(c))==null?void 0:s.path,i&&(i=i.replace("/:","/"));let l=i==null?void 0:i.split("/");if(!l||l.length<3)return mc(t);e=l[1],n=l.slice(2,l.length-1).join("/")||void 0,r=l[l.length-1]}else{i=(a=ea.parse(t))==null?void 0:a.path;let c=i==null?void 0:i.split("/");if(!c||c.length<3)return mc(t);e=c[1],n=c.slice(2,c.length-1).join("/")||void 0,r=c[c.length-1]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:o,ref:void 0,commit:!1,repositoryOwner:e,repositoryProject:n,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}${n?`/${n}`:""}/${r}`}}function mue(t){var c,l;let e,n,r=t,o,i,s;if(zx(t)){let u=`http://${t}`;s=(c=ea.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=ea.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return mc(t);if(e=a[1],n=a[2],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(r=t.substring(0,u.index),o=t.substring(u.index+u[0].length))}if(a[3]==="pull"){i=a[4];let u=t.match(/\/pull\//);u&&u.index&&(r=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:r,ref:o,commit:a[3]==="commit",repositoryOwner:e,repositoryName:n,pullRequestId:i,fullRepositoryName:`${e}/${n}`}}function zx(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var sw=class extends Error{description;code;constructor(e,n){super(),this.code=e,this.description=n}},aw=class{inputUrl;gitUrlInfo;constructor(e){this.inputUrl=e,this.gitUrlInfo=ta(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,n,r,o){}installExtension(){return null}},Ok=class extends aw{constructor(e){super(e)}async parseUrl(e){var i,s,a;let n=(i=this.gitUrlInfo)==null?void 0:i.repositoryOwner,r=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,o=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,n,r,o)}async getPullRequestInfo(e,n,r,o){var u,f,m,d,p,h,g,v,C,w,y;let i=await this.fetchPullRequestInfo(e,n,r,o),s=(f=(u=i.head)==null?void 0:u.repo)==null?void 0:f.clone_url,a=(d=(m=i.base)==null?void 0:m.repo)==null?void 0:d.clone_url;if(!a)throw new sw(2,x3.t("Cannot access the head repository of the Pull Request."));let c=(p=i.head)==null?void 0:p.ref,l=((v=(g=(h=i.head)==null?void 0:h.repo)==null?void 0:g.owner)==null?void 0:v.login)===n?null:(y=(w=(C=i.head)==null?void 0:C.repo)==null?void 0:w.owner)==null?void 0:y.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,n,r,o){let i=`/repos/${n}/${r}/pulls/${o}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:i,method:"GET",headers:s};return new Promise((c,l)=>{let u="",f=S3.request(a,m=>{if(m.statusCode<200||m.statusCode>=300)return l(new Error(`Status Code: ${m.statusCode}`));m.on("data",d=>{u+=d}),m.on("end",()=>{let d=JSON.parse(u.toString());c(d)})});f.on("error",l),f.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,n,r,o){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await X({exec:n.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:r,output:o}),await X({exec:n.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:r,output:o});try{await X({exec:n.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:r,output:o})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await X({exec:n.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:r,output:o})}else await X({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o});let i=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${i}#${s}#${a}`;await X({exec:n.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:r,output:o})}installExtension(){return"GitHub.vscode-pull-request-github"}},Uk=class extends aw{constructor(e){super(e)}async parseUrl(e){var n,r;return{urlToClone:(n=this.gitUrlInfo)==null?void 0:n.repositoryUrl,ref:(r=this.gitUrlInfo)==null?void 0:r.ref}}cloneOptions(e){let n=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!n&&e.ref||void 0,fullClone:n}}async postClone(e,n,r,o){this.gitUrlInfo.commit&&await X({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o})}},Gx=class extends aw{constructor(n,r){super(n);this.branch=r}async parseUrl(n){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(n){return{url:n.urlToClone,branch:n.ref||void 0}}};function Kx(t,e){if(e)return new Gx(t,e);let n=ta(t);if(n.repository==="github"){if(n.pullRequestId)return new Ok(t);if(n.ref)return new Uk(t)}return new Gx(t)}var Hk="vsch.local.repository",Jx="dev.container.volume";function ai(t){return{repositoryPath:t,fullRepositoryName:Bk(t),repositoryName:Wk(t),workspaceFolder:nw,volumeDestination:Kf(),oldVolumeName:hue(t),alreadyCloned:!1,uniqueVolumeName:gue(t),legacyUniqueVolumeName:vue(t),getOldWorkspacePath:P3,cloneAndInitializeRepository:wue,gitUrlHandler:Kx(t),gitUrlInfo:ta(t)}}function Bk(t){let e=ta(t);return e==null?void 0:e.fullRepositoryName}function Wk(t){let e=ta(t);return e==null?void 0:e.repositoryName}function Kf(){return"/workspaces"}function hue(t){let e=Bk(t);return`vsc-${ws.posix.basename(e)}-${D3(t)}`}function gue(t){let e=_3(t),n=na.createHash("sha256").update(t).digest("hex");return`${e}-${n}`}function vue(t){let e=_3(t),n=D3(t);return`${e}-${n}`}function _3(t){let e=ta(t),n="";return e&&e.repositoryName&&(n=e.repositoryName,e.ref?n=`${n}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(n=`${n}-pull-${e.pullRequestId}`)),n}function D3(t){return na.createHash("md5").update(t).digest("hex")}function nw(t){return ws.posix.join(`${Kf()}`,`${t}`)}async function wue(t,{folder:e,cloneInfo:n},r,o,i){var f;await Ak(t);let{containerId:s,shellServer:a,remoteContainersEnv:c}=await yue(t,r,o,e,i,t.configProvider,n),{config:l}=await Cue(t,r,e,i,a),u=(f=r.gitUrlHandler)==null?void 0:f.installExtension();return{repository:r,volumeName:o,containerId:s,shellServer:a,remoteContainersEnv:c,config:l,preInstalledExtensions:u?[u]:[]}}async function yue(t,e,n,r,o,i,s){let{common:a}=t,{output:c,loadNativeModule:l}=a,u=e.fullRepositoryName,f,m,d,p;t.common.progress(1);let h=Nk(e,n,r,t.dockerSocketPath,t.buildContainerRunArgs);r?(c.write(`Cloning Github repository: ${u} into ${e.workspaceFolder(r)}
\r`),f=`fatal: destination path '${e.workspaceFolder(r)}' already exists`,p=e.workspaceFolder(r),d=`Repository '${u}' was already cloned into '${e.workspaceFolder(r)}'.
\r`):(c.write(`Cloning Github repository: ${u} into volume ${n}
\r`),f=`fatal: destination path '${u}' already exists`,p=`${u}`,d=`Repository '${u}' was already cloned into volume.`);let g=e.gitUrlHandler;if(!g)throw new pe({description:Xl.t("Could not analyze the URL.")});s?m=g.cloneOptions(s):m={url:e.repositoryPath};let{stdout:v}=await et(t,...h),C=v.toString().trim(),w=gs(t,C,"root"),y=await Wt(w,c),S=await jS(a,{remoteExec:w,user:"root",nodeExecutable:"node",shellServer:y,launchRootShellServer:async()=>y}),I=S.remoteContainersCLI,x=S.remoteEnv,A=S.ready,F=S.mrpcExec,k=await Qs(t,C,"root",l),E=io("container",p,{},await F||w,k,()=>{throw new Error("not implemented")},void 0,c);try{t.common.isCopyGitConfigEnabled&&await PS(t.common,{homeFolder:"/root",shellServer:y},{}),await gx({shellServer:y,nodeExecutable:"node"},I,c,"global"),await Dv(t.common,{homeFolder:"/root",shellServer:y},[".ssh","known_hosts"],"ssh"),await A;let T=ZV(a),D=await fj(a,E,p,{...m,env:{...x,...m.env}},c,T.output,!!t.removeOnStartup);if(await D.gitClone,D.gitUnshallow&&(a.backgroundTasks.push(D.gitUnshallow.then(()=>{})),D.gitUnshallow.then(T.flush,T.flush)),D.gitClone&&s)try{await g.postClone(s,E,p,c)}catch{return $k(t,C,Xl.t("Failed to checkout the repository {0}.",s.urlToClone))}}catch(T){let D=T&&(T.cmdOutput||T.stack||T.message)||String(T);if(D=D.replace(Bs,""),D.replace(/[\r\n]+/gm,"").includes(f))c.write(d),e.alreadyCloned=!0;else return $k(t,C,Xl.t("Git clone failed. {0}",D))}let{configRaw:_}=await I3(t,e,r,o,y);if(!Rx(_)&&i){c.write(`Repository ${u} has no dev container files.
\r`);let T=!0;for(;T;){let D=await i.createConfiguration(p,E);if(D)T=!1;else{let b=Xl.t("Select Configuration");if(D=await i.showError(Xl.t("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started."),b),D!==b)return $k(t,C,Xl.t("Cancelled container configuration selection."),{closeRemote:!0})}}}return{containerId:C,shellServer:y,remoteContainersEnv:x}}function Nk(t,e,n,r,o=[]){let i=n?t.volumeDestination:t.fullRepositoryName;return Lk(e,i,r,o)}function Lk(t,e,n,r=[]){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,"-v",`${n}:/var/run/docker.sock`,"--security-opt","label=disable",...r,`${b3}`,"sleep","infinity"]}function $k(t,e,n,r){throw e&&Hi(t,e),new pe({description:n,data:r})}async function I3(t,e,n,r,o){let i,s;if(n?s=e.workspaceFolder(n):s=`${P3(e.repositoryPath)}`,r)return i=(await o.exec(`cat ${r.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:i&&$e(i),configFile:r,workspaceFolder:s};if(r=await Rk([e.repositoryPath],t.userRepositoryConfigurationPaths),r&&(i=(await at(r.fsPath)).toString()),!r)for(let a of Vl(ws.posix,s))try{i=(await o.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,r=Ce.from({scheme:"vscode-remote",path:a});break}catch{}return{configRaw:i&&$e(i),configFile:r,workspaceFolder:s}}async function Cue(t,e,n,r,o){let{configRaw:i,configFile:s,workspaceFolder:a}=await I3(t,e,n,r,o);if(!s||!i)throw new pe({description:Xl.t("The repository does not have a 'devcontainer.json' configuration file.")});let{common:c,configUpdater:l}=t,{cliHost:u,output:f}=c,m=Kv({...i}),d=m;l&&(m.configFilePath=s,d=l(m),delete d.configFilePath);let p=fx({platform:u.platform,configFile:s,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},d);return p.configFilePath=s,("workspaceMount"in p||"workspaceFolder"in p)&&f.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:p}}function P3(t){return`/workspaces/${ws.posix.basename(Bk(t))}`}var b3="vsc-volume-bootstrap",Mk="bootstrap.Dockerfile",Eue="volume.Dockerfile";async function Ak(t,e,n,r){let{cliHost:o,output:i}="cliHost"in t?t:t.common;"cliHost"in t||(e=t.common.extensionPath,n=t.common.package.version,r=t.development);let s=o.path.join(await Uv(o),"bootstrap-image",r?`${n}-dev-${Date.now()}`:n),a=o.path.join(s,Mk),c=o.path.join(s,".vscode-remote-containers","dist",`dev-containers-cli-${n}`),l=o.path.join(c,"dist","spec-node","devContainersSpecCLI.js"),u=!await o.isFolder(s);if(!u&&!(await o.isFile(a)&&await o.isFile(l))){let h="Removing incomplete bootstrap-image folder.",g=i.start(h),v=`${s}-${na.randomUUID()}`;await o.rename(s,v),await o.rm(v,{recursive:!0,force:!0}),u=!await o.isFolder(s),i.stop(h,g)}if(u){let h=`${s}-${na.randomUUID()}`,g=o.path.join(h,".vscode-remote-containers","dist",`dev-containers-cli-${n}`);await o.mkdirp(o.path.join(g,"dist","spec-node")),await o.writeFile(o.path.join(h,Mk),await at(ws.join(e,"scripts",Mk))),await o.writeFile(o.path.join(g,"package.json"),await at(ws.join(e,"package.json"))),await o.writeFile(o.path.join(g,"dist","spec-node","devContainersSpecCLI.js"),await at(ws.join(e,"dist","spec-node","devContainersSpecCLI.js"))),await o.mkdirp(o.path.join(g,"scripts")),await o.writeFile(o.path.join(g,"scripts","updateUID.Dockerfile"),await at(ws.join(e,"scripts","updateUID.Dockerfile"))),await o.rename(h,s)}let f=["build","-f",a,"-t",b3,s],m=await o.locateCertificatesFile(),d=o.path.join(s,"host-ca-certificates.crt"),p=`${d}-${na.randomUUID()}`;await o.writeFile(p,m?await o.readFile(m):Buffer.from("")),await o.rename(p,d),await r3(t,...f)}async function g3(t){let{common:e}=t,{cliHost:n,output:r}=e,o=await Sue(t),i=n.path.join(o,Eue),s=!await n.isFolder(o);if(!s&&!await n.isFile(i)){let u="Removing incomplete inspect-volume folder.",f=r.start(u),m=`${o}-${na.randomUUID()}`;await n.rename(o,m),await n.rm(m,{recursive:!0,force:!0}),s=!await n.isFolder(o),r.stop(u,f)}if(s){let u=`${o}-${na.randomUUID()}`;await Xv(ws.join(e.extensionPath,"scripts","inspect-volume"),n,u,r),await n.rename(u,o)}let a=await n.locateCertificatesFile(),c=n.path.join(o,"host-ca-certificates.crt"),l=`${c}-${na.randomUUID()}`;return await n.writeFile(l,a?await n.readFile(a):Buffer.from("")),await n.rename(l,c),o}async function Sue(t){let{common:e,development:n}=t,{cliHost:r}=e,o=e.package.version;return r.path.join(await Uv(r),"inspect-volume",n?`${o}-dev-${Date.now()}`:o)}async function v3(t,e,n){let r=[`${Hk}=${e.repositoryPath}`];!n||n===ci?r.push("vsch.local.repository.unique=true"):r.push("vsch.local.repository.unique=false"),e.gitUrlInfo.ref&&r.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&r.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`);let o=await Uo(t),i=jk(e,n,o);return o.indexOf(i)===-1&&await kp(t,i,r),i}function jk(t,e,n){return e?e===ci&&(n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.legacyUniqueVolumeName)===-1?e=t.uniqueVolumeName:e=t.legacyUniqueVolumeName):n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.oldVolumeName)===-1?e=t.uniqueVolumeName:e=t.oldVolumeName,e}var $p="vsch.local.repository",Vk="vsch.local.repository.volume",Yk="vsch.local.repository.folder";function w3(t,e,n,r){return n?{labels:[`${$p}=${e}`,`${Vk}=${r}`,`${Yk}=${n}`],remoteWorkspaceFolder:t.workspaceFolder(n)}:{labels:[`${$p}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function y3(t,e,n,r){let{loadNativeModule:o,output:i}=t.common,s=gs(t,e,"root"),a=await Qs(t,e,"root",o),c=io("container",r,n,s,a,()=>{throw new Error("not implemented")},"node",i);return{cliHost:c,dockerCLI:"docker",dockerComposeCLI:vs({exec:c.exec,env:n,output:i},"docker","docker-compose"),dockerComposePath:"docker-compose",env:n,output:i}}var T3=Y($r()),rw="devcontainer.local_folder",zf="devcontainer.config_file",Op="vsch.local.volume",Yx="/volume",qx="vsch.quality",ow="vsch.local.folder";async function C3(t,e,n,r,o,i,s,a,c,l,u,f,m,d){let{common:p}=t,h;try{let g=!l,v=r.remoteUser;h=await Lp(t,a.Id,o,v),u&&l&&o&&h.user!=="root"&&(h.launchRootShellServer?await Sx(h,h.launchRootShellServer,o,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let C=await Mx(p,l,a,o,h);return await _ue(a,c,t,e,h,n,r,g,i,s,f,m,d,C)}catch(g){throw xue(g,a,t,h,n)}}function xue(t,e,n,r,o){let i=t instanceof pe?t:new pe({description:T3.t("An error occurred setting up the container."),originalError:t});return e&&(i.manageContainer=!0,i.params=n.common,i.containerId=e.Id,i.dockerParams=n),r&&(i.containerProperties=r),o&&(i.config=o),i}async function _ue(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var k,E;let{common:p}=n,h=ur(r.cliHost,o.shellServer);a||await Lx(n.configurationTracking,r.cliHost,h,i,p.output);let g=s.shutdownAction;g==="stopCompose"&&(g="stopContainer");let v={cwd:c,dockerCLI:n.dockerCLI,env:p.env,containerId:t.Id,user:o.user,sessionId:p.sessionId,shutdownAction:g,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:C,doneWithDocuments:w}=await $x(n,r.cliHost,h,"singleContainer",v,a?i:void 0);p.backgroundTasks.push(w);let y=((E=(((k=s.customizations)==null?void 0:k.vscode)||[]).slice().reverse().find(_=>typeof _.devPort=="number"))==null?void 0:E.devPort)||Hl,{hostOrContainerPort:S,hostPortServer:I,connectionToken:x,remoteEnv:A,serverDownloaded:F}=await Bl(p,o,i,s,y,Ap(n,r,o,l,u,t.Id,e,f,m),d);return C.hostPortServer=I,{params:p,properties:o,config:i,resolvedAuthority:{host:dc,port:S,connectionToken:x,extensionHostEnv:A},tunnelInformation:p.isLocalContainer?Np(t):{},dockerParams:n,dockerContainerId:t.Id,serverDownloaded:F}}function Zl(t){let e=t.Config.Labels||{},n=e[rw]||e[ow];return n||void 0}function R3(t){return(t.Config.Labels||{})[zf]||void 0}function pc(t){let e=(t.Config.Labels||{})[$p];return e||void 0}function Xx(t){let e=(t.Config.Labels||{})[Vk];return e||void 0}function k3(t){let e=(t.Config.Labels||{})[Op];return e||void 0}function N3(t){let e=(t.Config.Labels||{})[Yk];return e||void 0}function Fk(t,e){throw t.write(ot(e)),new Error(e)}function hc(t){return!!(t!=null&&t.startsWith("tunnel+"))}function L3(t){let e=/^tunnel\+(.*)$/.exec(t);return e?{tunnelName:e[1]}:void 0}var A3=Y(require("path"));async function F3(t,e,n,r,o,i){let s,a=new Promise(p=>s=p),c=new Ax,l=[],u=await Zq("vscode-remote-containers",async(p,h)=>{let g=await Qq(p),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let C=l[g.sequence];C&&(C(g.reply),delete l[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&r.event(g.event);h.write(JSON.stringify(v)),h.end()});u.server.unref();let f=A3.join(n,"dist","shutdown","shutdownMonitorProcess"),m=[u.ipcHandlePath,t,nr[e],o||"",i.getTime().toString()];r.write(`Forking shutdown monitor: ${f} ${m.join(" ")}\r
`);let d=XV(f,m,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return d.on("error",p=>{console.error(p)}),d.unref(),{queue:c,sequence:0,replies:l,done:a}}async function Zx(t,e,n){let r=t.sequence++,o=new Promise(s=>t.replies[r]=s);return t.queue.push({type:"configure",sequence:r,options:e}),await o}async function O3({queue:t,done:e}){t.push({type:"cleanup"}),await e}var $3=require("net"),M3=require("util");var ci="__UNIQUE__",dc="127.0.0.1";async function E3(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:n}=await X({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:Fe});return n.toString().trim()}return _e(t,e.platform)}async function Xf(t,e){let n=!t.env.SSH_AUTH_SOCK&&await TR(t)?Tv:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,r={DOCKER_CONTEXT:"default"};return e&&("context"in e?r.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="remote"?r.VSCODE_DOCKER_HOST=e.host:r.DOCKER_HOST=e.host),e.certPath&&(r.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(r.DOCKER_TLS_VERIFY=e.tlsVerify))),n&&(r.SSH_AUTH_SOCK=n),r}function dr(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let n=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;n&&(e.host=n),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function Qx(t,{parentAuthority:e,settings:n}){e&&t.write(`Host authority: ${e}\r
`),n&&("context"in n&&n.context&&t.write(`Context: ${n.context}\r
`),"host"in n&&n.host&&t.write(`Host: ${n.host}\r
`),"certPath"in n&&n.certPath&&t.write(`CertPath: ${n.certPath}\r
`),"tlsVerify"in n&&n.tlsVerify&&t.write(`TLSVerify: ${n.tlsVerify}\r
`))}function eu(t,e){return(!t||t.startsWith("wsl+"))&&!e.VSCODE_DOCKER_HOST&&!e.DOCKER_HOST&&(!e.DOCKER_CONTEXT||e.DOCKER_CONTEXT==="default"||e.DOCKER_CONTEXT==="desktop-linux")}function Up(t,e){var r,o;let n;return hc(t)?n=(r=L3(t))==null?void 0:r.tunnelName:Fl(t)?n=(o=Ov(t))==null?void 0:o.hostName:e&&("context"in e||e.host)&&(n="context"in e?e.context:e.host),n?` @ ${n}`:""}function gc(t){let{Name:e}=t;return e[0]==="/"?e.substring(1):e}async function si(t,e){try{return await ii(t,e)}catch{return}}async function e_(t,e=!0){let{common:n}=t,{output:r}=n,o="Check Docker is running",i=r.start(o);try{let{stdout:s}=await qk(t,t.common.loadNativeModule,e,"version"),a=s.toString();if(a.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(a)}catch(s){console.error(s);let a=Mp.t("Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed."),c=s&&(s.stderr?s.stderr.toString().toLowerCase():s.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a=Mp.t("Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction."):a=Mp.t("Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group."):c.indexOf("ENOENT")!==-1&&(a=Mp.t("The 'docker' command was not found. Make sure Docker is installed.")),new pe({description:a,originalError:`Docker returned an error code ${s.code}, message: ${s.message}`})}finally{r.stop(o,i)}}async function qk(t,e,n,...r){let o={...Bi(t),print:"continuous"};try{return await et(o,...r)}catch(i){if(!U3(i)||!n)throw i;let s="cliHost"in t?t.cliHost:t.common.cliHost,a="output"in t?t.output:t.common.output;if(s.type==="wsl"&&(s=await qr(process.cwd(),e,a)),s.platform==="linux")throw i;if(s.platform==="darwin"&&await s.isFolder("/Applications/Docker.app"))await X({exec:s.exec,cmd:"open",args:["-g","-a","Docker"],env:{ELECTRON_RUN_AS_NODE:""},output:a,print:"continuous"});else{let c=Due(s);if(s.platform==="win32"&&await s.isFile(c))await X({exec:s.exec,cmd:c,env:{ELECTRON_RUN_AS_NODE:""},output:"output"in t?t.output:t.common.output,print:"continuous"});else throw i}for(let c=6;c>0;c--){await Bt(5e3);try{return await et(o,...r)}catch(l){if(c===1||!U3(l))throw l}}throw i}}function Due(t){return t.path.join(t.env.ProgramW6432||"C:\\Program Files","Docker\\Docker\\Docker Desktop.exe")}function U3(t){let e=Buffer.concat([t==null?void 0:t.stdout,t==null?void 0:t.stderr].filter(Boolean)).toString().toLowerCase();return e.includes("cannot connect to the docker daemon")||e.includes("docker daemon is not running")||e.includes("internal server error for api route and version")||e.includes("activate the wsl integration")}function un(t){return t.hostPath!==void 0}function co(t){return t.repositoryPath!==void 0}function Jf(t){return!co(t)&&!!t.folder}function iw(t){return!co(t)&&!Jf(t)&&t.volumeName!==void 0}function lo(t){let e=B3("dev-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,hostPath:e.unparsedConfig}:("repositoryPath"in e&&e.configFile&&(e.configFile=Ce.revive(e.configFile)),"repositoryPath"in e?e.dockerHost?{parentAuthority:e.parentAuthority,repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},cloneInfo:e.cloneInfo}:e:("hostPath"in e&&e.configFile&&(e.configFile=Ce.revive(e.configFile)),"hostPath"in e&&e.dockerHost?{parentAuthority:e.parentAuthority,hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e))}function cw(t,e,n,r,o,i){t=Qf(t);let s=r||i?JSON.stringify({hostPath:e,localDocker:o,settings:r,configFile:i}):e;return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${t?`@${t}`:""}${n}`}function Wi(t,e,n,r,o,i,s,a){if(t=Qf(t),e){let l=ai(e);if(!n){let f=JSON.stringify({repositoryPath:e,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(f,"utf8").toString("hex")}${t?`@${t}`:""}${l.getOldWorkspacePath(e)}`}let u=JSON.stringify({repositoryPath:e,volumeName:n,folder:r,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(u,"utf8").toString("hex")}${t?`@${t}`:""}${l.workspaceFolder(r)}`}if(r){let l={volumeName:n,folder:r,settings:i};return`vscode-remote://dev-container+${Buffer.from(JSON.stringify(l),"utf8").toString("hex")}${t?`@${t}`:""}${nw(r)}`}let c=JSON.stringify({volumeName:n,settings:i});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${t?`@${t}`:""}${Yx}`}function Zf(t){let e=B3("attached-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,containerId:e.unparsedConfig}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function H3(t,e,n,r){t=Qf(t);let o=JSON.stringify({containerName:e,settings:n,cwd:r});return`attached-container+${Buffer.from(o,"utf8").toString("hex")}${t?`@${t}`:""}`}function B3(t,e){try{let n=tu(e);if(!n)return;let{name:r,config:o,parentAuthority:i}=n,s=r===t&&o?Buffer.from(o,"hex").toString("utf8"):void 0;if(!s)return;if(!s.startsWith("{"))return{parentAuthority:i,unparsedConfig:s};let a=JSON.parse(s);return a.parentAuthority=i,a}catch(n){console.warn(n);return}}function tu(t){let e=t==null?void 0:t.match(/^(?<name>[^@+]+)\+(?<config>[^@]+)(?:@(?<parentAuthority>.*))?$/);if(!e)return;let{name:n,config:r,parentAuthority:o}=e.groups;return{name:n,config:r,parentAuthority:o}}function nu(t,e){return Rn(e.startsWith("/")?"linux":"win32",Ce.parse(`vscode-remote://${t}`),e)}function Qf(t){if(t){if(Fl(t)){let e=t.indexOf("@");if(e!==-1&&t.indexOf("+",e)===-1){let r=Ov(t);return OR(r)}return t}if(hc(t))return t}}async function W3(t,e,n){return await _v(t,e,n)||e}function j3(t,e,n){let r=t.path.relative(t.path.dirname(e),n);return`/workspaces/${t.platform==="win32"?r.replace(/\\/g,"/"):r}`}function Kq(t,e){return t.with({path:Ql.posix.resolve(t.path,e)})}async function $x(t,e,n,r,o,i){let{common:s,onRemoveOnShutdownChanged:a}=t,c=s.output.start("Setup shutdown monitor"),l=await F3(r,s.getLogLevel(),s.extensionPath,s.output,s.logFilePath?Ql.dirname(s.logFilePath):void 0,s.sessionStart);Zx(l,o,s.output).catch(d=>console.error(d)),a&&a(async d=>{o.rebuild=!!d,o.delay=0,await Zx(l,o,s.output)}),s.onDidChangeLogLevel(async d=>{o.logLevel=d,await Zx(l,o,s.output)});let u={},f=async()=>{let d=O3(l);u.hostPortServer&&await(0,M3.promisify)(u.hostPortServer.close.bind(u.hostPortServer))(),await d};s.shutdowns.push(f);let m=t.common.hostConfig.canRebuildContainer&&i?Nx(t.configurationTracking,e,n,i).catch(console.error):Promise.resolve();return s.output.stop("Setup shutdown monitor",c),{monitor:l,shutdownArgs:u,doneWithDocuments:m}}function Np(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>{let n=e.IP,r=(0,$3.isIPv4)(n)?n==="0.0.0.0"?"127.0.0.1":n:n==="::"?"[::1]":"["+n+"]";return{remoteAddress:{port:e.PrivatePort,host:"0.0.0.0"},localAddress:r+":"+e.PublicPort}})}}async function Lp(t,e,n,r,o){var y;let{common:i}=t,s="Inspecting container",a=i.output.start(s),c=await ii(t,e);i.output.stop(s,a);let l=r||c.Config.User||"root",[,u,,f]=/([^:]*)(:(.*))?/.exec(l),m=Iue(c.Config.Env),d=gs(t,e,l),p=await Qs(t,e,l,i.loadNativeModule),h=gs(t,e,"root"),g=c.Mounts.find(S=>S.Type==="volume"&&S.Name==="vscode"),v=c.Mounts.find(S=>S.Type==="bind"&&S.Source===i.localCacheFolder),C=g&&Ql.posix.join(g.Destination,/^\.*(.*)$/.exec(i.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination),w=(y=c.Mounts.find(S=>S.Type==="bind"&&S.Destination.startsWith("/tmp/vscode-wayland-")))==null?void 0:y.Destination;return yx({params:i,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:C,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:n,containerUser:u==="0"?"root":u,containerGroup:f,containerEnv:m,remoteExec:d,remotePtyExec:p,remoteExecAsRoot:h,rootShellServer:o,remoteWaylandSocket:w})}function Iue(t){return(t||[]).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substr(0,r)]=n.substr(r+1)),e},{})}async function V3(t){let{common:e,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,dockerEnv:i}=t,{cliHost:s,output:a}=e;return{cliHost:s,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,env:i,output:a}}async function Y3(t,e){return t.type==="local"&&e?t.path.join(e,"data"):t.path.join(await t.homedir(),".vscode-remote-containers","data")}function Ap(t,e,n,r,o,i,s,a,c){let l=!s;return async(u,f,m,d,p)=>{let{common:h}=t,{cliHost:g}=e,{dotfilesConfiguration:v}=h,C=d.getDotfileConfiguration("dotfiles.repository")||v.repository,w=d.getDotfileConfiguration("dotfiles.installCommand")||v.installCommand,y=d.getDotfileConfiguration("dotfiles.targetPath")||v.targetPath;l&&C&&(l=!1,await RY(n));let S={...e.env,...fr(e.env)},I={cliHost:e.cliHost,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:S,extensionPath:h.extensionPath,appRoot:h.appRoot,package:h.package,postCreate:h.postCreate,output:h.postCreate.output},x=h.postCreate.output.dimensions||h.output.dimensions,A=await oi(I,["run-user-commands",...e.cliHost.type==="local"&&h.persistedFolder?["--user-data-folder",h.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...h.containerSessionDataFolder?["--container-session-data-folder",h.containerSessionDataFolder]:[],...s?["--container-data-folder",$i(t.common.product.serverDataFolderName)]:[],...s?["--container-system-data-folder",Ex(t.common.product.serverDataFolderName)]:[],...r?["--workspace-folder",r]:[],...(o||[]).map(F=>["--id-label",F]).flat(),"--container-id",i,"--log-level",no(h.getLogLevel()),"--log-format","json",...a?["--config",_e(a,g.platform)]:[],...c?["--override-config",_e(c,g.platform)]:[],"--default-user-env-probe",h.defaultUserEnvProbe,"--skip-non-blocking-commands",String(u),...h.skipPostAttach?["--skip-post-attach"]:[],"--prebuild",String(m),"--stop-for-personalization",String(f),...[].concat(...Object.keys(p).map(F=>["--remote-env",`${F}=${p[F]}`])),"--mount-workspace-git-root",...x?["--terminal-columns",String(x.columns),"--terminal-rows",String(x.rows)]:[],...C?["--dotfiles-repository",C]:[],...w?["--dotfiles-install-command",w]:[],...y?["--dotfiles-target-path",y]:[]]);if((A==null?void 0:A.outcome)!=="success")throw new pe({description:Mp.t("devcontainer command failed: {0}",JSON.stringify(A))});return A.result}}async function q3(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=await oi(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...e?["--workspace-folder",e]:[],...(i||[]).map(f=>["--id-label",f]).flat(),...s?["--container-id",s]:[],"--log-level",no(r),"--log-format","json",...n?["--config",_e(n,c.platform)]:[],...a?["--override-config",_e(a,c.platform)]:[],"--include-merged-configuration","--mount-workspace-git-root",...l.dimensions?["--terminal-columns",String(l.dimensions.columns),"--terminal-rows",String(l.dimensions.rows)]:[],...Object.keys(o).length>0?["--additional-features",JSON.stringify(o)]:[]]);return u.configuration.configFilePath=u.configuration.configFilePath&&Ce.revive(u.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme}),u}async function Mx(t,e,n,r,o){let{output:i}=t;if(e&&r)try{i.write(`safe.directory: Looking up root folder for workspace folder '${r}'.`);let s=n.Mounts.find(a=>sf(Ql.posix,a.Destination,r,!0));if((s==null?void 0:s.Type)==="bind"){let a;try{let{stdout:u}=await o.shellServer.exec(`command -v git >/dev/null 2>&1 && ROOT_FOLDER="$(git -C '${r}' rev-parse --show-toplevel)" && test "$(stat -c %u "$ROOT_FOLDER")" != "$(id -u)" && echo -n "$ROOT_FOLDER"`);a=u.trim()}catch(u){a=u!=null&&u.stderr?(/dubious ownership in repository at '([^']+)'/.exec(u.stderr)||[])[1]:void 0}if(!a||!sf(Ql.posix,s.Destination,a,!0)){i.write(`safe.directory: Checking host ownership of root folder${a?` '${a}'`:""} at mount point '${s.Destination}' skipped.`);return}i.write(`safe.directory: Checking host ownership of root folder '${a}' at mount point '${s.Destination}'.`);let c=Ql.posix.relative(s.Destination,a),l=t.cliHost.path.join(s.Source,t.cliHost.platform==="win32"?c.replace(/\//g,"\\"):c);if(t.cliHost.platform==="win32"){let u;try{u=(await X({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","(Get-Acl .).Owner"],cwd:l,env:so(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get host owner for '${l}': ${m==null?void 0:m.message}`);return}let f;try{f=(await X({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],cwd:l,env:so(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get current user ('${l}' owned by '${u}'): ${m==null?void 0:m.message}`);return}if(i.write(`safe.directory: '${l}' owned by '${u}', current user is '${f}'.`),u!==f)return}else await X({exec:t.cliHost.exec,cmd:"/bin/sh",args:["-c",`cd '${l}' && test "$(stat -${t.cliHost.platform==="darwin"?"f":"c"} %u .)" = "$(id -u)"`],output:i});if(o.launchRootShellServer){i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Adding to safe directory list in Git system config.`),await(await o.launchRootShellServer()).exec(`git config --system --get-all safe.directory | grep -x '${a}' || git config --system --add safe.directory '${a}'`);return}else return i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Later adding to safe directory list in Git global config.`),async()=>{await o.shellServer.exec(`git config --global --get-all safe.directory | grep -x '${a}' || git config --global --add safe.directory '${a}'`)}}}catch{}}var $t=Y(require("vscode")),Si=require("vscode");var K=Y(require("vscode")),fm=Y(require("path"));var Hp=Y(require("vscode")),t_=Y(require("path")),K3=require("stream");var Pue=US();async function Jr(t,e,n,r,o,i,s,a,c,l,u){return t?bue(t,n,s,a,c,l):$R(e,n,r,o,i,s,a,c,l,u)}async function bue({server:t,authority:e},n,r,o,i,s){var A,F,k,E,_,T,D,b;let a="Loading environment from ExecServer",c=i.start(a),l=await t.env();i.stop(a,c),i.write(`Host OS: ${l.osPlatform}${l.osRelease?` ${l.osRelease}`:""}`),i.write(`Host CWD: ${n}`);let u=Tue(()=>t,void 0),f=l.osPlatform,{homeFolder:m,localEnv:d}=await Yn(f,{posix:async()=>{let R=await Wt(u,i,void 0,f,"Host"),L=f==="darwin"?(await X({exec:u,cmd:"/bin/sh",args:["-c","echo ~"],output:i})).stdout.toString().trim():(await R.exec("echo ~")).stdout.trim(),N=f==="darwin"?(await X({exec:u,cmd:"/bin/sh",args:["-c","id -un"],output:i})).stdout.toString().trim():await Nl(R),B=await Af(R,N),W=(B==null?void 0:B.shell)||"/bin/sh",z=await $f({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:i},{shell:W,remoteExec:u});return R.process.terminate(),{homeFolder:L,localEnv:z}},win32:async()=>(i.write(`USERPROFILE: ${l.env.USERPROFILE}`),i.write(`PATH: ${l.env.PATH}`),{homeFolder:l.env.USERPROFILE,localEnv:l.env})})(),p=async R=>u({...R,env:{...d,...R.env}}),h=async R=>{if(!t.fs){let L=await t.fsStat(R);return L.exists&&L.type==="file"}try{return(await t.fs.stat(R)).type===Hp.FileType.File}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},g=l.osPlatform==="win32",v=g?t_.win32:t_.posix,C=v.join(m,".vscode-remote-containers"),w=await ZY({localCacheFolder:r,output:i,alternateDownload:s,exec:p,env:d,isFile:h,userDataFolder:C,homeFolder:m,product:o,platform:f}),y=AV(w,p,i),S=n||m,I,x;return{type:"remote",authority:e,platform:f,exec:p,ptyExec:JV(p),cwd:S,env:d,path:v,async homedir(){return m},tmpdir:Yn(f,{posix:async()=>d.TMPDIR||"/tmp",win32:async()=>d.TEMP}),isFile:h,isFolder:async R=>{if(!t.fs){let L=await t.fsStat(R);return L.exists&&L.type==="dir"}try{return(await t.fs.stat(R)).type===Hp.FileType.Directory}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},isSocket:async R=>{if(g)return!1;try{return await X({exec:p,cmd:"test",args:["-S",R],output:Fe}),!0}catch(L){if((L==null?void 0:L.code)!==1)throw L;return!1}},readFile:(A=t.fs)!=null&&A.read?async R=>{let L=await t.fs.read(R),N=[];return L.onDidReceiveMessage(B=>N.push(B)),await L.onEnd,Buffer.concat(N)}:R=>HV(p,f,w,R,Fe),writeFile:(F=t.fs)!=null&&F.write?async(R,L)=>{let{stream:N,done:B}=await t.fs.write(R);N.write(L),N.end(),await B}:(R,L)=>BV(p,f,w,R,L,Fe),rename:(k=t.fs)!=null&&k.rename?async(R,L)=>t.fs.rename(R,L):(R,L)=>zS(p,f,R,L,Fe),rm:(E=t.fs)!=null&&E.rm?async R=>t.fs.rm(R):(R,L)=>KS(p,f,R,L||{},Fe),mkdirp:(_=t.fs)!=null&&_.mkdirp?async R=>t.fs.mkdirp(R):R=>JS(p,f,R,Fe),readDir:(T=t.fs)!=null&&T.readdir?async R=>(await t.fs.readdir(R)).map(N=>N.name):R=>WV(p,f,R,Fe),readDirWithTypes:(D=t.fs)!=null&&D.readdir?async R=>(await t.fs.readdir(R)).map(N=>{let B=0;return N.type&Hp.FileType.File&&(B|=1),N.type&Hp.FileType.Directory&&(B|=2),N.type&Hp.FileType.SymbolicLink&&(B|=64),[N.name,B]}):Yn(f,{posix:async R=>{let L={f:1,"*":1,"/":2,"@":64};return(await X({exec:p,cmd:"ls",args:["-aF",R],output:Fe})).stdout.toString().trim().split(`
`).map(N=>"/*@=%|>".indexOf(N[N.length-1])!==-1?[N.substr(0,N.length-1),N[N.length-1]]:[N,"f"]).filter(([N])=>N!=="."&&N!=="..").map(([N,B])=>[N,L[B]||0])},win32:void 0}),getUsername:async()=>(I===void 0&&(I=await Yn(f,{posix:async()=>(await X({exec:p,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim(),win32:async()=>d.USERNAME})()),I),toCommonURI:()=>Promise.resolve(void 0),connect:Ff((b=t.fs)!=null&&b.connect?R=>{if("port"in R&&!t.tcpConnect)return y(R);let L=(async()=>{let{stream:N}=await("port"in R?t.tcpConnect(R.host,R.port):t.fs.connect(R.socketPath));return Pue.duplex(Gk(N,N))})();return{sink:N=>{L.then(B=>B.sink(N),B=>N(B,()=>{})).catch(B=>i.write(`Connection forwarding to sink error: ${(B==null?void 0:B.stack)||(B==null?void 0:B.message)||String(B)}`))},source:(N,B)=>{L.then(W=>W.source(N,B),W=>B(W)).catch(W=>i.write(`Connection forwarding to source error: ${(W==null?void 0:W.stack)||(W==null?void 0:W.message)||String(W)}`))}}}:y,"Exec Server",i),locateCertificatesFile:function(){return x||(x=tx(this,void 0,i))},nodeExecutable:w,reconnect:async R=>{R?R!==t?(i.write("Updating to new ExecServer to reconnect."),t=R):i.write("New ExecServer to reconnect same as old."):i.write("No new ExecServer to reconnect.")}}}function Tue(t,e){return async function(n){let{cmd:r,args:o,output:i}=n,s=t(),a=`Run: ${r} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=i.start(a),l=n.cwd||e,u=await s.env(),f=n.env?{...u.env,...n.env}:u.env,m=await s.spawn(r,o||[],{cwd:l,env:f});return{stdin:Rue(m.stdin),stdout:G3(m.stdout),stderr:G3(m.stderr),exit:Promise.all([m.onExit,m.stdout.onEnd,m.stderr.onEnd]).then(([{status:d}])=>(i.stop(a,c),{code:d,signal:null})).catch(d=>{throw i.stop(a,c),d!=null&&d.message.includes("NotFound")&&(d.code="ENOENT"),d}),async terminate(){}}}}function G3(t){return Gk(void 0,t)}function Rue(t){return Gk(t,void 0)}function Gk(t,e){let n=new K3.Stream,r=!1;if(t&&(n.writable=!0,n.write=function(o,i,s){s=Array.from(arguments).find(c=>typeof c=="function");let a;try{t.write(o)}catch(c){a=c,setImmediate(()=>n.emit("error",c))}return s&&s(a),!0},n.end=function(o,i,s){s=Array.from(arguments).find(a=>typeof a=="function"),typeof o=="function"&&(o=void 0);try{o&&t.write(o),r=!0,t.end()}catch(a){setImmediate(()=>n.emit("error",a))}return s&&s(),this}),e){let c=function(){for(;i.length&&!n.paused;)n.emit("data",i.shift());!n.paused&&o&&n.emit("end")},o=!1;n.readable=!0,n.paused=!0;let i=[];(e.onDidReceiveMessage||e.onData)(l=>{let u=Buffer.from(l);n.paused?i.push(u):n.emit("data",u)}),e.onEnd.then(()=>{o=!0,n.paused||n.emit("end")});let s=n.on.bind(n);n.on=(l,u)=>{let f=s(l,u);return l==="data"&&n.paused&&setImmediate(n.resume.bind(n)),f};let a=n.pipe.bind(n);n.pipe=function(l,u){let f=a(l,u);return n.paused&&n.resume(),f},n.pause=function(){return n.paused=!0,n},n.resume=function(){return n.paused=!1,c(),n}}return n.destroy=function(o){return t&&!r&&(r=!0,n.end()),o&&n.emit("error",o),n.emit("close"),this},n}var NK=Y(require("https")),Xh=Y(require("os")),Hy=Y(require("vscode"));var wme=async(t,e,n)=>{let r=await Promise.resolve().then(()=>(Nd(),T6)),o=await Promise.resolve().then(()=>(m4(),d4)),i=new r.AppInsightsCore,s=new o.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:n};a.extensionConfig[s.identifier]=u}let l=e.workspace.getConfiguration("telemetry").get("internalTesting");return i.initialize(a,[]),i.addTelemetryInitializer(u=>{u.ext=u.ext??{},u.ext.web=u.ext.web??{},u.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),i},p4=async(t,e,n)=>{let r=await wme(t,e,n);return{logEvent:(s,a)=>{try{r==null||r.track({name:s,baseData:{name:s,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{return new Promise((a,c)=>{if(!r){a();return}r.flush(!0,l=>{if(!l){c("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!r){a();return}r.unload(!1,()=>{a(),r=void 0},1e3)})}};Yc();var nm=class t{static applyReplacements(e,n){for(let r of Object.keys(e))for(let o of n)o.lookup.test(r)&&(o.replacementString!==void 0?e[r]=o.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"PACKAGE_JSON_VERSION"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};var RK=async(t,e,n,r,o)=>{let i;try{let a=await Promise.resolve().then(()=>(TK(),bK)),c={};if(r){let f={alwaysUseXhrOverride:!0,httpXHROverride:r};c[pI]=f}let l;t.startsWith("InstrumentationKey=")||(l=t);let u=l?{instrumentationKey:l}:{connectionString:t};i=new a.ApplicationInsights({...u,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:c})}catch(a){return Promise.reject(a)}return{logEvent:(a,c)=>{let l={...c==null?void 0:c.properties,...c==null?void 0:c.measurements};o!=null&&o.length&&nm.applyReplacements(l,o),i==null||i.track({name:a,data:l,baseType:"EventData",ext:{user:{id:e,authId:e},app:{sesId:n}},baseData:{name:a,properties:c==null?void 0:c.properties,measurements:c==null?void 0:c.measurements}})},flush:async()=>{i==null||i.flush(!1)},dispose:async()=>new Promise(c=>{i==null||i.unload(!0,()=>{c(),i=void 0},1e3)})}};var DI=class{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendRawTelemetryEvent(e,n,r){let o={...n};for(let i of Object.keys(o??{})){let s=o[i];typeof i=="string"&&s!==void 0&&(o[i]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,o,r)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};var Xc;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(Xc||(Xc={}));var II=class{constructor(e,n){this._instantiationStatus=Xc.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Xc.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Xc.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}let r={stack:e.stack,message:e.message,name:e.name};if(n){let o=n.properties||n;n.properties={...o,...r}}else n={properties:r};this._telemetryClient.logEvent("unhandlederror",n)}async flush(){var e;return(e=this._telemetryClient)==null?void 0:e.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Xc.NOT_INSTANTIATED&&(this._instantiationStatus=Xc.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=Xc.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=Xc.INSTANTIATED}))}};function kK(){return{sendPOST:(e,n)=>{let r={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let o=NK.request(e.urlString,r,i=>{i.on("data",function(s){n(i.statusCode??200,i.headers,s.toString())}),i.on("error",function(){n(0,{})})});o.write(e.data,i=>{i&&n(0,{})}),o.end()}catch{n(0,{})}}}}var By=class extends DI{constructor(e,n){let r=s=>RK(s,Hy.env.machineId,Hy.env.sessionId,kK(),n);nm.shouldUseOneDataSystemSDK(e)&&(r=s=>p4(s,Hy,kK()));let o={release:Xh.release(),platform:Xh.platform(),architecture:Xh.arch()},i=new II(e,r);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,Hy,{additionalCommonProperties:nm.getAdditionalCommonProperties(o)})}};var qu=Y(KK());var JK=Y(require("vscode"));function qt(t){let e=JK.workspace.getConfiguration(),n=us(t),r=e.get(n),o=Tl(t),i=e.get(o);if(i!=null&&i!==r){let s=e.inspect(n);if(!s||s.globalValue===void 0&&s.workspaceValue===void 0&&s.workspaceFolderValue===void 0)return i}return r}function DF(t,e){return t.affectsConfiguration(us(e))||t.affectsConfiguration(Tl(e))}var Vu=Y(require("path"));var XK=Y(require("os")),Pt=Y(require("vscode")),lm=require("vscode");async function $I(){await Pt.window.showInformationMessage(lm.l10n.t("You need to first save your workspace in a folder containing all its workspace folders."),{modal:!0})}async function Na(t){var r;let e=t?[t]:(r=Pt.workspace.workspaceFolders)==null?void 0:r.map(o=>o.uri);if(!e)return[];let n=await Promise.all([...e.map(o=>(async()=>{try{let i=o.with({path:Vu.posix.join(o.path,".devcontainer.json")});if((await Pt.workspace.fs.stat(i)).type===Pt.FileType.File)return[i]}catch(i){if((i==null?void 0:i.code)!=="FileNotFound")throw i}return[]})()),...e.map(o=>Pt.workspace.findFiles(new Pt.RelativePattern(o.with({path:Vu.posix.join(o.path,".devcontainer")}),"{devcontainer.json,*/devcontainer.json}")))]);return[].concat(...n)}async function Yu(t,e){let n;if(t.length>1){let r=Pt.window.createQuickPick();r.placeholder=lm.l10n.t("Select a devcontainer.json file."),r.busy=!0,r.enabled=!1,r.show(),r.items=(await Promise.all(t.map(async i=>{let s=i.uri,a=i.fileHost.path,c=i.fileHost.platform,l=_e(s,c),u=$e((await i.fileHost.readFile(l)).toString())||{},f,m,d=a.dirname(l),p=a.dirname(d);a.basename(d)===".devcontainer"?(f=lm.l10n.t("Main"),m=p):a.basename(p)===".devcontainer"?(f=a.basename(d),m=a.dirname(p)):(f=lm.l10n.t("Project Root"),m=d);let h=u.name||f,g=i.type==="repositoryConfig"||i.type==="userData"?jy(c,l,XK.homedir()):a.relative(m,l);return{label:h,description:g+(s.toString()===(e==null?void 0:e.toString())?` ${lm.l10n.t(" (Current)")}`:""),uri:s,buttons:[{iconPath:new Pt.ThemeIcon("go-to-file"),tooltip:lm.l10n.t("Open File")}]}}))).sort((i,s)=>{let a=Vu.posix.dirname(i.uri.path),c=Vu.posix.dirname(s.uri.path);return a!==c?a.localeCompare(c):i.label.localeCompare(s.label)}),r.busy=!1,r.enabled=!0;let o=await new Promise(i=>{r.onDidAccept(()=>i(r.selectedItems[0])),r.onDidHide(()=>i(void 0)),r.onDidTriggerItemButton(({item:s})=>{Pt.commands.executeCommand("vscode.open",s.uri),i(void 0)})});r.dispose(),n=o?Ce.from(o.uri):"cancelled"}else t.length===1&&(n=t[0].uri);return n}function jy(t,e,n){if(t==="win32")return e;let r=`${xpe(n,"/")}/`;return(t==="linux"?e.startsWith(r):e.toLowerCase().startsWith(r.toLowerCase()))&&(e=`~/${e.substr(r.length)}`),e}function xpe(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function La(t,e){let n=Pt.workspace.fs;return{platform:t,path:t==="win32"?Vu.win32:Vu.posix,async isFile(r){try{return((await n.stat(Rn(t,e,r))).type&Pt.FileType.File)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async isFolder(r){try{return((await n.stat(Rn(t,e,r))).type&Pt.FileType.Directory)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async readFile(r){try{let o=await n.readFile(Rn(t,e,r));return Buffer.from(o)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let i=new Error(`Could not read file: ${r}`);throw i.originalError=o,i.code="ENOENT",i}throw o}},async rename(r,o){try{let i=Rn(t,e,r),s=Rn(t,e,o);await n.rename(i,s)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not rename  ${r} -> ${o}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async rm(r,o){try{let i=Rn(t,e,r);await n.delete(i,{recursive:o.recursive})}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not remove ${r}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async writeFile(r,o){await n.writeFile(Rn(t,e,r),o)},async readDir(r){return(await n.readDirectory(Rn(t,e,r))).map(i=>i[0])},async readDirWithTypes(r){return n.readDirectory(Rn(t,e,r))},async mkdirp(r){await n.createDirectory(Rn(t,e,r))},async toCommonURI(r){return Rn(t,e,r)}}}var Wy=class{async readDocument(e){try{let n=Pt.workspace.textDocuments.find(o=>o.uri.toString()===e.toString());if(n)return n.getText();let r=await Pt.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,n,r){let o=Pt.workspace.textDocuments.find(s=>s.uri.toString()===e.toString());if(o){let s=new Pt.WorkspaceEdit;for(let a of n){let c=o.positionAt(a.offset),l=o.positionAt(a.offset+a.length);s.replace(e,new Pt.Range(c,l),a.content)}if(await Pt.workspace.applyEdit(s))return}let i=Do(r,n);await Pt.workspace.fs.writeFile(e,Buffer.from(i))}};function Vy(t){var o,i;let e=((o=/\r?\n/.exec(t))==null?void 0:o[0])||`
`,n=((i=/^\t|^ +/m.exec(t))==null?void 0:i[0])||"	",r=n[0]===" ";return{eol:e,insertSpaces:r,tabSize:r?n.length:void 0}}function Yy(){let t=qt("logLevel")||"debug";return RC(t)}var He=require("vscode");var ZK=Y(require("crypto"));async function MI(t,e,n){let r=await IF(t,e,n);return r?Na(await t.toCommonURI(r)):[]}var HI=".devcontainer-internal.json";async function IF(t,e,n){let r=PF(t,e,n),o=t.path.basename(r),i=t.path.dirname(r),s=await t.isFolder(i)?await t.readDir(i):[];for(let a of s)if(a===o||a.startsWith(`${o}-`)&&!isNaN(Number(a.substring(o.length+1)))){let c=t.path.join(i,a),l=t.path.join(c,HI);if(await t.isFile(l)){let u=$e((await t.readFile(l)).toString());if((u==null?void 0:u.rootFolder)===e.rootFolderPath)return c}}}function QK(t,e,n){return`${PF(t,e,n)}-${ZK.randomUUID()}`}async function e5(t,e,n,r){let o=`// Maintained by the Dev Container extension
${JSON.stringify({rootFolder:e.rootFolderPath},void 0,"	")}`;await t.writeFile(t.path.join(r,HI),Buffer.from(o));let i=PF(t,e,n),s;for(let a=1;;a++)if(s=a>1?`${i}-${a}`:i,!await t.isFolder(s)){await t.rename(r,s);break}return s}function PF(t,e,n){return t.path.join(n,"configs",t.path.basename(e.rootFolderPath))}async function t5(t,e){await t.rm(e,{recursive:!0})}process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";process.env.APPLICATIONINSIGHTS_CONFIGURATION_CONTENT="{}";function n5(t){return t.serverDataFolderName?t.serverDataFolderName:t.quality?t.quality==="stable"?".vscode-server":t.quality==="insider"?".vscode-server-insiders":`.vscode-server-${t.quality}`:".vscode-server-oss"}var it="remote-containers.revealLogTerminal",FF="remote-containers.revealPostCreateTerminal",dm="remote-containers.openDevContainerFile",l5="remote-containers.openRepositoryInVolume",WI="remote-containers.openRepositoryInUniqueVolume",u5="remote-containers.openRepositoryFromRemoteHubWithEditSession",f5="remote-containers.openRepositoryFromGitWithEditSession",d5="remote-containers.openPullRequestInVolume",r5=new bC,Qn={onRemoveOnShutdownChangedEmitter:r5,onRemoveOnShutdownChanged:r5.event,results:new Map},um,hn=t=>Hf(t,K.env.appRoot);function zy(t,e,n,r,o,i){return async(s,a)=>{r(),K.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0);let c=K.env.remoteAuthority;if(a.resolveAttempt>1){let l=n.get(c);if(!l)throw new Error("Reconnect attempt without old result.");let u=He.l10n.t("Reconnection attempt {0}",a.resolveAttempt-1),f=t.log.start(u),{cliHost:m}=l.params;if(m.reconnect){let g=`Reconnecting CLIHost ${a.execServer?"with":"without"} ExecServer.`,v=t.log.start(g);try{await m.reconnect(a.execServer)}catch(C){throw t.log.write(ot(String(C&&(C.stack||C.message)||C))),K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Cannot reconnect to remote host."))}finally{t.log.stop(g,v)}}else t.log.write("CLIHost does not need reconnection.");if((await Ky(m,t.log)).pauseResolver&&await m5(m,t.log),l.dockerContainerId){let g=await si(l.dockerParams,l.dockerContainerId);if(!g)throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container no longer exists."));if(g.State.Status==="paused")throw K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Container is paused."));if(g.State.Status!=="running")throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container is no longer running."))}let p=l.resolvedAuthority.port,h=xY(l.params.forwardedPorts,p);if(h){if(h.connections.size){t.log.write(`Destroying ${h.connections.size} leftover connections to forwarded port ${p}.`);for(let g of h.connections)g.destroy()}}else t.log.write(`Forwarded port ${p} not found.`);return t.log.stop(u,f),{...l.resolvedAuthority,isTrusted:l.isTrusted}}else{let l=He.l10n.t("Resolving Remote"),u=t.log.start(l),f=await i(c,a,t,e);return _pe(f.params,f.properties).catch(m=>{}),n.set(c,f),o(),t.log.stop(l,u),K.window.withProgress({location:K.ProgressLocation.Window,title:qpe,cancellable:!1},async m=>{await ZR(f.params.backgroundTasks)}).then(void 0,m=>{t.log.write(ot(String(m&&(m.stack||m.message)||m)))}),{...f.resolvedAuthority,...f.tunnelInformation,isTrusted:f.isTrusted}}}}async function Ky(t,e){let n=t.path.join(await t.homedir(),".vscode-remote-containers","config.json");try{let r=$e((await t.readFile(n)).toString())||{},o=r.canConnectToContainer!==!1,i=r.canRebuildContainer!==!1&&o;return await K.commands.executeCommand("setContext","hideConnectCommands",!o),await K.commands.executeCommand("setContext","hideRebuildCommands",!i),{canConnectToContainer:o,canRebuildContainer:i,pauseResolver:!!r.pauseResolver}}catch(r){return r.code!=="ENOENT"&&e.write(`Error reading ${n}: ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||r}`),{canConnectToContainer:!0,canRebuildContainer:!0,pauseResolver:!1}}}async function m5(t,e){let n=He.l10n.t("Pausing resolver"),r=e.start(n),o=Jv(t),i=`
const fs = require('fs');
const path = require('path');
const os = require('os');

const filepath = path.join(os.homedir(), '.vscode-remote-containers', 'config.json');

fs.watch(path.dirname(filepath), (event, filename) => {
	if (filename === path.basename(filepath)) {
		console.log(\`config.json file event: \${event}\`);
		rereadConfig(true);
	}
});
rereadConfig();
setInterval(() => {
	rereadConfig();
}, 5000);
function rereadConfig(event = false) {
	try {
		const text = fs.readFileSync(filepath, 'utf8');
		const config = JSON.parse(text);
		if (!config.pauseResolver) {
			console.log(\`config.json: Continuing... (\${event ? 'event' : 'poll'})\`);
			process.exit();
		}
		if (event) {
			console.log('config.json: Still paused.');
		}
	} catch (err) {
		console.log('config.json: Not a JSON file.');
	}
}
`;try{await X({exec:t.exec,cmd:o.cmd,args:[...o.args,"-e",i],output:sn(e,1),print:"continuous"})}catch(s){e.write(ot((s==null?void 0:s.message)||String(s)))}e.stop(n,r)}async function _pe(t,e){if(!e.nodeExecutable)return;let n=await at(fm.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:r}=await lc(t,e,[e.nodeExecutable,"-e",n],void 0,{silent:!0}),o=r.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:o})}var bF;async function jI(t){return bF||(bF=ql(fm.join(__dirname,"..",".."),mm,t)),bF}var qy={};async function mm(t,e=!0){var n;if(t.counter&&((n=qy[t.prompt])==null?void 0:n.from)===t.counter&&delete qy[t.prompt],!qy[t.prompt]){if(!e)return"";qy[t.prompt]={result:Promise.resolve(K.window.showInputBox({prompt:t.prompt||He.l10n.t("Enter password"),password:!0,ignoreFocusOut:!0}).then(r=>r||"")),from:t.counter}}return qy[t.prompt].result}async function Ze(t,e,n,r=!0,o=jI(e),i=!0){var C;let s=!n;if(s){if(Qn.results.size){let w=[...Qn.results.values()].filter(y=>y.dockerParams)[0];if(w)return V3(w.dockerParams)}if(um)return um}QI()&&(e.write(He.l10n.t("Getting Docker parameters for own remote.")),pm()===1&&e.write(new Error().stack,1)),n&&typeof n!="string"&&"scheme"in n&&(n.scheme==="file"?n=n.fsPath:n=xp(n));let a,c;if(!n){let w=(K.workspace.workspaceFolders||[])[0];if(K.env.remoteName==="wsl")w?n=xp(w.uri):n={wslDistro:qS(K.env.remoteAuthority),wslPath:"/"};else if(K.env.remoteName==="ssh-remote"){if(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),!c){let y=Ov(K.env.remoteAuthority);if(y){let{user:S,hostName:I,port:x}=y;a={host:`ssh://${S?`${S}@`:""}${I}${x?`:${x}`:""}`}}}(c||a)&&(w?n=w.uri.path:n="/")}else K.env.remoteName==="tunnel"?(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),w?n=w.uri.path:n="/"):K.env.remoteName==="attached-container"?a=(C=Zf(K.env.remoteAuthority))==null?void 0:C.settings:(w==null?void 0:w.uri.scheme)==="file"&&(n=w.uri.fsPath);n||(n=process.cwd())}let l=a&&"host"in a&&a.host||void 0,u=r?ts():{executeInWSL:"never",defaultDistro:void 0},f=await Iv(K.env.appRoot),m=Jr(c?{server:c,authority:K.env.remoteAuthority}:void 0,l,n,hn,u,t.extensionPath,await _r(),f,e,Ei,{sshAskpassEnv:o,settings:tg()});i&&!await Promise.race([m,Bt(1e3)])&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Setting up Dev Containers (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`,cancellable:!1},async()=>{await m});let d=await m,p=Fs(),h=Aa();if(!a){let w=K.workspace.getConfiguration("containers"),y=K.workspace.getConfiguration("docker"),S=w.get("environment")||{},I=y.get("environment")||{},x=S.DOCKER_CONTEXT||I.DOCKER_CONTEXT||y.get("context")||d.env.DOCKER_CONTEXT;if(!x){let A={cliHost:d,dockerCLI:p,dockerComposeCLI:vs({exec:d.exec,env:{},output:Fe},p,h),dockerComposePath:h,env:{},output:Fe};x=await xk(A)||"default"}x&&x!=="default"?a={context:x}:(a={...dr(d.env),...["host","certPath","tlsVerify"].reduce((A,F)=>Dpe(A,y,F),{}),...dr({...I,...S})},Object.keys(a).length||(a=void 0))}let g={...d.type==="local"?await o:void 0,...await Xf(d,a)},v={cliHost:d,dockerCLI:p,dockerComposeCLI:vs({exec:d.exec,env:g,output:e},p,h),dockerComposePath:h,env:g,output:e};return s&&(um=v,OF(t,f),await Ky(v.cliHost,e)),v}async function p5(){if(!K.env.remoteName||K.env.remoteName==="test")return process.platform;if(K.env.remoteName==="ssh-remote"||K.env.remoteName==="tunnel"){let t=await K.workspace.getRemoteExecServer(K.env.remoteAuthority);if(t)return(await t.env()).osPlatform}return"linux"}var BI;function OF(t,e){if(BI)return BI;let n=bpe(t,e);return t.subscriptions.push(n),t.subscriptions.push(n.event(()=>{let r=um==null?void 0:um.cliHost;um=void 0,r!=null&&r.terminate&&r.terminate()})),BI=n.event,BI}function Dpe(t,e,n){let r=e.get(n);return r&&(t[n]=r),t}var Ipe=["docker.context","docker.host","docker.certPath","docker.tlsVerify","docker.environment","containers.environment"],Ppe=["dockerPath","dockerComposePath","executeInWSL","executeInWSLDistro"];function bpe(t,e){let n=new K.EventEmitter,r=K.workspace.onDidChangeConfiguration(async l=>{(Ipe.some(u=>l.affectsConfiguration(u))||Ppe.some(u=>DF(l,u)))&&n.fire()}),o,i,s,a=()=>{(async()=>{i||(i=await Jr(void 0,void 0,process.cwd(),hn,ts(),t.extensionPath,await _r(),e,Fe,Ei));let l={cliHost:i,dockerCLI:Fs(),dockerComposeCLI:vs({exec:i.exec,env:{},output:Fe},Fs(),Aa()),dockerComposePath:Aa(),env:{},output:Fe},u=await xk(l);u===void 0?s=setTimeout(a,2*60*1e3):(u!==o&&(o!==void 0&&n.fire(),o=u),s=setTimeout(a,2*1e3))})().catch(console.error)};a();let c=n.dispose;return n.dispose=()=>{r.dispose(),s&&clearTimeout(s),c.call(n)},n}function Gu(){let t=K.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return UF(e)}return null}function UF(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let n=lo(t.authority);if(un(n))return null;if(co(n)&&n.inspectVolume&&n.inspectVolume===!0)return n}return null}function VI(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:Tpe}}async function Tpe(t){let e="Rebuild",n="Ignore",r=await K.window.showInformationMessage(He.l10n.t("Configuration file(s) changed: {0}. The container might need to be rebuilt to apply the changes.",t.join(", ")),e,n);if(r===e)return K.commands.executeCommand("remote-containers.rebuildContainer");if(r===n)return"ignore"}var TF="remote.defaultExtensionsIfInstalledLocally",o5="dev.containers.defaultExtensionsIfInstalledLocally";async function h5(){let t=K.workspace.getConfiguration(),e=t.get(o5);if(!e)return;let n=t.inspect(TF);if(!(n!=null&&n.globalValue))await t.update(TF,e,K.ConfigurationTarget.Global);else{let r=n.globalValue.slice(),o=n.globalValue.map(i=>i.toLowerCase());for(let i of e){let s=i.toLowerCase();o.includes(s)||r.push(i)}await t.update(TF,r,K.ConfigurationTarget.Global)}await t.update(o5,void 0,K.ConfigurationTarget.Global)}function Rpe(t){return t?i5():Array.from(new Set([...qt("defaultExtensions")||[],...i5()]))}function g5(){return Gu()?{}:qt("defaultFeatures")||{}}function i5(){let t=K.env.language,e=t.indexOf("-"),n=s5(t)||(e!==-1?s5(t.substr(0,e)):void 0);return n?[n]:[]}function s5(t){let e=t.toLowerCase();return K.extensions.all.filter(n=>{var o;let r=n.packageJSON&&n.packageJSON.contributes;return(o=r==null?void 0:r.localizations)!=null&&o.length?!!r.localizations.find(i=>{var s;return((s=i==null?void 0:i.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(n=>n.id)[0]}function a5(){return!!K.workspace.getConfiguration().get("workbench.enableExperiments")}function kpe(){return!!qt("enableWebAccess")}function YI(){return qt("workspaceMountConsistency")||"cached"}async function qI(t,e,n){if(t.type!=="local")try{let r=t.path.join(await t.homedir(),n5(e),"data","Machine","settings.json"),o=await t.readFile(r),i=$e(o.toString());return(i==null?void 0:i["dev.containers.gpuAvailability"])||"detect"}catch(r){return(r==null?void 0:r.code)!=="ENOENT"&&n.write(ot(String(r&&(r.stack||r.message)||r))),"detect"}return qt("gpuAvailability")||"detect"}function GI(){return qt("cacheVolume")??!0}function Npe(){let t=qt("copyGitConfig");return typeof t=="boolean"?t:!0}function Lpe(){return qt("gitCredentialHelperConfigLocation")||"global"}function Ape(){let t=qt("dockerCredentialHelper");return typeof t=="boolean"?t:!0}function Fpe(){let t=qt("githubCLILoginWithToken");return typeof t=="boolean"?t:!0}function Ope(){let t=qt("mountWaylandSocket");return typeof t=="boolean"?t:!0}function Fs(){return qt("dockerPath")||"docker"}function zI(){return qt("dockerSocketPath")||"/var/run/docker.sock"}function ts(){return{executeInWSL:$F(),defaultDistro:KI()}}function $F(){return process.platform!=="win32"?"never":qt("executeInWSL")?"always":"forWSLPath"}function KI(){if(process.platform==="win32")return qt("executeInWSLDistro")||void 0}function Upe(){return process.platform==="win32"&&qt("forwardWSLServices")!==!1}function Aa(){return qt("dockerComposePath")||"docker-compose"}function JI(){return qt("experimentalLockfile")||!1}function MF(){let t=qt("optimisticallyLaunchDocker");return typeof t=="boolean"?t:!0}function pm(){let t=qt("logLevel")||"debug";return RC(t)}var $pe=t=>K.workspace.onDidChangeConfiguration(e=>{DF(e,"logLevel")&&t(pm())});function Mpe(){let t=K.workspace.getConfiguration(),e=n=>(t.get(Tl(n),"")||t.get(n,"")).trim();return{repository:e("dotfiles.repository")||void 0,installCommand:e("dotfiles.installCommand")||void 0,targetPath:e("dotfiles.targetPath")||"~/dotfiles"}}function tg(){let t=K.workspace.getConfiguration();return{executablePath:t.get("remote.SSH.path"),executableArgs:pm()===1?["-v"]:void 0,configFilePath:t.get("remote.SSH.configFile")}}function ns(t,e,n,r,o,i,s,a,c){var m,d;let l={resolver:e,outcome:n};if(o){l.hostType=o.cliHost.type;let p=o.cliHost.authority;if(p){let h=p.indexOf("+");h!==-1&&(l.hostAuthority=p.substring(0,h))}}i&&(l.configProperties=JSON.stringify(Object.keys(i)),l.configExtensions=JSON.stringify(((d=(m=i.customizations)==null?void 0:m.vscode)==null?void 0:d.extensions)||[]),l.configFeatures=JSON.stringify(Object.keys(i.features||{}).map(p=>af(p))),"image"in i?l.configType="image":Oo(i)?l.configType="dockerfile":"dockerComposeFile"in i&&(l.configType="dockerCompose")),s&&(l.configLocation=s),a&&(l.hardwareId=a.osRelease.hardware,l.osReleaseId=a.osRelease.id,l.osReleaseVersion=a.osRelease.version);let u=c&&c.originalError,f=u&&(u.stack||u.message||String(u))||c&&c.description;f&&(l.errorMessage=f),c!=null&&c.step&&(l.step=c.step),t.sendTelemetryEvent("resolver",l,{sessionTimeInMs:Date.now()-r.getTime()})}var RF=class{constructor(e){this.onClose=e}writeEmitter=new K.EventEmitter;onDidWrite=this.writeEmitter.event;inputEmitter=new K.EventEmitter;onDidInput=this.inputEmitter.event;queue=[];ready=!1;open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},Gy=class{constructor(e,n,r=void 0){this.sessionStart=n;let o=i=>{this.outputTerminal.write(i),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?fm.join(e,`remoteContainers-${n.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=Hpe(o,pm,this.logFilePath,n,r),Object.defineProperty(this.log,"dimensions",{get:()=>{var i;return(i=this._terminal)==null?void 0:i.dimensions}}),this.log.onDidChangeDimensions=i=>K.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&i(s.dimensions)})}_terminal;outputTerminal=new RF(()=>this._terminal=void 0);onDidInput=this.outputTerminal.onDidInput;_name=He.l10n.t("Dev Containers");_revealOnNextOutput=!1;log;logFilePath;get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=K.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function Hpe(t,e,n,r,o=void 0){let i=[];return n&&i.push(W0(n,()=>Math.min(2,e()))),i.push(j0(t,e,r)),i.push(Bpe()),sn(B0(i,o))}function Bpe(){return{event(t){t.type==="notification"&&K.window.showInformationMessage(t.message,He.l10n.t("Dismiss"))}}}async function HF(t,e){let n=await si(t,e.Id);if(n&&n.State.Status==="running")try{await et(t,"stop",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error stopping container: {0}",r.message))}}async function XI(t,e){let n=await si(t,e.Id);if(n&&n.State.Status!=="running")try{await et(t,"start",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error starting container: {0}",r.message))}}async function v5(t,e){try{await et(t,"rm",e)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing container: {0}",n.message))}}async function BF(t,e){try{await et(t,"volume","rm","--force",e)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing volume: {0}",n.message))}}function Wpe(){return K.env.sessionId!=="someValue.sessionId"?K.env.sessionId:`${K.env.sessionId}_${Date.now()}`}function jpe(t,e){let n=K.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(n.dispose.bind(n))}async function w5(t,e){if(t.globalState.get("removeOnStartup")===e)return await t.globalState.update("removeOnStartup",null),!0;let n=t.workspaceState.get("removeOnStartup",!1);return n&&await t.workspaceState.update("removeOnStartup",null),n}async function y5(t,e){await t.workspaceState.update("removeOnStartup",e)}async function WF(t,e){await t.globalState.update("removeOnStartup",e)}async function C5(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function Jy(t,e){await t.globalState.update("buildNoCache",e)}async function ng(t,e,n,r,o){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:n==null?void 0:n.toString(),logFile:r,openLog:o})}async function E5(t){var n;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let r=(n=K.workspace.workspaceFolders)==null?void 0:n.some(i=>i.uri.fsPath===e.workspaceFolder||i.uri.path===e.workspaceFolder),o=await Gu();if(r||o&&o.repositoryPath===e.workspaceFolder&&(r=!0),r){let i=e.fileWithError?Ce.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await c5(i),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?K.ViewColumn.Beside:K.ViewColumn.One,preserveFocus:!0},a=await K.window.showTextDocument(K.Uri.file(e.logFile),s),c=new K.Position(a.document.lineCount-1,0);a.selection=new K.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await c5(i),!0}}return!1}function S5(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function c5(t){return t?K.commands.executeCommand("vscode.open",K.Uri.parse(t.toString()),{viewColumn:K.ViewColumn.One}):K.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:K.ViewColumn.One})}async function ZI(t,e,n,r){return!r&&Qn.results.size?[...Qn.results.values()].filter(o=>o.config).map(o=>({type:o.configLocationType||"unknown",uri:o.configWorkspaceURI||o.config.configFilePath,fileHost:t})):(await Promise.all([!r||r==="workspace"?Na().then(o=>o.map(i=>({type:"workspace",uri:i,fileHost:t}))):[],!r||r==="repositoryConfig"?jF(t,e).then(o=>o.map(i=>({type:"repositoryConfig",uri:i,fileHost:La(process.platform,i.with({path:fm.posix.dirname(i.path)}))}))):[],n&&(!r||r==="userData")?MI(t,e,n).then(o=>o.map(i=>({type:"userData",uri:i,fileHost:t}))):[]])).flat()}async function jF(t,e){let n=Xy();if(n.length){let r=await IS(t,e,Fe);if(r!=null&&r.length){let o=jx(r,n);return(await Promise.all(o.map(s=>Na(Ce.file(s))))).flat()}}return[]}function Xy(){return qt("repositoryConfigurationPaths")||[]}async function Zc(t,e){if(e.type==="local")return t.globalStoragePath}async function Vpe(t,e,n="localhost"){await K.workspace.openTunnel({remoteAddress:{host:n,port:e}})}function x5(t,e){let n=new Gy(void 0,e);n.name=He.l10n.t("Configuring..."),n.revealOnNextOutput=!0;let r=!1;n.onDidInput(()=>{r&&(r=!1,n.dispose())});let o,i={enabled:!0,skipNonBlocking:!1,output:QV(n.log,"postCreate",t),onDidInput:n.onDidInput,done:()=>{n.shown&&(n.log.raw(`\x1B[1m${He.l10n.t("Done. Press any key to close the terminal.")}\x1B[0m`),r=!0),o()},promise:new Promise(s=>o=s)};return{channel:n,postCreate:i}}async function zu(t){let{authority:e,extensionContext:n,sessionStart:r,progress:o,cliHost:i,env:s,cwd:a,wslSettings:c,isLocalContainer:l,telemetry:u,onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,postCreate:h}=t,g=kpe(),v=Wpe(),C=await _r(),w;if(i.type!=="wsl"&&Upe())try{w=await GS(void 0,c,n.extensionPath,C,u.product,hn,m,Ei)}catch(S){m.write("Could not connect to WSL."),m.write((S==null?void 0:S.message)||String(S)),S!=null&&S.stdout&&m.write(S.stdout.toString()),S!=null&&S.stderr&&m.write(S.stderr.toString())}let y={computeExtensionHostEnv:!0,...u,appRoot:K.env.appRoot,localCacheFolder:C,containerSessionDataFolder:fm.posix.join("/tmp",`devcontainers-${v}`),extensionPath:n.extensionPath,sessionId:v,sessionStart:r,authority:e,cliHost:i,hostConfig:await Ky(i,m),env:s,cwd:a,isLocalContainer:l,getAdditionalExtensionsToInstall:Rpe.bind(void 0),additionalFeaturesToInstall:g5(),isCopyGitConfigEnabled:Npe(),credentialHelperConfigLocation:Lpe(),isDockerCredentialHelperEnabled:Ape(),isGitHubCLILoginWithTokenEnabled:Fpe(),dotfilesConfiguration:Mpe(),progress:Kpe(o),onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,defaultUserEnvProbe:"loginInteractiveShell",postCreate:h,getTelemetryLevel:()=>u.getTelemetryLevel(),forwardServerPort:!0,web:g,getLogLevel:pm,onDidChangeLogLevel:$pe,loadNativeModule:hn,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:S=>jpe(y,S),openTunnel:Vpe,getTunnels:()=>Promise.resolve(K.workspace.tunnels),onAdoptProcess:K.window.onDidOpenTerminal,persistedFolder:await Y3(i,n.globalStoragePath),alternateDownload:Ei,skipPostAttach:!1,wslCLIHost:w,localWaylandSocket:l?await Ype(i,w,m):void 0,globalState:n.globalState};return y.hostConfig.pauseResolver&&await m5(i,m),y}async function Ype(t,e,n){if(!Ope())return;let r=await RR(t);if(r)return r;let o=e&&await RR(e);if(o)return MV(e,o,n)}async function Ei(t,e){let n=await K.commands.executeCommand("_workbench.downloadResource",K.Uri.parse(t));if(!n)throw new pe({description:He.l10n.t("Downloading the VS Code Server failed. Please try again later.")});await rl(n.fsPath,e)}var Ku=`[${He.l10n.t("Connecting to Dev Container (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`,qpe=`[${He.l10n.t("Configuring Dev Container (show log)")}](command:${FF} "${He.l10n.t("Show details in terminal")}")`,Gpe=`[${He.l10n.t("Reading Dev Container Configuration (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`,zpe={0:"",1:He.l10n.t("Cloning Repository"),2:He.l10n.t("Building image"),3:He.l10n.t("Starting container"),4:He.l10n.t("Installing server"),5:He.l10n.t("Starting server"),6:""};function Kpe(t){let e=0;return n=>{let r=6-n,o=(100-e)/(r+1);t.report({message:zpe[n],increment:o}),e+=o}}function _5(t,e,n){let{name:r,publisher:o,version:i,aiKey:s}=e;if(!s)return t1(e,n);let a=o?`${o}.${r}`:r,c=new By(s);t.subscriptions.push(c);let l=new kF(c),u=Jpe(n),f=a5()?(0,qu.getExperimentationService)(a,i,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async m=>f&&a5()?f.isCachedFlightEnabled(m):!1,product:n,package:e,getTelemetryLevel:()=>c.telemetryLevel}}var kF=class{constructor(e){this.baseReporter=e}sharedProperties={};sendTelemetryEvent(e,n,r){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...n},r)}setSharedProperty(e,n){this.sharedProperties[e]=n}postEvent(e,n){let r={};for(let[o,i]of n)r[o]=i;this.sendTelemetryEvent(e,r)}};function Jpe(t){switch(t.quality){case"stable":return qu.TargetPopulation.Public;case"insider":return qu.TargetPopulation.Insiders;case"exploration":return qu.TargetPopulation.Internal;case void 0:return qu.TargetPopulation.Team;default:return qu.TargetPopulation.Public}}var Zy=He.l10n.t("Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container."),NF="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function Qy(t,e){if(e!=null&&e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-")||t.globalState.get(NF))return!0;let n=He.l10n.t("Got It"),r=He.l10n.t("Learn More"),o=await K.window.showWarningMessage(He.l10n.t("Cloning a repository in a Dev Container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only clone a repository in a Dev Container if you trust its authors.")},n,r);return o===n?(await t.globalState.update(NF,!0),!0):(o===r&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var LF="userConfirmedAttachToContainerRequiresTrust";async function Os(t){if(t.globalState.get(LF))return!0;let e=He.l10n.t("Got It"),n=He.l10n.t("Learn More"),r=await K.window.showWarningMessage(He.l10n.t("Attaching to a container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only attach to a container if you trust its origin.")},e,n);return r===e?(await t.globalState.update(LF,!0),!0):(r===n&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function D5(t){t.globalState.setKeysForSync([NF,LF,AF])}function I5(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var AF="updatedToPreRelease2",Xpe="2022-01-19T05:14:31.474Z";async function P5(t,e){try{e.quality==="insider"&&e.date&&e.date.localeCompare(Xpe)>=0&&!t.globalState.get(AF,!1)&&(await t.globalState.update(AF,!0),await K.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(n){console.error(n)}}async function rg(t,e,n,r){try{return await Wx(t,e,n,pm(),void 0,void 0,r)}catch{return}}async function VF(t,e,n,r){let o=(async()=>{try{return await q3(t,e,n,pm(),g5(),void 0,void 0,r)}catch{return}})(),i=await Promise.race([o,new Promise(s=>setTimeout(()=>s("timeout"),1e3))]);return i!=="timeout"?i:K.window.withProgress({location:K.ProgressLocation.Notification,title:Gpe,cancellable:!0},async(s,a)=>Promise.race([o,new Promise(c=>{let l=a.onCancellationRequested(()=>{l.dispose(),c("canceled")})})]))}async function Ju(t){return K.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function b5(t,e,n,r){try{return await Fp(e,t.globalState,n,r),!0}catch(o){if(!(o instanceof pe))throw o;let i=He.l10n.t("Learn More");return await K.window.showWarningMessage(o.description,{modal:!0,detail:o.detail},...o.data.learnMoreUrl?[i]:[])===i&&await K.env.openExternal(K.Uri.parse(o.data.learnMoreUrl)),!1}}async function T5(t,e){let n="";for(let r=tu(K.env.remoteAuthority);r;r=tu(r.parentAuthority)){let o=r.name==="tunnel"?await K.extensions.getExtension("ms-vscode.remote-server"):r.name==="ssh-remote"?await K.extensions.getExtension("ms-vscode-remote.remote-ssh"):void 0;o&&(n+=` over ${o.packageJSON.displayName} ${o.packageJSON.version}`)}return`Dev Containers ${t.version}${n} in VS Code ${K.version} (${e.commit||"out-of-source"}).`}function R5(t){QI()&&(async()=>await Promise.race([t,new Promise(n=>setTimeout(()=>n("timeout"),1e4))])==="timeout"&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Dev Containers waiting for connection request (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`},async()=>t))()}var Zpe=["dev-container","attached-container","k8s-container","apple-container"];function QI(){return K.env.remoteName&&Zpe.includes(K.env.remoteName)}var Qc={id:"openDocumentation",title:Si.l10n.t("Open Documentation"),isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await $t.env.openExternal($t.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},el={id:"reloadWindow",title:Si.l10n.t("Reload Window"),isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await et(t.dockerParams,"stop","-t","0",t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},N5={id:"rebuildContainer",title:Si.l10n.t("Rebuild Container"),isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e&&!(t.params&&"hostConfig"in t.params&&!t.params.hostConfig.canRebuildContainer),execute:async t=>{await Hi(t.dockerParams,t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},Xu={id:"openRecent",title:Si.l10n.t("Open Recent..."),isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await $t.commands.executeCommand("workbench.action.openRecent")}},L5={id:"startContainer",title:Si.l10n.t("Start Container"),isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await et(t.dockerParams,"start",t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},A5={id:"chooseContainer",title:Si.l10n.t("Choose Container"),isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await $t.commands.executeCommand("remote-containers.attachToRunningContainer")}},Fa={id:"closeRemote",title:Si.l10n.t("Close Remote"),isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let n=$t.workspace.workspaceFile;return!(n&&n.scheme==="untitled"||$t.workspace.textDocuments.some(o=>o.isDirty))},execute:async t=>{await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Zu=[{id:"retry",title:Si.l10n.t("Retry"),isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:el.execute},{id:"moreActions",title:Si.l10n.t("More Actions..."),isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:Si.l10n.t("Learn More"),isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await $t.env.openExternal($t.Uri.parse(t.data.learnMoreUrl))}}];async function Oa(t,e,n,r=!1,o){var d,p,h,g,v,C;let i=t instanceof pe?t:new pe({description:Si.l10n.t("An error occurred setting up the container."),originalError:t});$t.commands.executeCommand(it);let s=i.originalError&&(i.originalError.stack||i.originalError.message)||i.originalError;if(s!==void 0){o.write(ot(String(s)));let w=(p=(d=i.originalError)==null?void 0:d.stdout)==null?void 0:p.toString().trim();w&&o.write(w);let y=(g=(h=i.originalError)==null?void 0:h.stderr)==null?void 0:g.toString().trim();y&&o.write(ot(y)),(v=i.originalError)!=null&&v.code&&o.write(`Exit code ${(C=i.originalError)==null?void 0:C.code}`)}if(i.data.closeRemote)throw await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),$t.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let a=i.actions;a.length||(a=[Qc]);let c=await a.reduce(async(w,y)=>await y.applicable(i,!0)?[...await w,y]:w,Promise.resolve([])),l=await $t.window.showErrorMessage(i.description,{modal:!0,detail:i.detail},...c);if(l&&(k5(n,e,l.id),await l.execute(i)),l&&l.isLastAction){if(r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let u=await a.reduce(async(w,y)=>await y.applicable(i,!1)?[...await w,y]:w,Promise.resolve([])),f=u.map(w=>({label:w.title,action:w}));async function m(){let y=await(u.length?$t.window.showQuickPick(f,{ignoreFocusOut:!0,placeHolder:Si.l10n.t("Pick an action to help resolve the problem.")}):Promise.resolve(void 0));y&&(k5(n,e,y.action.id),y.action.execute(i).catch(console.error),y.action.isLastAction||await m())}if(m().catch(console.error),r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function k5(t,e,n){t.sendTelemetryEvent("errorAction",{resolver:e,action:n})}var gn=Y(require("vscode")),Kt=require("vscode"),Ua=Y(require("path"));var fe=Y(require("vscode")),zt=require("vscode");var Z5=Y(vT());function F5(t){var e;return(e=t.options)!=null&&e.version?"version":void 0}var lg=Y(require("path"));async function Qu(t){let r=await Bx({type:"GET",url:"https://containers.dev/static/devcontainer-index.json",headers:{"user-agent":"devcontainers-vscode",Accept:"application/json"}},t),o=$e(r.toString());return o.collections.find(i=>i.templates.length)||t.write("No container templates retrieved from index.",5),o.collections.find(i=>i.features.length)||t.write("No container features retrieved from index.",5),o}var Lt=Y(require("vscode")),st=require("vscode"),rC=Y(require("os"));var nC=Y(require("path"));var In=Y(require("vscode")),Gt=require("vscode");var O5=Gt.l10n.t("Keep Defaults"),Qpe=Gt.l10n.t("Configure Options"),eC={iconPath:new In.ThemeIcon("check-all"),tooltip:Gt.l10n.t("Finish")},YF=["devcontainers","microsoft","github"];async function og(t,e,n,r=[],o,i=!0,s=!1){if(!e.length)return{};let a={iconPath:new In.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")},c=t.quickPick.onDidTriggerItemButton(y=>{let S=y.item.feature.documentationURL;In.env.openExternal(In.Uri.parse(S))}),l=await o,u=Gt.l10n.t("Suggested by GitHub Copilot"),f=e.map(y=>{let S=r.indexOf(y)!==-1,I;if(S)I=Gt.l10n.t("$(lock) Feature is included in base image and cannot be removed");else if(y.owner){let A=y.owner==="devcontainers"?"$(verified)":"";I=`${y.owner||Gt.l10n.t("Unknown Publisher")} ${A}`}else I=void 0;let x=l==null?void 0:l.features.includes(y);return{label:x?`$(sparkle) ${y.name}`:y.name,detail:y.description,description:x?I?`${I} ${u}`:u:I,picked:n.indexOf(y)!==-1,buttons:y.documentationURL?[a]:void 0,feature:y,isAlreadyInstalledViaBaseImage:S,kind:In.QuickPickItemKind.Default}}).sort((y,S)=>{if(y.isAlreadyInstalledViaBaseImage!==S.isAlreadyInstalledViaBaseImage)return y.isAlreadyInstalledViaBaseImage?1:-1;let I=l==null?void 0:l.features.includes(y.feature),x=l==null?void 0:l.features.includes(S.feature);return I!==x?I?-1:1:y.label.localeCompare(S.label)}),m,d=t.quickPick,{matchOnDetail:p}=d;try{d.matchOnDetail=!0;let y=[];s&&y.push(In.QuickInputButtons.Back),i&&y.push(eC),m=await Co(d,f,Gt.l10n.t("Select additional features to install"),Gt.l10n.t("Select Features"),!0,y)}finally{d.matchOnDetail=p}if(c.dispose(),!m)return;if(m.button===In.QuickInputButtons.Back)return"back";let h=m.pick.filter(y=>!y.isAlreadyInstalledViaBaseImage).map(y=>y.feature),g={};if(!h.length)return g;let v=[];for(let y of e){let S=h.indexOf(y)!==-1;g[y.id]=S?{}:!1,S&&YF.indexOf(y.owner)===-1&&v.push(y)}if(t.askForTrust&&v.length){let y=[...new Set(v.map(E=>E.owner))].sort().map(E=>`@${E}`),S=y.length===1?y[0]:`${y.slice(0,-1).join(", ")} and ${y[y.length-1]}`,I={label:Gt.l10n.t("Trust {0}",S),description:Gt.l10n.t("from GitHub"),buttons:[{iconPath:new In.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")}]},x={label:Gt.l10n.t("Back")},A={label:Gt.l10n.t("Cancel")},F=d.onDidTriggerItemButton(()=>{for(let E of v)In.env.openExternal(In.Uri.parse(E.documentationURL))}),k=await Co(d,[I,x,A],Gt.l10n.t("Some features are from the {0} GitHub owner/organization(s).",S),void 0,void 0,!0);if(F.dispose(),!k||k===A)return;if(k==="back"||k===x)return og(t,e,n,r,o,i,s)}return m.button===eC||!i||!h.some(y=>{let S=y.options;return S&&Object.keys(S).some(I=>{let x=S[I];return x.type==="boolean"||x.type==="string"&&("enum"in x&&(x.enum||[]).length>1||"proposals"in x&&(x.proposals||[]).length>1)})})||await In.window.showQuickPick([O5,Qpe],{title:Gt.l10n.t("Keep Feature defaults or configure options?"),canPickMany:!1})===O5?g:ehe(t,g,h,()=>og(t,e,n,r,o))}async function ehe(t,e,n,r){return async function o(i,s,a){if(!s.length)return i;let c=s[0],l=i;if(!(c!=null&&c.options))return o(l,s.slice(1),a);let u,f;return u=await the(t,l,c),u&&(f=await nhe(t,u,c,a)),!u||!f?await a():o(f,s.slice(1),a)}(e,n,r)}async function the(t,e,n){let r=n==null?void 0:n.options;if(!r)return e;let i=Object.keys(r).filter(l=>{var u;return((u=r[l])==null?void 0:u.type)==="boolean"}).map(l=>{let u=r[l];return{label:l,description:u.description,key:l,value:!0,picked:!!(u!=null&&u.default)}});if(!i.length)return e;let s=n.id,a=n.name||s,c=await Co(t.quickPick,i,Gt.l10n.t("Select boolean options for {0}",a),Gt.l10n.t("Select boolean options for '{0}'",a),!0,[In.QuickInputButtons.Back,eC]);if(!(!c||c.button===In.QuickInputButtons.Back))return c.pick.reduce((l,u)=>({...l,[s]:{...l==null?void 0:l[s],[u.key]:u.value}}),e)}async function nhe(t,e,n,r){let o=n==null?void 0:n.options;if(!o)return e;let i=n.id,s=n.name||i;return async function a(c,l,u){if(!l.length)return c;let f=l[0],m=o[f],d=("enum"in m&&m.enum||"proposals"in m&&m.proposals||[]).map(v=>({label:String(v),value:v,description:m.default===v?Gt.l10n.t("(default)"):void 0}));if(d.length===0)return a(c,l.slice(1),u);let p="enum"in m?void 0:v=>{if(!(!v||d.some(C=>C.value===v)))return{label:Gt.l10n.t("Use: {0}",v),value:v,description:Gt.l10n.t("(custom)")}},h=d.length===1?{pick:d[0],button:"ok"}:await Co(t.quickPick,d,m.description||Gt.l10n.t("Select a value"),Gt.l10n.t("Select options for '{0}'",s),void 0,[In.QuickInputButtons.Back,eC],p);if(!h||h.button===In.QuickInputButtons.Back)return;let g={...c,[i]:{...c==null?void 0:c[i],[f]:h.pick.value}};return h.button===eC?g:a(g,l.slice(1),u)}(e,Object.keys(o).filter(a=>{var c;return((c=o[a])==null?void 0:c.type)==="string"}),r)}var rhe=["png","md","json","txt","map"],ohe=["node_modules",".git","bin","out","dist",".vscode-test"],ihe=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],U5={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},$5={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},she=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile","ghcr.io/devcontainers/templates/codespaces-linux"];function M5(t,e){let n=new Map;for(let r of e)if(r.platforms){if(she.indexOf(r.id)>-1)continue;let o=0,i=0,s=r.platforms;if(s[0]==="Any")o+=5;else for(let a of s)if($5[a]){let c=$5[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(o+=10),t.mostPopularFileType===l&&(o+=10)}else if(U5[a]){let c=U5[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}n.set(r,o+(i<0?-4:i))}return n}async function H5(t,e){return ahe(t,e.rootFolderPath,ohe,rhe)}async function ahe(t,e,n,r){let o=new Map,i=new Map,s=500;function a(d,p,h,g){let v=[];(t.readDirWithTypes||t.readDir)(d).then(w=>{if(h.count>=s)return h.count+=w.length,h.maxReached=!0,g(v);let y=w.length;if(y===0)return g(v);let S=w;h.count+w.length>s&&(h.maxReached=!0,y=s-h.count,S=w.slice(0,y)),h.count+=w.length;for(let I of S){let x=Array.isArray(I)?I[0]:I;(Array.isArray(I)?Promise.resolve((I[1]&1)!==0):t.isFile(t.path.join(d,x))).then(F=>{F?(v.push(x),--y===0&&g(v)):p.indexOf(x)===-1?a(t.path.join(d,x),p,h,k=>{if(v=v.concat(k),--y===0)return g(v)}):--y===0&&g(v)},()=>{if(--y===0)return g(v)})}},()=>g(v))}let c=d=>{o.has(d)?o.set(d,o.get(d)+1):o.set(d,1)},l=d=>{for(let p of ihe)p.pattern.test(d)&&(i.has(p.tag)?i.set(p.tag,i.get(p.tag)+1):i.set(p.tag,1))},u=d=>{if(d.lastIndexOf(".")>=0){let p=d.split(".").pop();p&&!r.includes(p)&&c(p.toLowerCase())}l(d)},f=d=>[...d.entries()].reduce((p,h)=>h[1]>p[1]?h:p,["",0])[0],m={count:0,maxReached:!1};return new Promise((d,p)=>{a(e,n,m,async h=>{h.forEach(u),d({configFiles:i,fileTypes:o,fileCount:m.count,mostPopularFileType:f(o)})})})}var xi=Y(require("vscode")),e0=require("vscode");var tC={"ghcr.io/devcontainers/templates/anaconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/kubernetes-helm":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/alpine":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-outside-of-docker-compose":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/jekyll":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/docker-outside-of-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-in-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/go":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet-fsharp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/debian":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/rust-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/universal":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/conda","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/dotnet","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/git-lfs","ghcr.io/devcontainers/features/github-cli","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/hugo","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/kubectl-helm-minikube","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/oryx","ghcr.io/devcontainers/features/php","ghcr.io/devcontainers/features/python","ghcr.io/devcontainers/features/ruby","ghcr.io/devcontainers/features/sshd"],"ghcr.io/devcontainers/templates/python":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/markdown":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/rust":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/java-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/java":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/anaconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/php":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/powershell":["ghcr.io/devcontainers/features/common-utils"],"ghcr.io/devcontainers/templates/kubernetes-helm-minikube":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby-rails-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/cpp-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/cpp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-mssql":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/typescript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/ubuntu":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/php-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/go-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-mongo":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"]};async function W5(t,e,n,r,o){var u;let i=await qF(t,e,n);if(i.type==="cancelled")return;if(i.type==="failure"){let f=e0.l10n.t("OK");return await xi.window.showInformationMessage(xi.l10n.t("Something went wrong. Please pick a Dev Container configuration yourself."),{modal:!0,detail:i.message},f)===f||void 0}if(!i.template){let f=e0.l10n.t("OK");return await xi.window.showInformationMessage(xi.l10n.t("GitHub Copilot did not have enough contextual information. Please pick a Dev Container configuration yourself."),{modal:!0},f)===f||void 0}let s=i.template,a=await GF(t,{id:s,name:s},void 0),c=new Set(tC[s]||[]);a.features=((u=i.features)==null?void 0:u.filter(f=>!c.has(f)).map(f=>({id:f,copilotSuggested:!0,options:{}})))||[];let l=await ig(t,e,r,o,a);return l&&Jo(t.telemetry,"copilot",a,o),l}var j5="github.copilot.devcontainer.generateDevContainerConfig",B5=6e3;async function qF(t,e,n){var i,s;let r={index:{templates:((i=t.index)==null?void 0:i.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/templates").map(a=>a.templates).flat().filter(a=>!sg.includes(a.id)).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[],features:((s=t.index)==null?void 0:s.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/features").map(a=>a.features).flat().filter(a=>!a.deprecated).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[]},rootUri:xi.Uri.parse((await e.toCommonURI(n.rootFolderPath)).toString())},o=new xi.CancellationTokenSource;try{return await Promise.race([xi.commands.executeCommand(j5,r,o.token),Bt(B5).then(()=>(o.cancel(),{type:"failure",message:e0.l10n.t("Timeout after {0} seconds.",B5/1e3)}))])}catch(a){return{type:"failure",message:(a==null?void 0:a.message)||String(a)}}finally{o.dispose()}}async function V5(){return(await xi.commands.getCommands()).includes(j5)}var zF=nC.default.join(__dirname,"..",".."),Y5=Lt.env.appRoot,che=t=>Hf(t,Y5);async function cg(t,e){let{fileHost:n,output:r}=t;r.write("Entering createDevContainerConfig_v2");let o=await X5();if(o){let i=_e(o,n.platform),s=It(n.path,i),a=await SS(n,s);if(a){let l=st.l10n.t("Continue");if(await Lt.window.showInformationMessage(st.l10n.t("The workspace could fail to open in a container: {0}",a),{modal:!0},l)!==l)return!1}let c=await XF(t,s,void 0,void 0,e);if(c){let l=await n.toCommonURI(c);l&&Lt.window.showTextDocument(Lt.Uri.parse(l.toString()))}return!!c}return!1}async function ig(t,e,n,r,o,i=(s,a)=>a){return Lt.window.withProgress({location:Lt.ProgressLocation.Notification,title:st.l10n.t("Adding Dev Container Configuration Files..."),cancellable:!1},async()=>JF(t,e,n,r,o,i))}async function q5(t){let{output:e}=t,n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await _r(),o=process.cwd();return{cliHost:await Jr(void 0,void 0,o,che,n,zF,r,t.telemetry.product,e,void 0,void 0),dockerPath:"",dockerComposePath:"",extensionPath:zF,appRoot:Y5,output:e,package:await cr(zF)}}async function JF(t,e,n,r,o,i=(s,a)=>a){let{output:s}=t;s.write(`Preparing to apply Template '${o==null?void 0:o.id}'`);let a=nC.default.join(rC.tmpdir(),`tmp-output-dir-${Date.now()}`),c=nC.default.join(rC.tmpdir(),`tmp-dir-${Date.now()}`);t.quickPick.busy=!0,t.quickPick.enabled=!1;let l=await q5(t),u;try{u=await oi(l,["templates","apply","--workspace-folder",a,"--template-id",o.id,"--template-args",o.options?JSON.stringify(o.options):"{}","--features",o.features?JSON.stringify(o.features):"[]","--tmp-dir",c,"--log-level",no(Yy()),"--omit-paths",o.omitPaths?JSON.stringify(o.omitPaths):"[]"])}catch{let d=st.l10n.t("Show Log");await Lt.window.showErrorMessage(st.l10n.t("Application of the template failed."),{modal:!0},...t.showLogCommandId?[d]:[])===d&&Lt.commands.executeCommand(t.showLogCommandId);return}let f=st.l10n.t("Skip"),m;for(let d of u.files){s.write(`Copying file '${d}'`,1);let p=e.path.join(n,d);if(await e.isFile(p)){let v=r==="userData"?jy(e.platform,p,rC.homedir()):d,C=await Lt.window.showInformationMessage(st.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},f,st.l10n.t("Overwrite"));if(!C)return;if(C===f)continue}await e.mkdirp(e.path.dirname(p));let h=await at(nC.default.join(a,d)),g=i(d,h);await e.writeFile(p,g),!m&&Gv(e.path,d)&&(m=p)}return s.write("Cleaning up...",1),await il(a,{recursive:!0,force:!0}),await il(c,{recursive:!0,force:!0}),t.quickPick.busy=!1,t.quickPick.enabled=!0,m}async function XF(t,e,n,r,o){let{fileHost:i,telemetry:s}=t,a=await ZF(t,n,!1);if(r){Jo(await s,"existsMissingImageInfo");let d=_e(r,i.platform);if(!await Lt.window.showWarningMessage(st.l10n.t("Dev Container configuration '{0}' file is missing image information. You can add this manually or overwrite with a template.",i.path.relative(e.configFolderPath,d)),{modal:!0},st.l10n.t("Use Template"))){let h=await i.toCommonURI(d);h&&Lt.window.showTextDocument(Lt.Uri.parse(h.toString()));return}}let c,l,u="workspace";if(t.userDataFolderForConfigurations){c=await IF(i,e,t.userDataFolderForConfigurations);let d=c&&await jf(i,c),p={label:st.l10n.t("Add configuration to user data folder"),description:d?st.l10n.t("Configuration already exists"):void 0,detail:st.l10n.t("This avoids having outgoing changes in your workspace folder")},h=await jf(i,e.configFolderPath),g={label:st.l10n.t("Add configuration to workspace"),description:h?st.l10n.t("Configuration already exists"):void 0,detail:st.l10n.t("This allows you to share the configuration with others via source control")},v=await Co(a.quickPick,[g,p],st.l10n.t("Where would you like to create your container configuration?"));if(!v)return;v===p&&(l=c||QK(i,e,t.userDataFolderForConfigurations),u="userData")}else if(!r){let d=await n0(i,e);if(d){Jo(await s,"exists");let p=_e(d.uri,i.platform);if(!await Lt.window.showWarningMessage(st.l10n.t("Dev Container configuration '{0}' file already exists.",i.path.relative(e.configFolderPath,p)),{modal:!0},st.l10n.t("Continue"))){let g=await i.toCommonURI(p);g&&Lt.window.showTextDocument(Lt.Uri.parse(g.toString()));return}}}let f=l||e.configFolderPath,m;if((o==null?void 0:o.picker)==="copilot"){let d=await W5(a,i,e,f,u);d===!0&&(d=await ag(a,i,e,f,u,void 0)),m=d}else m=await ag(a,i,e,f,u,void 0);if(m&&l&&!c){let d=await e5(i,e,t.userDataFolderForConfigurations,l);m=i.path.resolve(d,i.path.relative(l,m))}return a.quickPick.hide(),m}async function ZF(t,e,n){let r=Lt.window.createQuickPick();r.ignoreFocusOut=!0,e&&(r.title=e);let o=await Qu(t.output);return{existingFilesLearnMoreLink:K5,predefinedDefinitionsLearnMoreLink:J5,...t,quickPick:r,replaceExistingConfig:!0,existingConfig:void 0,telemetry:await t.telemetry,index:o,skipOptions:n}}async function G5(t,e,n,r,o,i,s){if(!t.index)return;let c=await t0(t,e,n,i);if(!c)return;if(c==="back")return s?s():void 0;let l=await ig(t,e,r,o,c);return l&&Jo(t.telemetry,"definition",c,o),l}var sg=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile"];async function t0(t,e,n,r){let{index:o}=t,i=((o==null?void 0:o.collections.map(l=>l.templates).flat())||[]).filter(l=>!sg.includes(l.id));if(!(i!=null&&i.length))return;let s=()=>t0(t,e,n,r),a=await lhe(t,e,n,i);if(!(a!=null&&a.length))return KF(t,[],i,r,s);let c=[{label:st.l10n.t("Show All Templates..."),detail:st.l10n.t("Show all available predefined container templates."),alwaysShow:!0,type:"showAll"}];return KF(t,c,a,r,s)}async function lhe(t,e,n,r){r=r.filter(a=>a.owner==="devcontainers");let o=t.stats||e&&n&&(t.stats=await H5(e,n));if(!(o!=null&&o.mostPopularFileType.length))return;let i=M5(o,r);return r.filter(a=>(i.get(a)||0)>0).sort(uhe.bind(null,i))}function uhe(t,e,n){let r=t.get(n)||0,o=t.get(e)||0;return r-o}async function KF(t,e,n,r,o){let{index:i,predefinedDefinitionsLearnMoreLink:s,telemetry:a}=t,c={iconPath:new Lt.ThemeIcon("info"),tooltip:st.l10n.t("Open Documentation")},l=t.quickPick.onDidTriggerItemButton(p=>{let h=p.item.template.documentationURL;Lt.env.openExternal(Lt.Uri.parse(h))}),u=(async()=>{let p=await r,h=n;p!=null&&p.template&&n.indexOf(p.template)===-1&&(h=[p.template,...n]);let g=st.l10n.t("Suggested by GitHub Copilot"),v=h.map(w=>{let y;if(w.owner){let I=(w==null?void 0:w.owner)==="devcontainers"?"$(verified)":"";y=`${((w==null?void 0:w.owner)==="microsoft"&&w.id.includes("microsoft/vscode-dev-containers")?st.l10n.t("community"):w==null?void 0:w.owner)||st.l10n.t("Unknown Publisher")} ${I}`}let S=w===(p==null?void 0:p.template);return{label:S?`$(sparkle) ${w.name}`:w.name,picked:n.indexOf(w)!==-1,detail:w==null?void 0:w.description,description:S?y?`${y} ${g}`:g:y,buttons:[c],template:w}}).sort((w,y)=>w===y?0:w.template===(p==null?void 0:p.template)?-1:y.template===(p==null?void 0:p.template)?1:w.label.localeCompare(y.label));return[...e,...s?[eO]:[],...v]})(),f=p=>{let h=p.trim();if(/^\S+(\/\S+){2,}$/.test(h))return{label:st.l10n.t("Use '{0}' as template...",h),detail:st.l10n.t("Apply this custom template instead of one of the listed templates."),templateId:h}},m=st.l10n.t("Select a container configuration template or enter a custom template id"),d=await Co(t.quickPick,u,m,void 0,void 0,void 0,f);if(l.dispose(),!d){Jo(a,"canceled");return}if(d.type==="help"){Jo(a,"help"),Lt.env.openExternal(s);return}if(d.type==="showAll"){let p=((i==null?void 0:i.collections.map(h=>h.templates).flat())||[]).filter(h=>!sg.includes(h.id));return KF(t,[],p,r,o)}if(d.template)return hm(t,d.template,r.then(p=>{var v,C;if(!p)return;let h=((i==null?void 0:i.collections.map(w=>w.features).flat())||[]).filter(w=>!w.deprecated),g=new Set([...p.features,...p.template&&((v=tC[p.template.id])==null?void 0:v.map(w=>h.find(y=>y.id===w)).filter(w=>!!w))||[]]);return(((C=tC[d.template.id])==null?void 0:C.map(w=>h.find(y=>y.id===w)).filter(w=>!!w))||[]).forEach(w=>g.delete(w)),{template:p.template,features:Array.from(g)}}),o);if(d.templateId)return hm(t,{id:d.templateId,name:d.templateId},r,o)}async function GF(t,e,n){if(!e.version){let r=await fhe(t,e.id);r&&(e={...r,id:e.id})}return{id:e.id,options:{},features:[],omitPaths:[],metadata:{template:e,features:[],copilotSuggestion:n}}}async function fhe(t,e){let{output:n}=t;n.write(`Attempting metadata fetch for Template '${e}' from remote manifest`,3);let r=await q5(t);try{return await oi(r,["templates","metadata",e,"--log-level",no(Yy())])}catch{n.write(`Metadata for '${e}' not cached on manifest. Some features will be unavailable.`,1),n.write(`Ask the Template owner to republish '${e}' to populate the data`,1);return}}async function hm(t,e,n,r){let o=await GF(t,e,await n),i={...o.metadata.template};if(t.skipOptions)return o;if(!i.options){let u=await QF(t,o,[],n,r);return u?u==="back"?r():u:void 0}let s=i.options,a=[],c=[];for(let u in s){let f=s[u];f.name=u,f.type==="boolean"?a.push(f):f.type==="string"&&c.push(f)}let l=await mhe(t,c,o,async()=>"back",(u,f)=>z5(t,a,i.name,u,n,f));if(l==="back")return r();if(l)return l}async function dhe(t,e,n,r){var o;if((o=e.optionalPaths)!=null&&o.length){let i=e.optionalPaths.map(l=>({label:l,picked:!1})),s=st.l10n.t("Optional Files/Directories"),a=st.l10n.t("Include the following optional files/directories"),c=await Co(t.quickPick,i,a,s,!0,!0);if(c==="back")return r();c&&(n.omitPaths=i.filter(l=>!c.includes(l)).map(l=>l.label))}return n}async function mhe(t,e,n,r,o){let i=e.map(s=>{let a=[];s.proposals&&s.proposals.length>0?a=s.proposals:s.enum&&s.enum.length>0?a=s.enum:s.default&&(a=[s.default]);let c=s.default,l=a.map(f=>({label:f,description:f===c?st.l10n.t("(default)"):void 0,value:f})),u=l.findIndex(f=>f.value===c);return u!==-1&&l.unshift(...l.splice(u,1)),{placeholder:s.description||s.name,name:s.name,default:s.default,enum:"enum"in s,items:l}});return async function s(a,c,l){if(!a.length)return o(c,l);let u=a[0],f=u.enum?void 0:p=>{if(!(!p||u.items.some(h=>h.value===p)))return{label:st.l10n.t("Use: {0}",p),value:p,description:st.l10n.t("(custom)")}},m=await Co(t.quickPick,u.items,u.placeholder,void 0,void 0,!0,f);if(!m)return;if(m==="back")return l();let d={...c.options};return d[u.name]=m.value,c.options={...d},s(a.slice(1),c,()=>s(a,c,l))}(i,n,r)}async function z5(t,e,n,r,o,i){let s=r,a=e.map(u=>{let f=u.default==="true";return{label:u.description||u.name,picked:f,name:u.name,default:f}}),c=a.length?await Co(t.quickPick,a,st.l10n.t("Select the options for the '{0}' dev container",n),void 0,!0,!0):[];if(!c)return r;if(c==="back")return i();for(let u of a){let f=c.indexOf(u)!==-1,m={...r.options};m[u.name]=f.toString(),r.options={...m}}let l=await QF(t,r,[],o,()=>e.length>0?z5(t,e,n,s,o,i):i());if(l)return l==="back"?i():l}async function QF(t,e,n,r,o){let{quickPick:i,telemetry:s,output:a,index:c,askForTrust:l}=t,u=c==null?void 0:c.collections.reduce((h,g)=>h.concat(g.features),[]).filter(h=>!h.deprecated);if(!(u!=null&&u.length))return e;let m=await og({quickPick:i,askForTrust:l,telemetry:s,output:a},u,n,[],r,!0,!0);if(!m)return;if(m==="back")return o();let d=[],p=[];for(let h in m)if(m[h]){let g=u.find(v=>v.id===h);if(g){p.push(g);let v=g.majorVersion||"latest",C={id:`${h}:${v}`,options:m[h]};d.push(C)}}return e.features=d,e.metadata.features=p,await dhe(t,e.metadata.template,e,()=>QF(t,e,p,r,o))}function Q5(t){return{provideCompletionItems(e,n,r){let o=JO(e.getText(),e.offsetAt(n)),i=e.getWordRangeAtPosition(n)||new fe.Range(n,n);if(o.path[0]==="extensions"||o.path[0]==="vscode"&&o.path[1]==="extensions"){let s=$e(e.getText());return s.configFilePath=e.uri,phe(s,i)}if(o.path[0]==="features"){let s=$e(e.getText());s.configFilePath=e.uri;try{return hhe(t,s,o,i)}catch(a){console.error(a)}}return[]}}}function phe(t,e){var r,o;let n=((t==null?void 0:t.extensions)||[]).concat(((o=(r=t==null?void 0:t.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||[]);if(Array.isArray(n)){let i=fe.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||n.indexOf(s.id)>-1));if(i.length)return i.map(s=>{let a=new fe.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=fe.CompletionItemKind.Value,a.insertText=c,a.range=e,a.filterText=c,a})}}async function hhe(t,e,n,r){var i;let o=e&&e.features||{};if(typeof o=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e={...e,configFilePath:e.configFilePath.with({scheme:Ke.scheme,authority:""})};let c=fe.env.remoteName&&fe.env.remoteName!=="test"?"linux":process.platform,l=((i=(fe.workspace.workspaceFolders||[])[0])==null?void 0:i.uri)||Ce.file(process.cwd());t={...t,fileHost:await La(c,l)}}let s=await Qu(t.output),a=(s==null?void 0:s.collections.map(c=>c.features).flat().filter(c=>!c.deprecated))||[];if(n.path.length===2)if(n.isAtPropertyKey){let c=a.filter(l=>!(l.id in o));if(c.length)return c.map(l=>{let u=new fe.CompletionItem(l.id),f=`"${l.id}": `;return u.kind=fe.CompletionItemKind.Property,u.insertText=f,u.range=r,u.filterText=f,u})}else{let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=F5(l),f=u&&(l.options||{})[u]||{type:"boolean",description:zt.l10n.t("Set to true to install.")},m=(f.type==="string"?("enum"in f&&f.enum||"proposals"in f&&f.proposals||[""]).map(d=>`"${d}"`):["true","false"]).map(d=>({label:d,text:d}));return m.push({label:"{}",text:new fe.SnippetString(`{
	$1
}$0`)}),m.map(({label:d,text:p},h)=>{let g=new fe.CompletionItem(d);return g.kind=fe.CompletionItemKind.Value,g.insertText=p,g.range=r,g.sortText=`${h}_${d}`,g})}}else if(n.path.length===3){let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=l.options||{};if(n.isAtPropertyKey)return Object.keys(u).filter(f=>!(f in(o[c]||{}))).map(f=>{let m=new fe.CompletionItem(f),d=`"${f}": `;return m.kind=fe.CompletionItemKind.Property,m.insertText=d,m.range=r,m.filterText=d,m.detail=u[f].description,m});{let f=n.path[2],m=u[f];if(m)return(m.type==="string"?("enum"in m&&m.enum||"proposals"in m&&m.proposals||[""]).map(p=>`"${p}"`):["true","false"]).map((p,h)=>{let g=new fe.CompletionItem(p),v=p;return g.kind=fe.CompletionItemKind.Value,g.insertText=v,g.range=r,g.filterText=v,g.sortText=`${h}_${p}`,g})}}}}}async function e8(t){let e=await nO(t);if((e==null?void 0:e.scheme)===Ke.scheme){let n=_e(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(n)}e&&await fe.window.showTextDocument(fe.Uri.parse(e.toString()))}async function nO(t){let e=await t.findDevContainerFiles();if(!e.length){let r=zt.l10n.t("Add Files...");await fe.window.showInformationMessage(zt.l10n.t("No container configuration file found."),{modal:!0},r)===r&&await cg(t)&&(e=await t.findDevContainerFiles())}let n=await Yu(e);return n!=="cancelled"?n:void 0}async function t8(t,e){var r,o,i,s,a,c,l;let n=await nO(t);if(n){let u=ur(t.fileHost);n.scheme==="file"&&!await Cr(n.fsPath)?await Mi(ms,n,[],fc):(n.scheme==="file"||n.scheme==="vscode-remote")&&(u=new Wy);let f=await u.readDocument(n);if(f){let m=!/\.?devcontainer\.json/.test(lg.default.posix.basename(n.path)),d=$e(f),p=!m&&(((o=(r=d.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||!d.extensions),h=(p?(s=(i=d.customizations)==null?void 0:i.vscode)==null?void 0:s.extensions:d.extensions)||[],g=t.openConfigurationCommandId?`[${zt.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:zt.l10n.t("Dev Container configuration");if((d.extensions||[]).concat(((c=(a=d.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(e)===-1){h.push(e);let v,C=Vy(f);p?(l=d.customizations)!=null&&l.vscode?v=bn(f,["customizations","vscode","extensions"],h,{formattingOptions:C}):d.customizations?v=bn(f,["customizations","vscode"],{extensions:h},{formattingOptions:C}):v=bn(f,["customizations"],{vscode:{extensions:h}},{formattingOptions:C}):v=bn(f,["extensions"],h,{formattingOptions:C}),await u.applyEdits(n,v,f),await fe.window.showInformationMessage(zt.l10n.t("Extension has been added to the {0}.",g))}else await fe.window.showInformationMessage(zt.l10n.t("Extension is already included in the {0}.",g))}}}async function n8(t,e){let n=await fe.commands.executeCommand("remote.tunnel.label",e);if(n===void 0)return;let r=n.label,o=n.port,i=await nO(t);if(i){let s=ur(t.fileHost);i.scheme==="file"&&!await Cr(i.fsPath)?await Mi(ms,i,[],fc):(i.scheme==="file"||i.scheme==="vscode-remote")&&(s=new Wy);let a=await s.readDocument(i);if(a){let l=$e(a).portsAttributes??{},u=l[`${o}`]??{},f=t.openConfigurationCommandId?`[${zt.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:zt.l10n.t("Dev Container configuration");if(l&&u&&u.label===r)await fe.window.showInformationMessage(zt.l10n.t("Port attributes are already included in the {0}.",f));else{u.label=r,l[`${o}`]=u;let m=Vy(a),d=bn(a,["portsAttributes"],l,{formattingOptions:m});await s.applyEdits(i,d,a),await fe.window.showInformationMessage(zt.l10n.t("Port attributes have been added to the {0}.",f))}}}}function r8(t,e){let n=fe.languages.createDiagnosticCollection("devcontainer"),r=fe.window.activeTextEditor;r&&tO(r.document,n,e.output),t.subscriptions.push(fe.workspace.onDidChangeTextDocument(async o=>{tO(o.document,n,e.output)})),t.subscriptions.push(fe.workspace.onDidOpenTextDocument(async o=>{tO(o,n,e.output)})),t.subscriptions.push(fe.workspace.onDidCreateFiles(async o=>{await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(lg.default.posix.basename(i.path))).map(i=>fe.workspace.openTextDocument(i)))})),t.subscriptions.push(fe.workspace.onDidDeleteFiles(o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.toString())&&n.delete(s)}))})),t.subscriptions.push(fe.workspace.onDidRenameFiles(async o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.oldUri.toString())&&n.delete(s)})),await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(lg.default.posix.basename(i.newUri.path))).map(i=>fe.workspace.openTextDocument(i.newUri)))})),(async()=>{let o=await Na().catch(i=>[]);await Promise.all(o.map(i=>fe.workspace.openTextDocument(i)))})().catch(o=>{e.output.write(`Error opening dev container configurations: ${(o==null?void 0:o.stack)||(o==null?void 0:o.message)||String(o)}`)}),t.subscriptions.push(n)}function o8(t,e,n){let r=async(s,a,c)=>{let l=lg.default.basename(s.uri.fsPath);if(/\.?devcontainer\.json/.test(l)){let u=of(s.getText());if(!u)return;if((PC(u)||{}).features){let m=s.getText(s.getWordRangeAtPosition(a,/"[^"]*"/)).replace(/"/g,""),d=vhe(m,e.output,await n());if(d)return{contents:[d],range:s.getWordRangeAtPosition(a,/"[^"]*"/)}}}},o=fe.languages.registerHoverProvider({pattern:"**/devcontainer.json"},{provideHover:r}),i=fe.languages.registerHoverProvider({pattern:"**/.devcontainer.json"},{provideHover:r});return t.subscriptions.push(o),t.subscriptions.push(i),[o,i]}function tO(t,e,n){let r=lg.default.basename(t.uri.fsPath);if(/\.?devcontainer\.json/.test(r)){let o=of(t.getText());if(!o)return;let i=[...whe(t,o,n),...yhe(o,t)];e.set(t.uri,i)}}function ghe(t,e){let n=new RegExp("^[a-zA-Z0-9_-]*$");if(!t)return{type:void 0,tooltip:zt.l10n.t("Empty feature id")};let r={};if(!t.includes("/")&&!t.includes("\\")&&n.test(t)){let s=["fish","homebrew"].indexOf(t)>-1;return{...r,type:"local-cache",isLegacy:!0,tooltip:s?zt.l10n.t("Legacy feature not supported. Please check https://containers.dev/features for replacements."):void 0,code:s?{target:fe.Uri.parse("https://containers.dev/features"),value:"legacy-feature"}:void 0,level:fe.DiagnosticSeverity.Error}}if(t.startsWith("http://"))return{...r,type:void 0,tooltip:zt.l10n.t("Direct tarball references must be served over HTTPS."),level:fe.DiagnosticSeverity.Error};if(t.startsWith("https://"))try{return fe.Uri.parse(t,!0).scheme==="https"?{...r,type:"direct-tarball",level:void 0}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Failed to parse scheme of URI")}}catch{return{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Invalid URI")}}if(t.startsWith("/"))return{...r,type:void 0,tooltip:zt.l10n.t("Absolute file paths are not allowed.  Local file path must be indicated relative to the devcontainer.json."),level:fe.DiagnosticSeverity.Error};if(t.startsWith("./")||t.startsWith("../"))return{...r,type:"file-path"};if(t.split("/").length===3&&t.length>=5&&!t.includes("."))return new RegExp("^[a-zA-Z0-9_/@-]*$").test(t)?{...r,type:"github-repo",isLegacy:!0,level:fe.DiagnosticSeverity.Warning}:{...r,type:void 0,tooltip:zt.l10n.t("GitHub release feature id contains invalid characters"),level:fe.DiagnosticSeverity.Error};let i=t.split("/");return t.includes(".")&&i.length>1&&i[1].length>=1?new RegExp("^[a-zA-Z0-9_/:.-]*$").test(t)?i[1]==="devcontainers-contrib"?{...r,type:"oci",level:fe.DiagnosticSeverity.Warning,tooltip:zt.l10n.t("Replace the reference to the discontinued `devcontainers-contrib` with `devcontainers-extra`")}:{...r,type:"oci"}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("OCI Feature id contains invalid characters")}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Failed to parse feature identifier.")}}function vhe(t,e,n){var i;if(!n){e.write("No index found.",5);return}let o=(n==null?void 0:n.collections.map(s=>s.features).flat()).find(s=>t===s.id||t.startsWith(`${s.id}:`));if(o){let s=`${o.name}
`,a=o.description?`
${o.description}
`:"",c=o.documentationURL?`
${o.documentationURL}
`:"",l="";if(o.majorVersion){let u=t.split(":");if(u.length===2){let f=u[1];if(f&&f!=="latest")try{let m=(i=Z5.parse(f,{loose:!0}))==null?void 0:i.major,d=Number.parseInt(o.majorVersion),p=`
${zt.l10n.t("New major version '{0}' published.",d)}
`;if(m&&m<d)l=p;else{let h=Number.parseInt(f);h!==void 0&&h<d&&(l=p)}}catch{}}}return new fe.MarkdownString(`${s}${a}${c}${l}`)}}function whe(t,e,n){var i;let r=rs(e,["features"]),o=[];for(let s of(r==null?void 0:r.children)||[])if(s.type==="property"){let a=(i=s.children)==null?void 0:i[0].value,c=ghe(a,n);if(c.hint){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.hint,fe.DiagnosticSeverity.Hint);o.push(f)}if(c.level!==void 0&&c.tooltip){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.tooltip,c.level);f.code=c.code||{target:fe.Uri.parse("https://containers.dev/implementors/features/#referencing-a-feature"),value:"referencing-a-feature"},o.push(f)}}return o}function yhe(t,e){return["extensions","settings","devPort"].filter(n=>rs(t,[n])&&rs(t,["vscode",n])).map(n=>{var s,a;let r=(((a=(s=rs(t,[n]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],o=e.positionAt(r.offset),i=e.positionAt(r.offset+r.length);return new fe.Diagnostic(new fe.Range(o,i),zt.l10n.t('Legacy "{0}" property when "{0}" property under "vscode" is also present.',n),fe.DiagnosticSeverity.Warning)})}var ug=Y(require("vscode")),rO=require("vscode");async function i8(t,e){let n=await Che(t);if(!n)return t.output.write("Failed to find configuration.  Cannot configure container features.",5),!1;let r=await Ehe(t,n,(e==null?void 0:e.preInstalledInBaseImageFeatureIds)||[]);if(!r)return!1;let o=await t.fileHost.toCommonURI(r);return o&&ug.window.showTextDocument(ug.Uri.parse(o.toString())),!!o}async function Che(t){let e=await t.findDevContainerFiles();if(e.length){let n=await Yu(e);if(!n||n==="cancelled")return;let r=n.scheme==="file"?La(process.platform,Vf(n)):t.fileHost,o=r.path.dirname(_e(n,r.platform)),i=r.path.basename(o)===".devcontainer"?r.path.dirname(o):o,s=It(r.path,i),a=await n0(r,s,n);if(a)return{fileHost:r,workspace:s,config:a}}else{let n=rO.l10n.t("Add Files...");await ug.window.showInformationMessage(rO.l10n.t("No container configuration file found."),{modal:!0},n)===n&&await cg(t)}}async function Ehe(t,e,n){var d;let{fileHost:r,workspace:o,config:i}=e,s=ug.window.createQuickPick();s.ignoreFocusOut=!0;let a={workspace:o,quickPick:s,telemetry:await t.telemetry,output:t.output},l=(await Qu(t.output)).collections.reduce((p,h)=>p.concat(h.features),[]).filter(p=>!p.deprecated),u=l.filter(p=>n.includes(p.id)),f=[];if(i.object.features&&Object.entries(i.object.features).length>0){let p=Object.keys(i.object.features);f=l.filter(h=>p.some(g=>g.split(":")[0]===h.id))}let m=await og(a,l,f,u,Promise.resolve(void 0),!0,!1);if(m)try{let p=i.text,h=i.text,g=Vy(i.text);for(let v of l){let C=[],w=v.majorVersion?`${v.id}:${v.majorVersion}`:v.id,y=["features",w];if(!m[v.id]&&((d=i.object.features)!=null&&d[w]))C=C.concat(bn(h,y,void 0,{formattingOptions:g}));else if(m[v.id]){let I=m[v.id];C=C.concat(bn(h,y,I,{formattingOptions:g}))}C.length&&(h=Do(h,C))}return p!==h&&await ur(r,r).applyEdits(i.uri,[{content:h,offset:0,length:i.text.length}],i.text),s.dispose(),_e(i.uri,r.platform)}catch(p){t.output.write(`Error in selecting dev container features: ${p}`,5),console.log("Error in selecting dev container features: ",p),s.dispose();return}}var bt=Y(require("vscode")),a8=Y(require("crypto")),r0=Y(require("path")),gm=require("vscode");var s8={features:{}};function c8(t,e){let n=new Set,r=Promise.resolve(s8),o,a=e.codespaces?"codespaces.editDevContainerJSON":"remote-containers.editDevContainerJSON";t.subscriptions.push(bt.commands.registerCommand(a,async u=>u()),bt.languages.registerCodeLensProvider([{pattern:"**/devcontainer.json"},{pattern:"**/.devcontainer.json"}],{async provideCodeLenses(u,f){var p;let m=Object.keys(((p=$e(u.getText()))==null?void 0:p.features)||{}).sort();m.some(h=>!n.has(h))&&(n=new Set(m),r=c(u,m));let d=await r;if(!f.isCancellationRequested)return l(u,d)}}));async function c(u,f){o||(o=await _he(t,e));let m=u.uri;if(m.scheme!=="file"){let d=o.path.join(await o.tmpdir(),`dev-container-tmp-${a8.randomUUID()}`);await o.mkdirp(d);let p=o.path.join(d,".devcontainer.json");await o.writeFile(p,Buffer.from(JSON.stringify({features:f.reduce((v,C)=>(v[C]={},v),{})})));let h=r0.posix.basename(m.path)===".devcontainer.json",g=m.with({path:r0.posix.join(r0.posix.dirname(m.path),h?".devcontainer-lock.json":"devcontainer-lock.json")});try{let v=await bt.workspace.fs.readFile(g),C=o.path.join(d,".devcontainer-lock.json");await o.writeFile(C,Buffer.from(v))}catch(v){if((v==null?void 0:v.code)!=="FileNotFound")throw v}m=bt.Uri.file(p)}try{return Dhe(t,o,o.cwd,m,e.output)}catch(d){return e.output.write(`Error fetching version info: ${(d==null?void 0:d.message)||d}`),s8}}function l(u,f){let m=of(u.getText());if(!m)return;let d=rs(m,["features"]);if(!(d!=null&&d.children)||d.type!=="object")return;let p=[];for(let h of d.children)if(h.type==="property"&&h.children){let S=function(x,A){return async()=>{let F=g.value.substring(0,C.length)+x;n.add(F),A&&!f.features[F]&&(f.features[F]=A);let k=bt.window.activeTextEditor;await(k==null?void 0:k.edit(E=>{E.replace(new bt.Range(k.document.positionAt(w),k.document.positionAt(w+y)),x)}))}},I=function(){return async()=>{let x={title:gm.l10n.t("Remove")};if(await bt.window.showInformationMessage(gm.l10n.t("The feature was not found either because it is no longer available or because of insufficient permissions to access it."),{modal:!0,detail:gm.l10n.t("If this is permanent you may want to remove it from your configuration.")},x)!==x)return;let F=bt.window.activeTextEditor;await(F==null?void 0:F.edit(k=>{let E=h.parent,_=E.children,T=_.indexOf(h),D=_[T+1];if(D)k.delete(new bt.Range(F.document.positionAt(h.offset),F.document.positionAt(D.offset)));else{let b=_[T-1];b?k.delete(new bt.Range(F.document.positionAt(b.offset+b.length),F.document.positionAt(h.offset+h.length))):k.delete(new bt.Range(F.document.positionAt(E.offset+1),F.document.positionAt(h.offset+h.length)))}}))}},g=h.children[0],v=f.features[g.value],C=xhe(g.value),w=g.offset+1+C.length,y=g.length-2-C.length;if(v!=null&&v.wanted&&v.current!==v.wanted){let x=new bt.CodeLens(new bt.Range(u.positionAt(g.offset),u.positionAt(g.offset+g.length)),{title:gm.l10n.t("Update to {0}",v.wanted),command:a,arguments:[S(`:${v.wanted}`,{current:v.wanted,wanted:v.wanted,latest:v.latest})]});p.push(x)}if(v!=null&&v.latest&&v.current!==v.latest){let x=new bt.CodeLens(new bt.Range(u.positionAt(g.offset),u.positionAt(g.offset+g.length)),{title:gm.l10n.t("Update to latest {0}",v.latest),command:a,arguments:[S(`:${v.latest}`)]});p.push(x)}if(v&&!v.latest){let x=new bt.CodeLens(new bt.Range(u.positionAt(g.offset),u.positionAt(g.offset+g.length)),{title:gm.l10n.t("Not found..."),command:a,arguments:[I()]});p.push(x)}}return p}}var She=/[:@][^/]*$/;function xhe(t){let e=She.exec(t);return e?t.substring(0,e.index):t}async function _he(t,e){let n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await _r(),o=process.cwd();return Jr(void 0,void 0,o,s=>Hf(s,bt.env.appRoot),n,t.extensionPath,r,(await e.telemetry).product,e.output,void 0,void 0)}async function Dhe(t,e,n,r,o){let i={cliHost:e,dockerPath:"",dockerComposePath:"",extensionPath:t.extensionPath,appRoot:bt.env.appRoot,output:o,package:await cr(t.extensionPath)};return await oi(i,["outdated","--workspace-folder",n,...r?["--config",_e(r,e.platform)]:[],"--output-format","json","--log-level",no(Yy()),"--log-format","json",...o.dimensions?["--terminal-columns",String(o.dimensions.columns),"--terminal-rows",String(o.dimensions.rows)]:[]])}var K5=gn.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),J5=gn.Uri.parse("https://aka.ms/vscode-dev-containers");function u8(t,e){let{output:n}=e;n.write("Internal initialization of dev container support package...");let r,o=()=>r||(r=Qu(e.output));return{async openConfiguration(){return e8(e)},async createConfiguration(i){return cg(e,i)},async addExtensionToConfiguration(i){return t8(e,i)},async addPortLabelToConfiguration(i){return n8(e,i)},async configureContainerFeatures(i){return i8(e,i)},createCompletionItemProvider(){return Q5(e)},startCodeLensProvider(){c8(t,e)},startHoverProvider(){o8(t,e,o)},startDiagnosticsCollection(){r8(t,e)}}}async function X5(){let t=gn.workspace.workspaceFile,e=gn.workspace.workspaceFolders,n;if(t){if(t.scheme==="untitled"){await $I();return}n=t}else if(e&&e.length)if(e.length>1){let r=await gn.window.showWorkspaceFolderPick({placeHolder:Kt.l10n.t("Select a folder to create a container configuration for")});r&&(n=r.uri)}else n=e[0].uri;return n}function Co(t,e,n,r,o,i,s){if(t.value="",t.title=r||t.title||Kt.l10n.t("Add Dev Container Configuration Files"),t.placeholder=n,t.canSelectMany=!!o,Array.isArray(e))if(t.items=e,o)t.selectedItems=e.filter(m=>m.picked);else{let m=e.find(d=>d.picked);m&&(t.activeItems=[m])}t.buttons=i?Array.isArray(i)?i:[gn.QuickInputButtons.Back]:[];let a=[],c=t.items,l=c.filter(m=>m.isAlreadyInstalledViaBaseImage===!0),u={kind:gn.QuickPickItemKind.Separator,label:Kt.l10n.t("pre-installed features")};l.length&&(t.items=t.items.slice(0,c.length-l.length).concat(u).concat(t.items.slice(c.length-l.length)));let f=new Promise((m,d)=>{if(Array.isArray(e)||(t.busy=!0,e.then(p=>{if(t.busy=!1,t.items=p,o)t.selectedItems=p.filter(h=>h.picked);else{let h=p.find(g=>g.picked);h&&(t.activeItems=[h])}},p=>{t.busy=!1,d(p)})),a.push(t.onDidAccept(()=>{let p=o?t.selectedItems.slice():t.selectedItems[0];m(Array.isArray(i)?{pick:p,button:"ok"}:p),a.forEach(h=>h.dispose())})),a.push(t.onDidChangeSelection(p=>{if(!o)return;let h=l.filter(g=>!t.selectedItems.includes(g));h.length&&(t.selectedItems=t.selectedItems.concat(h))})),t.buttons.length&&a.push(t.onDidTriggerButton(p=>{let h=o?t.selectedItems.slice():t.activeItems[0];m(i===!0?"back":{pick:h,button:p}),a.forEach(g=>g.dispose())})),a.push(t.onDidHide(()=>{a.forEach(p=>p.dispose()),t.dispose(),m(void 0)})),s){let p;a.push(t.onDidChangeValue(h=>{let g=s(h);if(g||p){let v=t.items.filter(C=>C!==p);g&&v.push(g),p=g,t.items=v}}))}});return t.show(),f}var eO={label:Kt.l10n.t("Learn More"),description:Kt.l10n.t("Documentation on predefined container templates"),alwaysShow:!0,type:"help"};async function o0(t,e,n,r){return XF(t,e,n,r)}async function ag(t,e,n,r,o,i){var F;let{telemetry:s,existingFilesLearnMoreLink:a,index:c}=t,u=(o!=="userData"&&await((F=t.findDevContainerFiles)==null?void 0:F.call(t,"userData"))||[]).reduce((k,E)=>k&&k.uri.path.length<E.uri.path.length?k:E,void 0),f=(u==null?void 0:u.uri.scheme)==="file"?[{iconPath:new gn.ThemeIcon("go-to-file"),tooltip:Kt.l10n.t("Open File")}]:[],m=u?{label:Kt.l10n.t("Copy existing configuration to workspace"),detail:Kt.l10n.t("Copy the configuration from your user data folder to the workspace folder"),type:"userDataConfig",buttons:f}:void 0,d=c==null?void 0:c.collections.find(k=>k.sourceInformation.ociReference==="ghcr.io/devcontainers/templates"),p=d==null?void 0:d.templates.find(k=>k.id==="ghcr.io/devcontainers/templates/docker-existing-docker-compose"),h=d==null?void 0:d.templates.find(k=>k.id==="ghcr.io/devcontainers/templates/docker-existing-dockerfile"),g=await e.readDir(n.rootFolderPath),v=p?g.filter(k=>/(docker.*)?compose.*\.ya?ml$/i.test(k)).map(k=>e.path.join(n.rootFolderPath,k)):[],C=h?g.filter(k=>/dockerfile/i.test(k)).map(k=>e.path.join(n.rootFolderPath,k)):[],w=C.map(k=>{let E=e.path.basename(k);return{label:Kt.l10n.t("From '{0}'",E),description:l8(e,k),dockerfile:E,dockerfilePath:k,detail:Kt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerfile"}}),y=v.map(k=>{let E=e.path.basename(k);return{label:Kt.l10n.t("From '{0}'",E),description:l8(e,k),dockerComposeFile:E,dockerComposePath:k,detail:Kt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerComposeFile"}}),S=m||C.length>0||v.length>0,I={label:Kt.l10n.t("From a predefined container configuration template..."),detail:Kt.l10n.t("Use a base configuration from the container template registry"),alwaysShow:!0,type:"predefined"},x=t.quickPick.onDidTriggerItemButton(async()=>{await gn.commands.executeCommand("vscode.open",u.uri),t.quickPick.hide()}),A=S?await Co(t.quickPick,[I,...m?[m]:[],...w,...y,...a?[eO]:[]],Kt.l10n.t("How would you like to create your container configuration?")):I;if(x.dispose(),!A){Jo(s,"canceled");return}if(A.type==="help"){Jo(s,"help"),gn.env.openExternal(a);return}if(A.type==="userDataConfig")return Ihe(e,n,u);if(i||(i=e&&n&&await V5()?qF(t,e,n).then(k=>{if(k.type!=="success")return;let E=((c==null?void 0:c.collections.map(T=>T.templates).flat())||[]).filter(T=>!sg.includes(T.id)),_=((c==null?void 0:c.collections.map(T=>T.features).flat())||[]).filter(T=>!T.deprecated);return{template:E.find(T=>T.id===k.template),features:(k.features||[]).map(T=>_.find(D=>D.id===T)).filter(T=>!!T)}}):Promise.resolve(void 0)),A.type==="predefined")return G5(t,e,n,r,o,i,()=>ag(t,e,n,r,o,i));if(A.type==="dockerComposeFile")return bhe(t,e,r,o,A.dockerComposePath,p,i,()=>ag(t,e,n,r,o,i));if(A.type==="dockerfile")return Phe(t,e,r,o,A.dockerfilePath,h,i,()=>ag(t,e,n,r,o,i))}function l8(t,e){let n=gn.workspace.workspaceFolders||[];if(n.length<2)return;let r=n.find(o=>t.platform==="win32"?e.toLowerCase().startsWith(o.uri.fsPath.toLowerCase()):e.startsWith(o.uri.fsPath));return r&&r.name}async function Ihe(t,e,n){let r=Kt.l10n.t("Skip"),o=n.fileHost,i=_e(n.uri,o.platform),s;if(o.path.basename(i)===".devcontainer.json")s=o.path.dirname(i);else for(let d=i;o.path.basename(d);d=o.path.dirname(d))if(o.path.basename(d)===".devcontainer"){s=o.path.dirname(d);break}if(!s)throw new Error(`Unexpected user config path: ${i}`);let a=o.readDirWithTypes||o.readDir,c=await a(s);for(;c.length;){let d=c.shift();if(d===HI)continue;let p=typeof d=="string"?d:d[0],h=o.path.join(s,p);if(typeof d=="string"?await o.isFile(h):(d[1]&1)!==0){let v=o.path.sep===t.path.sep?p:p.replaceAll(o.path.sep,t.path.sep),C=t.path.join(e.configFolderPath,v);if(await t.isFile(C)){let y=await gn.window.showInformationMessage(Kt.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},r,Kt.l10n.t("Overwrite"));if(!y)return;if(y===r)continue}await t.mkdirp(t.path.dirname(C));let w=await o.readFile(h);await t.writeFile(C,w)}else(typeof d=="string"?await o.isFolder(h):(d[1]&2)!==0)&&c.push(...(await a(h)).map(C=>typeof C=="string"?o.path.join(p,C):[o.path.join(p,C[0]),C[1]]))}let l=Kt.l10n.t("Delete");await gn.window.showInformationMessage(Kt.l10n.t("Delete the configuration from the user data folder?"),{modal:!0},Kt.l10n.t("Keep"),l)===l&&await t5(o,s);let f=o.path.relative(s,i),m=o.path.sep===t.path.sep?f:f.replaceAll(o.path.sep,t.path.sep);return t.path.join(e.configFolderPath,m)}async function Phe(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=await hm(t,i,s,async()=>{});if(!l){Jo(c,"canceled");return}if(l==="back")return a();let u=await ig(t,e,n,r,l,(f,m)=>{if(!Gv(e.path,f))return m;let d=e.path.sep!==Ua.sep?f.replace(Ua.sep===Ua.win32.sep?/\\/g:/\//g,e.path.sep):f,p=e.path.resolve(n,d),h=e.path.relative(e.path.dirname(p),o),g=e.platform==="win32"?h.replace(/\\/g,"/"):h,v=m.toString(),C="dockerFile"in $e(v)?["dockerFile"]:["build","dockerfile"],w=bn(v,C,g,{formattingOptions:{}}),y=Do(v,w);return Buffer.from(y)});return u&&Jo(c,"dockerFile"),u}async function bhe(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=(await e.readFile(o)).toString(),u=Yv(l);if(!u){await gn.window.showErrorMessage(Kt.l10n.t("Invalid docker-compose file '{0}'",o),{modal:!0});return}let f=u.version,m=Object.keys(u&&u.services||{}),d=m.length<2?m[0]||"":await Co(t.quickPick,m.map(v=>({label:v,type:"service"})),Kt.l10n.t("Select a service"),void 0,void 0,!0);if(d==="back")return a();if(d===void 0){Jo(c,"canceled");return}let p=typeof d=="string"?d:d.label,h=await hm(t,i,s,async()=>{});if(!h)return;if(h==="back")return a();let g=await ig(t,e,n,r,h,(v,C)=>{if(Gv(e.path,v)){let w=e.path.sep!==Ua.sep?v.replace(Ua.sep===Ua.win32.sep?/\\/g:/\//g,e.path.sep):v,y=e.path.resolve(n,w),S=e.path.relative(e.path.dirname(y),o),I=e.platform==="win32"?S.replace(/\\/g,"/"):S,x=C.toString(),A=$e(x).dockerComposeFile,F=Array.isArray(A)?A.slice(1):[],k=[I,...F],E=bn(x,["dockerComposeFile"],k,{formattingOptions:{}}),_=Do(x,E),T=bn(_,["service"],p,{formattingOptions:{}}),D=Do(_,T);return Buffer.from(D)}if(/compose.*\.ya?ml$/.test(Ua.posix.basename(v))){let w=C.toString(),y=Yv(w);y.version&&f&&y.version!==f&&(w=w.replace(new RegExp(`^(version:.*)(${Mf(y.version)})`,"m"),`$1${f}`));let S=Object.keys(y&&y.services||{});return S.length&&(w=w.replace(new RegExp(`\\b${S[0]}\\b`),p)),Buffer.from(w)}return C});return g&&Jo(c,"dockerComposeFile"),g}function Jo(t,e,n,r){var i;let o={outcome:e};if(n){o.definitionName=af(n.metadata.template.id);let s=n.metadata.copilotSuggestion,a=(i=s==null?void 0:s.template)==null?void 0:i.id;a&&(o.copilotSuggested=af(a)),o.features=n.metadata.features.map(l=>af(l.id)).join(",");let c=s==null?void 0:s.features.map(l=>af(l.id)).join(",");c&&(o.copilotFeatures=c),a&&(o.copilotUsed="true")}r&&(o.targetLocation=r),t.sendTelemetryEvent("createConfiguration",o)}async function n0(t,e,n){if(n||(n=await jf(t,e.configFolderPath)),!n)return;let r=await ur(t,t).readDocument(n);if(!r)return;let o=$e(r);return{uri:n,text:r,object:o}}async function f8(t,e,n,r,o,i,s){let a=lo(n);if(un(a)&&!await Ue.workspace.requestWorkspaceTrust({message:Zy}))return xr(a.hostPath)?(await Ue.window.showInformationMessage(Ar.l10n.t("The WSL folder is currently not trusted."),{modal:!0,detail:Ar.l10n.t("Trust is required to build a dev container from it. The folder will now reopen in WSL.")}),await Ue.commands.executeCommand("remote-containers.reopenInWSL")):(await Ue.window.showInformationMessage(Ar.l10n.t("The local folder is currently not trusted."),{modal:!0,detail:Ar.l10n.t("Trust is required to build a dev container from it. The folder will now reopen locally.")}),await Ue.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let c=co(a);if(c&&!await Qy(t,a.repositoryPath))return await Ue.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{});let l=Jf(a);return{...await The(a,t,i,s,e,n,r,o),isTrusted:c||l||void 0}}async function The(t,e,n,r,o,i,s,a){let{log:c,logFilePath:l}=n,u="hostPath"in t&&xr(t.hostPath)&&!!Ue.extensions.getExtension("ms-vscode-remote.remote-wsl");u&&Ue.commands.executeCommand("setContext","canReopenInWSL",!0);let f=t.settings,m="localDocker"in t&&t.localDocker,d=Fl(t.parentAuthority)||Al(f)&&!m,p=d&&(!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));p&&Ue.commands.executeCommand("setContext","canReopenInSSH",!0);let h=hc(t.parentAuthority)&&!!Ue.extensions.getExtension("ms-vscode.remote-server");h&&Ue.commands.executeCommand("setContext","canReopenInTunnel",!0);let g=!d&&!hc(t.parentAuthority);g&&Ue.commands.executeCommand("setContext","canReopenLocally",!0);let v;return Ue.window.withProgress({location:Ue.ProgressLocation.Notification,title:Ku,cancellable:!1},async C=>{if(t.parentAuthority&&!s.execServer)throw new Error(`Parent authority found without ExecServer: ${i}`);let w=ts(),y=ql(e.extensionPath,mm,c),{cliHost:S,originalCwd:I}=await khe(s.execServer,t,w,e.extensionPath,await _r(),y,o.product,c),x={...S.type==="local"?await y:void 0,...await Xf(S,t.settings)},A={...S.env,...x},F=await zu({authority:i,extensionContext:e,sessionStart:n.sessionStart,progress:C,cliHost:S,env:A,cwd:S.cwd,wslSettings:w,isLocalContainer:eu(t.parentAuthority,x),telemetry:o,onDidInput:n.onDidInput,output:c,logFilePath:l,allowSystemConfigChange:!0,postCreate:r}),k={async createConfiguration(E,_){return o0({fileHost:_,userDataFolderForConfigurations:un(t)?await Zc(e,S):void 0,telemetry:o,output:c,openConfigurationCommandId:dm,showLogCommandId:it},It(oC.posix,E))},async showError(E,..._){return await Ue.window.showErrorMessage(E,{modal:!0},..._)}};v={common:F,parsedAuthority:t,dockerCLI:Fs(),dockerComposePath:Aa(),dockerComposeCLI:vs({exec:F.cliHost.exec,env:{...x,...fr(x)},output:F.output},Fs(),Aa()),dockerSocketPath:zI(),dockerEnv:x,workspaceMountConsistencyDefault:YI(),gpuAvailability:await qI(S,o.product,c),cacheMount:GI()?"volume":"none",configurationTracking:VI(e.workspaceState),removeOnStartup:await w5(e,i),buildNoCache:await C5(e,i),onRemoveOnShutdownChanged:a,userRepositoryConfigurationPaths:Xy(),originalCwd:I,configProvider:k,development:e.extensionMode===Ue.ExtensionMode.Development,watch:async(E,_)=>{let T=Ue.workspace.createFileSystemWatcher(new Ue.RelativePattern(E,"*"));return T.onDidChange(_),T.onDidCreate(_),T.onDidDelete(_),T},ensureNoDisallowedFeatures:(E,_,T)=>Fp(E,e.globalState,_,T),useExperimentalLockfile:JI()},await e_(v);try{return await Pk(v)}catch(E){return Rhe(v,E)}}).then(C=>(a(async w=>{await y5(e,w&&C.dockerContainerId||!1),await Jy(e,w==="rebuildNoCache"?i:!1)}),ns(o,oO(t),"success",n.sessionStart,v==null?void 0:v.common,C.config,C.configLocationType,C.properties),C),C=>{var k;let w=C instanceof pe?C:new pe({description:Ar.l10n.t("An error occurred setting up the container."),originalError:C});co(t)&&(w.volumeName=t.volumeName,w.repositoryPath=t.repositoryPath,w.folderPath=t.folder),ns(o,oO(t),"failure",n.sessionStart,v==null?void 0:v.common,w.config,void 0,w.containerProperties,w);let y="onTheSide",S=(k=w.data)==null?void 0:k.fileWithError;!S&&(v!=null&&v.parsedAuthority)&&un(v.parsedAuthority)&&v.parsedAuthority.configFile&&(S=_e(v.parsedAuthority.configFile,v.common.cliHost.platform));let I=S&&(v==null?void 0:v.common.cliHost.path.basename(S))||"devcontainer.json",x=un(t)?[{id:"openFileWithErrorLocally",title:Ar.l10n.t("Edit {0} Locally",I),isLastAction:!0,applicable:async(E,_)=>g&&!(_&&u),async execute(){let E=v==null?void 0:v.common.cliHost,_=S?E.type==="wsl"?await E.toCommonURI(S):Ce.file(S):void 0;await ng(e,t.hostPath,_,l,y);let T=Ue.Uri.file(t.hostPath);await Ue.commands.executeCommand("vscode.openFolder",T)}},{id:"openFileWithErrorinWSL",title:Ar.l10n.t("Edit {0} in WSL",I),isLastAction:!0,applicable:async()=>u,async execute(){let E=Ue.Uri.parse((await Sp(t.hostPath,c)).toString()),_=S?Rn(S.startsWith("/")?"linux":"win32",E,S):void 0;await ng(e,E.path,_,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}},{id:"openFileWithErrorinSSH",title:Ar.l10n.t("Edit {0} in SSH",I),isLastAction:!0,applicable:async()=>p,async execute(){let E=t.settings,_=Al(E)?Fv(E.host,t.hostPath):nu(t.parentAuthority,t.hostPath),T=Ue.Uri.parse(_.toString()),D=S?Rn(S.startsWith("/")?"linux":"win32",T,S):void 0;await ng(e,T.path,D,l,y),await Ue.commands.executeCommand("vscode.openFolder",T)}},{id:"openFileWithErrorinTunnel",title:Ar.l10n.t("Edit {0} in Tunnel",I),isLastAction:!0,applicable:async()=>h,async execute(){let E=Ue.Uri.parse(nu(t.parentAuthority,t.hostPath).toString()),_=S?Rn(S.startsWith("/")?"linux":"win32",E,S):void 0;await ng(e,E.path,_,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}}]:[],A=co(t)?t.inspectVolume?[Fa]:[{id:"reopenInRecoveryContainer",title:Ar.l10n.t("Edit {0} in Recovery Container",I),isLastAction:!0,applicable:(E,_)=>!0,execute:async E=>{await ng(e,t.repositoryPath,S?Ce.file(S).with({scheme:"vscode-remote"}):void 0,l,y);let _=ai(E.repositoryPath),T=await Uo(v),D=jk(_,E.volumeName,T);await Ue.commands.executeCommand("remote-containers.inspectVolume",D,E.repositoryPath,E.folderPath)}},Fa,{id:"openRepository",title:Ar.l10n.t("Open Repository"),isLastAction:!1,applicable:(E,_)=>!_,async execute(){Ue.env.openExternal(Ue.Uri.parse(t.repositoryPath))}}]:[],F=iw(t)?[Fa]:[];return w.actions=[...Zu,el,N5,...x,...A,...F,Xu,Qc],Nhe(w),Oa(w,oO(t),o,!0,n.log)})}async function Rhe(t,e){let{common:n}=t,{output:r}=n,o=((e==null?void 0:e.originalError)&&(e.originalError.cmdOutput||e.originalError.message)||"").toLowerCase();if(n.localWaylandSocket&&o.includes(`path does not exist: ${n.localWaylandSocket}`.toLowerCase())){n.localWaylandSocket=void 0;let i=await Pk(t);return(async()=>{let s=us("mountWaylandSocket");for(await Bt(3e3);Ue.workspace.getConfiguration().get(s,!0);){try{await Ue.workspace.getConfiguration().update(s,!1,Ue.ConfigurationTarget.Global)}catch{}await Bt(3e3)}r.write("Wayland socket mount disabled in user settings.")})().catch(s=>{r.write(ot(s&&(s.stack||s.message)||String(s)))}),i}throw e}async function khe(t,e,n,r,o,i,s,a){let{settings:c}=e,l=c&&"host"in c&&c.host||void 0;if(un(e)){let u=It(oC,e.hostPath),f=u.rootFolderPath,m=await Jr(t?{server:t,authority:e.parentAuthority}:void 0,l,u.rootFolderPath,hn,n,r,o,s,a,Ei,{sshAskpassEnv:i,settings:tg(),localDocker:e.localDocker});return m.cwd!==u.rootFolderPath&&(u=It(m.path,u.isWorkspaceFile?m.path.join(m.cwd,oC.basename(e.hostPath)):m.cwd)),a.write(`Setting up container for folder or workspace: ${u.workspaceOrFolderPath}\r
`),Qx(a,e),e.localDocker&&a.write(`Local Docker: ${e.localDocker}\r
`),{cliHost:m,originalCwd:f}}else{let u=await Jr(t?{server:t,authority:e.parentAuthority}:void 0,l,void 0,hn,n,r,o,s,a,Ei,{sshAskpassEnv:i,settings:tg()});return{cliHost:u,originalCwd:await u.homedir()}}}function oO(t){return un(t)?"config":co(t)?t.inspectVolume?"volume":"repository":"volume"}function Nhe(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description=Ar.l10n.t("The drive of the workspace folder is not shared. Share it in the Docker settings first."):e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description=Ar.l10n.t("A port the container is setup to bind to is already in use. See the Dev Containers terminal for details."):e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description=Ar.l10n.t("A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running."):e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description=Ar.l10n.t("The base image references the obsolete Debian 8 update repository."),t.actions.push({id:"learnMore",title:Ar.l10n.t("Learn More"),isLastAction:!1,applicable:(n,r)=>r,async execute(){Ue.env.openExternal(Ue.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var Ma=Y(require("vscode")),fg=require("vscode");var i0=Y($r());var m8=require("util");var $a=Y(require("path")),p8=Y(require("crypto"));async function h8(t,e,n,r){var p,h;let{dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,common:a}=t,{cliHost:c,extensionPath:l,appRoot:u,postCreate:f,output:m}=a,d;try{let{commit:g}=a.product;if(!g)throw new pe({description:i0.t("Cannot attach without commit id for the remote extension host.")});let v=r?n.configFilePath:void 0;if((v==null?void 0:v.scheme)==="file"&&c.type!=="local"){let R=c.path.join(await c.tmpdir(),`devcontainer-config-${p8.randomUUID()}.json`);await c.writeFile(R,await at(v.fsPath)),v=Ce.from({scheme:Ke.scheme,path:R})}let C={...a.env,...fr(a.env)},w={cliHost:c,dockerPath:o,dockerComposePath:s,env:C,extensionPath:l,appRoot:u,package:a.package,postCreate:f,output:m},y=a.postCreate.output.dimensions||m.dimensions,S=await oi(w,["set-up","--container-id",e.Id,...c.type==="local"&&a.persistedFolder?["--user-data-folder",a.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...a.containerSessionDataFolder?["--container-session-data-folder",a.containerSessionDataFolder]:[],"--log-level",no(a.getLogLevel()),"--log-format","json",...v?["--config",_e(v,c.platform)]:[],"--default-user-env-probe",a.defaultUserEnvProbe,"--skip-post-create",...y?["--terminal-columns",String(y.columns),"--terminal-rows",String(y.rows)]:[],"--include-configuration","--include-merged-configuration"]);if((S==null?void 0:S.outcome)!=="success")throw new pe({description:i0.t("devcontainer command failed: {0}",JSON.stringify(S))});S.configuration.configFilePath=S.mergedConfiguration.configFilePath=S.configuration.configFilePath&&Ce.revive(S.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme});let I=S.mergedConfiguration,x=I.remoteUser;d=await Lp(t,e.Id,I.workspaceFolder,x);let A={cliHost:c,dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,env:C,output:f.output},F=((h=(((p=I.customizations)==null?void 0:p.vscode)||[]).slice().reverse().find(R=>typeof R.devPort=="number"))==null?void 0:h.devPort)||Hl,{hostOrContainerPort:k,hostPortServer:E,connectionToken:_,remoteEnv:T,serverDownloaded:D}=await Bl(a,d,n,I,F,Ap(t,A,d,void 0,void 0,e.Id,!1,v,void 0)),b=ur(a.cliHost,d.shellServer);if(Lhe(a,d,b,n.configFilePath),Fhe(a,d,b,n.configFilePath),E){let R=async()=>{await(0,m8.promisify)(E.close.bind(E))()};a.shutdowns.push(R)}return{params:a,properties:d,config:n,resolvedAuthority:{host:dc,port:k,connectionToken:_,extensionHostEnv:T},tunnelInformation:a.isLocalContainer?Np(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:D}}catch(g){let v=g instanceof pe?g:new pe({description:i0.t("An error occurred attaching to the container."),originalError:g});throw e&&(v.manageContainer=!1,v.params=t.common,v.containerId=e.Id,v.dockerParams=t),d&&(v.containerProperties=d),v.config=n,v}}function Lhe(t,e,n,r){e.installFolder&&g8(t,e,n,r).catch(console.error)}async function g8(t,e,n,r){try{await lc(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],jY(e),{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Ahe(t,e,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return g8(t,e,n,r)}async function Ahe(t,e,n,r){let o=await VY(t,e);await pk(r,async()=>{var s,a;let i=await s0(t.cliHost,n,r,e.remoteWorkspaceFolder);if(!Uhe(((a=(s=i.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],o)){let c=bn(i.text,["extensions"],o,{formattingOptions:{}});await Mi(n,r,c,i.text)}})}function Fhe(t,e,n,r){v8(t,e,n,r).catch(console.error)}async function v8(t,e,n,r){try{let o=Cx(e),i=$a.posix.dirname(o),s=$a.posix.basename(o);await lc(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],i,{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Ohe(t.cliHost,e,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return v8(t,e,n,r)}async function Ohe(t,e,n,r){let{stdout:o}=await e.shellServer.exec(`cat ${Cx(e)}`),i=$e(o)||{};await pk(r,async()=>{var a,c;let s=await s0(t,n,r,e.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(i)){let l=bn(s.text,["settings"],i,{formattingOptions:{}});await Mi(n,r,l,s.text)}})}function Uhe(t,e){let n=new Set(t),r=new Set(e);return n.size===r.size&&t.every(o=>r.has(o))}async function w8(t,e){let n=c0(t,e),r=await d8(n);return r||(n=E8(t,e.Config.Image),r=await d8(n)),r}async function y8(t,e,n,r,o){let i=Ce.file(c0(n,r)),s=await s0(t,e,i,o);return s.exists||(i=Ce.file(E8(n,r.Config.Image)),s=await s0(t,e,i,o)),s}function a0(t){return $a.join(t,"nameConfigs")}function c0(t,e){return $a.join(a0(t),`${x8(gc(e))}.json`)}async function C8(t){try{let e=a0(t);return(await ol(e)).filter(r=>r.endsWith(".json")).map(r=>({name:_8(r.substr(0,r.length-5)),uri:Ce.file($a.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function l0(t){return $a.join(t,"imageConfigs")}function E8(t,e){return $a.join(l0(t),`${x8(e)}.json`)}async function S8(t){try{let e=l0(t);return(await ol(e)).filter(r=>r.endsWith(".json")).map(r=>({image:_8(r.substr(0,r.length-5)),uri:Ce.file($a.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function x8(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function _8(t){return t.replace(/%([0-9a-f]{2})/g,(e,n)=>String.fromCharCode(parseInt(n,16)))}async function d8(t){if(!await Cr(t))return;let e=await at(t),n=$e(e.toString())||{},r=Kv(n);return r.configFilePath=Ce.file(t),r}async function s0(t,e,n,r){let o=await e.readDocument(n),i=o||fc,s=$e(i)||{},a=Kv(s),c=fx({platform:t.platform,configFile:n,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:r},a);return c.configFilePath=n,{exists:!!o,text:i,config:c}}async function D8(t,e,n,r,o,i){return await Os(t)?{...await $he(t,e,n,r,o,i),isTrusted:!0}:(await Ma.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function $he(t,e,n,r,o,i){let s,a;return Ma.window.withProgress({location:Ma.ProgressLocation.Notification,title:Ku,cancellable:!1},async c=>{var l,u;try{let f=Zf(n);if(f.parentAuthority&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let{settings:m}=f,d="containerName"in f?f.containerName:f.containerId;o.log.write(`Setting up container: ${d}\r
`),Qx(o.log,f);let p=m&&"host"in m&&m.host||void 0,h=ts(),g=ql(t.extensionPath,mm,o.log),v=await Jr(r.execServer?{server:r.execServer,authority:f.parentAuthority}:void 0,p,f.cwd,hn,h,t.extensionPath,await _r(),e.product,o.log,Ei,{sshAskpassEnv:g,settings:tg()}),C=Fs(),w={...v.type==="local"?await g:void 0,...await Xf(v,m)},y=vs({exec:v.exec,env:{...w,...fr(w)},output:o.log},Fs(),Aa()),S={...v.env,...w},I=await si({cliHost:v,dockerCLI:C,dockerComposeCLI:y,dockerComposePath:Aa(),env:S,output:o.log},"containerName"in f?f.containerName:f.containerId);if(!I)throw new pe({description:fg.l10n.t("Cannot attach to the container with name/id {0}, it no longer exists.",d),data:{reload:!1,attach:!0}});let x=(u=(l=(Ma.workspace.workspaceFolders||[void 0])[0])==null?void 0:l.uri)==null?void 0:u.path,A=await y8(v,ms,t.globalStoragePath,I,x);if(x&&A.config.workspaceFolder!==x){let _=bn(A.text,["workspaceFolder"],x,{formattingOptions:{}});await Mi(ms,A.config.configFilePath,_,A.text)}s={common:await zu({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:c,cliHost:v,env:S,cwd:f.cwd||await v.homedir(),wslSettings:h,isLocalContainer:eu(f.parentAuthority,w),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:f,dockerCLI:C,dockerComposePath:Aa(),dockerComposeCLI:y,dockerSocketPath:zI(),dockerEnv:w,workspaceMountConsistencyDefault:YI(),gpuAvailability:await qI(v,e.product,o.log),cacheMount:GI()?"volume":"none",configurationTracking:VI(t.workspaceState),userRepositoryConfigurationPaths:[],development:t.extensionMode===Ma.ExtensionMode.Development,ensureNoDisallowedFeatures:(_,T,D)=>Fp(_,t.globalState,T,D),useExperimentalLockfile:JI()},await e_(s);let F=Up(f.parentAuthority,m),k=gc(I),E=fg.l10n.t("Container {0} ({1}){2}",I.Config.Image,k,F);if(s.common.setWorkspaceName(E),I.State.Status!=="running")throw new pe({description:fg.l10n.t("Cannot attach to the container {0} ({1}){2}, it is not running.",I.Config.Image,k,F),params:s.common,containerId:I.Id,dockerParams:s,data:{reload:!1,start:!0}});return await h8(s,I,A.config,A.exists)}catch(f){let m=f instanceof pe?f:new pe({description:fg.l10n.t("An error occurred attaching to the container."),originalError:f});throw m.actions=[L5,A5,...Zu,el,Fa,Xu,Qc],m}}).then(c=>(ns(e,"attach","success",o.sessionStart,s==null?void 0:s.common,a,void 0,c.properties),c),c=>{let l=c instanceof pe?c:new pe({description:fg.l10n.t("An error occurred attaching to the container."),originalError:c});return ns(e,"attach","failure",o.sessionStart,s==null?void 0:s.common,a,void 0,l.containerProperties,l),Oa(l,"attach",e,!0,o.log)})}var lt=Y(require("vscode")),We=require("vscode");var rn=Y(require("vscode")),Ha=require("vscode"),P8=Y(require("path")),vm=Y(require("os")),iC=Y(require("fs")),b8=Y(require("child_process")),T8=Y(require("crypto")),R8=Y(OC());async function f0(t){Bhe()?await new iO().downloadAndInstallDocker(t):k8()?await new sO().downloadAndInstallDocker(t):await rn.env.openExternal(rn.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var u0=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let r=Ha.l10n.t("Downloading Docker installer..."),o=Ha.l10n.t("The Docker Desktop installation is started. Complete the installation and then start Docker Desktop."),i;try{i=await rn.window.withProgress({location:rn.ProgressLocation.Notification,title:r},async()=>this.downloadInstaller())}catch(a){let c=Ha.l10n.t("Downloading the Docker Desktop installer failed. Do you want to manually download and install?"),l=Ha.l10n.t("Download");throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(i);rn.window.showInformationMessage(o);try{await this.install(i,s,e)}catch(a){let c=Ha.l10n.t("Docker Desktop installation failed. ({0})",String(a==null?void 0:a.message)),l=Ha.l10n.t("Install Instruction");throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let n=!0;if(await new aO(e).isDockerInstalledRealTimeCheck()){let r=Ha.l10n.t("Docker Desktop is already installed. Would you like to reinstall?"),o=Ha.l10n.t("Reinstall");n=await rn.window.showInformationMessage(r,{modal:!0},o)!==void 0}return n}async downloadInstaller(){let e=`${Hhe()}.${this.fileExtension}`;return await jhe(this.downloadUrl,e),e}handleError(e,n,r){rn.window.showErrorMessage(e,{title:n}).then(o=>{o&&rn.env.openExternal(rn.Uri.parse(r))})}},iO=class extends u0{downloadUrl="https://aka.ms/download-docker-windows-vscode";fileExtension="exe";getInstallCommand(e){return`"${e}"`}async install(e,n,r){try{r.write(`Executing command ${n}`),await N8(n,r)}finally{try{await iC.promises.stat(e),await iC.promises.unlink(e)}catch{}}}},sO=class extends u0{downloadUrl=`https://aka.ms/download-docker-mac${process.arch==="arm64"?"-arm64":""}-vscode`;fileExtension="dmg";getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let n=Ha.l10n.t("Docker Install"),r=this.getInstallCommand(e);await Whe(r,n,{addDockerEnv:!1})}},Mhe=0;function Hhe(){return P8.join(vm.tmpdir(),`${rn.env.sessionId}-${Mhe++}.tmp`)}function Bhe(){return vm.platform()==="win32"}function k8(){return vm.platform()==="darwin"}async function Whe(t,e,n){var a,c;let r;n=n??{},n.addDockerEnv&&(r={});let o=new rn.Task({type:"shell"},n.workspaceFolder??rn.TaskScope.Workspace,e,"Docker",new rn.ShellExecution(t,{cwd:n.cwd||((c=(a=n.workspaceFolder)==null?void 0:a.uri)==null?void 0:c.fsPath)||vm.homedir(),env:r}),[]);n.alwaysRunNew&&(o.definition.idRandomizer=T8.randomUUID()),n.focus&&(o.presentationOptions={focus:!0});let i=await rn.tasks.executeTask(o);return new Promise((l,u)=>{let f=rn.tasks.onDidEndTaskProcess(m=>{m.execution===i&&(f.dispose(),m.exitCode&&n.rejectOnError&&u(m.exitCode),l())})})}var aO=class{constructor(e){this.output=e;this.isDockerInstalledLazy=new lO(async()=>{let n=await this.isDockerInstalledRealTimeCheck();return n&&this.isDockerInstalledLazy.cacheForever(),n},this.maxCacheTime)}maxCacheTime=3e4;isDockerInstalledLazy;async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{let e=await ni("docker");return await N8(`${e} -v`,this.output),!0}catch{return!1}}};async function jhe(t,e){await new Promise((n,r)=>{let o=iC.createWriteStream(e);R8.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){r(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",r),s.pipe(o),s.on("end",n)}).on("error",r)})}var I8=10*1024;async function N8(t,e,n,r){let o=Buffer.alloc(n&&n.maxBuffer||I8),i=Buffer.alloc(n&&n.maxBuffer||I8);return await Vhe(t,e,n,r,o,r,i),{stdout:cO(o),stderr:cO(i)}}async function Vhe(t,e,n,r,o,i,s,a){return await new Promise((c,l)=>{let u,f=0,m=0;n=n||{},n.shell=!0,Yhe(n,e);let d=b8.spawn(t,n);d.on("error",p=>(u&&(u.dispose(),u=void 0),l(p))),d.on("close",(p,h)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(p){let g=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${p}`;s&&(g+=`
Error: ${cO(s)}`);let v=new Error(g);return v.code=p,v.signal=h,v.stdErrHandled=i!==null,l(v)}return c()}),n!=null&&n.stdin&&(d.stdin.write(n.stdin),d.stdin.end()),(r||o)&&d.stdout.on("data",p=>{let h=p.toString();r&&r(h,d),o&&(f+=o.write(h,f))}),(i||s)&&d.stderr.on("data",p=>{let h=p.toString();i&&i(h,d),s&&(m+=s.write(h,m))}),a&&(u=a.onCancellationRequested(()=>{d.kill()}))})}function Yhe(t,e){var n;k8()&&(/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((n=t==null?void 0:t.env)==null?void 0:n.PATH)||process.env.PATH||"")||(t=t??{},t.env=t.env??{...process.env},e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`))}function cO(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var lO=class{constructor(e,n){this.valueFactory=e;this._valueLifetime=n}_isValueCreated=!1;_value;_valuePromise;get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let n=await this._valuePromise;if(e&&(this._value=n,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let r=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(r)},this._valueLifetime)}return n}};var L8=Y(require("os")),dg=Y(require("crypto")),A8=Y(require("net")),F8=Y(require("path")),Jt=Y(require("vscode")),on=require("vscode");var O8=require("string_decoder");var U8="done",d0="devcontainers";async function p0(t,e,n,r){return Jt.commands.executeCommand(it),Jt.window.withProgress({location:Jt.ProgressLocation.Notification,title:"Installing Docker in WSL"},async o=>{let i={},s={};try{await qhe(t,e,n,o,i,s)}catch(a){i.outcome="error",i.errorMessage=a==null?void 0:a.message,e.write(`Failed with error: ${(a==null?void 0:a.message)||a}`)}finally{r.sendTelemetryEvent("installDockerInWSL",i,s)}return i.outcome===U8})}async function $8(t){if(process.platform!=="win32")return!1;let e=H8();if(t.write(`Windows build number: ${e}`),e<sC)return t.write(`WSL version 2 is required to run Docker and that is only available since Windows build ${sC}.`),!1;let n=await qr(process.cwd(),hn,t);return!await m0(n,e,t)&&e<M8?(t.write(`WSL is not installed and can only be installed automatically since Windows build ${sC}.`),!1):!0}async function qhe(t,e,n,r,o,i){let s=H8();if(e.write(`Windows build number: ${s}`),s<sC)return o.outcome="wsl2NotAvailableForWindowsBuild",Jt.window.showInformationMessage(on.l10n.t("WSL version 2 is required to run Docker and that is only available since Windows build {0}.",sC),{modal:!0});let a=await qr(process.cwd(),hn,e);if(r.report({message:on.l10n.t("Checking if WSL is installed.")}),!await m0(a,s,e)){if(s<M8)return o.outcome="wslInstallerNotAvailableWithWindowsBuild",Jt.window.showInformationMessage(on.l10n.t("WSL is not installed. Please install WSL manually and retry."),{modal:!0});if(r.report({message:on.l10n.t("Installing WSL.")}),await zhe(a,t.extensionPath,e,n))return o.outcome="rebootRequiredAfterWSLInstall",Jt.window.showInformationMessage(on.l10n.t("Please reboot your machine to finalize the WSL setup."),{modal:!0});if(!await m0(a,s,e)&&(await new Promise(x=>setTimeout(x,3e3)),!await m0(a,s,e)))return o.outcome="wslNotFoundAfterInstall",Jt.window.showInformationMessage(on.l10n.t("WSL not found after install."),{modal:!0})}r.report({message:on.l10n.t("Checking WSL version.")}),o.wslVersion=await Khe(a,e),r.report({message:on.l10n.t("Listing installed WSL distributions.")});let l=await uO(a,e);if(!l.length){if(r.report({message:on.l10n.t("Installing WSL distribution.")}),await Xhe(a,e,n))return o.outcome="featureMissingDuringDistroInstall",Jt.window.showInformationMessage(on.l10n.t("A required feature is missing. Please reboot your machine to finalize the WSL setup if you haven't done so yet."),{modal:!0});if(l=await uO(a,e),!l.length&&(await new Promise(S=>setTimeout(S,3e3)),l=await uO(a,e),!l.length))return o.outcome="noDistroAfterInstall",Jt.window.showInformationMessage(on.l10n.t("No WSL distro found after install."),{modal:!0})}i.wslDistros=l.length;let u=l.find(y=>y.isDefault);if(!u&&l.length===1&&(u=l[0]),!u)return o.outcome="noDefaultDistro",Jt.window.showInformationMessage(on.l10n.t("No default WSL distro found."),{modal:!0});if(o.isDefaultDistro=String(u.isDefault),u.version!=="2")return o.outcome="defaultDistroNotVersion2",Jt.window.showInformationMessage(on.l10n.t("Default distro is not using WSL version 2."),{modal:!0});r.report({message:on.l10n.t("Reading distribution information.")});let f=Uf("wsl",["-u","root","-e"],void 0),m=await Wt(f,e,void 0,"linux","Host"),{stdout:d}=await m.exec("cat /etc/os-release || cat /usr/lib/os-release || true"),p=Zhe(d);if(o.distro=p.ID,p.ID!=="debian"&&p.ID!=="ubuntu")return o.outcome="distroNotSupported",Jt.window.showInformationMessage(p.NAME?on.l10n.t("Unsupported WSL distribution: {0}",p.NAME):on.l10n.t("Unsupported WSL distribution."),{modal:!0});let h=Uf("wsl",["-e"],void 0),g=await Wt(h,e,void 0,"linux","Host"),v=await Nl(g);if(v==="root"){try{await m.exec(`id ${d0}`)}catch{await m.exec(`useradd --create-home --shell /usr/bin/bash --user-group --groups adm,dialout,cdrom,floppy,sudo,audio,dip,video,plugdev,netdev --password '${dg.randomUUID()}' ${d0}`)}if(await m.exec(`cat >>/etc/wsl.conf <<'wslConf'
[user]
default=${d0}
wslConf
`),await X({exec:a.exec,cmd:"wsl",args:["--terminate",u.name],output:e,print:"continuous"}),m=await Wt(f,e,void 0,"linux","Host"),g=await Wt(h,e,void 0,"linux","Host"),await Nl(g)==="root")return o.outcome="failedToSwitchUser",Jt.window.showInformationMessage(on.l10n.t("Default user in WSL is root, requiring a regular user."),{modal:!0})}let C=await fO(g,"docker")||await fO(m,"docker")||await fO(m,"dockerd");if(C){await m.exec(`usermod -aG docker ${v}`).catch(()=>{});let y=on.l10n.t("Reinstall");if(await Jt.window.showInformationMessage(on.l10n.t("Docker is already installed in WSL."),{modal:!0,detail:on.l10n.t("Path: {0}",C)},y)!==y){o.outcome="dockerAlreadyInstalled";return}}r.report({message:on.l10n.t("Installing Docker.")}),await m.exec("export DEBIAN_FRONTEND=noninteractive"),await m.exec("apt update && apt -y install --no-install-recommends apt-transport-https ca-certificates curl gnupg2"),await m.exec(`curl -fsSL https://download.docker.com/linux/${p.ID}/gpg | tee /etc/apt/trusted.gpg.d/docker.asc`),await m.exec(`echo "deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/${p.ID} ${p.VERSION_CODENAME} stable" | tee /etc/apt/sources.list.d/docker.list`),await m.exec("apt update && apt -y install --no-install-recommends docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin"),await m.exec(`usermod -aG docker ${v}`),r.report({message:on.l10n.t("Updating Settings.")});let w=Jt.workspace.getConfiguration();await w.update(us("executeInWSL"),!0,Jt.ConfigurationTarget.Global),await w.update(us("executeInWSLDistro"),u.isDefault?void 0:u.name,Jt.ConfigurationTarget.Global),o.outcome=U8}var sC=18917,M8=20262;function H8(){let t=L8.release(),e=process.platform==="win32"&&t&&/(\d+)\.(\d+)\.(\d+)/g.exec(t);return e&&e.length===4?parseInt(e[3]):0}async function m0(t,e,n){if(t.platform!=="win32")return!1;if(e>=22e3)try{return await X({exec:t.exec,cmd:"wsl",args:["--status"],output:n,print:"continuous"}),!0}catch{return n.write("WSL feature installed: false (wsl --status failed)"),!1}else{let r=Ghe(t);if(r){let o=await t.isFile(r);return n.write(`WSL feature installed: ${o} (dll path: ${r})`),o}return n.write("WSL feature installed: false (no dll path)"),!1}}function Ghe(t){let e=t.env.SystemRoot;if(e){let n=t.env.PROCESSOR_ARCHITEW6432;return t.path.join(e,n?"Sysnative":"System32","lxss","LxssManager.dll")}}async function zhe(t,e,n,r){let{wrappedOutput:o,wrappedInput:i}=B8(n,r);try{let s=t.path.join(await t.tmpdir(),`wsl-install-${dg.randomUUID()}.js`);await t.writeFile(s,await at(F8.join(e,"dist/extension/runAsMain.js")));let a=`\\\\.\\pipe\\wsl-install-${dg.randomUUID()}-sock`,c=t.path.join(await t.tmpdir(),`wsl-install-${dg.randomUUID()}.bat`),l=Jv(t),u=await gk({cliHost:t,env:{RUN_AS_CMD:await ni("wsl"),RUN_AS_ARGS:JSON.stringify(["--install"]),...n.dimensions?{RUN_AS_COLS:String(n.dimensions.columns),RUN_AS_ROWS:String(n.dimensions.rows)}:{},RUN_AS_SOCKET:a,ELECTRON_RUN_AS_NODE:"1"},appRoot:Jt.env.appRoot},l.cmd)||{},f=`@echo off

${Object.keys(u).map(h=>`set ${h}=${u[h]}`).join(`
`)}
"${l.cmd}" ${l.args.map(h=>`"${h}"`).join(" ")} "${s}"
`;await t.writeFile(c,Buffer.from(f.replaceAll(/\r?\n/g,`\r
`)));let m="",d=new A8.Server(h=>{d.close();let g=new O8.StringDecoder;h.on("data",v=>{let C=g.write(v);o.raw(C),m+=C}),i.event(v=>h.write(v))});return d.listen(a),await Ai({ptyExec:t.ptyExec,cmd:"powershell.exe",args:["Start-Process","-FilePath",`'${c}'`,"-Verb","RunAs","-WindowStyle","Hidden","-Wait"],env:so(),output:o,onDidInput:i.event}),m.replace(Bs,"").replaceAll(/\s/g,"").indexOf("untilthesystemisrebooted")!==-1}finally{i.dispose()}}async function Khe(t,e){try{let{stdout:n}=await X({exec:t.exec,cmd:"wsl",args:["--version"],output:e,print:"continuous"});return n.toString("utf16le").match(/^.*$/m)[0]}catch{return"unknown"}}async function uO(t,e){try{let{stdout:n}=await X({exec:t.exec,cmd:"wsl",args:["-l","-v"],output:e,print:"continuous"});return Jhe(n.toString("utf16le"))}catch{return[]}}function Jhe(t){let e=/\r\n/.test(t)?`\r
`:`
`,n=t.split(e),r=/^(?<default>\*|\s)\s*(?<name>[a-zA-Z0-9\.\-_]+)\s+(?<state>\w+)\s+(?<version>\d)/,o=[];for(let i=1;i<n.length;i++){let s=r.exec(n[i]);if(s!=null&&s.groups){let a=s.groups.name,c=s.groups.version,l=i===1;o.push({name:a,isDefault:l,version:c})}}return o}async function Xhe(t,e,n){await X({exec:t.exec,cmd:"wsl",args:["--set-default-version","2"],output:e,print:"continuous"});let{wrappedOutput:r,wrappedInput:o}=B8(e,n);try{let{cmdOutput:i}=await Ai({ptyExec:t.ptyExec,cmd:"wsl",args:["--install","-d","Ubuntu"],output:r,onDidInput:o.event});return i.replace(Bs,"").replaceAll(/\s/g,"").indexOf("0x80370114")!==-1}finally{o.dispose()}}function B8(t,e){let n=e(a=>r.fire(a)),r=new Hs(n),o="",i=dg.randomUUID();return{wrappedOutput:sn({...t,get dimensions(){return t.dimensions},event:a=>{if(t.event(a),a.type==="text"||a.type==="raw"){o+=a.text;let c=o.replace(Bs,"");/Enter new UNIX username:\s*$/.test(c)?r.fire(`${d0}\r`):/(New|Retype new) password:\s*$/.test(c)?r.fire(`${i}\r`):/any key to continue\.*\s*$/.test(c)?r.fire("\r"):/Installation successful!/.test(c)&&r.fire("exit\r")}}}),wrappedInput:r}}function Zhe(t){return t.split(`
`).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substring(0,r)]=n.substring(r+1)),e},{})}async function fO(t,e){try{let{stdout:n}=await t.exec(`command -v ${e}`);return n.trim()}catch{return}}var Qhe={reopenInContainer:We.l10n.t("Do you want to continue with reopening the folder in a container?"),openInContainer:We.l10n.t("Do you want to continue with opening a folder in a container?"),cloneInVolume:We.l10n.t("Do you want to continue with cloning a repository in a Docker volume?"),attachToContainer:We.l10n.t("Do you want to continue with attaching to a container?"),checkoutPRInVolume:We.l10n.t("Do you want to continue with checking out a pull-request in a Docker volume?"),createDevContainer:We.l10n.t("Do you want to continue with creating a Dev Container?"),inspectVolume:We.l10n.t("Do you want to continue with inspecting a Docker volume?"),trySample:We.l10n.t("Do you want to continue with trying a sample Dev Container?")},ege=`[${We.l10n.t("Starting Docker (show log)")}](command:${it} "${We.l10n.t("Show details in terminal")}")`;async function to(t,e,n,r,o,i){var f;let s=await Ze(t,e,i),a=(f=(lt.workspace.workspaceFolders||[])[0])==null?void 0:f.uri;a&&(a.scheme==="file"&&xr(a.fsPath)||xp(a))&&(s=await Ze(t,s.output,a));let c=cC(s,r),l=await Promise.race([c,new Promise(m=>setTimeout(()=>m("timeoutOrCanceled"),2e3))]);if(l==="timeoutOrCanceled"&&(l=await lt.window.withProgress({location:lt.ProgressLocation.Notification,title:ege,cancellable:!0},async(m,d)=>Promise.race([c,new Promise(p=>{let h=d.onCancellationRequested(()=>{h.dispose(),p("timeoutOrCanceled")})})])),l==="timeoutOrCanceled"))return!1;let u=await c;if(u==="permission")return await lt.window.showErrorMessage(We.l10n.t("Current user does not have permission to run 'docker'."),{modal:!0,detail:We.l10n.t("Try adding the user to the 'docker' group.")},We.l10n.t("Documentation"))&&lt.env.openExternal(lt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(u==="ssh")return await lt.window.showErrorMessage(We.l10n.t("Cannot connect to Docker daemon using 'ssh'."),{modal:!0,detail:We.l10n.t("Make sure public/private keys are set up for connecting without keyboard interaction.")},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1;if(u==="daemon")return await lt.window.showErrorMessage(We.l10n.t("Docker returned an error."),{modal:!0,detail:We.l10n.t("Make sure the Docker daemon is running.")},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1;if(u==="cwd")return await lt.window.showErrorMessage(We.l10n.t("Workspace folder does not exist.",s.cliHost.cwd),{modal:!0,detail:s.cliHost.cwd},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1;if(u==="command"&&(s.cliHost.type==="local"||s.cliHost.type==="wsl")&&await $8(s.output)){let m=We.l10n.t("Install");if(await lt.window.showInformationMessage(We.l10n.t("Dev Containers require Docker to run."),{modal:!0,detail:We.l10n.t("Do you want to install Docker in WSL?")},m)===m){if(ef(r,"installInWSL","install"),await p0(t,s.output,n,r)){let h=We.l10n.t("Continue");return await lt.window.showInformationMessage(We.l10n.t("Docker has been installed. {0}",Qhe[o]),h)===h?(ef(r,"continueAfterInstall","continue"),!0):(ef(r,"continueAfterInstall","cancel"),!1)}return!1}return ef(r,"installInWSL","cancel"),!1}if(!u||u==="command"){if(s.cliHost.type==="wsl")await lt.window.showErrorMessage(We.l10n.t("Docker Desktop WSL 2 backend required."),{modal:!0},We.l10n.t("Read more on docker.com"))&&lt.env.openExternal(lt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let m=We.l10n.t("Install"),d=We.l10n.t("License"),p=We.l10n.t("Ignore"),h=[],g=[];u==="command"&&s.dockerCLI!=="docker"&&g.push(We.l10n.t("Command not found: '{0}'.",s.dockerCLI)),s.cliHost.type==="local"&&(h.push(m,d),g.push(We.l10n.t("Check the license for details."))),u===!1&&h.push(p);let v=g.join(" "),C=s.cliHost.type==="remote"?We.l10n.t("Docker version 17.12.0 or later required on remote host."):We.l10n.t("Docker version 17.12.0 or later required."),w=await lt.window.showErrorMessage(C,{modal:!0,detail:v},...h);if(w===m)return f0(s.output).then(console.error),ef(r,"dockerDesktop","install"),!1;if(w===d)return lt.env.openExternal(lt.Uri.parse("https://aka.ms/docker-subscription-service-agreement")),ef(r,"dockerDesktop","license"),!1;if(w===p)return ef(r,"dockerDesktop","ignore"),!0;ef(r,"dockerDesktop","cancel")}return!1}return u==="wsl1"?(await lt.window.showErrorMessage(We.l10n.t("WSL 2 distro required."),{modal:!0,detail:We.l10n.t("The WSL distro is running with WSL 1.")},We.l10n.t("Read more on docker.com"))&&lt.env.openExternal(lt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}function ef(t,e,n){t.sendTelemetryEvent("dockerVersionUserChoice",{dialog:e,choice:n})}async function cC(t,e,n=!0){var a,c,l,u;let r;try{r=(await qk(t,hn,n,"version","--format","{{json .}}")).stdout.toString()}catch(f){console.error(f);let m=f&&(f.stderr?f.stderr.toString():f.message)||"";aC(e,"error",void 0,m);let d=m.toLowerCase();return d.indexOf("permission denied")!==-1?d.indexOf("ssh")!==-1?"ssh":"permission":d.indexOf("enoent")!==-1||d.indexOf("not found")!==-1||d.indexOf("notfound")!==-1?await t.cliHost.isFolder(t.cliHost.cwd)?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):"cwd":t.cliHost.type==="wsl"&&((l=(c=(a=f==null?void 0:f.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let o;try{let f=$e(r);o=(u=f==null?void 0:f.Server)==null?void 0:u.ApiVersion}catch{}let i=o&&ox(o);if(!i&&r.toLowerCase().indexOf("error during connect")!==-1)return aC(e,"error",void 0,r),"daemon";if(!i)return aC(e,"unparsed",r),!0;let s=!ix(i,[1,35]);return!s&&await n3(t)?(aC(e,"podman",r),!0):(aC(e,s?"success":"failure",r),s)}function aC(t,e,n,r){let o={outcome:e};n&&(o.version=n),r&&(o.errorMessage=r),t.sendTelemetryEvent("dockerVersion",o)}async function W8(t){try{let e=Bi(t,await t.dockerComposeCLI());return await Qv({...e,print:!0},"version","--short"),!0}catch(e){return(e==null?void 0:e.code)==="ENOENT"?await lt.window.showErrorMessage(We.l10n.t("Docker Compose required"),{modal:!0,detail:t.dockerComposePath!=="docker-compose"?We.l10n.t("Command not found: '{0}'.",t.dockerComposePath):void 0},We.l10n.t("Documentation"))&&lt.env.openExternal(lt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")):await lt.window.showErrorMessage(We.l10n.t("Docker Compose returned an error."),{modal:!0},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1}}var mg=Y(require("vscode"));var h0=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,n){let r=[],o=of(e.getText());if(!o)return r;let i=PC(o)||{};return i.configFilePath=e.uri,Oo(i)&&this._linksForDockerfile(r,i,o,e),"dockerComposeFile"in i&&await this._linksForDockerCompose(r,i,o,e),r}_tryAddDocumentLinkToBucket(e,n,r,o,i){let s=e.positionAt(n),a=e.positionAt(r);s.compareTo(a)!==0&&i.push(new mg.DocumentLink(new mg.Range(s,a),o))}_linksForDockerfile(e,n,r,o){let i=rs(r,["build","dockerfile"])||rs(r,["dockerFile"]);i&&i.type==="string"&&this._tryAddDocumentLinkToBucket(o,i.offset+1,i.offset+i.length-1,Yf(this.fileHost,n),e)}async _linksForDockerCompose(e,n,r,o){let s=(await Yl(this.fileHost,n)).map(c=>mg.Uri.file(c).path),a=rs(r,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(o,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,o.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(o,a.offset+1,a.offset+a.length-1,o.uri.with({path:s[0]}),e)}};var Z=Y(require("vscode")),Ae=require("vscode"),gg=Y(require("path"));var pg=require("vscode"),j8=Y(require("path"));function g0(t){let e=Zl(t);if(e)return`${j8.basename(e)}`;{let n=ew(t);if(n)return n;let r=pc(t);if(r)return Wk(r);let o=Jl(t);return o?o.volumeName:t.Config.Image}}function v0(t,e=!1){let n=gc(t);return e?`${n} (${dO(t)})`:n}function dO(t){let e="",n=t.State.Status,r=new Date(t.State.StartedAt),o=new Date(t.State.FinishedAt);if(r.getFullYear()>1&&o.getFullYear()>1){let i=new Date,s=new Date(r>o?t.State.StartedAt:t.State.FinishedAt);e=` ${hO(i,s)}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+e}function w0(t){let e=t.Name;if(t.Labels&&hg(t)){let r=C0(t);r&&r.gitUrlInfo.repository!=="unknown"&&(e=r.gitUrlInfo.fullRepositoryName)}return e}function y0(t){let e="";if(t.Labels&&hg(t)){let r=C0(t);if(r&&r.gitUrlInfo.repository!=="unknown"){let o=mO(t),i=pO(t);i?e=`#${i}`:o&&(e=`${o}`)}}return e}function hg(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true")return!0}return!1}function mO(t){let e=t.Labels;if(e&&hg(t)&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}function pO(t){let e=t.Labels;if(e&&hg(t)&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}function C0(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true"){let r=e["vsch.local.repository"];return ai(r)}}}var V8=1e3,Y8=V8*60,q8=Y8*60,G8=q8*24,tge=G8*365;function hO(t,e){let n,r=t.getTime()-e.getTime();return(n=Math.round(r/tge))>0?n===1?"1 year":pg.l10n.t("{0} years",n):(n=Math.round(r/G8))>0?n===1?"1 day":pg.l10n.t("{0} days",n):(n=Math.round(r/q8))>0?n===1?"1 hour":pg.l10n.t("{0} hours",n):(n=Math.round(r/Y8))>0?n===1?"1 minute":pg.l10n.t("{0} minutes",n):(n=Math.round(r/V8),n===1?"1 second":pg.l10n.t("{0} seconds",n))}var lC=Y(require("vscode")),uC=require("vscode");async function z8(t){let e=(await Promise.all([rw,ow,$p,Op,Vx].map(async o=>{let{stdout:i}=await et(t,"ps","-a","-q","--filter","status=exited","--filter",`label=${o}`);return i.toString().split(/\r?\n/).filter(s=>!!s)}))).flat(),n;if(e.length){let i=(await hs(t,e)).map(a=>({label:g0(a),description:v0(a,!0),container:a}));i.sort((a,c)=>a.label.localeCompare(c.label));let s=await lC.window.showQuickPick(i,{canPickMany:!0,placeHolder:uC.l10n.t("Select stopped dev containers to delete")});if(!s)return;s.length&&(n=new Set(await zl(t)),await et(t,"rm",...s.map(a=>a.container.Id)))}let r=await J8(t,n);(!e.length||r==="none")&&await lC.window.showInformationMessage(uC.l10n.t("There are no stopped dev containers or unused dev volumes to delete."),{modal:!0})}async function K8(t){await J8(t)==="none"&&await lC.window.showInformationMessage(uC.l10n.t("There are no unused dev volumes to delete."),{modal:!0})}async function J8(t,e){let n=[...new Set([...e?(await zl(t)).filter(r=>!e.has(r)&&r!=="vscode"):[],...await zl(t,[Hk]),...await zl(t,[Jx])])];if(n.length){let o=(await qf(t,n)).map(s=>({label:w0(s),description:y0(s),volume:s}));o.sort((s,a)=>s.label.localeCompare(a.label));let i=await lC.window.showQuickPick(o,{canPickMany:!0,placeHolder:uC.l10n.t("Select unused dev volumes to delete")});if(!i)return"cancel";i.length&&await et(t,"volume","rm",...i.map(s=>s.volume.Name))}return n.length?"done":"none"}var X8=Ae.l10n.t("Stop Container"),Z8=Ae.l10n.t("Reopen Folder locally"),Q8=Ae.l10n.t("Close Workspace");var wr=class{static isGroupItem(e){return!!e&&e.type==="Group"}static isContainerItem(e){return!!e&&e.type==="Container"}static isFolderItem(e){return!!e&&e.type==="Folder"}};var E0=class extends wr{constructor(n,r){super();this.label=n;this.groupType=r}type="Group";async asTreeItem(n,r,o,i){return new Z.TreeItem(this.label,Z.TreeItemCollapsibleState.Expanded)}},vg=class extends wr{constructor(n,r=[],o,i=!1){super();this.container=n;this.folders=r;this.parent=o;this.isDevContainer=i}type="Container";async asTreeItem(n,r,o,i){let s=new Z.TreeItem(this.getContainerLabel(),this.getCollapsibleState());s.description=v0(this.container);let a=this.getContextBase();s.iconPath=x0(r,ige),s.contextValue="exited"+a;let c=!1;return o&&this.container.Id===o.Id?(s.iconPath=x0(r,oge),s.contextValue="active"+a,c=!0):n&&await this.setTreeItemIconAndContext(n,a,s),s.tooltip=this.getHover(c,s.iconPath instanceof Z.ThemeIcon?s.iconPath:new Z.ThemeIcon("vm"),s.label),this.folders.length===1&&this.isDevContainer&&(s.contextValue+="Folder"),s}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?Z.TreeItemCollapsibleState.Expanded:Z.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(n,r,o){switch(this.container.State.Status){case"created":{o.iconPath=new Z.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"paused":{o.iconPath=new Z.ThemeIcon("vm-outline"),o.contextValue="running"+r;break}case"restarting":{o.iconPath=new Z.ThemeIcon("vm-outline"),o.contextValue="exited"+r;break}case"exited":{o.iconPath=new Z.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"running":{o.iconPath=new Z.ThemeIcon("vm-running"),o.contextValue="running"+r;break}}}getTimeElapsed(n){return n?dO(n):""}getContainerLabel(){return g0(this.container)}getHover(n,r,o){let i=new Z.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${o} (${gc(this.container)})  
`),this.repository){let a=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${a} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let s=Xx(this.container);return s&&i.appendMarkdown(`$(file-symlink-directory) ${s}  
`),n?i.appendMarkdown(Ae.l10n.t("$(remote) Connected")):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}_repository;_alreadyCheckedRepository=!1;get repository(){if(!this._alreadyCheckedRepository){let n=pc(this.container);n&&(this._repository=ai(n)),this._alreadyCheckedRepository=!0}return this._repository}inspect(n){return ii(n,this.container.Id)}},tl=class extends wr{constructor(n,r,o){super();this.container=n;this.folder=r;this.isDevContainer=o}type="Folder";async asTreeItem(n,r,o,i){let s=new Z.TreeItem(gg.basename(this.folder.path),Z.TreeItemCollapsibleState.None);return s.description=this.folder.path,s.iconPath=x0(r,age),s.contextValue="attachedFolder",this.isDevContainer&&!pc(this.container)&&!Jl(this.container)&&(s.contextValue="devFolder"),o&&this.container.Id===o.Id&&i===this.folder.path&&(s.iconPath=x0(r,sge),s.tooltip=Ae.l10n.t("Active Folder {0}",String(s.label)),s.contextValue=`active${s.contextValue}`),s}};function nge(t,e,n,r){if(!(!Z.env.remoteName||Z.env.remoteName!=="attached-container"&&Z.env.remoteName!=="dev-container"))return e9(t,e,n,r)}function e9(t,e,n,r){Z.commands.executeCommand("setContext","remote-containers:showDetails",!0);let o=new CO(t,e,r,e.output),i=Z.window.createTreeView("detailsContainers",{treeDataProvider:o});return o.setTitle=s=>{i.title=s},t.subscriptions.push(n.onDidChangeActiveContainer(s=>o.refresh(s))),o}function rge(t,e){let n=[X8];return t&&t.Id===e.Id&&Z.workspace.workspaceFolders&&Z.workspace.workspaceFolders.length>0&&(n.push(Q8),Z.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&n.push(Z8)),n}var gO=class{constructor(e,n){this.dockerParams=e;this.containerId=n}writeEmitter=new Z.EventEmitter;onDidWrite=this.writeEmitter.event;destroyables=[];open(){let{cliHost:e,env:n,output:r}=this.dockerParams;e.exec({cmd:Fs(),args:["logs","-f",this.containerId],env:n,output:r}).then(o=>{this.destroyables.push(o.stdout.on("data",i=>{this.write(i.toString())})),this.destroyables.push(o.stderr.on("data",i=>{this.write(i.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},S0=class{constructor(e,n,r,o,i,s){this.targetsTreeData=e;this.detailsTreeData=n;this.devVolumesTreeData=r;this.dockerParams=o;this.context=i;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(Z.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(Z.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(Z.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(Z.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(Z.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(Z.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(Z.commands.registerCommand("remote-containers.attachToContainerInCurrentWindow",this.commandAttachToContainerInCurrentWindow,this)),e.push(Z.commands.registerCommand("remote-containers.attachToContainerInNewWindow",this.commandAttachToContainerInNewWindow,this)),e.push(Z.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(Z.commands.registerCommand("remote-containers.openInformationAboutMountPerformance",this.openInformationAboutMountPerformance,this)),e.push(Z.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(Z.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(Z.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(Z.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(Z.commands.registerCommand("remote-containers.openFolderInContainerInCurrentWindow",n=>this.commandStartAndOpenFolder(n,{forceReuseWindow:!0}),this)),e.push(Z.commands.registerCommand("remote-containers.openFolderInContainerInNewWindow",n=>this.commandStartAndOpenFolder(n,{forceNewWindow:!0}),this)),e.push(Z.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!wr.isContainerItem(e))return;let n=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?Ae.l10n.t("Stop active container? This will disconnect your current window."):Ae.l10n.t("Stop {0}?",e.getContainerLabel()),r=await Z.window.showWarningMessage(n,{modal:!0},...rge(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(r){case X8:{await HF(this.dockerParams,e.container),e.container=await ii(this.dockerParams,e.container.Id);break}case Q8:{await Z.commands.executeCommand("workbench.action.closeFolder");break}case Z8:{await Z.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!wr.isContainerItem(e))return;let n=await si(this.dockerParams,e.container.Id);if(!n)return;let r=Ae.l10n.t("Remove"),o=await Z.window.showWarningMessage(Ae.l10n.t("Remove this container?"),{modal:!0,detail:Ae.l10n.t("This action is not reversible and deletes the container permanently.")},r);await this.targetsTreeData.withProgress(e.parent,async()=>{o===r&&(await HF(this.dockerParams,e.container),await v5(this.dockerParams,n.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let n=Xx(e);if(n||(n=k3(e)),n){let r=await Fx(this.dockerParams,n);if((await zl(this.dockerParams)).indexOf(n)>=0){let s;r!=null&&r.Labels&&r.Labels["vsch.local.repository.unique"]==="true"?s=Ae.l10n.t("The container is using a volume with a cloned repository."):s=Ae.l10n.t("This is the last container using '{0}'.",n);let a=Ae.l10n.t("Remove");await Z.window.showInformationMessage(s,{modal:!0,detail:Ae.l10n.t("Do you want to remove the volume and the data it contains?")},a)===a&&await BF(this.dockerParams,n)}}}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){wr.isContainerItem(e)&&await this.targetsTreeData.withProgress(e,async()=>{await XI(this.dockerParams,e.container),e.container=await ii(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){wr.isFolderItem(e)&&(await Z.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){wr.isContainerItem(e)&&(this.detailsTreeData||(this.detailsTreeData=e9(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e,n){let r,o;wr.isFolderItem(e)?(o=e,r=e.container):vg.isContainerItem(e)&&(o=e.folders[0],r=e.container),r&&(o&&Zf(o.folder.authority)?(await XI(this.dockerParams,r),await fC(this.dockerParams,r,this.context,!!(n!=null&&n.forceNewWindow),o.folder.path)):await Z.commands.executeCommand("remote-containers.openFolder",o,n))}async commandAttachToContainerInCurrentWindow(e){return this.attachToContainerInternal(e,!1)}async commandAttachToContainerInNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,n){let r;wr.isContainerItem(e)?r=e.container:this.detailsTreeData&&(r=this.detailsTreeData.container),r&&(await XI(this.dockerParams,r),await fC(this.dockerParams,r,this.context,n))}async commandInspectDockerResource(e){let n;(wr.isContainerItem(e)||nl.isImageItem(e)||nl.isVolume(e)||nl.isDevVolume(e))&&(n=await e.inspect(this.dockerParams)),n&&Z.window.showTextDocument(await Z.workspace.openTextDocument({language:"json",content:JSON.stringify(n,null,"	")}))}async openInformationAboutMountPerformance(){await Z.env.openExternal(Z.Uri.parse("https://aka.ms/vscode-remote/containers/open-repo"))}async commandInspectInBasicDevContainer(e){nl.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){nl.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){nl.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}static async commandNewContainer(){var r;let e=[...(r=Z.workspace.workspaceFolders)!=null&&r.length?[{label:Ae.l10n.t("Open Current Folder in Container"),command:"remote-containers.reopenInContainer"}]:[],{label:Ae.l10n.t("Open Folder in Container..."),command:"remote-containers.openFolder"},{label:Ae.l10n.t("Open Workspace in Container..."),command:"remote-containers.openWorkspace"},{label:Ae.l10n.t("New Dev Container..."),command:"remote-containers.createDevContainer"},{label:Ae.l10n.t("Clone Repository in Container Volume..."),command:"remote-containers.openRepositoryInVolume"},{label:Ae.l10n.t("Clone GitHub Pull Request in Container Volume..."),command:"remote-containers.openPullRequestInVolume"},{label:Ae.l10n.t("Try a Sample..."),command:"remote-containers.trySample"}],n=await Z.window.showQuickPick(e,{placeHolder:Ae.l10n.t("Select an action to create a dev container")});if(n)return Z.commands.executeCommand(n.command)}async commandShowContainerLog(e){if(!wr.isContainerItem(e))return;let n=new gO(this.dockerParams,e.container.Id);Z.window.createTerminal({name:e.container.Config.Image,pty:n}).show()}};function t9(t,e,n,r){Z.commands.executeCommand("setContext","remote-containers:showDetails",!1);let o=new vO(t,e,s,n,r),i=Z.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=a=>i.message=a,t.subscriptions.push(Z.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await o.getDockerParams(!0),o.refresh(void 0)))),t.subscriptions.push(Z.commands.registerCommand("remote-containers.newContainer",S0.commandNewContainer)),t.subscriptions.push(Z.commands.registerCommand("remote-containers.pruneVolumes",async()=>{let a=await o.getDockerParams(!0);a&&await K8(a)}));function s(a){let c=nge(t,a,o,n),l=new SO(t,n,r),u=Z.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let f=new S0(o,c,l,a,t,n);t.subscriptions.push(...f.registerCommands()),t.subscriptions.push(OF(t,n.product)(async()=>{o.refresh(void 0),l.refresh(void 0);let m=await Ze(t,r);c&&c.updateDockerParameters(m),f.updateDockerParameters(m)}))}}var vO=class{constructor(e,n,r,o,i){this.context=e;this.resolverResults=n;this.onFirstReveal=r;this.telemetry=o;this.output=i}_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_onDidChangeActiveContainer=new Z.EventEmitter;onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;dockerParams;refreshDockerParams=!1;needsSSHCredentials=!1;passiveSSHAskpassEnv;eventsProcess;setTreeMessage=()=>{};_currentContainer;currentFolder;devContainers=[];attachContainers=[];otherContainers=[];recentAttachEntries=new Map;recentAttachDevContainerEntries=new Map;recentDevComposeEntries=new Map;containerItems=new Map;action=Promise.resolve();set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=ql(this.context.extensionPath,async n=>(this.needsSSHCredentials=!0,mm(n,!1)),this.output));try{this.dockerParams=await Ze(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1);let n=MF();await cC(this.dockerParams,this.telemetry,n)!==!0&&(this.dockerParams=void 0)}catch(n){if(!this.needsSSHCredentials)throw n}}return this.dockerParams}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;let r="exec_create: /root/.vscode-server";if(n.Action==="die"||n.Action==="destroy"||n.Action==="create")this._onDidChangeTreeData.fire();else if(!n.Action.startsWith("exec_create")&&n.Actor&&n.Actor.ID&&this.containerItems.has(n.Actor.ID)){let o=this.containerItems.get(n.Actor.ID);this.dockerParams&&o?(async()=>(o.container=await ii(this.dockerParams,o.container.Id),this._onDidChangeTreeData.fire(o)))():this._onDidChangeTreeData.fire(o);return}else if(n.Action.startsWith(r)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Ux(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}needsDockerStartOrInstallContext=void 0;async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await Z.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await Z.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}hasContainersContext=void 0;async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let n=Z.workspace.workspaceFolders&&Z.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await Z.commands.executeCommand("setContext",n,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let n=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&n.push(new E0(Ae.l10n.t("Dev Containers"),0)),this.otherContainers.length>0&&n.push(new E0(Ae.l10n.t("Other Containers"),2)),n}async getChildDevContainer(e,n){let r=await this.getWorkspaceFolderFromContainer(e),o=r?[new tl(e,r,!0)]:[],i=Zl(e);i&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new tl(e,a,!1))):i&&this.recentAttachEntries.has(e.Id)?o.push(...this.recentAttachEntries.get(e.Id).map(a=>new tl(e,a,!1))):(i=pc(e))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new tl(e,a,!1))):(i=kk(Jl(e)))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new tl(e,a,!1))):i===void 0&&this.recentDevComposeEntries.has(e.Id)&&o.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new tl(e,a,!1)));let s=new vg(e,o,n,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){let n;if(e.groupType===0){let r=this.devContainers.map(async o=>this.getChildDevContainer(o,e));r.push(...this.attachContainers.map(async o=>{let i=new vg(o,this.recentAttachEntries.get(o.Id).map(s=>new tl(o,s,!1)),e);return this.setContainerItems(i),i})),n=await Promise.all(r)}else n=this.otherContainers.map(r=>{let o=new vg(r,[],e);return this.setContainerItems(o),o});return n.sort((r,o)=>r.getContainerLabel().localeCompare(o.getContainerLabel()))}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let n=await Gl(this.dockerParams,!0);if(await this.setHasContainersContext(n.length>0),n.length===0)return[];let r=await hs(this.dockerParams,n);return this.getChildGroups(r)}else{if(wr.isGroupItem(e))return this.getChildContainers(e);if(wr.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=Z.workspace.workspaceFolders,n;if(this.dockerParams){if(e&&e.length>0){let r=this.resolverResults.get(e[0].uri.authority);r&&r.dockerContainerId&&(n=await si(this.dockerParams,r.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let r=[...this.resolverResults.values()][0].dockerContainerId;r&&(n=await si(this.dockerParams,r))}}n!==this._currentContainer&&(this._currentContainer=n)}addContainerToMap(e){if(Zl(e)){this.devContainers.push(e);return}else if(pc(e)){this.devContainers.push(e);return}else if(Jl(e)){this.devContainers.push(e);return}else if(ew(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(n=>{this.addContainerToMap(n)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e,n){let{cliHost:r,dockerCLI:o,dockerComposePath:i}=this.dockerParams,s=It(r.path,e),a=n?Ce.from({scheme:Ke.scheme,path:n}):await d3(r,s,Xy(),hn),c={cliHost:r,dockerPath:o,dockerComposePath:i,appRoot:Z.env.appRoot,extensionPath:this.context.extensionPath,package:await cr(this.context.extensionPath),output:this.output},l=a&&await rg(c,s.rootFolderPath,a);if(l){let u=dr(this.dockerParams.env);return Z.Uri.parse(cw(r.authority,e,l.workspace.workspaceFolder,u),!0)}}async getWorkspaceFolderFromContainer(e){let n=Zl(e);if(n){let r=R3(e);return this.getWorkspaceFolderFromHostWorkspace(n,r)}else{let r=pc(e),o=Xx(e),i=N3(e),s=this.dockerParams;if(r){let c=dr(s.env);return Z.Uri.parse(Wi(s.cliHost.authority,r,o,i,!1,c,void 0))}let a=Jl(e);if(a){let c=dr(s.env);return Z.Uri.parse(Wi(s.cliHost.authority,void 0,a.volumeName,a.folder,!1,c,void 0))}}}async getWorkspaceFolderFromHostPath(e){let n=this.dockerParams.cliHost,r=await W3(n,e,this.output),o=j3(n,r,e),i=dr(this.dockerParams.env);return Z.Uri.parse(cw(n.authority,e,o,i),!0)}getWorkspaceFolderFromRepository(e,n,r){let o=this.dockerParams,i=dr(o.env);return Z.Uri.parse(Wi(o.cliHost.authority,e,n,r,!1,i,void 0),!0)}getWorkspaceFolderFromDevContainerInVolume(e,n){let r=this.dockerParams,o=dr(r.env);return Z.Uri.parse(Wi(r.cliHost.authority,void 0,e,n,!1,o,void 0),!0)}async findComposeTargetContainer(e,n){var r;return(r=n.find(o=>Zl(o)===e))==null?void 0:r.Id}trySetEntryWithAttachAuthority(e,n,r){let o;if("containerName"in n){let i=r.find(s=>s.Name===n.containerName);i&&(o=i.Id)}else o=n.containerId;o&&(this.recentAttachEntries.has(o)?this.recentAttachEntries.get(o).push(e):this.recentAttachEntries.set(o,[e]))}async trySetEntryWithDevAuthority(e,n,r,o){let i=n.hostPath,s=o[i];if(s||(s=await this.getWorkspaceFolderFromHostPath(n.hostPath),o[i]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(n.hostPath)?this.recentAttachDevContainerEntries.get(n.hostPath).push(e):this.recentAttachDevContainerEntries.set(n.hostPath,[e]);let a=await this.findComposeTargetContainer(n.hostPath,r);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,n){this.getWorkspaceFolderFromRepository(n.repositoryPath,n.volumeName,n.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(n.repositoryPath)?this.recentAttachDevContainerEntries.get(n.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(n.repositoryPath,[e]))}trySetEntryWithDevContainerInVolumeAuthority(e,n){if(this.getWorkspaceFolderFromDevContainerInVolume(n.volumeName,n.folder).path!==e.path){let o=kk(n);this.recentAttachDevContainerEntries.has(o)?this.recentAttachDevContainerEntries.get(o).push(e):this.recentAttachDevContainerEntries.set(o,[e])}}trySetEntryWithVolumeAuthority(e,n){let r=n.volumeName;r&&(this.recentAttachEntries.has(r)?this.recentAttachEntries.get(r).push(e):this.recentAttachEntries.set(r,[e]))}async trySetEntry(e,n,r){if(!e||!e.folderUri&&!e.workspace.configPath)return;let o=e.folderUri??e.workspace.configPath,i=Zf(o.authority);if(i)this.trySetEntryWithAttachAuthority(o,i,n);else{let s=lo(o.authority);s&&(un(s)?await this.trySetEntryWithDevAuthority(o,s,n,r):co(s)?this.trySetEntryWithRepoAuthority(o,s):Jf(s)?this.trySetEntryWithDevContainerInVolumeAuthority(o,s):this.trySetEntryWithVolumeAuthority(o,s))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let n=await Z.commands.executeCommand("_workbench.getRecentlyOpened");if(n&&n.workspaces){let r={};for(let o of n.workspaces)await this.trySetEntry(o,e,r)}}withProgress(e,n){return this.action=this.action.then(()=>n()),this.refresh(e)}};var nl=class{constructor(e){this.label=e}detail;context;command;type="Default";static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type==="Image"}static isVolume(e){return!!e&&e.type==="Volume"}static isDevVolume(e){return!!e&&e.type==="DevVolume"}},wO=class{constructor(e){this.detail=e}type="Image";context="image";label=Ae.l10n.t("Image");inspect(e){return t3(e,this.detail)}},yO=class{constructor(e,n,r){this.label=e;this.detail=n;this.volumeDetails=r}type="Volume";context="volume";async inspect(e){return Fx(e,this.volumeDetails)}},CO=class{constructor(e,n,r,o){this.context=e;this.dockerParams=n;this.telemetry=r;this.output=o}_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_container;setTreeTitle=()=>{};updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let n=new Z.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?Z.TreeItemCollapsibleState.Expanded:Z.TreeItemCollapsibleState.None);return n.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(n.description=e.detail,n.tooltip+=` ${n.description}`),n.contextValue=e.context,n.command=e.command,n}async getAttributes(e,n,r){let o=[];n&&o.push({label:Ae.l10n.t("Workspace"),detail:n});let i=pc(e.container);i&&o.push({label:Ae.l10n.t("Repository"),detail:i});let s=Jl(e.container);return s&&(o.push({label:Ae.l10n.t("Volume"),detail:s.volumeName}),o.push({label:Ae.l10n.t("Folder"),detail:s.folder})),o.push({label:Ae.l10n.t("Name"),detail:e.container.Name}),o.push(new wO(e.container.Config.Image)),r&&o.push({label:Ae.l10n.t("Configuration"),detail:r,command:{title:Ae.l10n.t("Open Dev Container File"),command:"remote-containers.openDevContainerFile",arguments:[r]},context:"devContainer"}),o}async getMounts(e){let n=[];return e&&e.Mounts.forEach(r=>{if(r.Type==="volume"){let o=r.Name,i=new yO(Ae.l10n.t("Volume"),o,o),s={label:Ae.l10n.t("Destination"),detail:r.Destination};n.push({label:Ae.l10n.t("Volume mount"),detail:[i,s]})}else if(r.Type==="bind"){let o={label:Ae.l10n.t("Source"),detail:r.Source},i={label:Ae.l10n.t("Destination"),detail:r.Destination},s=this.dockerParams&&["win32","darwin"].includes(this.dockerParams.cliHost.platform)?[{label:Ae.l10n.t("I/O performance"),detail:Ae.l10n.t("reduced by bridging OSes"),context:"mountPerformanceInfo",command:{command:"remote-containers.openInformationAboutMountPerformance"}}]:[];n.push({label:Ae.l10n.t("Bind mount"),detail:[o,i,...s]})}}),n}async getChildrenFromRoot(e){let n=[],r=Zl(e.container),o=(e.container.Config.Labels||{})[zf];n.push({label:Ae.l10n.t("Attributes"),detail:await this.getAttributes(e,r,o),type:"Title"});let i;this.dockerParams&&(i=await ii(this.dockerParams,e.container.Id));let s=await this.getMounts(i);return s.length>0&&n.push({label:Ae.l10n.t("Mounts"),detail:s,type:"Title"}),n}async testContainer(){let e=!0;try{(this.dockerParams?await ii(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle(Ae.l10n.t("Details (Containers)"))),e}async getChildren(e){if(this._container===void 0)return[];let n=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),n=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&n.push(...e.detail),n}async refresh(e){this.dockerParams=await Ze(this.context,this.output),await cC(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},EO=class extends nl{type="DevVolume";volumeDetails;createdAt;constructor(e){super(e.Name),this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),n=new Z.TreeItem(e,Z.TreeItemCollapsibleState.None);return n.iconPath=this.iconPath,n.description=this.getDescription(),this.isUniqueVolume()?n.contextValue="uniqueDevVolume":n.contextValue="devVolume",n}isUniqueVolume(){return hg(this.volumeDetails)}getLabel(){return w0(this.volumeDetails)}getDescription(){return y0(this.volumeDetails)}getBranchName(){return mO(this.volumeDetails)}getPullRequestId(){return pO(this.volumeDetails)}getRepository(){return C0(this.volumeDetails)}get iconPath(){return new Z.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let r=new Date,o=new Date(this.volumeDetails.CreatedAt);e=Ae.l10n.t("{0} ago",hO(r,o))}return this.createdAt=e,e}async inspect(e){return Fx(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await Z.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await Z.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await zl(e)).indexOf(this.volumeDetails.Name)>=0)){await Z.window.showInformationMessage(Ae.l10n.t("Volume '{0}' is in use and cannot be removed.",this.volumeDetails.Name),{modal:!0});return}let o=Ae.l10n.t("Remove");await Z.window.showInformationMessage(Ae.l10n.t("Are you sure you want to remove volume '{0}'?",this.volumeDetails.Name),{modal:!0},o)===o&&await BF(e,this.volumeDetails.Name)}},SO=class{constructor(e,n,r){this.context=e;this.telemetry=n;this.output=r}dockerParams;_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;eventsProcess;async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){if(!this.dockerParams){this.dockerParams=await Ze(this.context,this.output,void 0,void 0);let e=MF();await cC(this.dockerParams,this.telemetry,e)!==!0&&(this.dockerParams=void 0)}return this.dockerParams}async setHasVolumesContext(e){await Z.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let n=await Ze(this.context,this.output),r=await Uo(n),o=await qf(n,r),i=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=o.filter(i);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new EO(a))}async resolveTreeItem(e,n){let r=await Ze(this.context,this.output),o=await this.getAssociatedContainers(r,n),i=n.getLabel(),s=n.getRepository(),a=n.getBranchName(),c=n.getPullRequestId(),l=n.getTimeElapsed();return o.length>0?e.tooltip=this.renderMarkdown(i,s,a,c,l,o.join(", ")):e.tooltip=this.renderMarkdown(i,s,a,c,l,Ae.l10n.t("None")),e}async getAssociatedContainers(e,n){let r=[],o=await Gl(e,!0),i=await hs(e,o);for(let s of i)for(let a of s.Mounts)a.Type==="volume"&&a.Name===n.volumeDetails.Name&&r.push(gc(s));return r}renderMarkdown(e,n,r,o,i,s){let a=new Z.MarkdownString(void 0,!0);if(n){let c=n.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=n.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=n.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),r&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${r}](${l}/tree/${r})
`):a.appendMarkdown(`$(git-compare) ${r}
`),a.appendMarkdown(`&nbsp;  
`)),o&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${o}](${l}/pull/${o})
`):a.appendMarkdown(`$(git-pull-request-create) #${o}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;(n.Action==="die"||n.Action==="destroy"||n.Action==="create"||n.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Ux(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},oge="vm-active",ige="vm-default",sge="folder-active",age="folder";function x0(t,e){let n=`${e}.svg`;return{light:Z.Uri.file(t.asAbsolutePath(gg.join("resources","light",n))),dark:Z.Uri.file(t.asAbsolutePath(gg.join("resources","dark",n))),highContrast:Z.Uri.file(t.asAbsolutePath(gg.join("resources","highContrast",n)))}}var LO=require("util");var er=Y(require("vscode")),Ba=require("vscode");async function _0(t,e,n,r={},o={}){let i=await yx({params:t,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:e,remotePtyExec:n,remoteExecAsRoot:void 0,rootShellServer:void 0,remoteWaylandSocket:void 0}),{hostOrContainerPort:s,connectionToken:a,remoteEnv:c,serverDownloaded:l}=await Bl(t,i,r,o);return{params:t,properties:i,config:void 0,resolvedAuthority:{host:dc,port:s,connectionToken:a,extensionHostEnv:c},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:l}}async function xO(t,e,n){var r,o;try{if(!await Os(t))return;let{cliHost:i,env:s,output:a}=e,c;if(!(n!=null&&n.name)){let p=(await X({exec:i.exec,cmd:"kubectl",args:["get","pods","-o","json"],env:s,output:a})).stdout.toString(),h=JSON.parse(p).items;if(!h.length){await er.window.showInformationMessage(Ba.l10n.t("No pods found."),{modal:!0},Ba.l10n.t("Show Log"))&&er.commands.executeCommand(it);return}if(c=(r=await er.window.showQuickPick(h.map(g=>({label:g.metadata.name,description:g.metadata.namespace,pod:g})),{placeHolder:Ba.l10n.t("Select pod")}))==null?void 0:r.pod,!c)return}if(!c){let d=["get","pod",n.name,"-o","json"];n.namespace&&d.push("--namespace",n.namespace);let h=(await X({exec:i.exec,cmd:"kubectl",args:d,env:s,output:a})).stdout.toString();c=JSON.parse(h)}let l=c.spec.containers||[];if(!l.length){await er.window.showInformationMessage(Ba.l10n.t("No containers found."),{modal:!0},Ba.l10n.t("Show Log"))&&er.commands.executeCommand(it);return}let u=l.length>1?(o=await er.window.showQuickPick(l.map(d=>({label:d.name,description:d.image,container:d})),{placeHolder:Ba.l10n.t("Select container")}))==null?void 0:o.container:l[0];if(!u)return;let f=(await X({exec:i.exec,cmd:"kubectl",args:["config","current-context"],env:s,output:a})).stdout.toString().trim(),m={remoteAuthority:fge(er.env.remoteAuthority,{context:f,podname:c.metadata.name,namespace:c.metadata.namespace,name:u.name,image:u.image})};t.extensionMode===er.ExtensionMode.Development&&(m.reuseWindow=!0),await er.commands.executeCommand("vscode.newWindow",m)}catch(i){e.output.write((i==null?void 0:i.stack)||(i==null?void 0:i.message)||String(i)),er.commands.executeCommand(it),await er.window.showErrorMessage(Ba.l10n.t("Error while attaching to Kubernetes container."),{detail:i==null?void 0:i.message,modal:!0})}}async function n9(t,e,n,r,o,i){return await Os(t)?{...await cge(t,e,n,r,o,i),isTrusted:!0}:(await er.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function cge(t,e,n,r,o,i){let s;return er.window.withProgress({location:er.ProgressLocation.Notification,title:Ku,cancellable:!1},async a=>{try{let c=dge(n);if(!c)throw new Error(`Invalid authority: ${n}`);let{options:l,parentAuthority:u}=c;if(u&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let f=process.cwd(),m=ts(),d=await Jr(r.execServer?{server:r.execServer,authority:u}:void 0,void 0,f,hn,m,t.extensionPath,await _r(),e.product,o.log,Ei);s=await zu({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:a,cliHost:d,env:d.env,cwd:f,wslSettings:m,isLocalContainer:eu(u,{}),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${l.name} in ${l.podname} (${l.image})`);let p=lge(d.exec,l),h=uge(d.ptyExec,l);return await _0(s,p,h)}catch(c){let l=c instanceof pe?c:new pe({description:Ba.l10n.t("An error occurred attaching to the container."),originalError:c});throw l.actions=[...Zu,el,Fa,Xu,Qc],l}}).then(a=>(ns(e,"k8s-container","success",o.sessionStart,s,void 0,void 0,a.properties),a),a=>{let c=a instanceof pe?a:new pe({description:Ba.l10n.t("An error occurred attaching to the container."),originalError:a});return ns(e,"k8s-container","failure",o.sessionStart,s,void 0,void 0,c.containerProperties,c),Oa(c,"k8s-container",e,!0,o.log)})}function lge(t,e){return async function(n){return t(r9(e,n))}}function uge(t,e){return async function(n){return t(r9(e,n))}}function r9(t,e){let n=["exec","-it",t.podname];if(t.context&&n.push("--context",t.context),t.namespace&&n.push("--namespace",t.namespace),n.push("--container",t.name,"--"),e.cwd&&n.push("/bin/sh","-c",'cd "$1" && shift && "$@"',"--",e.cwd),e.env){let r=Object.keys(e.env);if(r.length){n.push("env");for(let o of r)n.push(`${o}=${e.env[o]}`)}}return n.push(e.cmd),e.args&&n.push(...e.args),{cmd:"kubectl",args:n,output:e.output}}function fge(t,e){return t=Qf(t),`k8s-container+${Buffer.from(JSON.stringify(e),"utf8").toString("hex")}${t?`@${t}`:""}`}function dge(t){let e=tu(t);if((e==null?void 0:e.name)!=="k8s-container")return;try{return{parentAuthority:e.parentAuthority,options:JSON.parse(Buffer.from(e.config,"hex").toString("utf8"))}}catch{}let n=e.config.split("+").reduce((r,o)=>{let i=o.indexOf("=");return i!==-1&&(r[o.substring(0,i)]=decodeURIComponent(o.substring(i+1))),r},{});return{parentAuthority:e.parentAuthority,options:n}}var Bn=Y(require("vscode")),Us=require("vscode");async function o9(t,e){var n;try{if(!await Os(t))return;let{cliHost:r,env:o,output:i}=e;if(process.platform!=="darwin"){await Bn.window.showErrorMessage(Us.l10n.t("Apple Containerization is only available on macOS."),{modal:!0})&&Bn.commands.executeCommand(it);return}let s;try{await X({exec:r.exec,cmd:"which",args:["container"],env:o,output:i})}catch{await Bn.window.showErrorMessage(Us.l10n.t("Apple Container command not found."),{modal:!0,detail:Us.l10n.t("Please ensure that the Apple Container CLI is installed and available in your PATH.")},Us.l10n.t("Show Log"))&&Bn.commands.executeCommand(it);return}let c=(await X({exec:r.exec,cmd:"container",args:["list","--format","json"],env:o,output:i})).stdout.toString(),l;try{l=JSON.parse(c),Array.isArray(l)||(l=[l])}catch(f){throw i.write(`Failed to parse container list JSON: ${f}`),new Error(`Failed to parse container list: ${f}`)}if(!l.length){await Bn.window.showInformationMessage(Us.l10n.t("No Apple containers found."),{modal:!0},Us.l10n.t("Show Log"))&&Bn.commands.executeCommand(it);return}if(s=(n=await Bn.window.showQuickPick(l.map(f=>({label:f.configuration.id,description:`(${f.status})`,container:f})),{placeHolder:Us.l10n.t("Select Apple container")}))==null?void 0:n.container,!s)return;let u={remoteAuthority:gge(Bn.env.remoteAuthority,{id:s.configuration.id,image:s.configuration.image.reference})};t.extensionMode===Bn.ExtensionMode.Development&&(u.reuseWindow=!0),await Bn.commands.executeCommand("vscode.newWindow",u)}catch(r){e.output.write((r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)),Bn.commands.executeCommand(it),await Bn.window.showErrorMessage(Us.l10n.t("Error while attaching to Apple container."),{detail:r==null?void 0:r.message,modal:!0})}}async function i9(t,e,n,r,o,i){return await Os(t)?{...await mge(t,e,n,r,o,i),isTrusted:!0}:(await Bn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function mge(t,e,n,r,o,i){let s;return Bn.window.withProgress({location:Bn.ProgressLocation.Notification,title:Ku,cancellable:!1},async c=>{try{let l=vge(n);if(!l)throw new Error(`Invalid authority: ${n}`);let{options:u,parentAuthority:f}=l;if(f&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let m=process.cwd(),d=ts(),p=await Jr(r.execServer?{server:r.execServer,authority:f}:void 0,void 0,m,hn,d,t.extensionPath,await _r(),e.product,o.log,Ei);s=await zu({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:c,cliHost:p,env:p.env,cwd:m,wslSettings:d,isLocalContainer:eu(f,{}),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${u.id} (${u.image})`);let h=pge(p.exec,u),g=hge(p.ptyExec,u);return await _0(s,h,g)}catch(l){let u=l instanceof pe?l:new pe({description:Us.l10n.t("An error occurred attaching to the Apple container."),originalError:l});throw u.actions=[...Zu,el,Fa,Xu,Qc],u}}).then(c=>(ns(e,"apple-container","success",o.sessionStart,s,void 0,void 0,c.properties),c),c=>{let l=c instanceof pe?c:new pe({description:Us.l10n.t("An error occurred attaching to the Apple container."),originalError:c});return ns(e,"apple-container","failure",o.sessionStart,s,void 0,void 0,l.containerProperties,l),Oa(l,"apple-container",e,!0,o.log)})}function pge(t,e){return async function(n){return t(s9(e,n))}}function hge(t,e){return async function(n){return t(s9(e,n))}}function s9(t,e){let n=["exec","-i"];if(e.env){let r=Object.keys(e.env);if(r.length)for(let o of r)n.push("--env",`${o}=${e.env[o]}`)}return e.cwd&&n.push("-w",e.cwd),n.push(t.id),n.push(e.cmd),e.args&&n.push(...e.args),{cmd:"container",args:n,output:e.output}}function gge(t,e){return t=Qf(t),`apple-container+${Buffer.from(JSON.stringify(e),"utf8").toString("hex")}${t?`@${t}`:""}`}function vge(t){let e=tu(t);if((e==null?void 0:e.name)==="apple-container")try{return{parentAuthority:e.parentAuthority,options:JSON.parse(Buffer.from(e.config,"hex").toString("utf8"))}}catch{return}}var _t=Y(require("vscode")),At=require("vscode"),ym=Y(require("fs")),wg=Y(require("os")),wm=Y(require("path")),D0=require("child_process"),yg=require("util");function I0(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function a9(t,e){let n=t.globalStorageUri,r=Lo.joinPath(n,"cli-bin");await _t.workspace.fs.createDirectory(r);let o="";try{o=(await _t.workspace.fs.readFile(Lo.joinPath(r,"vscode-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}o!==process.execPath&&(await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-app-root"),Buffer.from(_t.env.appRoot,"utf-8")),await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-quality"),Buffer.from(e.quality??"","utf-8")),await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-machine-id"),Buffer.from(_t.env.machineId,"utf-8")),await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-path"),Buffer.from(process.execPath,"utf-8")));let i="";try{i=(await _t.workspace.fs.readFile(Lo.joinPath(r,"remote-containers-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}if(i===t.extensionPath)return;let s=Lo.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),a=I0(e),c=`devcontainer${a}`,l=[{source:"devcontainer",destination:c},{source:"devcontainer.cmd",destination:`devcontainer${a}.cmd`}];for(let u of l)await _t.workspace.fs.copy(Lo.joinPath(s,u.source),Lo.joinPath(r,u.destination),{overwrite:!0});process.platform!=="win32"&&await ym.promises.chmod(Lo.joinPath(r,c).fsPath,493),await _t.workspace.fs.writeFile(Lo.joinPath(r,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function wge(t,e){let n=I0(e),r="";try{let o=await ni("powershell.exe");if(r=(await(0,yg.promisify)(D0.exec)(`"${o}" -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`,{env:so(process.env)})).stdout.toString().trim(),r.indexOf(t)>=0)return await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI is already in your PATH"),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)}),!0;let s=At.l10n.t("Add"),a=At.l10n.t("Copy CLI Path");switch(await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be added to your PATH"),{modal:!0},s,a)){case s:let l=(0,yg.promisify)(D0.exec)(`"${o}"  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${r};${t}', 'User')`,{env:so(process.env)}),u=_t.window.showInformationMessage(At.l10n.t("The devcontainer CLI has been added to your PATH"),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});await Promise.all([l,u]);break;case a:await _t.env.clipboard.writeText(t),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});break}return!0}catch{return!1}}async function yge(t,e){let r=(process.env.PATH??"").split(":"),o=[wm.join(wg.homedir(),"bin"),wm.join(wg.homedir(),".local/bin")],i="/usr/local/bin";wg.platform()==="darwin"&&o.push(i);let s=(0,yg.promisify)(ym.stat);for(let a of o){if(r.findIndex(p=>p===a)<0)continue;try{await s(a)}catch{continue}let c=I0(e),l=wm.join(a,`devcontainer${c}`);try{let p=await s(l);return console.log(p),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI is already symlinked in {0}",a),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let u=At.l10n.t("Create"),f=At.l10n.t("Copy CLI Path"),m=await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be in your PATH"),{detail:At.l10n.t("Create a symlink in {0}?",a),modal:!0},u,f),d=wm.join(t,`devcontainer${c}`);switch(m){case u:if(a===i){if(!await Cge(d,l))break}else await(0,yg.promisify)(ym.symlink)(d,l);await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI has been symlinked in {0}",a),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break;case f:await _t.env.clipboard.writeText(t),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break}return!0}return!1}async function Cge(t,e){try{return await ym.promises.symlink(t,e),!0}catch(n){if(n.code!=="EACCES"&&n.code!=="ENOENT")throw n;let r=At.l10n.t("OK");if(await _t.window.showInformationMessage(At.l10n.t("This will now prompt with 'osascript' for Administrator privileges to install the shell command."),{modal:!0},r)===r){let s=`"${await ni("osascript")}" -e "do shell script \\"mkdir -p ${wm.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,yg.promisify)(D0.exec)(s),!0}return!1}}async function c9(t,e){let n=t.globalStorageUri,r=Lo.joinPath(n,"cli-bin").fsPath;switch(wg.platform()){case"win32":if(await wge(r,e))return;break;case"darwin":case"linux":if(await yge(r,e))return;break}let o=At.l10n.t("Copy CLI Path");if(await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be included your PATH"),{modal:!0},o)===o){await _t.env.clipboard.writeText(r);let s=I0(e);await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${s}`)})}}var Eo=Y(require("vscode")),Fr=require("vscode"),_O=Y(require("path"));var Ege=Fr.l10n.t("Select Dev Container Configuration"),Sge=Fr.l10n.t('[Creating Dev Container (show log)](command:remote-containers.revealLogTerminal "Show details in terminal")'),l9="alpine:3.16.3";async function u9(t,e,n){let r=await xge(t,e,n);if(!r)return;let{volumeAndFolderName:o}=r,i=dr(e.env),s=Eo.Uri.parse(Wi(e.cliHost.authority,void 0,o,o,!1,i,void 0));await Ju({uri:s,type:"folder",label:Fr.l10n.t("{0} [Dev Container]",o)}),await Eo.commands.executeCommand("vscode.openFolder",s)}async function xge(t,e,n){let{output:r}=e,o=et(e,"pull",l9),i=await ZF({telemetry:n,output:r,openConfigurationCommandId:dm,showLogCommandId:it},Ege,!0);i.askForTrust=!0;let s=await Uo(e),a=async()=>{i.skipOptions=!0;let f=await t0(i,void 0,void 0,Promise.resolve(void 0));if(f==="back"||!f)return;let m=f.metadata.template;if(YF.indexOf(m.owner)===-1){let d=`@${m.owner}`,p={label:Fr.l10n.t("Trust {0}",d),description:Fr.l10n.t("from GitHub"),buttons:[{iconPath:new Eo.ThemeIcon("info"),tooltip:Fr.l10n.t("Open Documentation")}]},h={label:Fr.l10n.t("Back")},g={label:Fr.l10n.t("Cancel")},v=i.quickPick.onDidTriggerItemButton(()=>{Eo.env.openExternal(Eo.Uri.parse(m.documentationURL))}),C=await Co(i.quickPick,[p,h,g],Fr.l10n.t("The {0} is from the {1} GitHub owner/organization.",m.name,d),void 0,void 0,!0);if(v.dispose(),!C||C===g)return;if(C==="back"||C===h)return a()}return f9(i,f,s,_ge(f.id,s),a)},c=await a();if(!c){i.quickPick.dispose();return}let{selectedTemplate:l,volumeName:u}=c;return Eo.window.withProgress({location:Eo.ProgressLocation.Notification,title:Sge,cancellable:!1},async()=>{let f;try{await kp(e,u,[`${Jx}=true`]),await o;let{stdout:m}=await et(e,...Dge(u,Kf()));f=m.toString().trim();let d=_O.posix.join(Kf(),u),p=gs(e,f,"root"),h=await Qs(e,f,"root",hn),g=io("container",d,{},p,h,()=>{throw new Error("not implemented")},"node",r);await g.mkdirp(d);let v=It(_O.posix,d),C=await JF(i,g,v.configFolderPath,"workspace",l);return i.quickPick.hide(),C?{volumeAndFolderName:u}:void 0}finally{if(f)try{await Hi(e,f)}catch{}}})}function _ge(t,e){let n,r=(/([^/:]+)(:[^/:]+)?$/.exec(t)||[])[1]||"devcontainer",o=0;do n=`${r}${o++?`-${o}`:""}`;while(e.indexOf(n)!==-1);return n}async function f9(t,e,n,r,o){let{quickPick:i}=t;i.placeholder=Fr.l10n.t("Dev container name"),i.selectedItems=[],i.value=r,i.buttons=[Eo.QuickInputButtons.Back];let s={label:Fr.l10n.t("Additional Options..."),alwaysShow:!0},a=!1;function c(){a=!1,i.items=[{label:Fr.l10n.t("Create Dev Container"),description:i.value,alwaysShow:!0},s]}function l(d){a=!0,i.items=[{label:d,alwaysShow:!0}]}c();let u=[],f=await new Promise(d=>{u=[i.onDidAccept(()=>{i.value?a||d({volumeName:i.value,options:i.selectedItems[0]===s}):l(Fr.l10n.t("The name cannot be empty."))}),i.onDidHide(()=>d(void 0)),i.onDidChangeValue(p=>{n.indexOf(p)!==-1?l(Fr.l10n.t("A Docker volume with this name already exists.")):p&&!/^[a-zA-Z0-9]/.test(p)?l(Fr.l10n.t("Only alphanumeric characters are allowed as the first character.")):p&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(p)?l(Fr.l10n.t("Only alphanumeric characters, periods, underscores and hyphens are allowed.")):c()}),i.onDidTriggerButton(()=>d("back"))]});if(u.forEach(d=>d.dispose()),!f)return;if(f==="back")return o();let{volumeName:m}=f;if(f.options){let p=await(async()=>{t.skipOptions=!1;let h=await hm(t,e.metadata.template,Promise.resolve(void 0),async()=>{let g=await f9(t,e,n,m,o);if(g)return m=g.volumeName,g.selectedTemplate});if(!(h==="back"||!h))return h})();if(!p)return;e=p}return i.busy=!0,i.enabled=!1,{volumeName:m,selectedTemplate:e}}function Dge(t,e){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,l9,"sleep","infinity"]}var P0=Y(require("crypto")),m9=require("path"),p9=Y(require("vscode")),DO=typeof __non_webpack_require__<"u"?__non_webpack_require__:require,Ige=["You may install and use any number of copies of the software only with Microsoft Visual Studio,","Visual Studio for Mac, Visual Studio Code, Azure DevOps, Team Foundation Server, and successor Microsoft products","and services (collectively, the \u201CVisual Studio Products and Services\u201D) to develop and test your applications.","The software is licensed, not sold. This agreement only gives you some rights to use the software. Microsoft reserves all other rights.","You may not:","work around any technical limitations in the software that only allow you to use it in certain ways;","reverse engineer, decompile or disassemble the software, or otherwise attempt to derive the source code for the software,","except and to the extent required by third party licensing terms governing use of certain open source components that may be included in the software;","remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;","use the software in any way that is against the law or to create or propagate malware; or","share, publish, distribute, or lease the software (except for any distributable code, subject to the terms above),","provide the software as a stand-alone offering for others to use, or transfer the software or this agreement to any third party."].join(" "),Pge="aes-192-cbc",h9="SEE  LICENSE.txt",bge=P0.scryptSync(Ige,h9,24),Tge=Buffer.from(h9);var g9={DevContainersOnlyLicensedForMicrosoftVSCode(){var t;return d9(((t=DO.main)==null?void 0:t.paths.map(e=>e+dC("f70715b752c50649525efc24a1d133eb")))??[])||d9([m9.posix.join(p9.env.appRoot,dC("9e4708daf438152c7e63cf9f3b24d92c"))])}};function d9(t){try{let e=DO.resolve(dC("bdf000de72c4f5f5d7cff4fa6dd90b95"),{paths:t}),n=DO(e);return!(!n[dC("0fd50b75eeecb3b44b3932921442f72c")]||!n[dC("80c3ae7905cba507debf9b326fc386ab")])}catch{return!1}}function dC(t){let e=P0.createDecipheriv(Pge,bge,Tge),n=e.update(t,"hex","utf8");return n+=e.final("utf8"),n}U.l10n.bundle&&E9.config({contents:U.l10n.bundle});var bO=class{constructor(e,n,r){this.context=e;this.output=n;this.telemetry=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let n=x9.parse(e.query);if(!n.url){U.window.showErrorMessage(re.l10n.t("Failed to handle the URI '{0}' expected a 'url' query parameter.",e.toString()),{modal:!0});return}let r;if(Array.isArray(n.url)?r=n.url[0]:r=n.url,!await to(this.context,this.output.log,this.output.onDidInput,this.telemetry,"cloneInVolume"))return;let o=await Ze(this.context,this.output.log);if(await oR(o.cliHost,r,o.cliHost.type==="local"?await jI(this.output.log):{},this.output.log)===!1){U.commands.executeCommand(it),await U.window.showErrorMessage(re.l10n.t("Cannot access the repository '{0}'.",r),{modal:!0});return}await U.commands.executeCommand(WI,n.url)}};async function kge(t){var k;I5();let e=new Date;D5(t);let n,r=new Promise(E=>n=E);R5(r);let o=await cr(t.extensionPath),i=await Iv(U.env.appRoot);P5(t,i);let s=_5(t,o,i),a=await T5(o,i),c=new Gy(t.logPath,e,a);if(t.subscriptions.push(U.commands.registerCommand(it,()=>c.show())),!g9.DevContainersOnlyLicensedForMicrosoftVSCode()){c.log.write("The Dev Containers extension is supported only in Microsoft versions of VS Code");return}let{channel:l,postCreate:u}=x5(c.log,e);t.subscriptions.push(U.commands.registerCommand(FF,()=>l.show()));let f,m=new Promise(E=>f=E);t.subscriptions.push(U.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:zy(c,u,Qn.results,n,f,async(E,_,T,D)=>f8(t,s,E,_,Qn.onRemoveOnShutdownChanged,T,D)),async getCanonicalURI(E){let _=lo(E.authority);if(_&&un(_)){let{hostPath:T,settings:D}=_;return xr(T)?Sp(T,c.log):Al(D)?Fv(D.host,T):Fl(_.parentAuthority)?T.startsWith("/")?nu(_.parentAuthority,T):E:hc(_.parentAuthority)?T.startsWith("/")?nu(_.parentAuthority,T):E:U.Uri.file(T)}return E}}),U.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:zy(c,u,Qn.results,n,f,async(E,_,T,D)=>D8(t,s,E,_,T,D))}),U.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:zy(c,u,Qn.results,n,f,async(E,_,T,D)=>n9(t,s,E,_,T,D))}),U.workspace.registerRemoteAuthorityResolver("apple-container",{resolve:zy(c,u,Qn.results,n,f,async(E,_,T,D)=>i9(t,s,E,_,T,D))}),U.window.registerUriHandler(new bO(t,c,s)));let d=async(E,_,T)=>{if(!await to(t,c.log,c.onDidInput,s,"openInContainer"))return;let D=await Ze(t,c.log),b;if(wr.isFolderItem(E)?b=E.folder:b=E,b.scheme==="vscode-remote"&&b.authority.startsWith("dev-container+"))return U.commands.executeCommand("vscode.openFolder",b,T||{});{let R=It(D.cliHost.path,_e(b,D.cliHost.platform));return mC(t,R,D,c.onDidInput,s,_,T)}};t.subscriptions.push(U.commands.registerCommand("remote-containers.openFolder",async(E,_)=>E?d(E,!1,_):IO(t,!0,s,!1,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openWorkspace",async(E,_)=>E?d(E,!1,_):IO(t,!1,s,!1,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand(l5,async E=>Cg(t,s,c.log,c.onDidInput,E))),t.subscriptions.push(U.commands.registerCommand(WI,async E=>Cg(t,s,c.log,c.onDidInput,E,ci))),t.subscriptions.push(U.commands.registerCommand(f5,async()=>{var L,N,B;let _=(await((L=U.extensions.getExtension("vscode.git"))==null?void 0:L.activate())).getAPI(1);if(_.repositories.length===0)return;let T=_.repositories.reduce((W,z)=>{let V=z.state.remotes.find(q=>{var ce,Be;return q.name===((Be=(ce=z.state.HEAD)==null?void 0:ce.upstream)==null?void 0:Be.remote)});return V!=null&&V.pushUrl&&W.push({repository:z,label:V.pushUrl}),W},[]),D=T[0];if(T.length>1){let W=await U.window.showQuickPick(T,{canPickMany:!1,placeHolder:re.l10n.t("Choose which repository to clone")});if(W===void 0)return;D=W}let b=D.label,R=(B=(N=D.repository.state.HEAD)==null?void 0:N.upstream)==null?void 0:B.name;return Cg(t,s,c.log,c.onDidInput,{url:b,branch:R},ci)})),t.subscriptions.push(U.commands.registerCommand(u5,async()=>{var R;let E=U.workspace.workspaceFolders;if(!E)return;let _=E[0].uri;if(E.length>1){let L=await U.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:re.l10n.t("Choose a repository to clone in a Container Volume")});_=L==null?void 0:L[0]}let T,D;try{let L=await U.commands.executeCommand("remoteHub.api.getRepositoryContext",_);if(!L)throw new Error("Unable to get active repository context.");T=L.name,D=L.ref}catch{let B=await(await((R=U.extensions.getExtension("ms-vscode.remote-repositories"))==null?void 0:R.activate())).getMetadata(_);if(!B)throw new Error("Unable to get active repository context.");T=`${B.repo.owner}/${B.repo.name}`,D=(await B.getRevision()).name}let b=`https://github.com/${T}`;return D&&(b=`${b}/tree/${D}`),Cg(t,s,c.log,c.onDidInput,b,ci)})),t.subscriptions.push(U.commands.registerCommand(d5,async E=>jge(t,s,c.log,c.onDidInput,E,ci))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolume",async(E,_,T)=>P9(t,E,_,T,s,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async E=>Vge(t,E,s,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async E=>Cg(t,s,c.log,c.onDidInput,void 0,E))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInContainer",()=>p(!1))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>p(!0))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>p("rebuildNoCache")));let p=async E=>{if(!await U.workspace.requestWorkspaceTrust({message:Zy})||!await to(t,c.log,c.onDidInput,s,"reopenInContainer"))return;let T=await Ze(t,c.log),D=U.workspace.workspaceFile;if(D&&D.scheme==="untitled"){await $I();return}let b=U.workspace.workspaceFolders;if(!D&&b&&b.length){let L=b.length>1?await U.window.showWorkspaceFolderPick({placeHolder:re.l10n.t("Pick a folder to reopen in a container.")}):b[0];L&&(D=L.uri)}let R=UF(D);if(R){await pC(t,R.repositoryPath,R.volumeName,R.folder,T);return}if(D){let L;if(T.cliHost.type==="wsl"&&D.scheme==="file"){let B=_e(D,process.platform),W=Of(B)||KI()||await Av(T.output)||(()=>{throw new Error("No default WSL distro found.")})();L=await Ll(W,B,T.output)}else L=_e(D,T.cliHost.platform);let N=It(T.cliHost.path,L);await mC(t,N,T,c.onDidInput,s,E,{forceReuseWindow:!0})}else return IO(t,!0,s,E,c.log,c.onDidInput)};t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenLocally",async()=>{let E=U.workspace.workspaceFolders,_=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(_&&_.scheme==="vscode-remote"){let T=lo(_.authority);if(T&&un(T)){let D=U.Uri.file(T.hostPath),b={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",D,b)}else U.window.showInformationMessage(re.l10n.t("'Reopen Locally' not possible in current context."))}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let E=U.workspace.workspaceFolders,_=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(_&&_.scheme==="vscode-remote"){let T=lo(_.authority);if(T&&un(T)&&xr(T.hostPath)){let D=U.Uri.parse((await Sp(T.hostPath,c.log)).toString()),b={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",D,b)}else U.window.showInformationMessage(re.l10n.t("'Reopen in WSL' not possible in current context."))}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let E=U.workspace.workspaceFolders,_=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(_&&_.scheme==="vscode-remote"){let T=lo(_.authority),D=T==null?void 0:T.settings;if(T&&un(T)&&(Fl(T.parentAuthority)||Al(D))){let b=Al(D)?Fv(D.host,T.hostPath):nu(T.parentAuthority,T.hostPath),R={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",U.Uri.parse(b.toString()),R)}else U.window.showInformationMessage(re.l10n.t("'Reopen in SSH' not possible in current context."))}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInTunnel",async()=>{let E=U.workspace.workspaceFolders,_=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(_&&_.scheme==="vscode-remote"){let T=lo(_.authority);if(T&&un(T)&&hc(T.parentAuthority)){let D=U.Uri.parse(nu(T.parentAuthority,T.hostPath).toString()),b={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",D,b)}else U.window.showInformationMessage(re.l10n.t("'Reopen in Tunnel' not possible in current context."))}}));let h=async E=>{var R;if(!await Os(t))return;let _,T=typeof E=="string"?E:(R=E==null?void 0:E.containerDesc)==null?void 0:R.Id;if(T){if(!await to(t,c.log,c.onDidInput,s,"attachToContainer"))return;let L=await Ze(t,c.log);_=await ii(L,T)}else{let L=to(t,c.log,c.onDidInput,s,"attachToContainer");if(_=await Zge(t,c.log,L),!_)return}let D=await Ze(t,c.log),b=t.extensionMode===U.ExtensionMode.Development;fC(D,_,t,!b)};t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainer",h)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",h)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainer",async E=>xO(t,await Ze(t,c.log),E))),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async E=>xO(t,await Ze(t,c.log),E))),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToAppleContainer",async()=>o9(t,await Ze(t,c.log))));let g=async E=>{var T;if(!await to(t,c.log,c.onDidInput,s,"checkoutPRInVolume"))return;let _=(T=E==null?void 0:E.pullRequestModel)==null?void 0:T.html_url;Cg(t,s,c.log,c.onDidInput,_,ci)};t.subscriptions.push(U.commands.registerCommand("remote-containers.checkoutPRInVolume",g)),t.subscriptions.push(U.commands.registerCommand("remote-containers.switchContainer",async()=>{var D;if(Qn.results.size){let b=[...Qn.results.values()].filter(L=>L.dockerParams)[0],R=(D=b==null?void 0:b.dockerParams)==null?void 0:D.parsedAuthority;if(R&&co(R)&&!R.inspectVolume){let L=io("container","/",{},b.properties.remoteExec,b.properties.remotePtyExec,()=>{throw new Error("not implemented")},void 0,b.params.output),N=await Na().then(q=>q.map(ce=>({type:"workspace",uri:ce,fileHost:L}))),B=await Yu(N,b.configWorkspaceURI);if(!B||B==="cancelled")return;let W=Ce.from({scheme:Ke.scheme,path:B.path}),z=U.Uri.parse(Wi(R.parentAuthority,R.repositoryPath,R.volumeName,R.folder,!1,R.settings,R.cloneInfo,W).toString()),V=R.volumeName;V===ci&&(V=re.l10n.t("a unique volume")),await Ju({uri:z,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",R.folder,V)}),await U.commands.executeCommand("vscode.openFolder",z);return}}let E=await Ze(t,c.log),_=It(E.cliHost.path,E.cliHost.cwd);if((await D9(E.cliHost,_,await Zc(t,E.cliHost))).length<2){await U.window.showInformationMessage(re.l10n.t("No other Dev Container configurations found in folder. Did you mean to open another folder in a container?"),{modal:!0},re.l10n.t("Open Folder in Container..."))&&U.commands.executeCommand("remote-containers.openFolder");return}await mC(t,_,E,c.onDidInput,s,!1)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let E=Gu();if(E){let _=await Ze(t,c.log);await pC(t,E.repositoryPath,E.volumeName,E.folder,_,!0);return}return await Promise.all(Qn.onRemoveOnShutdownChangedEmitter.fire(!0)),U.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let E=Gu();if(E){let _=await Ze(t,c.log);await pC(t,E.repositoryPath,E.volumeName,E.folder,_,"rebuildNoCache");return}return await Promise.all(Qn.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),U.commands.executeCommand("workbench.action.reloadWindow")}));let v=p5(),C=((k=(U.workspace.workspaceFolders||[])[0])==null?void 0:k.uri)||Ce.file(process.cwd()),w=v.then(E=>La(E,C)),y,S=()=>y||(y=Ze(t,c.log).then(E=>E.cliHost)),I,x=()=>I||(I=(async()=>{let E=await w,_=await S(),T=U.env.remoteName==="dev-container"&&U.env.remoteAuthority&&lo(U.env.remoteAuthority),b=!T||un(T)?await Zc(t,_):void 0;return c.log.write("Initializing configuration support..."),u8(t,{fileHost:E,userDataFolderForConfigurations:b,findDevContainerFiles:async R=>ZI(_,It(E.path,_e(C,E.platform)),b,R),telemetry:s,output:c.log,openConfigurationCommandId:dm,showLogCommandId:it})})());async function A(){var E;return(E=U.workspace.workspaceFolders)!=null&&E.length?!0:(await U.window.showInformationMessage(re.l10n.t("Open a folder to create the configuration files in first."),{modal:!0},re.l10n.t("Open Folder"))&&await U.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder"),!1)}t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{await A()&&await b0(t,await S(),await x(),s,c.log,c.onDidInput)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFileWithCopilot",async()=>{await A()&&await b0(t,await S(),await x(),s,c.log,c.onDidInput,{picker:"copilot"})})),t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainer",async()=>{if(!await to(t,c.log,c.onDidInput,s,"createDevContainer"))return;let E=await Ze(t,c.log);await u9(t,E,s)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openDevContainerFile",async(E,_)=>{let T,D=await Ze(t,c.log),b;if(typeof E=="string"?T=[{type:"unknown",uri:Ce.file(E),fileHost:La(process.platform,Ce.file(ut.dirname(E)))}]:(b=await ZI(D.cliHost,It(D.cliHost.path,D.cliHost.cwd),await Zc(t,D.cliHost)),T=(await Promise.all(b.map(R=>R.uri.scheme==="file"||R.uri.scheme==="vscode-remote"?R:D.cliHost.toCommonURI(_e(R.uri,D.cliHost.platform)).then(L=>L&&{type:R.type,uri:L})))).filter(R=>!!R)),T.length){let R=await Yu(T);if(!R||R==="cancelled")return;let L=Gu();if(L){let N=S5(L.folder);for(let B of N){try{await U.workspace.openTextDocument(U.Uri.parse(B.toString()))}catch{continue}await U.commands.executeCommand("vscode.open",U.Uri.parse(B.toString()),_);return}return}if(R){if(R.scheme==="file"&&await Cr(R.fsPath))return await U.commands.executeCommand("vscode.open",U.Uri.parse(R.toString()),_);if(R.scheme==="file"&&Qn.results.size)return await Mi(ms,R,[],fc),await U.commands.executeCommand("vscode.open",U.Uri.parse(R.toString()),_);if(R.scheme==="vscode-remote")return await U.commands.executeCommand("vscode.open",U.Uri.parse(R.toString()),_);if(E===void 0)return await b0(t,await S(),await x(),s,c.log,c.onDidInput)}}else if(E===void 0&&!(b!=null&&b.length))return await b0(t,await S(),await x(),s,c.log,c.onDidInput)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:E,dockerParams:_}=[...Qn.results.values()][0];if(!E||!_)return U.window.showInformationMessage(re.l10n.t("Named configurations are only available for Docker containers."),{modal:!0});let T=await ii(_,E),D=c0(t.globalStoragePath,T),b=U.Uri.file(D);return await Cr(D)?U.commands.executeCommand("vscode.open",b):(await Mi(ms,b,[],fc),U.commands.executeCommand("vscode.open",b))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let E=[...(await C8(t.globalStoragePath)).map(T=>({label:T.name,...T})).sort((T,D)=>T.label.localeCompare(D.label)),...(await S8(t.globalStoragePath)).map(T=>({label:T.image,...T})).sort((T,D)=>T.label.localeCompare(D.label))],_=await U.window.showQuickPick(E.length?E:[{label:re.l10n.t("No configuration found.")}],{placeHolder:re.l10n.t("Choose a configuration file")});if(_&&"uri"in _)return U.commands.executeCommand("vscode.open",U.Uri.parse(_.uri.toString()))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.settings",async()=>U.commands.executeCommand("workbench.action.openSettings",`@ext:${y9()}`))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getHelp",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getStarted",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reportIssue",async()=>{let E={extensionId:y9(),issueBody:re.l10n.t("For bug reports please include the complete log output. (In the VS Code window: `F1` > `Dev Containers: Show Container Log`.)")};return U.commands.executeCommand("vscode.openIssueReporter",E)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.provideFeedback",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),w.then(E=>{t.subscriptions.push(U.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new h0(E)))}),t.subscriptions.push(U.commands.registerCommand("remote-containers.trySample",()=>ive(t,c,s))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLogFile",()=>sve(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLastLogFile",()=>ave(t,"remoteContainers",c.logFilePath))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>tve(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Lge(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDocker",()=>f0(c.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDockerInWSL",()=>p0(t,c.log,c.onDidInput,s))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cleanUpDevContainers",async()=>z8(await Ze(t,c.log)))),t9(t,Qn.results,s,c.log),a9(t,i).catch(E=>{c.log.write(`Error ensuring user CLI is configured: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)}),t.subscriptions.push(U.commands.registerCommand("remote-containers.installUserCLI",()=>c9(t,i))),t.subscriptions.push(U.commands.registerCommand("remote-containers.testConnection",async()=>{await U.commands.executeCommand(it);let E=[...Qn.results.values()][0];if(!E){c.log.write("Not connected.");return}let{params:_,properties:T}=E;await sx(_,T)})),(async()=>{QI()&&await m;let E=U.env.remoteName,_=!E||["dev-container","attached-container","wsl","ssh-remote","tunnel","exec","k8s-container"].indexOf(E)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[],T=await x();t.subscriptions.push(U.languages.registerCompletionItemProvider([..._,{pattern:ut.join(l0(t.globalStoragePath),"*.json")},{pattern:ut.join(a0(t.globalStoragePath),"*.json")}],T.createCompletionItemProvider())),E!=="codespaces"&&(T.startCodeLensProvider(),T.startHoverProvider(),T.startDiagnosticsCollection()),await E5(t)||await b9(t,await S(),s,c.log,c.onDidInput)})().catch(console.error),Age(t),t.subscriptions.push(U.commands.registerCommand("remote-containers.addExtensionToConfig",async E=>(await x()).addExtensionToConfiguration(E)),U.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>(await x()).configureContainerFeatures()),U.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",async E=>(await x()).addPortLabelToConfiguration(E))),Gu()&&U.commands.executeCommand("setContext","isRecoveryContainer",!0),await h5()}var w9="showRecoveryContainerNotification",_9="showReopenInContainerNotificationReset",Nge=5e3;function Lge(t){return t.globalState.update(_9,Date.now())}async function Age(t){setTimeout(async()=>{let e=t.globalState.get(_9);if(NO(t.globalState.get(w9),e))return;if(Gu()){let r=re.l10n.t("This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry."),o=re.l10n.t("Reopen in Container"),i=re.l10n.t("Don't Show Again"),s=await U.window.showInformationMessage(r,o,i);s===o?U.commands.executeCommand("remote-containers.reopenInContainer"):s===i&&await t.globalState.update(w9,Date.now())}},Nge)}async function Fge(){await Promise.all([...Qn.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(n){console.error(n)}}))))}function y9(){let{name:t,publisher:e}=v9();return`${e}.${t}`}async function IO(t,e,n,r,o,i){var m;if(!await to(t,o,i,n,"openInContainer"))return;let s=await Ze(t,o),a,c=U.workspace.workspaceFolders;if(c&&c[0]){let d=c[0].uri;if(d.scheme==="vscode-remote"){let p=lo(d.authority);if(p&&un(p)){let h=It(s.cliHost.path,p.hostPath);a=U.Uri.file(h.rootFolderPath)}else/^(wsl|ssh-remote|tunnel)\+/.test(d.authority)&&(a=d)}else d.scheme==="file"&&(a=d)}a||((m=U.env.remoteName)!=null&&m.match(/^(wsl|ssh-remote|tunnel)$/)?a=U.Uri.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:await s.cliHost.homedir()}):a=U.Uri.file(S9.homedir()));let l=e?{defaultUri:a,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:re.l10n.t("Open")}:{defaultUri:a,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{[re.l10n.t("Code Workspace")]:["code-workspace"]},openLabel:re.l10n.t("Open")},u=await U.window.showOpenDialog(l),f=u&&u[0];if(f){let d=e?f:f.with({path:ut.posix.dirname(f.path)}),p=await Ze(t,s.output,d,$F()==="always"),h;f.scheme==="file"&&p.cliHost.type==="wsl"?h=e?p.cliHost.cwd:p.cliHost.path.join(p.cliHost.cwd,ut.posix.basename(f.path)):h=_e(f,p.cliHost.platform);let g=It(p.cliHost.path,h);await mC(t,g,p,i,n,r)}}async function mC(t,e,n,r,o,i,s){try{await Oge(t,e,n,r,o,i,s)}catch(a){await Oa(a,"ui",o,!1,n.output)}}async function Oge(t,e,n,r,o,i,s){var A;let{cliHost:a}=n;if(xr(e.rootFolderPath)){if(!await to(t,n.output,r,o,"openInContainer",e.rootFolderPath))return;n=await Ze(t,n.output,e.rootFolderPath),a=n.cliHost,e=It(a.path,e.isWorkspaceFile?a.path.join(a.cwd,ut.basename(e.workspaceOrFolderPath)):a.cwd)}let c=await SS(a,e);if(c){let F=re.l10n.t("Continue");if(await U.window.showInformationMessage(re.l10n.t("The workspace could fail to open in a container: {0}",c),{modal:!0},F)!==F)return}let l=await Mge(t,a,e);if(l==="cancelled")return;let u=l&&(l.scheme==="file"?await at(l.fsPath):await a.readFile(_e(l,a.platform))).toString(),f=!!(u&&((A=$e(u))!=null&&A.initializeCommand)),{dockerCLI:m,dockerComposePath:d}=n,p={cliHost:a,dockerPath:m,dockerComposePath:d,appRoot:U.env.appRoot,extensionPath:t.extensionPath,package:await cr(t.extensionPath),output:n.output},h=l&&await(f?rg(p,e.rootFolderPath,l):await VF(p,e.rootFolderPath,l)||rg(p,e.rootFolderPath,l));if(h==="canceled")return;if(!h&&l){let F=_e(l,a.platform),k=await a.toCommonURI(F);k&&U.window.showTextDocument(U.Uri.parse(k.toString()));let E=re.l10n.t("Show Log");await U.window.showErrorMessage(re.l10n.t("Failed to read Dev Container configuration '{0}' file.",a.path.relative(e.configFolderPath,F)),{modal:!0},E)===E&&U.commands.executeCommand(it);return}let g=h&&!Rx(h.configuration);if(!h||g){let F=await o0({fileHost:a,userDataFolderForConfigurations:await Zc(t,a),telemetry:o,output:n.output,openConfigurationCommandId:dm,showLogCommandId:it},e,void 0,h==null?void 0:h.configuration.configFilePath);if(!F||(l=Ce.file(F).with({scheme:Ke.scheme}),h=await VF(p,e.rootFolderPath,l),!h||h==="canceled"))return}if(!await b5(t,n,h.configuration)||!await Bge(n,"mergedConfiguration"in h?h.mergedConfiguration:h.configuration))return;let v=h.configuration,C=h.workspace.workspaceFolder,w=a.type==="wsl"?(await a.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,y=(l==null?void 0:l.scheme)===Ke.scheme&&a.type==="wsl"&&!xr(w)&&await a.toCommonURI(_e(l,a.platform))||l;if(Oo(v)){let F=Yf(a,v);if(!v.initializeCommand&&!await ur(a).readDocument(F))return hC(re.l10n.t('"{0}" does not exist.',F.fsPath),a,v.configFilePath);if(v.workspaceFolder&&!ut.posix.isAbsolute(v.workspaceFolder))return hC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),a,v.configFilePath)}else if(!("image"in v))if("dockerComposeFile"in v){let F=a.type==="wsl"?e.isWorkspaceFile?ut.dirname(w):w:e.rootFolderPath;if(!await W8(n)||!await Qge(F,y,n,v))return}else{let F=v.configFilePath;return hC(re.l10n.t('Configuration "{0}" not valid.',a.path.relative(e.rootFolderPath,_e(F,a.platform))),a,F)}e.isWorkspaceFile&&(C=ut.posix.join(C,a.path.basename(e.workspaceOrFolderPath)));let S=dr(n.env),I=(a.type==="local"||a.type==="wsl")&&Al(S),x=U.Uri.parse(cw(U.env.remoteAuthority,w,C,S,I,y));await Ju({uri:x,type:e.isWorkspaceFile?"workspace":"folder",label:re.l10n.t("{0} [Dev Container]",`${jy(a.platform,e.workspaceOrFolderPath,await a.homedir())}${Up(U.env.remoteAuthority,S)}`)}),await WF(t,i?x.authority:!1),await Jy(t,i==="rebuildNoCache"?x.authority:!1),await U.commands.executeCommand("vscode.openFolder",x,s||{})}async function D9(t,e,n){let r=await Hge(t,e.rootFolderPath),i=(r==null?void 0:r.scheme)==="file"&&process.platform==="win32"&&xr(r.fsPath)&&!U.workspace.getConfiguration("security").get("allowedUNCHosts",[]).includes(r.authority)?$ge(t,e):Uge(r,t,e);return(await Promise.all([i.then(s=>s.map(a=>({type:"workspace",uri:a,fileHost:t}))),jF(t,e).then(s=>s.map(a=>({type:"repositoryConfig",uri:a,fileHost:La(process.platform,a.with({path:ut.posix.dirname(a.path)}))}))),n?MI(t,e,n).then(s=>s.map(a=>({type:"userData",uri:a,fileHost:t}))):[]])).flat()}async function Uge(t,e,n){return Promise.all((await Na(t)).map(async o=>{if(!t){let i=ut.posix.relative(U.workspace.workspaceFolders[0].uri.path,o.path),s=e.platform==="win32"?"/"+n.rootFolderPath.replace(/\\/g,"/"):n.rootFolderPath;return Ce.from({scheme:Ke.scheme,path:ut.posix.join(s,i)})}if(o.scheme===ao.scheme)return Ce.from({scheme:Ke.scheme,path:o.path});if(e.type==="wsl"&&o.scheme==="file"){let i=ut.relative(t.fsPath,o.fsPath),s=ut.posix.resolve(n.rootFolderPath,i.replace(/\\/g,"/"));return Ce.from({scheme:Ke.scheme,path:s})}return o}))}async function $ge(t,e){let n=t.path.join(e.rootFolderPath,".devcontainer"),r=[...Vl(t.path,e.rootFolderPath),...(await t.readDirWithTypes(n)).filter(([,o])=>(o&2)!==0).map(([o])=>t.path.join(n,o,"devcontainer.json"))];return(await Promise.all(r.map(o=>t.isFile(o).then(i=>i?Ce.from({scheme:Ke.scheme,path:o}):void 0)))).filter(Boolean)}async function Mge(t,e,n){let r=await D9(e,n,await Zc(t,e)),o;if(U.env.remoteAuthority){let i=lo(U.env.remoteAuthority);i&&un(i)&&(o=i.configFile)}return Yu(r,o)}function Hge(t,e){switch(t.type){case"local":return Ce.file(e);case"wsl":return U.env.remoteName==="wsl"?Ce.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:e}):t.toCommonURI(e);case"remote":return U.env.remoteName==="ssh-remote"||U.env.remoteName==="tunnel"?Rn(t.platform,Ce.from({scheme:"vscode-remote",authority:U.env.remoteAuthority}),e):void 0;default:return}}async function Bge(t,{hostRequirements:e}){var r,o;let n=e&&Wge(e);if(n&&(n.cpus||n.memory||n.gpu&&n.gpu!=="optional")){let i=await et(t,"info","--format","{{json .}}"),s=JSON.parse(i.stdout.toString()),a=s.NCPU&&n.cpus&&n.cpus>s.NCPU,c=s.MemTotal&&n.memory&&n.memory>s.MemTotal,l=((o=(r=s.Runtimes)==null?void 0:r.nvidia)==null?void 0:o.path)==="nvidia-container-runtime";if(a||c){let u=[];s.NCPU&&u.push(re.l10n.t("CPUs {0}",s.NCPU.toLocaleString())),s.MemTotal&&u.push(re.l10n.t("RAM {0}",PO(s.MemTotal))),l&&u.push(re.l10n.t("GPU"));let f=[];n.cpus&&f.push(re.l10n.t("CPUs {0}",n.cpus.toLocaleString())),n.memory&&f.push(re.l10n.t("RAM {0}",PO(n.memory))),n.storage&&f.push(re.l10n.t("disk {0}",PO(n.storage))),n.gpu&&n.gpu!=="optional"&&f.push(re.l10n.t("GPU"));let m=re.l10n.t(`Docker daemon: {0}
devcontainer.json: {1}`,u.join(", "),f.join(", "));if(!await U.window.showInformationMessage(re.l10n.t("Not all host requirements in devcontainer.json are met by the Docker daemon."),{modal:!0,detail:m},re.l10n.t("Continue")))return!1}}return!0}function Wge(t){return{cpus:t.cpus||0,memory:C9(t.memory||"0"),storage:C9(t.storage||"0"),gpu:t.gpu}}function C9(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,n,r]=e,o=parseInt(n,10),i=r&&{t:2**40,g:2**30,m:2**20,k:2**10}[r[0]]||1;return o*i}return 0}function PO(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),n=t/Math.pow(2,10*e),r=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(n),1)))),1),o=Math.round(n*r)/r,i=[" bytes","kb","mb","gb","tb"][e];return`${o.toLocaleString()}${i}`}async function Cg(t,e,n,r,o,i){if(!await Qy(t))return;let s=null;if(!await to(t,n,r,e,"cloneInVolume"))return;let a=await Ze(t,n);if(typeof o=="string")s=o;else{let c;if(o!==void 0?c=o:c=await U.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:l=>re.l10n.t("Clone a repository from {0} in a Container Volume",l.name),urlLabel:re.l10n.t("Clone git repository from URL"),branch:!0}),c){s=(typeof c=="string"?c:c.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let l=ta(s);if(await oR(a.cliHost,l.repositoryUrl,a.cliHost.type==="local"?await jI(a.output):{},a.output)===!1){U.commands.executeCommand(it),await U.window.showInformationMessage(re.l10n.t("Cannot access the repository '{0}'.",l.repositoryUrl),{modal:!0});return}typeof c!="string"&&c.branch&&(s=`${s}/tree/${c.branch}`)}}s&&await I9(t,a,s,i)}async function I9(t,e,n,r){if(r||(r=await qge(e)),r){let o=AO(n);r!==ci&&(o=await zge(n)),o&&await pC(t,n,r,o,e)}}async function jge(t,e,n,r,o,i){if(!await Qy(t))return;let s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await to(t,n,r,e,"checkoutPRInVolume"))return;let a=await Ze(t,n),c={placeHolder:re.l10n.t("e.g. https://github.com/microsoft/vscode/pull/123"),prompt:re.l10n.t("Enter a GitHub pull request url"),validateInput:f=>s.test(f)?void 0:re.l10n.t("Invalid pull request url")},l;if(o?l=o:l=await U.window.showInputBox(c),!l)return;let u=ta(l);if(u.repository==="unknown"||!u.pullRequestId){await U.window.showInformationMessage(re.l10n.t("Invalid pull request URL '{0}'.",l),{modal:!0});return}await I9(t,a,l,i)}async function P9(t,e,n,r,o,i,s){if(!await to(t,i,s,o,"inspectVolume"))return;let a=await Ze(t,i);e||(e=await Yge(a)),e&&(n&&r?await Xge(e,n,r,a):await Jge(e,a))}async function Vge(t,e,n,r,o){await to(t,r,o,n,"inspectVolume")&&await P9(t,e==null?void 0:e.volumeName,void 0,void 0,n,r,o)}var gC=class{get detail(){return""}},TO=class extends gC{get label(){return re.l10n.t("$(plus) Create a new volume...")}get description(){return""}get volumeName(){return""}get detail(){return re.l10n.t("Use this volume to store several cloned repositories.")}get alwaysShow(){return!0}},RO=class extends gC{volume;constructor(e){super(),this.volume=e}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}},kO=class extends gC{volume;constructor(e){super(),this.volume=e}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}};async function Yge(t){let e=await Uo(t),r=(await qf(t,e)).map(a=>new kO(a)),o=re.l10n.t("Select the volume to inspect with Visual Studio Code"),i=U.window.createQuickPick();i.items=r,i.placeholder=o,i.show();let s=await new Promise(a=>{i.onDidAccept(()=>a(i.activeItems[0])),i.onDidHide(()=>a(void 0))});return i.hide(),s?s.volume.Name:null}async function qge(t){let e=await Uo(t,["vsch.local.repository.unique=false"]),r=(await qf(t,e)).map(u=>new RO(u)),o=new TO,i=[o,...r],s=re.l10n.t("Select the volume for the cloned repository"),a=U.window.createQuickPick();a.items=i,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===o?l=await Gge(t):l=c.volumeName,l}async function Gge(t){let e="",n="vsc-remote-containers",r=await Uo(t);r.find(s=>s===n)||(e=n);let o={prompt:re.l10n.t("Enter the volume name."),value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?re.l10n.t("Volume names should be at least two characters and the first character must be alphanumeric."):re.l10n.t("Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric.")},i=await U.window.showInputBox(o);return i?r.find(s=>s===i)?(await U.window.showErrorMessage(re.l10n.t("Volume already exists"),{modal:!0}),null):i:null}async function zge(t){let e={prompt:re.l10n.t("Enter the target folder name."),value:AO(t),ignoreFocusOut:!0},n=await U.window.showInputBox(e);return n||null}function AO(t){return ai(t).repositoryName}async function Kge(){return(await U.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function pC(t,e,n,r,o,i=!1){let s=dr(o.env),a=Kx(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof sw){U.window.showErrorMessage(u.description);return}let f=await Kge();try{c=await a.parseUrl(f)}catch{U.window.showErrorMessage(re.l10n.t("Cannot access '{0}'.",e),{modal:!0});return}}let l=U.Uri.parse(Wi(o.cliHost.authority,e,n,r,!1,s,c));n===ci&&(n=re.l10n.t("a unique volume")),await Ju({uri:l,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",r,n)}),await WF(t,i?l.authority:!1),await Jy(t,i==="rebuildNoCache"?l.authority:!1),await U.commands.executeCommand("vscode.openFolder",l)}async function Jge(t,e){let n=dr(e.env),r=U.Uri.parse(Wi(e.cliHost.authority,void 0,t,void 0,!0,n,void 0));await Ju({uri:r,type:"folder",label:re.l10n.t("Volume {0} [Dev Container]",t)}),await U.commands.executeCommand("vscode.openFolder",r)}async function Xge(t,e,n,r){let o=dr(r.env),i=U.Uri.parse(Wi(r.cliHost.authority,e,t,n,!0,o,void 0));await Ju({uri:i,type:"folder",label:re.l10n.t("{0} in {1} [Inspect Dev Container]",n,t)}),await U.commands.executeCommand("vscode.openFolder",i)}async function fC(t,e,n,r,o){var c;if(!await Os(n))return;let i,s=t.cliHost;if(s.type==="wsl"){let l=await s.toCommonURI(s.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let a=H3(t.cliHost.authority,e.Name,dr(t.env),i);if(o=o||((c=await w8(n.globalStoragePath,e))==null?void 0:c.workspaceFolder),o){let l=U.Uri.parse(`vscode-remote://${a}${o}`),u={};r?u.forceNewWindow=!0:u.forceReuseWindow=!0,await U.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:a};r||(l.reuseWindow=!0),await U.commands.executeCommand("vscode.newWindow",l)}}async function Zge(t,e,n){let r=!0,o=(async()=>{if(!await n)throw new Error("cancel");r=!1;let i=await Ze(t,e),s=await Gl(i),a=await hs(i,s),c=[];if(a.forEach(l=>{l.State.Status==="running"&&c.push({label:l.Name,description:`${l.Config.Image} ${l.Id}`,containerInfo:l})}),c.length===0)throw U.window.showErrorMessage(re.l10n.t("There are no running containers to attach to."),{modal:!0}),new Error("cancel");return c.sort((l,u)=>l.label.localeCompare(u.label))})();try{let i={placeHolder:re.l10n.t("Select the container to attach VS Code")},s=await U.window.showQuickPick(o,i);if(!s&&r){if(!await n)throw new Error("cancel");s=await U.window.showQuickPick(o,i)}return s?s.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function Qge(t,e,n,r){if(!r.workspaceFolder)return hC(re.l10n.t("Workspace folder not specified in devcontainer.json."),n.cliHost,r.configFilePath),!1;if(!ut.posix.isAbsolute(r.workspaceFolder))return hC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),n.cliHost,r.configFilePath),!1;if(r.initializeCommand)return!0;let o=await Yl(n.cliHost,r,n.cliHost.env,n.cliHost.cwd),i=bk(t,{buildCLIHost:n.cliHost,configFile:e});return!(await Kl(n,i)&&!await eve(n.cliHost,o))}async function eve(t,e){let n=[];for(let r=0;r<e.length;r++)await t.isFile(e[r])||n.push(e[r]);return n.length>0?(U.window.showErrorMessage(re.l10n.t("The following referenced docker compose files do not exist: {0}",n.join(", ")),{modal:!0}),!1):!0}async function hC(t,e,n){if(await U.window.showErrorMessage(t,{modal:!0},re.l10n.t("Open devcontainer.json"))){let o=_e(n,e.platform),i=await e.toCommonURI(o);i&&U.window.showTextDocument(U.Uri.parse(i.toString()))}}async function b0(t,e,n,r,o,i,s){await n.createConfiguration(s)&&await b9(t,e,r,o,i)}async function b9(t,e,n,r,o){if([void 0,"wsl","ssh-remote","tunnel"].indexOf(U.env.remoteName)===-1)return;let i=U.workspace.workspaceFile,s=U.workspace.workspaceFolders,a=i||s&&s.length&&s[0].uri||void 0;if(a&&a.scheme!=="vscode-vfs"){let c;if(e.type==="wsl"&&a.scheme==="file"){let m=_e(a,process.platform),d=Of(m)||KI()||await Av(r)||(()=>{throw new Error("No default WSL distro found.")})();c=await Ll(d,m,r)}else c=_e(a,e.platform);let l=It(e.path,c),f=(await ZI(e,l,await Zc(t,e))).sort((m,d)=>{if(m.type!==d.type)return m.type.localeCompare(d.type);let p=ut.posix.dirname(m.uri.path),h=ut.posix.dirname(d.uri.path);return p.localeCompare(h)})[0];f&&(await Ky(e,r)).canConnectToContainer&&await nve(t,f,l,e,n,r,o)}}var T0="showReopenInContainerNotification",T9="showReopenInContainerNotificationReset";function tve(t){return t.globalState.update(T9,Date.now())}async function nve(t,e,n,r,o,i,s){let a=t.globalState.get(T9);if(NO(t.globalState.get(T0),a)||NO(t.workspaceState.get(T0),a))return;let c=p3(r,n,e.uri),l,u="";if(r.platform!=="linux"&&U.env.remoteName!=="wsl"&&!(r.platform==="win32"&&xr(n.rootFolderPath))&&U.env.remoteName!=="ssh-remote"){let w=await Ze(t,i);if(l=await cj(w.cliHost,n,w.output),l&&c){let y=await _v(w.cliHost,n.rootFolderPath,w.output);y&&await uj(w.cliHost,n,w.cliHost.path.relative(y,_e(e.uri,w.cliHost.platform)),w.output)||(l=void 0)}if(l){let{cliHost:y,dockerCLI:S,dockerComposePath:I}=w,x={cliHost:y,dockerPath:S,dockerComposePath:I,appRoot:U.env.appRoot,extensionPath:t.extensionPath,package:await cr(t.extensionPath),output:i},A=await rg(x,n.rootFolderPath,e.uri);(!A||!Oo(A.configuration)&&!("image"in A.configuration))&&(l=void 0)}l&&(u=re.l10n.t(" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo)."))}U.env.remoteName==="wsl"&&n.rootFolderPath.match(/^\/mnt\/[a-z]\//)&&(u=re.l10n.t(" This workspace is on the Windows file system (/mnt/). For best performance, we recommend moving the workspace to the Linux file system (~/home)."));let f;c?n.isWorkspaceFile?f=re.l10n.t("Workspace contains a Dev Container configuration file."):f=re.l10n.t("Folder contains a Dev Container configuration file."):f=re.l10n.t("There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.");let m=re.l10n.t("Reopen in Container"),d=re.l10n.t("Clone in Volume"),p=re.l10n.t("Don't Show Again..."),h=n.isWorkspaceFile?re.l10n.t("{0} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u):re.l10n.t("{0} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u),g=l?[m,d,p]:[m,p];rve(o,e.type);let v=await U.window.showInformationMessage(h,...g);if(ove(o,v===m?"reopen":v===d?"openRepository":v===p?"dontShowAgain":"cancel",e.type),v===m){if(!await U.workspace.requestWorkspaceTrust({message:Zy})||!await to(t,i,s,o,"reopenInContainer"))return;let y=await Ze(t,i);if(y.cliHost.type==="wsl"&&r.platform==="win32"){let{cwd:S}=await FR(n.workspaceOrFolderPath,ts(),i);n=It(y.cliHost.path,S)}await mC(t,n,y,s,o,!1,{forceReuseWindow:!0})}else if(v===d){let w=await Ze(t,i),y=await lj(w.cliHost,n,w.output),S=re.l10n.t("OK"),I=re.l10n.t("Cancel");(!y||S===await U.window.showInformationMessage(re.l10n.t("Local changes not pushed to the Git remote will not be available in the Docker volume."),S,I))&&await U.window.withProgress({location:U.ProgressLocation.Notification,title:re.l10n.t("Clone in Volume")},async(x,A)=>{x.report({message:re.l10n.t("Follow the prompts at the top of the window.")}),await U.commands.executeCommand(WI,l)})}else if(v===p){let w=n.isWorkspaceFile?re.l10n.t("Any Workspace"):re.l10n.t("Any Folder"),y=n.isWorkspaceFile?re.l10n.t("Current Workspace"):re.l10n.t("Current Folder"),S=n.isWorkspaceFile?re.l10n.t("Don't show again for the current workspace or for any workspace?"):re.l10n.t("Don't show again for the current folder or for any folder?"),I=await U.window.showInformationMessage(S,w,y);I===w?await t.globalState.update(T0,Date.now()):I===y&&await t.workspaceState.update(T0,Date.now())}}function rve(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function ove(t,e,n){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:n})}function NO(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function ive(t,e,n){if(!await to(t,e.log,e.onDidInput,n,"trySample"))return;let r=await Ze(t,e.log),o=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET",detail:"https://github.com/Microsoft/vscode-remote-try-dotnet"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],i={placeHolder:re.l10n.t("Select a sample repository to clone in a container volume")},s=await U.window.showQuickPick(o,i);s&&s.detail&&await pC(t,s.detail,ci,AO(s.detail),r)}async function sve(t){let e=await Promise.all((await R9(t)).map(async r=>{let o=await(0,LO.promisify)(k0.stat)(r.path),i=r.time;return{label:r.prefix,description:`${Eg(i.getFullYear())}-${Eg(i.getMonth()+1)}-${Eg(i.getDate())} ${Eg(i.getHours())}:${Eg(i.getMinutes())}:${Eg(i.getSeconds())} - ${o.size} bytes`,path:r.path}}));e.length||e.push({label:re.l10n.t("No log files found.")});let n=await U.window.showQuickPick(e,{placeHolder:re.l10n.t("Choose a log file")});n&&n.path&&await U.window.showTextDocument(U.Uri.file(n.path))}function Eg(t,e=2){return t.toString().padStart(e,"0")}async function ave(t,e,n){let r=(await R9(t)).find(o=>o.name.startsWith(e)&&o.path!==n);r?await U.window.showTextDocument(U.Uri.file(r.path)):await U.window.showInformationMessage(re.l10n.t("No previous log file found."),{modal:!0})}async function R9(t){let e=[],n=ut.basename(t.logPath),r=ut.dirname(ut.dirname(ut.dirname(t.logPath))),o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/;o.test(ut.basename(r))&&(r=ut.dirname(r));for(let i of(await R0(r)).sort().reverse()){let s=o.exec(i);if(s){let a=ut.join(r,i);for(let c of await R0(a)){let l=ut.join(a,c),u=c.startsWith("window");for(let f of u?await R0(l):[c]){let m=ut.join(u?l:a,f),d=ut.join(m,n);for(let p of(await R0(d)).sort()){let h=ut.join(d,p),g=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(p),v=g?new Date(`${g[1]}-${g[2]}-${g[3]}T${g[4]}:${g[5]}:${g[6]}.${g[7]}Z`):new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}Z`);e.push({name:p,path:h,time:v,prefix:g?p.substr(0,g.index-1):p.substr(0,p.length-4)})}}}}}return e.sort((i,s)=>i.time>s.time?-1:i.time<s.time?1:i.path.localeCompare(s.path)),e}async function R0(t){try{return await(0,LO.promisify)(k0.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! Bundled license information:

@nevware21/ts-utils/dist/es5/mod/ts-utils.js:
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@nevware21/ts-async/dist/es5/mod/ts-async.js:
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=extension.js.map
